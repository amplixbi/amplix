var IRm$={locale:[],r1:function(a,e){var n;if(!IRm$.currentLocale)for(IRm$.currentLocale=IRm$.locale[0],n=0;n<IRm$.locale.length;n++)if(IRm$.locale[n].name==window.useLocale){IRm$.currentLocale=IRm$.locale[n];break}var c=a;if((c=IRm$.currentLocale&&IRm$.currentLocale.data[a]?1==ig$.vmode?a+"*":IRm$.currentLocale.data[a]:(1==ig$.vmode?"x ":"")+a)&&e)if("string"==typeof e&&(e=[e]),1==e.length)c=c.replace("@",e[0]);else for(n=0;n<e.length;n++)c=c.replace("@"+(n+1),e[n]);return c},r2_d:function(a){a&&a.func&&a.func.call(a.scope)},r2:function(l){var a=new IG$._rpc$,e=window.useLocale;IRm$.r3(),a.init(null,{ack:"content",payload:{uid:"/SYS_Config/locale/"+e},mbody:{},mts:"ROOT"},null,function(a){var e,n,c=a;if(c&&c.data){for(n={name:c.name,data:{}},e=0;e<c.data.length;e++)n.data[c.data[e].name]=c.data[e].value;IRm$.locale.push(n)}l&&l.func&&l.func.call(l.scope)},function(){l&&l.func&&l.func.call(l.scope)}),a.send()},r3:function(){var a=new IG$._rpc$;a.init(null,{ack:"collaborate",payload:{cmd:"request_channel",istest:"T"},mbody:{},mts:"ROOT"},null,function(a){$("#robo_wrap").show()},function(){$("#robo_wrap").hide()}),a.showerror=!1,a.send()}};
var dbits,canary=0xdeadbeefcafe,j_lm=15715070==(16777215&canary);function BigInteger(t,i,r){null!=t&&("number"==typeof t?this.fromNumber(t,i,r):null==i&&"string"!=typeof t?this.fromString(t,256):this.fromString(t,i))}function nbi(){return new BigInteger(null)}function am1(t,i,r,o,n,e){for(;0<=--e;){var s=i*this[t++]+r[o]+n;n=Math.floor(s/67108864),r[o++]=67108863&s}return n}function am2(t,i,r,o,n,e){for(var s=32767&i,h=i>>15;0<=--e;){var p=32767&this[t],a=this[t++]>>15,f=h*p+a*s;n=((p=s*p+((32767&f)<<15)+r[o]+(1073741823&n))>>>30)+(f>>>15)+h*a+(n>>>30),r[o++]=1073741823&p}return n}function am3(t,i,r,o,n,e){for(var s=16383&i,h=i>>14;0<=--e;){var p=16383&this[t],a=this[t++]>>14,f=h*p+a*s;n=((p=s*p+((16383&f)<<14)+r[o]+n)>>28)+(f>>14)+h*a,r[o++]=268435455&p}return n}dbits=j_lm&&"Microsoft Internet Explorer"==navigator.appName?(BigInteger.prototype.am=am2,30):j_lm&&"Netscape"!=navigator.appName?(BigInteger.prototype.am=am1,26):(BigInteger.prototype.am=am3,28),BigInteger.prototype.DB=dbits,BigInteger.prototype.DM=(1<<dbits)-1,BigInteger.prototype.DV=1<<dbits;var BI_FP=52;BigInteger.prototype.FV=Math.pow(2,BI_FP),BigInteger.prototype.F1=BI_FP-dbits,BigInteger.prototype.F2=2*dbits-BI_FP;for(var BI_RM="0123456789abcdefghijklmnopqrstuvwxyz",BI_RC=new Array,rr="0".charCodeAt(0),vv=0;vv<=9;++vv)BI_RC[rr++]=vv;for(rr="a".charCodeAt(0),vv=10;vv<36;++vv)BI_RC[rr++]=vv;for(rr="A".charCodeAt(0),vv=10;vv<36;++vv)BI_RC[rr++]=vv;function int2char(t){return BI_RM.charAt(t)}function intAt(t,i){var r=BI_RC[t.charCodeAt(i)];return null==r?-1:r}function bnpCopyTo(t){for(var i=this.t-1;0<=i;--i)t[i]=this[i];t.t=this.t,t.s=this.s}function bnpFromInt(t){this.t=1,this.s=t<0?-1:0,0<t?this[0]=t:t<-1?this[0]=t+DV:this.t=0}function nbv(t){var i=nbi();return i.fromInt(t),i}function bnpFromString(t,i){var r;if(16==i)r=4;else if(8==i)r=3;else if(256==i)r=8;else if(2==i)r=1;else if(32==i)r=5;else{if(4!=i)return void this.fromRadix(t,i);r=2}this.t=0,this.s=0;for(var o=t.length,n=!1,e=0;0<=--o;){var s=8==r?255&t[o]:intAt(t,o);s<0?"-"==t.charAt(o)&&(n=!0):(n=!1,0==e?this[this.t++]=s:e+r>this.DB?(this[this.t-1]|=(s&(1<<this.DB-e)-1)<<e,this[this.t++]=s>>this.DB-e):this[this.t-1]|=s<<e,(e+=r)>=this.DB&&(e-=this.DB))}8==r&&0!=(128&t[0])&&(this.s=-1,0<e&&(this[this.t-1]|=(1<<this.DB-e)-1<<e)),this.clamp(),n&&BigInteger.ZERO.subTo(this,this)}function bnpClamp(){for(var t=this.s&this.DM;0<this.t&&this[this.t-1]==t;)--this.t}function bnToString(t){if(this.s<0)return"-"+this.negate().toString(t);var i;if(16==t)i=4;else if(8==t)i=3;else if(2==t)i=1;else if(32==t)i=5;else{if(4!=t)return this.toRadix(t);i=2}var r,o=(1<<i)-1,n=!1,e="",s=this.t,h=this.DB-s*this.DB%i;if(0<s--)for(h<this.DB&&0<(r=this[s]>>h)&&(n=!0,e=int2char(r));0<=s;)h<i?(r=(this[s]&(1<<h)-1)<<i-h,r|=this[--s]>>(h+=this.DB-i)):(r=this[s]>>(h-=i)&o,h<=0&&(h+=this.DB,--s)),0<r&&(n=!0),n&&(e+=int2char(r));return n?e:"0"}function bnNegate(){var t=nbi();return BigInteger.ZERO.subTo(this,t),t}function bnAbs(){return this.s<0?this.negate():this}function bnCompareTo(t){var i=this.s-t.s;if(0!=i)return i;var r=this.t;if(0!=(i=r-t.t))return i;for(;0<=--r;)if(0!=(i=this[r]-t[r]))return i;return 0}function nbits(t){var i,r=1;return 0!=(i=t>>>16)&&(t=i,r+=16),0!=(i=t>>8)&&(t=i,r+=8),0!=(i=t>>4)&&(t=i,r+=4),0!=(i=t>>2)&&(t=i,r+=2),0!=(i=t>>1)&&(t=i,r+=1),r}function bnBitLength(){return this.t<=0?0:this.DB*(this.t-1)+nbits(this[this.t-1]^this.s&this.DM)}function bnpDLShiftTo(t,i){for(var r=this.t-1;0<=r;--r)i[r+t]=this[r];for(r=t-1;0<=r;--r)i[r]=0;i.t=this.t+t,i.s=this.s}function bnpDRShiftTo(t,i){for(var r=t;r<this.t;++r)i[r-t]=this[r];i.t=Math.max(this.t-t,0),i.s=this.s}function bnpLShiftTo(t,i){for(var r=t%this.DB,o=this.DB-r,n=(1<<o)-1,e=Math.floor(t/this.DB),s=this.s<<r&this.DM,h=this.t-1;0<=h;--h)i[h+e+1]=this[h]>>o|s,s=(this[h]&n)<<r;for(h=e-1;0<=h;--h)i[h]=0;i[e]=s,i.t=this.t+e+1,i.s=this.s,i.clamp()}function bnpRShiftTo(t,i){i.s=this.s;var r=Math.floor(t/this.DB);if(r>=this.t)i.t=0;else{var o=t%this.DB,n=this.DB-o,e=(1<<o)-1;i[0]=this[r]>>o;for(var s=r+1;s<this.t;++s)i[s-r-1]|=(this[s]&e)<<n,i[s-r]=this[s]>>o;0<o&&(i[this.t-r-1]|=(this.s&e)<<n),i.t=this.t-r,i.clamp()}}function bnpSubTo(t,i){for(var r=0,o=0,n=Math.min(t.t,this.t);r<n;)o+=this[r]-t[r],i[r++]=o&this.DM,o>>=this.DB;if(t.t<this.t){for(o-=t.s;r<this.t;)o+=this[r],i[r++]=o&this.DM,o>>=this.DB;o+=this.s}else{for(o+=this.s;r<t.t;)o-=t[r],i[r++]=o&this.DM,o>>=this.DB;o-=t.s}i.s=o<0?-1:0,o<-1?i[r++]=this.DV+o:0<o&&(i[r++]=o),i.t=r,i.clamp()}function bnpMultiplyTo(t,i){var r=this.abs(),o=t.abs(),n=r.t;for(i.t=n+o.t;0<=--n;)i[n]=0;for(n=0;n<o.t;++n)i[n+r.t]=r.am(0,o[n],i,n,0,r.t);i.s=0,i.clamp(),this.s!=t.s&&BigInteger.ZERO.subTo(i,i)}function bnpSquareTo(t){for(var i=this.abs(),r=t.t=2*i.t;0<=--r;)t[r]=0;for(r=0;r<i.t-1;++r){var o=i.am(r,i[r],t,2*r,0,1);(t[r+i.t]+=i.am(r+1,2*i[r],t,2*r+1,o,i.t-r-1))>=i.DV&&(t[r+i.t]-=i.DV,t[r+i.t+1]=1)}0<t.t&&(t[t.t-1]+=i.am(r,i[r],t,2*r,0,1)),t.s=0,t.clamp()}function bnpDivRemTo(t,i,r){var o=t.abs();if(!(o.t<=0)){var n=this.abs();if(n.t<o.t)return null!=i&&i.fromInt(0),void(null!=r&&this.copyTo(r));null==r&&(r=nbi());var e=nbi(),s=this.s,h=t.s,p=this.DB-nbits(o[o.t-1]);0<p?(o.lShiftTo(p,e),n.lShiftTo(p,r)):(o.copyTo(e),n.copyTo(r));var a=e.t,f=e[a-1];if(0!=f){var u=f*(1<<this.F1)+(1<a?e[a-2]>>this.F2:0),g=this.FV/u,m=(1<<this.F1)/u,c=1<<this.F2,v=r.t,b=v-a,l=null==i?nbi():i;for(e.dlShiftTo(b,l),0<=r.compareTo(l)&&(r[r.t++]=1,r.subTo(l,r)),BigInteger.ONE.dlShiftTo(a,l),l.subTo(e,e);e.t<a;)e[e.t++]=0;for(;0<=--b;){var T=r[--v]==f?this.DM:Math.floor(r[v]*g+(r[v-1]+c)*m);if((r[v]+=e.am(0,T,r,b,0,a))<T)for(e.dlShiftTo(b,l),r.subTo(l,r);r[v]<--T;)r.subTo(l,r)}null!=i&&(r.drShiftTo(a,i),s!=h&&BigInteger.ZERO.subTo(i,i)),r.t=a,r.clamp(),0<p&&r.rShiftTo(p,r),s<0&&BigInteger.ZERO.subTo(r,r)}}}function bnMod(t){var i=nbi();return this.abs().divRemTo(t,null,i),this.s<0&&0<i.compareTo(BigInteger.ZERO)&&t.subTo(i,i),i}function Classic(t){this.m=t}function cConvert(t){return t.s<0||0<=t.compareTo(this.m)?t.mod(this.m):t}function cRevert(t){return t}function cReduce(t){t.divRemTo(this.m,null,t)}function cMulTo(t,i,r){t.multiplyTo(i,r),this.reduce(r)}function cSqrTo(t,i){t.squareTo(i),this.reduce(i)}function bnpInvDigit(){if(this.t<1)return 0;var t=this[0];if(0==(1&t))return 0;var i=3&t;return 0<(i=(i=(i=(i=i*(2-(15&t)*i)&15)*(2-(255&t)*i)&255)*(2-((65535&t)*i&65535))&65535)*(2-t*i%this.DV)%this.DV)?this.DV-i:-i}function Montgomery(t){this.m=t,this.mp=t.invDigit(),this.mpl=32767&this.mp,this.mph=this.mp>>15,this.um=(1<<t.DB-15)-1,this.mt2=2*t.t}function montConvert(t){var i=nbi();return t.abs().dlShiftTo(this.m.t,i),i.divRemTo(this.m,null,i),t.s<0&&0<i.compareTo(BigInteger.ZERO)&&this.m.subTo(i,i),i}function montRevert(t){var i=nbi();return t.copyTo(i),this.reduce(i),i}function montReduce(t){for(;t.t<=this.mt2;)t[t.t++]=0;for(var i=0;i<this.m.t;++i){var r=32767&t[i],o=r*this.mpl+((r*this.mph+(t[i]>>15)*this.mpl&this.um)<<15)&t.DM;for(t[r=i+this.m.t]+=this.m.am(0,o,t,i,0,this.m.t);t[r]>=t.DV;)t[r]-=t.DV,t[++r]++}t.clamp(),t.drShiftTo(this.m.t,t),0<=t.compareTo(this.m)&&t.subTo(this.m,t)}function montSqrTo(t,i){t.squareTo(i),this.reduce(i)}function montMulTo(t,i,r){t.multiplyTo(i,r),this.reduce(r)}function bnpIsEven(){return 0==(0<this.t?1&this[0]:this.s)}function bnpExp(t,i){if(4294967295<t||t<1)return BigInteger.ONE;var r,o=nbi(),n=nbi(),e=i.convert(this),s=nbits(t)-1;for(e.copyTo(o);0<=--s;){i.sqrTo(o,n),0<(t&1<<s)?i.mulTo(n,e,o):(r=o,o=n,n=r)}return i.revert(o)}function bnModPowInt(t,i){var r=new(t<256||i.isEven()?Classic:Montgomery)(i);return this.exp(t,r)}Classic.prototype.convert=cConvert,Classic.prototype.revert=cRevert,Classic.prototype.reduce=cReduce,Classic.prototype.mulTo=cMulTo,Classic.prototype.sqrTo=cSqrTo,Montgomery.prototype.convert=montConvert,Montgomery.prototype.revert=montRevert,Montgomery.prototype.reduce=montReduce,Montgomery.prototype.mulTo=montMulTo,Montgomery.prototype.sqrTo=montSqrTo,BigInteger.prototype.copyTo=bnpCopyTo,BigInteger.prototype.fromInt=bnpFromInt,BigInteger.prototype.fromString=bnpFromString,BigInteger.prototype.clamp=bnpClamp,BigInteger.prototype.dlShiftTo=bnpDLShiftTo,BigInteger.prototype.drShiftTo=bnpDRShiftTo,BigInteger.prototype.lShiftTo=bnpLShiftTo,BigInteger.prototype.rShiftTo=bnpRShiftTo,BigInteger.prototype.subTo=bnpSubTo,BigInteger.prototype.multiplyTo=bnpMultiplyTo,BigInteger.prototype.squareTo=bnpSquareTo,BigInteger.prototype.divRemTo=bnpDivRemTo,BigInteger.prototype.invDigit=bnpInvDigit,BigInteger.prototype.isEven=bnpIsEven,BigInteger.prototype.exp=bnpExp,BigInteger.prototype.toString=bnToString,BigInteger.prototype.negate=bnNegate,BigInteger.prototype.abs=bnAbs,BigInteger.prototype.compareTo=bnCompareTo,BigInteger.prototype.bitLength=bnBitLength,BigInteger.prototype.mod=bnMod,BigInteger.prototype.modPowInt=bnModPowInt,BigInteger.ZERO=nbv(0),BigInteger.ONE=nbv(1);
function parseBigInt(n,t){return new BigInteger(n,t)}function linebrk(n,t){for(var e="",r=0;r+t<n.length;)e+=n.substring(r,r+t)+"\n",r+=t;return e+n.substring(r,n.length)}function byte2Hex(n){return n<16?"0"+n.toString(16):n.toString(16)}function pkcs1pad2(n,t){if(t<n.length+11)return alert("Message too long for RSA"),null;for(var e=new Array,r=n.length-1;0<=r&&0<t;){var l=n.charCodeAt(r--);l<128?e[--t]=l:127<l&&l<2048?(e[--t]=63&l|128,e[--t]=l>>6|192):(e[--t]=63&l|128,e[--t]=l>>6&63|128,e[--t]=l>>12|224)}e[--t]=0;for(var i=new SecureRandom,u=new Array;2<t;){for(u[0]=0;0==u[0];)i.nextBytes(u);e[--t]=u[0]}return e[--t]=2,e[--t]=0,new BigInteger(e)}function RSAKey(){this.n=null,this.e=0,this.d=null,this.p=null,this.q=null,this.dmp1=null,this.dmq1=null,this.coeff=null}function RSASetPublic(n,t){null!=n&&null!=t&&0<n.length&&0<t.length?(this.n=parseBigInt(n,16),this.e=parseInt(t,16)):alert("Invalid RSA public key")}function RSADoPublic(n){return n.modPowInt(this.e,this.n)}function RSAEncrypt(n){var t=pkcs1pad2(n,this.n.bitLength()+7>>3);if(null==t)return null;var e=this.doPublic(t);if(null==e)return null;var r=e.toString(16);return 0==(1&r.length)?r:"0"+r}RSAKey.prototype.doPublic=RSADoPublic,RSAKey.prototype.setPublic=RSASetPublic,RSAKey.prototype.encrypt=RSAEncrypt;
function Arcfour(){this.i=0,this.j=0,this.S=new Array}function ARC4init(i){for(var t,s,h=0;h<256;++h)this.S[h]=h;for(h=t=0;h<256;++h)t=t+this.S[h]+i[h%i.length]&255,s=this.S[h],this.S[h]=this.S[t],this.S[t]=s;this.i=0,this.j=0}function ARC4next(){var i;return this.i=this.i+1&255,this.j=this.j+this.S[this.i]&255,i=this.S[this.i],this.S[this.i]=this.S[this.j],this.S[this.j]=i,this.S[i+this.S[this.i]&255]}function prng_newstate(){return new Arcfour}Arcfour.prototype.init=ARC4init,Arcfour.prototype.next=ARC4next;var rng_psize=256;
var rng_state;function rng_seed_int(r){rng_pool[rng_pptr++]^=255&r,rng_pool[rng_pptr++]^=r>>8&255,rng_pool[rng_pptr++]^=r>>16&255,rng_pool[rng_pptr++]^=r>>24&255,rng_pptr>=rng_psize&&(rng_pptr-=rng_psize)}function rng_seed_time(){rng_seed_int((new Date).getTime())}if(null==rng_pool){var rng_pool=new Array,rng_pptr=0;if("Netscape"==navigator.appName&&navigator.appVersion<"5"&&window.crypto)for(var z=window.crypto.random(32),t=0;t<z.length;++t)rng_pool[rng_pptr++]=255&z.charCodeAt(t);for(;rng_pptr<rng_psize;)t=Math.floor(65536*Math.random()),rng_pool[rng_pptr++]=t>>>8,rng_pool[rng_pptr++]=255&t;rng_pptr=0,rng_seed_time()}function rng_get_byte(){if(null==rng_state){for(rng_seed_time(),(rng_state=prng_newstate()).init(rng_pool),rng_pptr=0;rng_pptr<rng_pool.length;++rng_pptr)rng_pool[rng_pptr]=0;rng_pptr=0}return rng_state.next()}function rng_get_bytes(r){for(var n=0;n<r.length;++n)r[n]=rng_get_byte()}function SecureRandom(){}SecureRandom.prototype.nextBytes=rng_get_bytes;
window.IG$||(window.IG$={}),function(e){"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof exports?module.exports=e(require("jquery")):e(jQuery)}(function(m){var o=/\+/g;function w(e){return g.raw?e:encodeURIComponent(e)}function x(e,n){var t=g.raw?e:function(e){0===e.indexOf('"')&&(e=e.slice(1,-1).replace(/\\"/g,'"').replace(/\\\\/g,"\\"));try{return e=decodeURIComponent(e.replace(o," ")),g.json?JSON.parse(e):e}catch(e){}}(e);return m.isFunction(n)?n(t):t}var g=m.cookie=function(e,n,t){var o,i,r;if(1<arguments.length&&!m.isFunction(n))return"number"==typeof(t=m.extend({},g.defaults,t)).expires&&(o=t.expires,(i=t.expires=new Date).setMilliseconds(i.getMilliseconds()+864e5*o)),document.cookie=[w(e),"=",(r=n,w(g.json?JSON.stringify(r):String(r))),t.expires?"; expires="+t.expires.toUTCString():"",t.path?"; path="+t.path:"",t.domain?"; domain="+t.domain:"",t.secure?"; secure":""].join("");for(var c,s=e?void 0:{},u=document.cookie?document.cookie.split("; "):[],a=0,f=u.length;a<f;a++){var d=u[a].split("="),l=(c=d.shift(),g.raw?c:decodeURIComponent(c)),p=d.join("=");if(e===l){s=x(p,n);break}e||void 0===(p=x(p))||(s[l]=p)}return s};g.defaults={},m.removeCookie=function(e,n){return m.cookie(e,"",m.extend({},n,{expires:-1})),!m.cookie(e)}}),function(e){e.fn=e.fn,e.fn.dselect=function(){return this.each(function(){e(this).attr("unselectable","on").css({"-moz-user-select":"none","-webkit-user-select":"none","user-select":"none"}).each(function(){this.onselectstart=function(){return!1}})})}}(jQuery),jQuery.fn.selText=function(){var e,n,t=this[0],o=window.bowser;return o.msie?((e=t.offsetParent.createTextRange()).moveToElementText(t),e.select()):o.mozilla||o.opera?(n=t.ownerDocument.defaultView.getSelection(),(e=t.ownerDocument.createRange()).selectNodeContents(t),n.removeAllRanges(),n.addRange(e)):o.safari&&(n=t.ownerDocument.defaultView.getSelection()).setBaseAndExtent(t,0,t,1),this};
var gsequence=0;window.IG$||(window.IG$={}),IG$.__chartoption=IG$.__chartoption||{},IG$.__chartoption.chartext=IG$.__chartoption.chartext||{},IG$._canvasSupported=function(){var e=document.createElement("canvas");return!(!e.getContext||!e.getContext("2d"))},IG$.UNDEFINED,IG$.L_SPPL=null,IG$.msgint=-1,IG$._markInvalid="Field necessary",IG$.level=0,IG$.clipboard=null,IG$._separator="|",IG$.i$0="initComponent",IG$.msvg=window.SVGAngle||document.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1"),IG$.mcanvas=!IG$.msvg,IG$.hEEq={regex:/[<'"]/gim,map:{"<":"&lt;","&":"&amp;","'":"&apos;",'"':"&quot;","&#x":"&#x"},fasl:/(&#x2044;)/g,metakey:/[- &#'"]/gim},IG$.getMetaKey=function(e){return e=e.replace(IG$.hEEq.metakey,function(e){return"_"})},IG$.hEE=function(e){return e=e&&(""+e).replace(IG$.hEEq.regex,function(e){return IG$.hEEq.map[e]})},IG$.hEE2=function(e){return e=e&&e.replace(IG$.hEEq.fasl,function(e){return"/"})},IG$.hEE3=function(e){return-1<e.indexOf("/")&&(e=(e=e.split("/")).join("&#x2044;")),e},IG$.mcanvas&&!IG$._canvasSupported()&&(IG$.mcanvas=!1),IG$.dbp={},IG$.ps={},IG$.loadExtend={rcsloaded:!1,items:[]},IG$.checkTimeout=function(e){var t;e&&(t=e+(new Date).getTime(),clearTimeout(IG$.Dtimer),clearTimeout(IG$.Wtimer),IG$.Wtimer=setTimeout(function(){var e=(new Date).getTime()-300;t-10<=e&&IG$.alertmsg(ig$.appname,"Your session is going to be end by 5 min, Please click OK to continue.",null,null,0,"")},1e3*(e-300)),IG$.Dtimer=setTimeout(function(){var e=(new Date).getTime();t-10<=e&&IG$.showLogin(null,2)},1e3*e))},IG$.extend=function(e,t,n){IG$.loadExtend.rcsloaded?e=IG$.extend(t,n):IG$.loadExtend.items.push({name:e,base:t,option:n})},IG$.callBackObj||(IG$.callBackObj=function(e,t,n){var r=this;r.p1=e,r.p2=t,r.p3=n},IG$.callBackObj.prototype={execute:function(){var e,t,n=this,r=arguments,a=[];if(n.p2){for(e=0;e<r.length;e++)a.push(r[e]);n.p3&&a.push(n.p3),t=n.p2.apply(n.p1||null,a)}return t}}),IG$._rrcsv=function(e){return e&&1<e.length&&"@"==e.charAt(0)&&(e=IRm$.r1(e)),e},IG$._rrcs=function(e,t,n,r){return t&&1<t.length&&"@"==t.charAt(0)&&(e._rcs=e._rcs||[],e._rcs.push({t:r,h:n,dobj:e}),t=IRm$.r1(t)),t},IG$.$lbg=function(e,t){!t&&IG$.___mtimer||(IG$.___mtimer=(new Date).getTime());var n=(new Date).getTime();console.log(n-IG$.___mtimer,e)},IG$.override=function(e,t){if(e.$isClass)e.override(t);else if("function"==typeof e)IG$.apply(e.prototype,t);else{var n,r,a=e.self;if(a&&a.$isClass)for(n in t)t.hasOwnProperty(n)&&("function"==typeof(r=t[n])&&(a.$className&&(r.displayName=a.$className+"#"+n),r.$name=n,r.$owner=a,r.$previous=e.hasOwnProperty(n)?e[n]:callOverrideParent),e[n]=r);else IG$.apply(e,t)}return e},IG$.extend=function(){function o(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t])}var s=Object.prototype.constructor;return function(t,e,n){IG$.isObject(e)&&(n=e,e=t,t=n.constructor!==s?n.constructor:function(){return e.apply(this,arguments)});function r(){}var a,i=e.prototype;return r.prototype=i,(((a=t.prototype=new r).constructor=t).superclass=i).constructor===s&&(i.constructor=e),t.override=function(e){IG$.override(t,e)},a.override=o,a.proto=a,t.override(n),t.extend=function(e){return IG$.extend(t,e)},t}}(),IG$.microChartType=function(e,t){switch(e.mctype){case 0:t.type="bullet";break;case 2:t.type="line",t.lineColor=e.linecolor||"#5151FF",t.fillColor=e.fillcolor||"#c0d0f0",t.lineWidth=1;break;case 3:t.type="line",t.lineColor=e.linecolor||"#5151FF",t.fillColor=null,t.lineWidth=1;break;case 4:t.type="bar",t.barColor=e.linecolor||"#5151FF",t.negBarColor=e.linecolor||"#FF5151";break;case 6:t.type="box";break;case 7:t.type="tristate",t.posBarColor=e.linecolor||"#5151FF",t.negBarColor=e.linecolor||"#FF5151";break;case 8:t.type="pie";break;case 9:t.type="box",t.boxFillColor=e.linecolor||"#5151FF",t.medianColor=e.linecolor||"#FF5151";break;default:t.type="line",t.lineColor=e.linecolor||"#5151FF",t.fillColor=e.fillcolor||"#fff"}},IG$.apply=function(e,t,n,r){var a;if(e&&t&&"object"==typeof t)for(a in t)0!=e.hasOwnProperty(a)&&!1===r||(e[a]=t[a]);return e},IG$.defaults=function(e,t){var n;if(e&&t&&"object"==typeof t)for(n in t)void 0===e[n]&&(e[n]=t[n]);return e},IG$.copyObject=function(e,t){var n,r={};for(n in e)t&&IG$.isObject(e[n])||(r[n]=e[n]);return r},IG$.isObject=function(e){return null!==e&&"object"==typeof e},IG$.isString=function(e){return"string"==typeof e},IG$.getMetaItemCache={itemicon:{},foldertype:{}},IG$.getLicenseTag=function(){var e,t;return IG$.dlgLogin&&IG$.dlgLogin.logininfo&&(t=IG$.dlgLogin.logininfo.l3.substring(1)),"1"==t&&(e=["COMMUNITY EDITION","http://www.amplixbi.com"]),e},IG$.formatUID=function(e){if(e&&-1<e.indexOf("-")){var t,n=e.substring(0,e.indexOf("-")),r=e.substring(e.indexOf("-")+1);if(n.length<8)for(t=n.length;t<8;t++)n="0"+n;if(r.length<8)for(t=r.length;t<8;t++)r="0"+r;return n+"-"+r}return e},IG$.checkUID=function(e){var t=!1;return e&&17==e.length&&"-"==e.charAt(8)&&(t=!0),t},IG$.formatName=function(e){return 17<e.length&&"_"==e.charAt(17)?e=e.substring(18):15<e.length&&"_"==e.charAt(15)&&(e=e.substring(16)),e},IG$.trim12=function(e){if(!e)return e;for(var t=/\s/,n=(e=e.replace(/^\s\s*/,"")).length;t.test(e.charAt(--n)););return e.slice(0,n+1)},IG$.drawLicenseTag=function(e){var t,n,r,a=IG$.getLicenseTag();if(a)for(n=$("<div></div>").css({position:"absolute",bottom:10,left:10,backgroundImage:"url(./images/75p_white.png)",backgroundRepeat:"repeat",padding:5}).appendTo(e),t=0;t<a.length;t++)r=0<t?"<br>":"","http"==a[t].substring(0,4)?r+="<a href='"+a[t]+"' target='_new'>"+a[t]+"</a>":r+="<span>"+a[t]+"</span>",n.append(r)},IG$.tooltip=function(e,t){var n=IG$._tooltipInstance;n||(n=IG$._tooltipInstance=$("<div class='mto'></div>").css({position:"absolute",zIndex:999}).hide()).appendTo($(body)),n.text(text),n.show()},IG$.typeOfValue=function(e){var t=typeof e;return"object"===t&&(e?e instanceof Array&&(t="array"):t="null"),t},IG$.findSubDivClass=function(e,t){var n=null;if(null!=e.childNodes&&0<e.childNodes.length)for(var r=0;r<e.childNodes.length;r++){var a=e.childNodes[r].className,i=e.childNodes[r].id;if(a&&"string"==typeof a&&-1<a.indexOf(t)||i==t)return e.childNodes[r];var o=e.childNodes[r].nodeName?e.childNodes[r].nodeName:e.childNodes[r].localName;if(("div"==o.toLowerCase()||"span"==o.toLowerCase())&&null!=(n=IG$.findSubDivClass(e.childNodes[r],t)))return n}return n},IG$.isFolder=function(e){var t=5,n=IG$.getMetaItemCache.foldertype;return n[e]?t=n[e]:(1==/(parent|folder|rfolder|javapackage)/.test(e)?t=1:1==/(cube|mcube|metrics|dataset)/.test(e)&&"cubemodel"!=e?t=2:"datemetric"==e&&(t=3),n[e]=t),t},IG$._sortTypeOrder={parent:1,folder:2,cube:3,cubemodel:4,javapackage:5,mcube:6,mdbcube:7},IG$._nsort=/(\.\d+)|(\d+(\.\d+)?)|([^\d.]+)|(\.\D+)|(\.$)/g,IG$.sortMeta=function(e){for(var y=IG$._sortTypeOrder,t=0;t<e.length;t++)e[t].ltype=e[t].type.toLowerCase(),e[t].lfd=IG$.isFolder(e[t].ltype);e.sort(function(e,t){var n,r,a,i,o,s,l,c=0,u=e.lfd,d=t.lfd,h=e.ltype,p=t.ltype,f=e.nodepath||"",m=t.nodepath||"",g=y[h]||99,$=y[p]||99,f=e.locale_name||e.name,m=t.locale_name||t.name;if(g!=$)c=g-$;else if(f!=m)for(n=f.toLowerCase().match(IG$._nsort),r=m.toLowerCase().match(IG$._nsort),a=n.length,i=0;i<a;){if(!r[i]){c=1;break}if((s=n[i])!==(l=r[i++])){o=s-l,c=isNaN(o)?l<s?1:-1:o;break}}else if(u==d&&g==$)for(f=e.lname||e.name,m=t.lname||t.name,n=f.toLowerCase().match(IG$._nsort),r=m.toLowerCase().match(IG$._nsort),a=n.length,i=0;i<a;){if(!r[i]){c=1;break}if((s=n[i])!==(l=r[i++])){o=s-l,c=isNaN(o)?l<s?1:-1:o;break}}else c=u==d?$<g?-1:1:d<u?-1:1;return c})},IG$.get_datatype=function(e){var t=null;switch(e){case"12":case"1":case"-1":case"-15":t="VARCHAR";break;case"5":case"4":case"-5":case"-6":case"-7":case"7":case"8":case"3":case"-2":case"-3":case"-4":case"2":t="NUMERIC";break;case"91":case"92":case"93":t="DATE";break;case"2004":case"2005":t="LOB";break;default:t="OTHER"}return t},IG$.get_metatype_icon=function(e,t){var n="",r=IG$.getMetaItemCache.itemicon,a=e;"link"==e&&t&&!t.rawtype&&t.attributes&&t.attributes.attrb2&&(t.rawtype=t.attributes.attrb2);var i=t?(t.datatype||"")+"_"+(t.rawtype||""):"";if(r[e+"_"+i])n=r[e+"_"+i];else{switch("link"==e&&t&&t.rawtype&&(a=t.rawtype.toLowerCase()),a){case"metrics":n="icon-folder";break;case"datacube":n="icon-excel";break;default:n="icon-"+a,"metric"==a&&t&&t.datatype&&(n+="_"+t.datatype)}"link"==e&&(n="icon-link-disp "+n),r[e+"_"+i]=n}return n},IG$.findSubNode=function(e,t,n){var r=null;if(null!=e.childNodes&&0<e.childNodes.length)for(var a=0;a<e.childNodes.length;a++){var i=e.childNodes[a].getAttribute?e.childNodes[a].getAttribute(t):null;if(i&&i==n)return e.childNodes[a];if(e.childNodes[a].childNodes&&0<e.childNodes[a].childNodes.length&&null!=(r=IG$.findSubNode(e.childNodes[a],t,n)))return r}return r},IG$.loadXML=function(e){var t;return 10==e.charAt(0).charCodeAt(0)&&(e=e.substring(1)),"<"!=e.charAt(0)&&(e=Base64.decode(e)),window.DOMParser?t=(new DOMParser).parseFromString(e,"application/xml"):((t=new ActiveXObject("Microsoft.XMLDOM")).async=!1,t.loadXML(e)),t},IG$.loadMapData=function(e){$.ajax({type:"GET",url:(window.mapurl||"./data/map.json")+"?uniquekey="+IG$.getUniqueKey(),dataType:"json",timeout:1e4,success:function(e){IG$.mLU=e},error:function(e,t,n){}})},IG$.getKeyName=function(e){return e.toLowerCase()},IG$.interpolateColor=function(e,t,n,r){function a(e){return parseInt(e,16)}if(0==r)return e;if(r==n)return t;for(var i,o,s,l="#",c=1;c<=6;c+=2){for(o=(i=Number(a(e.substr(c,2))))+r/n*(Number(a(t.substr(c,2)))-i),s=Math.floor(o).toString(16);s.length<2;)s="0"+s;l+=s}return l},IG$.placeHolder=function(e){var t=window.bowser,n=e.attr("placeholder");t.msie&&n&&e.bind({focus:function(e){var t=$(this);t.val()==t.attr("placeholder")&&(t.val(""),t.removeClass("placeholder"))},blur:function(e){var t=$(this);""==t.val()||t.val()==t.attr("placeholder")?(t.addClass("placeholder"),t.val(t.attr("placeholder"))):t.removeClass("placeholder")},keyup:function(e){var t=$(this);""==t.val()&&t.blur()}}).blur()},IG$.CopyObject=function(e,t,n){var r;for(r in n=n?";"+n+";":n,t=t||{},e)!(n&&-1<n.indexOf(";"+r+";"))&&n||(t[r]=e[r]);return t},IG$.CloneObject=function(e){var t,n={};for(t in e)n[t]=e[t];return n},IG$.XGetInfo=function(e,t,n,r,a){for(var i,o,s=n.split(";"),l=IG$.XGetAttrProp(t),c=0;c<s.length;c++)if(o=s[c]){switch(r){case"i":i=null!=l[o]&&void 0!==l[o]?Number(l[o]):null;break;case"b":i="T"==l[o]||"F"!=l[o]&&null;break;default:i=null!=l[o]&&void 0!==l[o]?l[o]:null}a&&"cdata_"==o.substring(0,"cdata_".length)&&(i=IG$.XGetSubNodeText(t,o)),null!=i&&(e[o]=i)}},IG$.XUpdateInfo=function(e){var t,n="";for(t in e)v=e[t],null!=v&&"string"==typeof v&&(n+=" "+t+"='",n+=IG$.escapeXMLString(v),n+="'");return n},IG$.XSetAttr=function(e,t,n){e.setAttribute(t,n)},IG$.XGetTextVal=function(e){var t,n,r,a="",i=window.bowser;if(e){if(e.hasChildNodes()){for(t=e.childNodes,r=0;r<t.length;r++)if("4"==t[r].nodeType){n=t[r];break}if(n)return a=n.nodeValue||n.textContent}if(i.msie)a=e.text||e.textContent||"";else if(null!=e&&void 0!==e.textContent)return e.textContent}return a},IG$.toXMLString=function(e){return window.XMLSerializer?(new XMLSerializer).serializeToString(e):e.documentElement?e.documentElement.xml:e.xml},IG$.XGetChildNodes=function(e,t){var n=[];if(null!=e&&1==e.hasChildNodes())for(var r=0;r<e.childNodes.length;r++)"1"==e.childNodes[r].nodeType&&"parseerror"!=e.childNodes[r].nodeName&&(t&&t!=IG$.XGetNodeName(e.childNodes[r])||n.push(e.childNodes[r]));return n},IG$.getErrorCode=function(e){return e.errorcode},IG$.getTabTitle=function(e){var t=e;return 16<t.length&&(t=t.substring(0,14)+".."),t},IG$.XGetNodeName=function(e){return e.nodeName},IG$.parseValueList=function(e){var t,n,r,a,i,o,s,l=[];if(e)for(n=0;n<e.length;n++){if(i=(a=e[n]).headers,o=a.inline_data,(r=a).data=[],a&&i&&o)for(a.delimiter,a.codefield,a.sortfield,a.cols,i.length,t=0;t<o.length;t++)s=o[t],r.data.push({code:s[0],disp:s[1],sdisp:s[2]});r&&l.push(r)}return l},IG$.getFstChld=function(e){var t=IG$.XGetChildNodes(e);return null!=t&&0<t.length?t[0]:null},IG$.getFieldValue=function(e,t,n){var r=e.down.call(e,"[name="+t+"]"),a=null;if(r)switch(n){case"s":a=r.getValue()}return a},IG$.setFieldValue=function(e,t,n,r){var a=e.down.call(e,"[name="+t+"]");if(a)switch(n){case"s":a.setValue(r);break;case"dg":a.store.loadData(r)}},IG$.applyOptions=function(r,a,e,i){$.each(e,function(e,t){var n=r.down("[name="+t+"]");n&&(i?"checkbox"==n.xtype?a[t]=n.getValue()?"T":"F":a[t]=n.getValue():"checkbox"==n.xtype?n.setValue("T"==a[t]):n.setValue(a[t]))})},IG$._I30=function(e){var t,n="";for(t in e)"string"!=typeof e[t]&&"number"!=typeof e[t]||(n+=" "+t+"='"+IG$.escapeXMLString(e[t])+"'");return n},IG$.XHasElement=function(e,t){var n,r=!1;if(e&&e.children)for(n=0;n<e.children.length;n++){if(e.children[n]==t)return!0;if(e.children[n].children&&0<e.children[n].children.length&&1==(r=IG$.XHasElement(e.children[n],t)))return!0}return r},IG$.chartTypeMenu=[{label:"Column",charttype:"cartesian",subtype:"column",img:"column"},{label:"Line",charttype:"cartesian",subtype:"line",img:"line"},{label:"Area",charttype:"cartesian",subtype:"area",img:"area"},{label:"Bar",charttype:"cartesian",subtype:"bar",img:"bar"},{label:"Pie",charttype:"pie",subtype:"pie",img:"pie"},{label:"Doughnut",charttype:"pie",subtype:"doughnut",img:"pie"},{label:"Bubble",charttype:"bubble",subtype:"bubble",img:"bubble"},{label:"Scatter",charttype:"scatter",subtype:"scatter",img:"bubble"}],IG$.getPrintXML=function(e){var t=window.bowser.msie?e.outerHTML:(new XMLSerializer).serializeToString(e);return t},IG$.isNumericType=function(e){var t=!1;switch(e=e?e.toLowerCase():""){case"numeric":case"number":case"int":case"bigint":case"decimal":t=!0}return t},IG$.FormatNumber=function(e){x=(e+="").split("."),x1=x[0],x2=1<x.length?"."+x[1]:"";for(var t=/(\d+)(\d{3})/;t.test(x1);)x1=x1.replace(t,"$1,$2");return x1+x2},IG$.NumberFormat=function(e,t){var n,r,a,i,o,s,l,c,u,d,h,p,f,m,g,$=0,y="",I="",b="",G="",v=0;if(e){for(w=0;w<e.length;w++)a=e.charAt(w),u=0,l&&"."==a?(s=1,f=i):"#"==a||"0"==a||"-"==a?(l&&s&&"-"!=a&&$++,l=1):","==a?l?i==a?(v++,h=w,d=d||w-1):p=a:u=1:l&&!s&&0<w&&w+1<e.length&&("#"==e.charAt(w+1)||"0"==e.charAt(w+1))?p=a:p&&a==p&&l||(u=1,l&&!c&&(c=1)),u&&(l||c?("%"==a&&("'"==i&&y.length&&"'"==y.charAt(y.length-1)?y=y.substring(0,y.length-1):t*=100),y+=a," "!=a&&0):I+=a),i=a;-1<(n=y.indexOf("&permil;"))&&(0<n&&"'"==y.charAt(n-1)?(y=y.substring(0,n-1)+y.substring(n),n--):t*=1e3,y=y.substring(0,n)+"‰"+y.substring(n+"&permil;".length)),0<v&&(e=e.substring(0,d)+e.substring(h+1),t/=Math.pow(1e3,v)),b=e.substring(I.length,e.length-I.length-y.length)}if(o=parseFloat(Math.round(t+"e"+$)+"e-"+$).toFixed($),b){if(n=o.indexOf("."),m=o,-1<n&&(m=o.substring(0,n),g=o.substring(n+1)),p){for(w=n=m.length-3;0<=w;w-=3)0<w&&(m=m.substring(0,w)+p+m.substring(w));"0"==f&&0==n&&(m="0")}if(0<(r=b.indexOf("."))&&(G=b.substring(r+1)),G){for(var _=[],w=0;w<G.length;w++)"0"==G.charAt(w)?_.push(g.length>w?g.charAt(w):"0"):"#"==G.charAt(w)&&_.push(g.length>w&&"0"!=g.charAt(w)?g.charAt(w):"");g=_.join("")}o=m+(g?"."+g:"")}return I+o+y},IG$.getSeriesType=function(e){var t="column";switch(e){case"column":t="column";break;case"line":t="line";break;case"spline":t="spline";break;case"area":t="area";break;case"bar":t="bar";break;case"pie":case"doughnut":t="pie";break;case"bubble":t="bubble";break;case"scatter":t="scatter";break;case"parallel":t="parallel";break;case"waterfall":t="waterfall";break;case"areaspline":t="areaspline"}return t},IG$.isNumber=function(e){return!isNaN(parseFloat(e))&&isFinite(e)},IG$.stripNonNumeric=function(e){e+="";for(var t=/^\d|\.|-$/,n="",r=0;r<e.length;r++)t.test(e.charAt(r))&&("."==e.charAt(r)&&-1!=n.indexOf(".")||"-"==e.charAt(r)&&0!=n.length||(n+=e.charAt(r)));return n},IG$.rsaPublicKeyModules=null,IG$.rsaPublicKeyExpoenent=null,IG$.encryptKey=function(e){var t;if(IG$.rsaPublicKeyModules){var n=new RSAKey;for(n.setPublic(IG$.rsaPublicKeyModules,IG$.rsaPublicKeyExpoenent),t=0;t<e.length;t++)e[t]=n.encrypt(e[t])}return e},IG$._rpc$=function(){this.stoploading=!0},IG$._rpc$.prototype={init:function(e,t,n,r,a,i){this.panel=e,this.params=t,this.caller=n,this.rsSuccess=r,this.rsFail=a,this.rsParams=i,this.showerror=!0,this.stoploading=!0,this.sccall=new IG$.callBackObj(this.caller,this.rsSuccess,this.rsParams),this.scfail=new IG$.callBackObj(this.caller,this.rsFail,this.rsParams)},send:function(){var o=this;o.params._mts_=IG$._g$a||o.params.mts||"",o.params._share_uid_=IG$._share_uid_,o.params.uniquekey=IG$.getUniqueKey(),window.Pace&&window.Pace.start(),o.panel&&o.panel.setLoading&&o.panel.setLoading(!0),$.ajax({url:o.servlet$||ig$.servlet,data:JSON.stringify(o.params),dataType:"json",type:"POST",async:!0,contentType:"application/json; charset=UTF-8",timeout:6e5,beforeSend:function(e,t){},cache:!1,crossDomain:!1,processData:!0,success:function(e,t,n){window.Pace&&window.Pace.stop();var r,a=(e=e||{errorcode:"0xffff",errormsg:"Server incorrect responding"}).errorcode,i=!1;if(IG$.checkTimeout(e.session_timeout),o.panel&&o.panel.setLoading&&(0!=o.stoploading?o.panel.setLoading(!1):i=!0),"0x1300"==a){if(1==i&&o.panel.setLoading(!1),1==o.scfail.execute(a)||0==o.showerror)return;IG$.showLogin(o.panel?new IG$.callBackObj(o.panel,o.panel.entryLogin):null,2)}else{null!=a&&0<a.length?(1==i&&o.panel.setLoading(!1),r=o.scfail.execute(e),!1!==o.showerror&&0!=r&&IG$.ShowErrorMessage(e,o.panel,o.params)):o.sccall.execute(e.result)}},error:function(e,t,n){window.Pace&&window.Pace.stop(),o.panel&&o.panel.setLoading&&o.panel.setLoading(!1),!1!==o.showerror&&IG$.ShowConnectionError(o.panel);o.scfail.execute({errorcode:"0x9999",errormsg:"Server URL Connection Failed"})}})}},$.download=function(e,t,n){if(e&&t){for(var r="",a=0;a<t.length;a++)r+="<input type='hidden' name='"+t[a].name+"' value='"+t[a].value+"' />";$("<form action='"+e+"' method='"+(n||"post")+"'>"+r+"</form>").appendTo("body").submit().remove()}},IG$.measureText=function(e,t){var n=this.sensorDiv;return n||(n=$("<div style='margin:0px;padding:0px;display:inline-block;top:-100px'></div>"),$("body").append(n),this.sensorDiv=n),n.css({fontSize:e}),n.text(t),{width:IG$.j$ext._w(n)||0,height:IG$.j$ext._h(n)||0}},IG$.getDateParse=function(e){return{y:e.substr(0,4),M:e.substr(4,2),d:e.substr(6,2),h:e.substr(8,2),m:e.substr(10,2)}},IG$.formatDate=function(e){return e.substr(0,4)+"-"+e.substr(4,2)+"-"+e.substr(6,2)+" "+e.substr(8,2)+":"+e.substr(10,2)},IG$.dateFormat=function(){function m(e,t){for(e=String(e),t=t||2;e.length<t;)e="0"+e;return e}var g=/d{1,4}|m{1,4}|yy(?:yy)?|([HhMsTt])\1?|[LloSZ]|"[^"]*"|'[^']*'/g,$=/\b(?:[PMCEA][SDP]T|(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time|(?:GMT|UTC)(?:[-+]\d{4})?)\b/g,y=/[^-+\dA-Z]/g;return function(e,t,n){var r=IG$.dateFormat;if(1!=arguments.length||"[object String]"!=Object.prototype.toString.call(e)||/\d/.test(e)||(t=e,e=void 0),e=e?new Date(e):new Date,isNaN(e))throw SyntaxError("invalid date");"UTC:"==(t=String(r.masks[t]||t||r.masks.default)).slice(0,4)&&(t=t.slice(4),n=!0);var a=n?"getUTC":"get",i=e[a+"Date"](),o=e[a+"Day"](),s=e[a+"Month"](),l=e[a+"FullYear"](),c=e[a+"Hours"](),u=e[a+"Minutes"](),d=e[a+"Seconds"](),h=e[a+"Milliseconds"](),p=n?0:e.getTimezoneOffset(),f={d:i,dd:m(i),ddd:r.i18n.dayNames[o],dddd:r.i18n.dayNames[o+7],m:s+1,mm:m(s+1),mmm:r.i18n.monthNames[s],mmmm:r.i18n.monthNames[s+12],yy:String(l).slice(2),yyyy:l,h:c%12||12,hh:m(c%12||12),H:c,HH:m(c),M:u,MM:m(u),s:d,ss:m(d),l:m(h,3),L:m(99<h?Math.round(h/10):h),t:c<12?"a":"p",tt:c<12?"am":"pm",T:c<12?"A":"P",TT:c<12?"AM":"PM",Z:n?"UTC":(String(e).match($)||[""]).pop().replace(y,""),o:(0<p?"-":"+")+m(100*Math.floor(Math.abs(p)/60)+Math.abs(p)%60,4),S:["th","st","nd","rd"][3<i%10?0:(i%100-i%10!=10)*i%10]};return t.replace(g,function(e){return e in f?f[e]:e.slice(1,e.length-1)})}}(),IG$.dateFormat.masks={default:"ddd mmm dd yyyy HH:MM:ss",shortDate:"m/d/yy",mediumDate:"mmm d, yyyy",longDate:"mmmm d, yyyy",fullDate:"dddd, mmmm d, yyyy",shortTime:"h:MM TT",mediumTime:"h:MM:ss TT",longTime:"h:MM:ss TT Z",isoDate:"yyyy-mm-dd",isoTime:"HH:MM:ss",isoDateTime:"yyyy-mm-dd'T'HH:MM:ss",isoUtcDateTime:"UTC:yyyy-mm-dd'T'HH:MM:ss'Z'"},IG$.dateFormat.i18n={dayNames:["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],monthNames:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec","January","February","March","April","May","June","July","August","September","October","November","December"]},IG$.getString=function(e,t,n){var r=e.substr(t,n);return"0"==r.charAt(0)&&(r=r.substr(1)),parseInt(r)},IG$.getFormattedDate=function(e,t){var n,r,a,i,o,s,l,c=e;return e&&8<e.length&&(n=IG$.getString(e,0,4),r=IG$.getString(e,4,2),a=IG$.getString(e,6,2),s=o=i=0,13<e.length&&(i=IG$.getString(e,8,2),o=IG$.getString(e,10,2),s=IG$.getString(e,12,2)),l=new Date(n,r,a,i,o,s),c=IG$.dateFormat(l,1==t?"mmm d yyyy, TThh:MM":"mmm d yyyy")),c},IG$.lineInterpolate=function(e,t,n){for(var r=Math.abs(e.x-t.x),a=Math.abs(e.y-t.y),i=t.x-e.x,o=t.y-e.y,s=(Math.sqrt(Math.pow(r,2)+Math.pow(a,2)),i/n),l=o/n,c=0,u=0,d=new Array,h=0;h<n;h++)c=e.x+s*h,u=e.y+l*h,d.push({x:c,y:u});return d},IG$.generateUniqueTest=function(e){for(var t,n="",r="0123456789ABCDEFGHIJKLMNOPQRSTUVWXTZabcdefghiklmnopqrstuvwxyz",a=0;a<e;a++)t=Math.floor(Math.random()*r.length),n+=r.substring(t,t+1);return n},IG$.replaceAll=function(e,t,n){for(var r=e;-1!=r.indexOf(t);)r=r.replace(t,n);return r},IG$.selectAll=function(e){var t,n,r=e[0],a=window.bowser;a.msie?((t=document.body.createTextRange()).moveToElementText(r),t.select()):a.mozilla||a.opera?(n=window.getSelection(),(t=document.createRange()).selectNodeContents(r),n.removeAllRanges(),n.addRange(t)):a.safari&&(n=window.getSelection()).setBaseAndExtent(r,0,r,1)},IG$.escapeXMLString=function(e){var t,n,r,a=e;if(a&&"string"==typeof a)for(t=[[/&/g,"&amp;"],[/</g,"&lt;"],[/>/g,"&gt;"],[/"/g,"&quot;"]],r=0;r<t.length;r++)n=t[r],a=a.replace(n[0],n[1]);return a},IG$.clipboardCopy=function(e){window.clipboardData?window.clipboardData.setData("Text",e):(IG$._cboard||(IG$._cboard=$("<textarea style='position:absolute;top:-400px;left:-400px;width:100px;height:100px'></textarea>").appendTo($("body"))),IG$._cboard.val(e),IG$._cboard.focus(),IG$._cboard.select(),document.execCommand("copy"))},IG$.getUniqueKey=function(){var e=new Date;return""+e.getFullYear()+(1+e.getMonth())+e.getDate()+e.getHours()+e.getMinutes()+e.getSeconds()},IG$.validateEmail=function(e){return/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(e)},IG$.majorDateformat=[{name:"YYYY",rname:"YEAR"},{name:"QUARTER"},{name:"MM"},{name:"DD",rname:"DAY"},{name:"WM",rname:"WEEKMONTH"},{name:"WEEK"},{name:"AMPM"},{name:"HH",rname:"HOUR"},{name:"MI",rname:"MINUTE"},{name:"CUSTOM"}],IG$.sqlDateFormat={yyyy:"$DATE(_date_, 'YYYY')",quarter:"$DATE(_date_, 'QUARTER')",mm:"$DATE(_date_, 'MM')",dd:"$DATE(_date_, 'DD')",wm:"$DATE(_date_, 'WM')",week:"$DATE(_date_, 'WEEK')",ampm:"$DATE(_date_, 'AMPM')",hh:"$DATE(_date_, 'HH')",mi:"$DATE(_date_, 'MINUTE')",custom:"$DATE(_date_, _format)"},Date.prototype.format=function(e){for(var t="",n=Date.replaceChars,r=0;r<e.length;r++){var a=e.charAt(r);0<=r-1&&"\\"==e.charAt(r-1)?t+=a:n[a]?t+=n[a].call(this):"\\"!=a&&(t+=a)}return t},Date.replaceChars={shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],longMonths:["January","February","March","April","May","June","July","August","September","October","November","December"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],longDays:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],d:function(){return(this.getDate()<10?"0":"")+this.getDate()},D:function(){return Date.replaceChars.shortDays[this.getDay()]},j:function(){return this.getDate()},l:function(){return Date.replaceChars.longDays[this.getDay()]},N:function(){return this.getDay()+1},S:function(){return this.getDate()%10==1&&11!=this.getDate()?"st":this.getDate()%10==2&&12!=this.getDate()?"nd":this.getDate()%10==3&&13!=this.getDate()?"rd":"th"},w:function(){return this.getDay()},z:function(){var e=new Date(this.getFullYear(),0,1);return Math.ceil((this-e)/864e5)},W:function(){var e=new Date(this.getFullYear(),0,1);return Math.ceil(((this-e)/864e5+e.getDay()+1)/7)},F:function(){return Date.replaceChars.longMonths[this.getMonth()]},m:function(){return(this.getMonth()<9?"0":"")+(this.getMonth()+1)},M:function(){return Date.replaceChars.shortMonths[this.getMonth()]},n:function(){return this.getMonth()+1},t:function(){var e=new Date;return new Date(e.getFullYear(),e.getMonth(),0).getDate()},L:function(){var e=this.getFullYear();return e%400==0||e%100!=0&&e%4==0},o:function(){var e=new Date(this.valueOf());return e.setDate(e.getDate()-(this.getDay()+6)%7+3),e.getFullYear()},Y:function(){return this.getFullYear()},y:function(){return(""+this.getFullYear()).substr(2)},a:function(){return this.getHours()<12?"am":"pm"},A:function(){return this.getHours()<12?"AM":"PM"},B:function(){return Math.floor(1e3*((this.getUTCHours()+1)%24+this.getUTCMinutes()/60+this.getUTCSeconds()/3600)/24)},g:function(){return this.getHours()%12||12},G:function(){return this.getHours()},h:function(){return((this.getHours()%12||12)<10?"0":"")+(this.getHours()%12||12)},H:function(){return(this.getHours()<10?"0":"")+this.getHours()},i:function(){return(this.getMinutes()<10?"0":"")+this.getMinutes()},s:function(){return(this.getSeconds()<10?"0":"")+this.getSeconds()},u:function(){var e=this.getMilliseconds();return(e<10?"00":e<100?"0":"")+e},e:function(){return"Not Yet Supported"},I:function(){return"Not Yet Supported"},O:function(){return(-this.getTimezoneOffset()<0?"-":"+")+(Math.abs(this.getTimezoneOffset()/60)<10?"0":"")+Math.abs(this.getTimezoneOffset()/60)+"00"},P:function(){return(-this.getTimezoneOffset()<0?"-":"+")+(Math.abs(this.getTimezoneOffset()/60)<10?"0":"")+Math.abs(this.getTimezoneOffset()/60)+":00"},T:function(){var e=this.getMonth();this.setMonth(0);var t=this.toTimeString().replace(/^.+ \(?([^\)]+)\)?$/,"$1");return this.setMonth(e),t},Z:function(){return 60*-this.getTimezoneOffset()},c:function(){return this.format("Y-m-d\\TH:i:sP")},r:function(){return this.toString()},U:function(){return this.getTime()/1e3}},IG$.showScheduler=function(e,t,n,r,a,i){new IG$.dlgScheduleList({runner:e,uid:t,itemtype:n,req:r,reportoption:a,opt:i}).show()},IG$.applyFormOptions=function(e,t,n){for(var r,a,i=0;i<t.length;i++)r=this.down("[name="+(t[i].c||t[i].n)+"]"),n?(a=(a=t[i].m?e.settings[t[i].n]:e[t[i].n])==IG$.UNDEFINED||null==a?a||t[i].s:a,r.setValue(a)):(a=t[i].d?r.getValue()||t[i].d:r.getValue(),t[i].m?e.settings[t[i].n]=a:e[t[i].n]=a)},IG$.readSystemConf=function(a){var e=new IG$._rpc$;e.showerror=!1,e.init(null,{ack:"content",payload:{uid:"/SYS_Config/systemconfig"},mbody:{}},null,function(e){var t,n,r=e?e.items:null;if(r)for(IG$._sysconfig={},t=0;t<r.length;t++)n=r[t],IG$._sysconfig[n.name]=n;a&&a.execute()},function(){return a&&a.execute(),!1}),e.send()},IG$.checkValues=function(e,t){for(var n,r,a={b:!0,v:{}},i=0;i<t.length;i++)(n=e.down("[name="+t[i]+"]"))&&(n.clearInvalid(),(r=n.getValue())?a.v[t[i]]=r:(n.markInvalid(IRm$.r1("B_REQ")),a.b=!1));return a},IG$.fillFormValues=function(e,t,n){for(var r,a,i=0;i<n.length;i++)(r=e.down("[name="+n[i]+"]"))&&(a=t[n[i]],r.setValue(a))},IG$.j$ext={_w:function(e,t){var n=e&&e.length?e[0]:null,r=0;return n&&(void 0===t?(r=n.clientWidth||n.offsetWidth||n.innerWidth,r=isNaN(r)?0:r):e.width(t)),r},_h:function(e,t){var n=e&&e.length?e[0]:null,r=0;return n&&(void 0===t?(r=n.offsetHeight||n.innerHeight||n.clientHeight,r=isNaN(r)?0:r):e.height(t)),r}},IG$.checkFields=function(r,e){var a=1;return $.each(e,function(e,t){var n=r.down("[name="+t+"]");n.clearInvalid(),n.getValue()||(n.markInvalid("Required field"),a=0)}),a||IG$.alertmsg(ig$.appname,"Select datasource",null,null,0,""),a},IG$.dateUtil={datePartsRe:/^(?:(\d{1,4})|(\w{3,}))[/\-.\\\s](?:(\d{1,2})|(\w{3,}))[/\-.\\\s](\d{1,4})$/,monthCodes:[{JAN:0,FEB:1,MAR:2,APR:3,MAY:4,JUN:5,JUL:6,AUG:7,SEP:8,OCT:9,NOV:10,DEC:11},{JANUARY:0,FEBRUARY:1,MARCH:2,APRIL:3,MAY:4,JUNE:5,JULY:6,AUGUST:7,SEPTEMBER:8,OCTOBER:9,NOVEMBER:10,DECEMBER:11}],getMonthCode:function(e){for(var t=e.toUpperCase(),n=IG$.dateUtil.monthCodes,r=0;r<n.length;r++)if(void 0!==n[r][t])return n[r][t];return-1},guessDate:function(e){var t,n,r,a,i,o=[],s=[],l=IG$.dateUtil.datePartsRe.exec(e);if(l){if(i=0<l[0].indexOf("-")?"-":"/",l[2]||l[4]){if(l[2]&&l[4])return null;if(l[2]){if(l[5].length<4)return;n=IG$.dateUtil.getMonthCode(l[2]),t=parseInt(l[3]),r=parseInt(l[5]),o=["M","dd"],s=["mon","dd"]}else{if(l[5].length<4)return;t=parseInt(l[1]),n=IG$.dateUtil.getMonthCode(l[4]),r=parseInt(l[5]),o=["dd","M"],s=["dd","mon"]}if(2==l[5].length)r<50?r+=2e3:r<100&&(r+=1900),o.push("y"),s.push("yy");else{if(4!=l[5].length)return;o.push("yy"),s.push("yyyy")}}else s=12<l[1]&&l[1]<32&&l[3]<13?(t=parseInt(l[1]),n=parseInt(l[3])-1,r=parseInt(l[5]),o=["dd","mm","yy"],["dd","mm","yyyy"]):12<l[3]&&l[3]<32&&l[1]<13?(n=parseInt(l[1])-1,t=parseInt(l[3]),r=parseInt(l[5]),o=["mm","dd","yy"],["mm","dd","yyyy"]):(r=parseInt(l[1]),n=parseInt(l[3])-1,t=parseInt(l[5]),o=["yy","mm","dd"],["yyyy","mm","dd"]);if(!(isNaN(r)||isNaN(n)||isNaN(t)||n<0||11<n||t<1||31<t))return a=new Date(r,n,t,0,0,0),{format:o.join(i),placeholder:s.join(i),date:a}}},createDatePicker:function(n,e,r){return IG$.dateUtil.updateDatePicker(e),e.datepicker({monthNames:$.datepicker._defaults.monthNamesShort,buttonImageOnly:!0,constrainInput:!1,changeMonth:!0,changeYear:!0,dateFormat:IG$.calendar_locale.c1format,defaultDate:0,onSelect:function(e,t){r&&r.apply(n,[e,t])}}),e},updateDatePicker:function(e){var t=e;t.on("keydown keyup",function(e){var t,n,r=$(this),a=r.val();if(13==e.keyCode)return e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation(),"keyup"==e.type&&(n=IG$.dateUtil.guessDate(a))&&(r.attr("placeholder",n.placeholder),r.datepicker("option","dateFormat",n.format),r.datepicker("setDate",n.date),(t=$.datepicker._getInst(r[0])).settings.onSelect.apply(r,[a,t])),!1}),t.on("click",function(e){$(this).datepicker("show")})}},IG$.guid=function(){var e,t;if(IG$._guid_lut)e=IG$._guid_lut;else for(e=IG$._guid_lut=[],t=0;t<256;t++)e[t]=(t<16?"0":"")+t.toString(16);var n=4294967295*Math.random()|0,r=4294967295*Math.random()|0,a=4294967295*Math.random()|0,i=4294967295*Math.random()|0;return e[255&n]+e[n>>8&255]+e[n>>16&255]+e[n>>24&255]+"-"+e[255&r]+e[r>>8&255]+"-"+e[r>>16&15|64]+e[r>>24&255]+"-"+e[63&a|128]+e[a>>8&255]+"-"+e[a>>16&255]+e[a>>24&255]+e[255&i]+e[i>>8&255]+e[i>>16&255]+e[i>>24&255]},IG$._inpEdt$=function(e,t){var n,r,a=$("textarea",e.body.dom),i=e.getRawValue(),o=-1,s="["+t+"]";a.focus(),o=0<i.length?((r=-1!=(n=IG$._inpEd$pos(a[0]))&&n?n.start:-1)<0&&(r=i.length),i=i.substring(0,r)+s+i.substring(r),r+s.length):(i=s).length,e.setValue(i),o&&(a.prop("selectionEnd",o),setTimeout(function(){e.focus(),IG$._inpEd$sep(a[0],o,o)},100))},IG$._inpEd$pos=function(e){if("selectionStart"in e&&document.activeElement==e)return{start:e.selectionStart,end:e.selectionEnd};if(e.createTextRange){var t=document.selection.createRange();if(t.parentElement()===e){var n=e.createTextRange();n.moveToBookmark(t.getBookmark());for(var r=0;0<n.compareEndPoints("EndToStart",n);n.moveEnd("character",-1))r++;n.setEndPoint("StartToStart",e.createTextRange());for(var a={start:0,end:r};0<n.compareEndPoints("EndToStart",n);n.moveEnd("character",-1))a.start++,a.end++;return a}}return-1},IG$._inpEd$sep=function(e,t,n){var r;e.setSelectionRange?(e.focus(),e.setSelectionRange(t,n)):e.createTextRange&&((r=e.createTextRange()).collapse(!0),r.moveEnd("character",n),r.moveStart("character",t),r.select())},IG$._ws=function(e){this._init(e)},IG$._ws.prototype={_init:function(e){e.protocol=e.protocol||"ws";var t,n=this,r=e.url,a=e.protocol+"://"+r+"/websocket/endpoint";n._userdetail=e.userdetail;try{(t=n.__ws=new WebSocket(a)).onopen=function(e){n.onopen(e)},t.onmessage=function(e){n.onmessage(e)},t.onclosed=function(e){n.onclosed(e)},t.onclosing=function(e){n.onclosing(e)}}catch(e){}},onopen:function(e){var t=this._userdetail;this.send("_main_","login",{email:t.email,name:t.name,id:t.id})},onmessage:function(e){var t,n,r,a=JSON.parse(e.data);if("_main_"==a.application)switch(a.action){case"login":t="Logged in user <ul><li>"+a.content.name+" ("+a.content.id+")</li><li>"+a.content.email+"</li></ul>";break;case"writecontent":t="Content updated on server! <ul><li>"+a.content.nodepath+"</li></li>By: "+a.content.username+"</li></ul>"}else a.parent_header&&a.parent_header.csession&&((n=IG$._ipt_location)&&n[a.parent_header.csession]&&(r=n[a.parent_header.csession]).applyPython.call(r,a));t&&IG$.alertmsg(ig$.appname,t,null,null,0,"info")},send:function(e,t,n){var r=this.__ws,a=this._userdetail,i={application:e,action:t,sid:a.sid,gid:a.gid,mts:a.mts,token:a.token,id:IG$.guid(),content:n};r.send(JSON.stringify(i))}},IG$._menu_button=function(e,t,n){var r,a,i=this,o=$(document);if(i._menus=t,IG$._menu_btns=IG$._menu_btns||[],IG$._menu_btns.push(i),r="<ul class='dropdown-menu animated",n.btn_styles)for(a=0;a<n.btn_styles.length;a++)r+=" "+n.btn_styles[a];r+=" m-t-xs'></ul>",i._b_html=$(r).appendTo("body"),e.bind("click",function(e){e.stopPropagation(),e.preventDefault(),$.each(IG$._menu_btns,function(e,t){t!=i&&t._g_unbind()}),i._b_html.css(n.menu_position),i._b_html.toggle(),IG$._menu_btn=i,o.bind("click",i._g_unbind)})},IG$._menu_button.prototype={_g_unbind:function(e){var t=$(document),n=(IG$._menu_btns,IG$._menu_btn);n&&(n._b_html.hide(),t.unbind("click",n._g_unbind)),IG$._menu_btn=null},create:function(){var a=this;a._b_html.empty(),$.each(a._menus,function(e,t){var n="<li><a class='btn_button'>"+t.text+"</a></li>",r=$(n).appendTo(a._b_html);t.style&&$.each(t.style,function(e,t){r.addClass(t)}),r.bind("click",function(e){e.preventDefault(),e.stopPropagation(),t.handler&&t.handler.apply(null),a._b_html.hide(),a._g_unbind()})})},setMenus:function(e){this._menus=e,this.create()}};
window.IG$||(window.IG$={}),IG$._wcollab_data={msg_template:{cls:"kiwi-messagelist-item",items:[{cls:"kiwi-messagelist-message kiwi-messagelist-message--modern kiwi-messagelist-message--authorfirst kiwi-messagelist-message-notice",items:[{cls:"kiwi-messagelist-modern-left"},{cls:"kiwi-messagelist-modern-right",items:[{items:[{cls:"kiwi-messagelist-top",items:[{cls:"kiwi-messagelist-nick",items:[{cls:"kiwi-messagelist-nick-prefix",type:"span",innerHtml:"{actor.nick}"}]},{cls:"kiwi-messagelist-time"}]},{cls:"kiwi-messagelist-body",innerHtml:"{message}"}]}]}]}]},workspace_template:{cls:"kiwi-workspace",items:[{cls:"kiwi-container kiwi-container--sidebar-open",items:[{cls:"kiwi-header kiwi-theme-bg",items:[{cls:"kiwi-header-name"},{cls:"kiwi-header-options"}]},{cls:"kiwi-container-content",id:"messagecontainer",items:[{cls:"kiwi-messagelist",id:"messagelist"}]}]},{cls:"kiwi-controlinput kiwi-theme-bg",items:[{cls:"kiwi-controlinput-selfuser"},{cls:"kiwi-controlinput-inner",items:[{cls:"kiwi-controlinput-form",type:"form",items:[{cls:"kiwi-typinguserslist"},{cls:"kiwi-controlinput-input-wrap",items:[{cls:"kiwi-ircinput kiwi-controlinput-input",items:[{cls:"kiwi-ircinput-editor",id:"ircinput",attr:{placeholder:"Send a message...",contenteditable:"true",role:"textbox",spellcheck:"true"}}]}]},{cls:"kiwi-controlinput-send fa fa-paper-plane",type:"button",id:"btn_send"}]}]}]}]},welcome_template:{cls:"kiwi-wrap kiwi-theme-bg",items:[{cls:"kiwi-startup-common kiwi-welcome-simple kiwi-welcome-simple--recaptcha",items:[{cls:"kiwi-startup-common-section kiwi-startup-common-section-connection",items:[{cls:"u-form u-form--big kiwi-welcome-simple-form",type:"form",items:[{type:"h2"},{cls:"u-input-text",items:[{type:"label",attr:{for:"txt_nick"},innerHtml:"{nick}"},{cls:"u-input-text-inputs",items:[{type:"input",id:"txt_nick",cls:"u-input"}]}]},{type:"button",cls:"u-button u-button-primary u-submit kiwi-welcome-simple-start",innerHtml:"{start}",handler:function(e){e.preventDefault(),e.stopPropagation();this._connect_channel()}},{items:[{cls:"fn-sponsor",innerHtml:"{sponsor}"}]}]}]},{cls:"kiwi-startup-common-section kiwi-startup-common-section-info",items:[{cls:"kiwi-startup-common-section-info-content",innerHtml:"{startup}"}]}]}]}},IG$._wcollab=function(e){this._settings=e||{}},IG$._wcollab.prototype={_init:function(){var t=this,e=window.location.href.split("/"),i=t._settings;i.protocol||(i.protocol="https:"==e[0]?"wss":"ws"),i.url||(i.url=e[2]),i.ws_path=i.ws_path||"/websocket/collaborate";var n,s=i.protocol+"://"+i.url+i.ws_path;t._userdetail=i.userdetail;try{(n=t.__ws=new WebSocket(s)).onopen=function(e){t.onopen(e)},n.onmessage=function(e){t.onmessage(e)},n.onclosed=function(e){t.onclosed(e)},n.onclosing=function(e){t.onclosing(e)}}catch(e){}},onopen:function(e){this._send_ws("_call_","login",{})},onmessage:function(e){var t=JSON.parse(e.data),i={};if("_irc_"==t.application){switch(t.action){case"login":t.content.name,t.content.id,t.content.email;break;case"writecontent":t.content.nodepath,t.content.username;break;case"message":$("#main_loading").fadeOut(),i=t.content,t.content.message}this._appendMsg(i)}},_appendMsg:function(e){var n=this,t=($("#messagecontainer"),$("#messagelist")),i=n.theight||0,s=$("<div></div>").appendTo(t),a=n.draw_area(s,IG$._wcollab_data.msg_template,e);e.actor&&e.actor.self&&a.addClass("igc_self_msg"),n.theight=i+=a.height(),t.animate({scrollTop:i},"slow");var o=$("a",s);$.each(o,function(e,t){var i=$(t);i.bind("click",function(e){e.preventDefault(),e.stopPropagation();var t=i.attr("amp_reply");t&&n._send_ws("_call_","message",{message:t,actor:{nick:"me",self:!0}})})})},closeSession:function(){var e=this.__ws;e&&e.close(),this.__ws=null},_send_ws:function(e,t,i){var n=this,s=n.__ws,a=n._channel_info,o={application:e,action:t,instance:a.instance,channel:a.channel,id:n.guid(),content:i};switch(s.send(JSON.stringify(o)),t){case"message":n._appendMsg(i)}},load_app:function(){var e=this,t=e._settings.html;e.rootdiv=t,e.rootdiv.empty(),e._pages={},e._load_page("welcome_template")},_load_page:function(i){var e,t=this,n=t._settings;$.each(t._pages,function(e,t){e==i?t.region.show():t.region.hide()}),t._pages[i]||(e=t.draw_area(t.rootdiv,IG$._wcollab_data[i],n.message),t._pages[i]={pname:i,region:e})},draw_area:function(e,t,i){return this._draw_sub(e,t,i)},setLoading:function(e){$("#loading")[e?"show":"fadeOut"]()},showErrorMessage:function(e,t){var i=$("#popup_error");msg_title=$("#msg_title",i),msg_content=$("#msg_content",i),msg_title.html(e),msg_content.html(t),i.fadeIn()},_send_ajax:function(e,a){var o=this,t=o._settings;e.uniquekey=o._get_uniquekey(),window.Pace&&window.Pace.start(),o.setLoading(!0),$.ajax({url:t.request_url,data:JSON.stringify(e),dataType:"json",type:"POST",async:!0,contentType:"application/json; charset=UTF-8",timeout:6e5,beforeSend:function(e,t){},cache:!1,crossDomain:!1,processData:!0,success:function(e,t,i){window.Pace&&window.Pace.stop();var n,s=(e=e||{errorcode:"0xffff",errormsg:"Server incorrect responding"}).errorcode;o.setLoading(!1),null!=s&&0<s.length?(n=!0,a&&(n=a.func.apply(a.scope||o,[e,!0])),!1!==n&&o.showErrorMessage("Error!",e.errormsg)):a&&a.func.apply(a.scope||o,[e,!1])},error:function(e,t,i){window.Pace&&window.Pace.stop(),o.setLoading(!1);o.showErrorMessage("Error!","Server URL Connection Failed")}})},_get_uniquekey:function(){var e=new Date;return""+e.getFullYear()+(1+e.getMonth())+e.getDate()+e.getHours()+e.getMinutes()+e.getSeconds()},_draw_sub:function(e,t,i){var n,s,a,o=this,c=t.type||"div",r=["<"+c];if(t.cls&&r.push(" class='"+t.cls+"'"),t.name&&r.push(" name='"+t.name+"'"),t.id&&r.push(" id='"+t.id+"'"),t.attr&&$.each(t.attr,function(e,t){r.push(" "+e+"='"+t+"'")}),r.push("></"+c+">"),r=$(r.join("")).appendTo(e),t.handler&&r.bind("click",function(e){t.handler.apply(t.scope||o,[e])}),t.items)$.each(t.items,function(e,t){o._draw_sub(r,t,i)});else if(t.innerHtml)if(i&&"{"==t.innerHtml.charAt(0)&&"}"==t.innerHtml.charAt(t.innerHtml.length-1))if(-1<(n=t.innerHtml.substring(1,t.innerHtml.length-1)).indexOf(".")){for(n=n.split("."),s=i,a=0;a<n.length;a++){if(!s[n[a]]){s=null;break}s=s[n[a]]}r.append(s||"")}else r.append(i[n]||"");else r.append(t.innerHtml);return r},_connect_channel:function(){var i=this,e=$("#txt_nick");if(!e.val())return e.addClass("required_field"),void i.showErrorMessage("Field Input","Nick name is required!");e.removeClass("required_field"),$("#main_loading").show(),i._send_ajax({ack:"collaborate",payload:{cmd:"request_channel"},mbody:i._settings.channel_name?{channel_name:"#"+i._settings.channel_name,nick:e.val()}:{nick:e.val()},_mts_:i._settings._mts_},{func:function(e,t){t||(i._channel_info=e.result,i._load_page("workspace_template"),i._init_ws(),i._init())}})},_init_ws:function(){var t=this,e=t._pages.workspace_template;$("#ircinput",e.region).keydown(function(e){13==e.which&&(e.preventDefault(),e.stopPropagation(),t._send_msg())}),$("#btn_send",e.region).bind("click",function(e){e.preventDefault(),e.stopPropagation(),t._send_msg()})},_send_msg:function(){var e=this._pages.workspace_template,t=$("#ircinput",e.region),i=t.html();i&&(t.empty(),this._send_ws("_call_","message",{message:i,actor:{nick:"me",self:!0}}))},guid:function(){var e,t;if(IG$._guid_lut)e=IG$._guid_lut;else for(e=IG$._guid_lut=[],t=0;t<256;t++)e[t]=(t<16?"0":"")+t.toString(16);var i=4294967295*Math.random()|0,n=4294967295*Math.random()|0,s=4294967295*Math.random()|0,a=4294967295*Math.random()|0;return e[255&i]+e[i>>8&255]+e[i>>16&255]+e[i>>24&255]+"-"+e[255&n]+e[n>>8&255]+"-"+e[n>>16&15|64]+e[n>>24&255]+"-"+e[63&s|128]+e[s>>8&255]+"-"+e[s>>16&255]+e[s>>24&255]+e[255&a]+e[a>>8&255]+e[a>>16&255]+e[a>>24&255]}},$(document).ready(function(){var e=$("#popup_error");$("#btn_close",e).bind("click",function(){e.fadeOut()})});
webix.DataDriver.ildr={toObject:function(e){return e},getRecords:function(e){return e},getDetails:function(e){return e.data},getOptions:function(){return!1},getInfo:function(e){return{size:0,from:0}},child:function(e){return e.children}};var $s={__hh:28};webix.ready(function(){IG$._ready$&&IG$._ready$.length&&($.each(IG$._ready$,function(e,t){t.apply(null)}),IG$._ready$=null)}),$s.ready=function(e){webix.ready(e)},$s.getBlank=function(e){return{view:"layout",autowidth:!0,autoheight:!0,adjust:!0,_mblank:1,borderless:!0,hidden:e,rows:[{borderless:!0,padding:0,template:""}]}},$s.getEvent=function(e){return new $s.event(e)},$s.event=function(e){(this.browserEvent=e)&&void 0!==e.x&&void 0!==e.y&&(this.xy=[e.x,e.y])},$s.event.prototype={getX:function(){return this.browserEvent.pageX},getY:function(){return this.browserEvent.pageY}},$s.extend=IG$.extend,$s.apply=IG$.apply,$s.defaults=IG$.defaults,$s.body=function(e,t){var i=this;i._c=e,i.dom=null,i.is_el=t},$s.body.prototype={updateDom:function(){var e=this,t=e._c.$dx,i=e._c.$ex;(e.is_el&&i||t)&&(e.dom=t.$view)}},$s.object=function(e){return this.base_constructor.apply(this,arguments),this},$s.object.prototype={__mbase:1,base_constructor:function(){var e,t=this,i=Array.prototype.slice.call(arguments),o=("dropzone"==t.xtype&&1<i.length&&i[0]&&(e=i[0],i.splice(0,1),i[0].targetEl=e),i[0]);o=o||{},IG$.apply(t,o,null,!0),t._iconfig=o,t.initComponent.apply(t,i)},initComponent:function(){var i=this,o=i.listeners;i._listeners=i._listeners||{},o&&$.each(o,function(e,t){i.on.call(i,e,t,o.scope)})},on:function(e,t,i){var o,n=this;n._listeners=n._listeners||{},((o=n._listeners)[e]=o[e]||[]).push({f:t,scope:i||n})},un:function(e){var t=this;t._listeners=t._listeners||{},t._listeners[e]=[]},chlidProcessEvents:function(){var e=this,i=Array.prototype.slice.call(arguments),o=i[i.length-1],t=o.name,n=e._listeners;switch(t){case"resize":var a=e.$ex.$width,s=e.$ex.$height,l=e.$width,r=e.$height;a==l&&s==r||(n&&n[t]&&$.each(n[t],function(e,t){i.splice(0,1,t.scope),t.f.apply(t.scope,i)}),e._dockedItems&&e._dockedItems.length&&$.each(e._dockedItems,function(e,t){t.$ex&&t.chlidProcessEvents.call(t,t,t.$ex.$width,t.$ex.height,o)}),e._items&&e._items.length&&$.each(e._items,function(e,t){t.$ex&&t.chlidProcessEvents.call(t,t,t.$ex.$width,t.$ex.$height,o)})),e.$width=a,e.$height=s}},processEvents:function(){var o,e,t=this,n=Array.prototype.slice.call(arguments),i=n[n.length-1],a=i.name,s=t._listeners;if(!i._stopPropagation)return"afterrender"!=a&&"resize"!=a||(i._stopPropagation=!0,"afterrender"==a&&t.store&&t.store._refreshGrid.call(t.store)),s&&s[a]&&$.each(s[a],function(e,t){var i=t.f.apply(t.scope,n);void 0!==i&&(o=i)}),!1!==o&&t.ownerCt&&void 0!==(e=t.processEvents.apply(t.ownerCt,n))&&(o=e),o},suspendLayouts:function(){},resumeLayouts:function(){},suspendEvents:function(){},resumeEvents:function(){},fireEvent:function(){var e=Array.prototype.slice.call(arguments),t=e[0];return e.splice(0,1),e.push(this._createEvent.call(this,t)),this.processEvents.apply(this,e)},_createEvent:function(e,t){var i=t||{};return $s.apply(i,{name:e,_stopPropagation:!1,_preventDefault:!1,owner:this,getTarget:function(){return t.srcElement||t.target||t.currentTarget},stopEvent:function(){this.stopPropagation(),this.preventDefault()}},null,!0),i},addEvents:function(){}},$s.selModel=function(e){this.selected={items:[],map:{},length:0},$s.apply(this,e,null,!0),this.checkSelector=".x-grid-cell"==this.checkSelector?"cell":this.checkSelector},$s.selModel.prototype={select:function(e,t){var i,o,n=this.ownerCt,a=this.selected,s="MULTI"==this.mode;if("number"==typeof e&&(e=n.store&&n.store.data.items[e]||null),e){if(i=e.data,e.data.checked=e.data.selected=!s||(void 0===t||t),s){if(a.map[i.id]&&!i.selected){for(o=a.map[i.id]=0;o<a.items.length;o++)if(a.items[o].data.id==i.id){a.items.splice(o,1);break}}else!a.map[i.id]&&i.selected&&(a.map[i.id]=1,a.items.push(e));n.$dx&&n.$dx.updateItem(i.id,e.data)}else a.length&&a.map[i.id]&&!i.selected?(delete a.map[i.id],a.items.splice(0,a.items.length)):i.selected&&!a.map[i.id]&&(a.length&&(a.items[0].set("selected",!1),a.items[0].set("checked",!1),delete a.map[a.items[0].data.id],a.items.splice(0,a.items.length)),a.items.push(e),a[0]=e,a.map[i.id]=1,n.$dx&&(n.$dx.select&&n.$dx.select(i.id),n.$dx.updateItem(i.id,e.data)));a.length=a.items.length,n.fireEvent.call(n,"selectionchange",n,a)}},clear:function(){var e,t,i=this.ownerCt,o=this.selected;for(this.$f=null,o.map={},t=0;t<o.length;t++)(e=o.items[t].data).selected=!1,e.checked=!1,i.$dx&&i.$dx.getItem(e.id)&&i.$dx.updateItem(e.id,e);o.items=[],o.length=0},isFocused:function(e){return e.data.id==this.$f},getSelection:function(){return this.selected.items},$validate:function(){for(var e,t=this.selected.items.length-1;0<=t;t--)e=this.selected.items[t],this.selected.map[e.data.id]||this.selected.items.splice(t,1);this.selected.length=this.selected.items.length}},$s.record=function(e,t,i){var o=this;o.store=i,o.data=e,o.__rec=1,o.firstChild=null,o.childNodes=[]},$s.record.prototype={get:function(e){return this.$r&&this.$r[e]||this.data[e]},set:function(e,t){var i=this.data,o=this.store.grid,n=o.$dx;i&&(i[e]=t,"combobox"==o.xtype?(this.$r&&(this.$r[e]=t),o.displayField):(record=n.getItem(i.id),record&&(record[e]=t,n.updateItem(i.id,record.data))))},refresh:function(){var e=this.data;this.store.grid.$dx.updateItem(e.id,e)},updatePull:function(e){e[this.data.id]=this},expand:function(i,o,n){var e=this,t=e.store.grid.$dx,a=o?new IG$.callBackObj(n,o):0,s=e.data.$count,l=1;0==e.data.$count&&(e.data.$count=-1),e.store._did!=e.data.id&&(e.store._did=e.data.id,t.isBranchOpen(e.data.id)&&(s<1?t.close(e.data.id):(l=0,a&&a.execute())),l&&(e.store.__cb=a,t.open(e.data.id,!0)),i&&e.childNodes&&e.childNodes.length&&$.each(e.childNodes,function(e,t){t.childNodes&&t.childNodes.length&&t.expand(i,o,n)}),e.store._did=null)},_doexp:function(){var e=this,t=e,i=0,o=e.data.id,n=e.store.grid;(-1===t.$count||1==t.$count&&e.childNodes[0].data._loading)&&(i=1),i&&(n.store&&(n.store._clearChild(e),delete t._loading,!1!==n.fireEvent.call(n,"beforeitemexpand",e)&&n.store.proxy&&"ajax"==n.store.proxy.type&&n.store._loadNodeData.call(n.store,e)),t.webix_kids=!1,n.updateItem(o,t.data))},collapse:function(){this.store.grid.$dx.close(this.data.id)},isExpanded:function(){return this.store.grid.$dx.isBranchOpen(this.data.id)},isRoot:function(){return this.root||!1},isLeaf:function(){return this.data.leaf},removeAll:function(){var e=this.data,i=this.store.grid.$dx;this.store.grid.$dx.getItem(e.id);$.each(this.childNodes,function(e,t){i.remove(t.data.id)}),this.childNodes=[],this.firstChild=this.childNodes[0]},insertChild:function(e,t){var o=this,n=[];"object"==typeof t&&t.length?$.each(t,function(e,t){var i=null,i=t.__rec?t:new $s.record(t,null,o.store);n.push(i)}):t.__rec?(t.store=o.store,n.push(t)):(r=new $s.record(t,null,o.store),n.push(r)),o.store._insertNode.call(o.store,n,o,e),o.firstChild=o.childNodes[0],o.data.leaf=!1},appendChild:function(e){var t,o=this,n=[];o.childNodes&&o.childNodes[0]&&o.childNodes[0].data._loading&&o.removeChild(o.childNodes[0]),"object"==typeof e&&e.length?$.each(e,function(e,t){var i=null,i=t.__rec?t:new $s.record(t,null,o.store);n.push(i)}):e.__rec?(e.store=o.store,n.push(e)):(t=new $s.record(e,null,o.store),n.push(t)),o.store._appendNode.call(o.store,n,o),o.firstChild=o.childNodes[0],o.data.leaf=!1},indexOf:function(e){var t,i=-1;if(this.childNodes&&this.childNodes.length)for(t=0;t<this.childNodes.length;t++)if(this.childNodes[t].data.id==e.data.id){i=t;break}return i},removeChild:function(e){var t,i=this.store.grid.$dx,o=this.childNodes;for(i.remove(e.data.id),t=0;t<o.length;t++)if(o[t].data.id==e.data.id){o.splice(t,1);break}this.firstChild=o[0]},hasChildNodes:function(){return!!this.store.grid.$dx.getFirstChildId(this.get("id"))},$init:function(){var e=this.data;delete e.id,delete e.selected}},$s.dstore=$s.extend($s.object,{initComponent:function(){var e=this,t=e.data;e.$data=t,e.data={items:[],length:0},e.model=$s.record,$s.dstore.superclass.initComponent.call(e)},_record:function(e){return new $s.record(e,null,this)},loadData:function(e){var n,i,t,a=this,o=a.grid,s=[];a._pull={},e&&("combobox"==o.xtype?(n=o.displayField,o.valueField,$.each(e,function(e,t){var i=IG$.copyObject(t),o=a._record(i);o.$r=IG$.copyObject(t),o.data.value=i[n],delete o.data.label,s.push(o)})):$.each(e,function(e,t){var i=a._record(t);s.push(i)})),o&&o.$dx?(t=o.$dx,"combobox"==o.xtype?(i=[],$.each(s,function(e,t){i.push(t.data)}),t.define("options",i),t.refresh()):(t.clearAll(),o.selModel.clear(),t.parse(s,"ildr")),a._$d=null):a._$d=e,$.each(s,function(e,t){a._pull[t.data.id]=t,"combobox"!=o.xtype&&t.data.selected&&(o.selModel.selected.map[t.data.id]=1,o.selModel.selected.items.push(t),o.selModel.selected.length++)}),a.data={items:s,length:s.length}},add:function(e){this.grid;return this.insert(this.data.items.length,e)},insert:function(o,e){var t,i,n=this;return this._pull=this._pull||{},!e.__rec&&"object"==typeof e&&e.length?$.each(e,function(e,t){var i=t.__rec?t:n._record(t);i.$init(),(i.store=n).grid.$dx.add(i.data,o+e),n.data.items.splice(o+e,0,i),n._pull[i.data.id]=i}):(e.__rec?(delete(i=IG$.copyObject(e.data)).id,delete i.checked,delete i.selected):i=e,(t=n._record(i)).$init(),(t.store=n).grid.$dx.add(t.data,o),n.data.items.splice(o,0,t),n._pull[t.data.id]=t),n.$validate(),t},indexOf:function(e){return this.grid.$dx.getIndexById(e.data.id)},_$filters:[],filter:function(){var e,t=arguments;2==t.length&&(e={dataIndex:t[0],operator:"=",value:t[1]},this.addFilter(e))},removeFilter:function(e){for(var t,i,o,n=0;n<this._$filters.length;n++){if(o=0,(i=this._$filters[n]).operator==e.operator)if("string"==typeof i.dataIndex&&i.dataIndex==e.dataIndex)o=1;else if("object"==typeof i.dataIndex&&"object"==typeof e.dataIndex&&i.dataIndex.length==e.dataIndex.length)for(o=1,t=0;t<i.dataIndex.length;t++)if(i.dataIndex[t]!=e.dataIndex[t]){o=0;break}if(o){this._$filters.splice(n,1);break}}this._updateFilter()},addFilter:function(e){this.removeFilter(e),this._$filters.push(e),this._updateFilter()},clearFilter:function(e){this.grid.$dx.filter()},_updateFilter:function(){var d=this;d.grid.$dx.filter(function(e){var t,i,o,n,a,s,l,r=!1;if(!d._$filters.length)return!0;for(t=0;t<d._$filters.length;t++){for(s="string"==typeof(o=d._$filters[t]).dataIndex?[o.dataIndex]:o.dataIndex,l=0,a=o.value||"",i=0;i<s.length;i++){switch(n=e[s[i]],o.operator){case"=":l=n==o.value;break;case"like":l=!(!n||"string"!=typeof n)&&-1<n.toLowerCase().indexOf(a.toLowerCase())}if(l)break}if(!(r=l))break}return r})},remove:function(e){for(var t=this.data.items,i=this.grid,o=0;o<t.length;o++)if(t[o].data.id==e.data.id){t.splice(o,1);break}"combobox"==i.xtype?i.$dx.getList().remove(e.data.id):i.$dx.remove(e.data.id),delete this._pull[e.data.id],delete i.getSelectionModel().selected.map[e.data.id],i.$validSel(),this.$validate()},removeAt:function(e){var t=this.data.items[e];t&&this.remove(t)},getCount:function(){return this.data.items.length},getNode:function(e){var t=this.data.items[e];return this.grid.$dx.getItemNode(t.data.id)},getAt:function(e){var t=this.grid.$dx.getIdByIndex(e);return this._pull[t]},getRootNode:function(){return this.root},setRootNode:function(e){var t=this;return t.root=t._record(e),t.root.webix_kids=!0,t.root.data.webix_kids=!0,t.root.root=t.root.data.root=!0,t.root.data.id=0,t.root.data.iconcls&&(t.root.data.icon=" "+t.root.data.iconcls),t._pull={},t._refreshGrid(),t.root},_refreshGrid:function(){var e,t=this,i=t.grid;i&&i.$dx&&t.root?((e=t.grid.$dx).clearAll(),e.parse([t.root],"ildr"),t.root.updatePull(t._pull),t.root.data.children&&t.root.data.children.length&&t._buildChild(t.root.data.children,t.root)):i&&t._$d&&t.loadData(t._$d),t.$validate()},_buildChild:function(e,t){var o=this,n=[];$.each(e,function(e,t){var i=new $s.record(t,null,o);n.push(i)}),delete t.children,o._appendNode(n,t)},clearData:function(){this.loadData([])},removeAll:function(){this.clearData()},_loadNodeData:function(n){var e,t=this,i=t.proxy,o=t.fireEvent.call(t,"beforeload",t,{node:n}),a=i.extraParams;0!=o&&((e=new IG$._rpc$).init(t,{ack:a.ack,payload:a.payload,mbody:a.mbody},t,function(e){var t,i=this,o={node:n,setCompleted:function(){},setSuccessful:function(){}};i.proxy.processResponse.call(i,!0,o,null,e),t=o.resultSet.records,i._appendNode(t,n),i.fireEvent.call(i,"itemexpand",n,{node:n}),i.__cb&&(i.__cb.execute(),i.__cb=null)},!1),e.send())},_clearChild:function(e){var i=this,o=i.grid.$dx,t=(e.data,e.childNodes);$.each(t,function(e,t){o.remove(t.data.id),delete i._pull[t.data.id]}),e.childNodes=[],e.firstChild=null},_appendNode:function(e,t){var i,o,n,a,s=this,l=s.grid.$dx;for(delete t.webix_kids,delete t.data.webix_kids,t.childNodes=t.childNodes||[],o=e.length-1;0<=o;o--){if(e[o].store||(e[o].store=s),!e[o].store)throw"store bind error";e[o].parentNode=t,(e[o].data.iconcls||e[o].data.iconCls)&&(e[o].data.icon=" "+(e[o].data.iconcls||e[o].data.iconCls)),e[o].data.expanded&&(s.grid&&(a=s.grid.fireEvent.call(s.grid,"beforeitemexpand",s.root)),!1!==a&&(e[o].data.open=!0)),l.add(e[o].data,0,t.data.id),e[o].data.children?(n=[],$.each(e[o].data.children,function(e,t){var i=new $s.record(t,null,s);n.push(i)}),delete e[o].data.children,s._appendNode(n,e[o])):0==e[o].data.leaf&&(i=new $s.record({is_loading:1}),e[o].childNodes=[i],i.data._loading=1,l.add(e[o].childNodes[0].data,0,e[o].data.id)),s._pull[e[o].data.id]=e[o],t.childNodes.splice(0,0,e[o]),e[o].data.open&&!1!==a&&s.grid&&s.grid.fireEvent.call(s.grid,"itemexpand",e[o],{node:t})}t.firstChild=t.childNodes[0],t.data.leaf=!1},_insertNode:function(e,t,i){var o,n,a,s=this,l=s.grid.$dx,r=0;for(delete t.webix_kids,delete t.data.webix_kids,t.childNodes=t.childNodes||[],n=e.length-1;0<=n;n--){if(e[n].store||(e[n].store=s),!e[n].store)throw"store bind error";e[n].parentNode=t,(e[n].data.iconcls||e[n].data.iconCls)&&(e[n].data.icon=" "+(e[n].data.iconcls||e[n].data.iconCls)),l.add(e[n].data,i+r++,t.data.id),e[n].data.children?(a=[],$.each(e[n].data.children,function(e,t){var i=new $s.record(t,null,s);a.push(i)}),delete e[n].data.children,s._appendNode(a,e[n])):0==e[n].data.leaf&&(o=new $s.record({is_loading:1}),e[n].childNodes=[o],o.data._loading=1,l.add(e[n].childNodes[0].data,0,e[n].data.id)),s._pull[e[n].data.id]=e[n],t.childNodes.splice(i,0,e[n])}t.firstChild=t.childNodes[0],t.data.leaf=!1},getReader:function(){var e=this;return e.__reader||(e.__reader=new $s.reader(e.proxy.reader),e.__reader.model=$s.record),e.__reader},extractResponseData:function(e){return{responseXML:e}},afterRequest:function(e,t){},filterBy:function(i){var o=this;o.grid.$dx.filter(function(e){var t=o._pull[e.id];return i.apply(o,[t])})},$validate:function(){this.grid;var e=this.data;e.length=e.items.length}}),$s.column=$s.extend($s.object,{show:function(){this.setVisible(!0)},hide:function(){this.setVisible(!1)},setVisible:function(e){var t,i=this.$g.$dx;i&&(-1==(t=i.getColumnIndex(this.$col.id))&&e||-1<t&&!e)&&i[e?"showColumn":"hideColumn"](this.$col.id)},setText:function(e){}}),$s.tabbutton=$s.extend($s.object,{show:function(){this.setVisible(!0)},hide:function(){this.setVisible(!1)},setVisible:function(e){var t=this.tabbar.$mt;t&&t[e?"showOption":"hideOption"](this.tabid)}}),$s.base=$s.extend($s.object,{initComponent:function(){var e,t,i=this;i.body=new $s.body(i),i.el=new $s.body(i,1),i.createComponent(),$s.base.superclass.initComponent.call(i),i.renderTo&&((e=i.updateViewProp(i)).container=i.renderTo&&i.renderTo.length&&!i.renderTo.tagName?i.renderTo[0]:i.renderTo,e.__container=i.renderTo,(t=webix.ui(e))&&"string"==typeof t&&(t=$$(t)),i._postAddView(i,t,null,!0,null,0,0,0,null))},getView:function(){return this},refresh:function(){},getNode:function(e){return this.store.getNode(e)},addDock:function(e){var t=this["$dc"+("top"==e.dock?1:2)];this.add(e,1,t)},addMenu:function(e,t){e.__mbase||(e=this.updateComponentClass(e)),t&&this._dMenu(e)},_dMenu:function(e){var t=e._createMenuUI.call(e,1);"string"==typeof t&&(t=$$(t)),t&&(this.$pm={$dx:t,comp:e})},callParent:function(){var e=this.callParent.caller;return e.$owner=e.$owner||this.constructor(),e&&(e.$previous||(e=e.$owner?e:e.caller)&&e.$owner.superclass[e.$name]).apply(this,args||noArgs)},onAdd:function(e,t){var i,o,n,a,s=this,l=s.getTabBar();if(l)l.validate();else if("tabpanel"==s.xtype&&(o=s.$mt)){for(s.$tid=s.$tid||0,a=s._items,i=0;i<a.length;i++)a[i].tab||(n={id:s.$tid++,name:a[i].title,value:"<span>"+IG$.hEE(a[i].title)+"</span>",close:a[i].closable,$c:a[i]},a[i].iconCls&&(n.icon=" icon-c-fix "+a[i].iconCls),a[i].tab=new $s.tabbutton({tabbar:s,ownerCt:a[i],tabid:n.id}),o.addOption(n,0==i));o.refresh()}},onRemove:function(e,t){this.remove(e,t)},add:function(e,i,o){var n=this;if("object"!=typeof e||!e.length){var t=o||n.$dx;return(e.ownerCt=n).fireEvent.call(n,"beforeadd",n,e),e.__mbase||(e=n.updateComponentClass(e)),i?n._dockedItems.push(e):n._items.push(e),e.parent&&"toolbar"==e.parent.xtype&&e.parent.show(!0),n.items.length=n._items.length,o?(o.show(),n.addViewItem(e,n,1,o)):t&&n.addViewItem(e,n),e}$.each(e,function(e,t){n.add.call(n,t,i,o)})},remove:function(e,t){var i,o=this,n=o._items;if(!1!==o.fireEvent.call(o,"beforeclose",o)){for(i=0;i<n.length;i++)if(n[i]==e){n.splice(i,1);break}o.items.length=n.length,!1!==t&&"tabpanel"==o.xtype&&o.$dx?o.$dx.removeView(e.$sx||e.$ex):!1!==t&&o.$dx&&e.$ex?o.$dx.removeView(e.$ex):e.hide()}},removeAll:function(){for(var e=this._items,t=e.length-1;0<=t;t--)e[t].hide(),e.splice(t,1);this.items.length=e.length},getValue:function(){var e=this,t=e.xtype,i="radiogroup"==t?e.getRadioGroupValue():"checkboxgroup"==t?e.getCheckGroupValue():"combobox"==t?e.getComboValue():"htmleditor"==t?e.sview[1].getValue():"checkbox"==t?(i=!!e.$dx&&e.$dx.getValue(),!(e.inputValue!==i&&!i)):e.$dx&&e.$dx.getValue?e.$dx.getValue():null;return e._fasl&&(i=IG$.hEE3(i)),i},getGroupValue:function(){var e;return"radiogroup"==this.xtype&&(e=(e=this.getRadioGroupValue())&&e[this.$options[0].name]),e},getHTMLValue:function(){var e=null;return"htmleditor"==this.xtype&&(e=this.sview[2].getValue()),e},getComboValue:function(){for(var e,t,i=this.$dx.getValue(),o=0;o<this.store.data.items.length;o++)if((t=this.store.data.items[o]).data.value==i||t.data.id==i){e=t.$r[this.valueField];break}return e},getRadioGroupValue:function(e){for(var t=this.$dx,i=e||t.getValue(),o=this.$options,e={},n=0;n<o.length;n++)if(o[n].value==i){e[o[n].name]=o[n].inputValue;break}return e},getCheckGroupValue:function(){for(var e,t,i={},o=this._items,n=0;n<o.length;n++)t=o[n].name,e=o[n].inputValue,o[n].$dx.getValue()&&(i[t]=i[t]||[],i[t].push(e));return i},setReadOnly:function(e){this.$dx[e?"disable":"enable"]()},setValue:function(e){var t=this;t.$dx&&(t._fasl&&(e=IG$.hEE2(e)),"combobox"==t.xtype?t.setComboValue(e):"checkboxgroup"==t.xtype?t.setCheckGroupValue(e):"radiogroup"==t.xtype?t.setRadioGroupValue(e):"htmleditor"==t.xtype?t.sview[1].setValue(e):("checkbox"==t.xtype?t.inputValue?t.$dx.setValue(t.inputValue==e||!0===e):t.$dx.setValue(e):t.$dx.setValue(void 0===e||null==e?"":e),t.$dx.refresh()))},setHTMLValue:function(e){var t=null;return"htmleditor"==this.xtype&&(t=this.sview[2].setValue(e)),t},setComboValue:function(e){for(var t,i,o=this,n=o.valueField,a=0;a<o.store.data.items.length;a++)if((i=o.store.data.items[a]).data.value==e||i.$r[n]==e){t=i;break}t&&(o.$dx.setValue(t.get("id")),o.$dx.refresh())},setCheckGroupValue:function(e){for(var t,i,o,n,a,s=this._items,l=0;l<s.length;l++){if(a=s[l].name,o=s[l].inputValue,i=!1,n=e[a])for(t=0;t<n.length;t++)if(n[t]==o){i=!0;break}s[l].$dx.setValue(i)}},setRadioGroupValue:function(e){for(var t,i,o,n,a=this.$options,s=0;s<a.length;s++)if(n=a[s].name,i=a[s].inputValue,t=!1,o=e[n],(e==i||o&&o==i)&&(t=!0),t){this.$dx.setValue(a[s].value),this.$dx.refresh();break}},getStore:function(){return this.store},getSelectionModel:function(){return this.selModel||(this.selModel=new $s.selModel({})),(this.selModel.ownerCt=this).selModel},$validSel:function(){var t=this;setTimeout(function(){var e=t.getSelectionModel.call(t);e.$validate.call(e)},0)},select:function(e){var t=this.$dx;this.store;t&&("combobox"==this.xtype?this.setComboValue(e):e.get&&t.select(e.get("id")))},clearInvalid:function(){var e=this.$dx;$(e.$view).removeClass("igc-invalid")},markInvalid:function(e){var t=this.$dx;$(t.$view).addClass("igc-invalid")},setInvalid:function(e){this.markInvalid(e)},isvalid:function(){var e=this,i=!0;return!e.required&&0!=e.allowBlank||(e.clearInvalid(),e.getValue()||(i=!1,e.markInvalid())),1==i&&e.items&&e.items.items&&$.each(e.items.items,function(e,t){t.isvalid()||(i=!1)}),i},setTitle:function(e){var t,i,o,n=this;"window"==n.xtype||"popup"==n.xtype?(t=(o=n.$ex.getHead()).getChildViews())&&t.length&&t[0].setHTML(e):n.ownerCt&&n.ownerCt.tabBar?(n.title=e,n.ownerCt.tabBar.validate()):n.$ex&&(n.title=e,(i=n.$ex.getChildViews())&&1<i.length&&(o=i[0].getChildViews())&&o.length&&"label"==o[0].config.view&&(o[0].show(),o[0].setValue(e),o[0].refresh()))},hideTitle:function(){this.$ex&&(views=this.$ex.getChildViews(),views&&1<views.length&&(h=views[0].getChildViews(),h&&h.length&&"label"==h[0].config.view&&(h[0].hide(),h[0].refresh())))},getHeader:function(){var e,t,i=this;return"window"==i.xtype||"popup"==i.xtype?t=i.$ex.getHead():i.$ex&&(e=i.$ex.getChildViews())&&1<e.length&&(t=e[0]),t},setFieldLabel:function(e){var t=this.$dx;"fieldcontainer"==this.xtype||t&&t.define&&t.refresh&&(t.define("label",e),t.refresh())},setText:function(e){var t=this.$dx;t&&("button"==this.xtype?(t.define("label",e),this.$w?t.refresh():(t.define("autowidth",!0),t.refresh(),t.resize())):(t.setValue(e),t.refresh(),t.resize()))},focus:function(){var e=this.$dx;e&&e.focus&&e.focus()},$define:function(e,t){var i=this.$dx;i&&i.define&&(i.define(e,t),i.refresh())},toggle:function(){},setTooltip:function(e){},setLoading:function(e){IG$.v$pnl.prototype.setLoading.call(this,e)},updateComponentClass:function(i){var e=this;return"-"==i||" "==i?i={xtype:"split"}:"->"==i&&(i={xtype:"spacer"}),i.defaults&&i.items&&$.each(i.items,function(e,t){$s.defaults(t,i.defaults,null,!1)}),i.xtype||(e.defaultType?i.xtype=e.defaultType:e.defaults&&e.defaults.xtype?i.xtype=e.defaults.xtype:i.autoLoad&&i.autoLoad.url?i.xtype="html":i.ownerCt&&"toolbar"==i.ownerCt.xtype?i.xtype="button":i.ownerCt&&"menu"==i.ownerCt.xtype?i.xtype="menuitem":i.ownerCt&&"checkboxgroup"==i.ownerCt.xtype&&(i.xtype="checkbox")),i.xtype=i.xtype||"container","grid"==i.xtype?i.xtype="gridpanel":"form"==i.xtype&&(i.xtype="formpanel"),(i=e.createClassComp(i)).ownerCt=e,i},createComponent:function(){var o,e,t,n=this,i=n.items,a=[];if(n._items=[],n.items={items:n._items},n._dockedItems=[],n.tbar&&("object"==typeof n.tbar&&n.tbar.length?a.push({xtype:"toolbar",dock:"top",border:0,layout:{type:"hbox"},items:n.tbar}):($s.apply(n.tbar,{xtype:"toolbar",border:0,layout:{type:"hbox"},dock:"top"},null,!0),a.push(n.tbar))),n.bbar&&("object"==typeof n.bbar&&n.bbar.length?a.push({xtype:"toolbar",dock:"bottom",items:n.bbar}):($s.apply(n.bbar,{xtype:"toolbar",dock:"botton"},null,!0),a.push(n.bbar))),n.buttons&&n.buttons.length){for(var s=0,l=0;l<n.buttons.length;l++)if("->"==n.buttons[l]){s=1;break}s||n.buttons.splice(0,0,"->");var r={xtype:"toolbar",dock:"bottom",items:n.buttons};a.push(r)}if(n.dockedItems&&n.dockedItems.length)for(l=0;l<n.dockedItems.length;l++)n.dockedItems[l]&&(n.dockedItems[l].layout={type:"hbox"},a.push(n.dockedItems[l]));switch(n.dockedItems={items:n._dockedItems},n.layout&&"string"==typeof n.layout?n.layout={type:n.layout}:n.layout||("checkboxgroup"==n.xtype?n.layout={type:n.vertical?"vbox":"hbox"}:n.layout={type:"fit"}),n.store&&(n.store.__mbase||(n._store=n.store,n._store.xtype=n._store.xtype||"store",(n._store.grid=n).store=n.createClassComp(n._store)),n.store.root?n.store.setRootNode(n.store.root):n.root&&n.store.setRootNode(n.root)),n.html&&(n.xtype="html"),n.xtype){case"viewport":e={type:"line",padding:0,margin:0,autowidth:!0,autoheight:!0},n.id&&document.getElementById(n.id)&&(e.container=n.id);var d=$(document);d.width(),d.height();webix.ui.fullScreen(),e=n.updateViewProp(n,e),o=webix.ui(e),webix.event(window,"resize",function(){var e=$(document),t=e.width(),i=e.height();o.adjust(),n.chlidProcessEvents.call(n,n,t,i,n.$width,n.$height,{name:"resize",_stopPropagation:!1,_preventDefault:!1,owner:n,down:!0})}),o.adjust(),n.$ex=o,n.updateViewElement(o)}if(i&&i.length&&$.each(i,function(e,t){n.add.call(n,t)}),"window"!=n.xtype&&"popup"!=n.xtype&&"panel"!=n.xtype&&"gridpanel"!=n.xtype&&"treepanel"!=n.xtype||!a.length||$.each(a,function(e,t){n.addDock.call(n,t)}),(n.ownerCt&&n.ownerCt.$dx&&e||"window"==n.xtype||"popup"==n.xtype)&&n.addViewItem(n,n.ownerCt),("gridpanel"==n.xtype||"treepanel"==n.xtype||"dataview"==n.xtype)&&(t=n.selModel,(t=n.selModel=t?new $s.selModel(t):n.getSelectionModel()).selType=t.selType||n.selType,t.ownerCt=n,!t.mode)){if(n.store&&n.store.fields&&n.store.fields.length)for(l=0;l<n.store.fields.length;l++)if("selected"==n.store.fields[l]){t.mode="MULTI";break}if(!t.mode)switch(t.selType){case"checkboxmodel":t.mode="MULTI";break;case"treemodel":t.mode="SINGLE"}}n.menu&&("menuitem"!=n.xtype?n.addMenu.call(n,n.menu,0):(n.submenu=[],"object"==typeof n.menu&&"menu"==n.menu.xtype?n.menu=n.updateComponentClass(n.menu):n.menu=n.updateComponentClass({xtype:"menu",items:n.menu})))},createClassComp:function(e){var t=$s[e.xtype];if(!t)throw"xtype error : "+e.xtype;return e=new t(e)},setPosition:function(e,t){var i=this.$ex;i&&(i.setPosition?i.setPosition(e,t):(i.define("top",t),i.define("left",e),i.refresh())),this.fireEvent.call(this,"move",this,e,t,null)},isVisible:function(){return!(!this.$ex||!this.$ex.isVisible)&&this.$ex.isVisible()},setVisible:function(e,t){var i,o,n,a=this,s=e?"show":"hide";a.$ex&&a.$ex[s](),a.$sx&&a.$sx[s](),a.hidden=!e,!(i=a.ownerCt)||"menu"!=i.xtype&&"menuitem"!=i.xtype||!(n=i.$px)||(o=n.getMenu(a._menukey))&&o[m.hidden?"hide":"show"](),i&&i.$ex&&i._vsize.call(i,0,0,1)},expand:function(){"fieldset"==this.xtype&&this.checkboxCmp&&this.checkboxCmp.setValue(!0)},collapse:function(){"fieldset"==this.xtype&&this.checkboxCmp&&this.checkboxCmp.setValue(!1)},setDisabled:function(e){this.$dx&&this.$dx[e?"disable":"enable"]()},setEnabled:function(e){this.$dx&&this.$dx[e?"enable":"disable"]()},show:function(e,a){var s=this;"window"==s.xtype||"popup"==s.xtype?setTimeout(function(){var e,t,i,o,n;s.$ex.show(),a&&(e=s.$ex,t=a.x,i=a.y,o=a.ctrl?$(a.ctrl):null,n=s.width,dh=s.height,cw,ch,offset,tw,th,o&&(offset=o.offset(),cw=o.width(),ch=o.height(),tw=$(document).width(),th=$(document).height(),t=offset.left+cw+n<tw?offset.left+cw:0<offset.left-n?offset.left-n:(tw-cw)/2,i=offset.top+ch+dh<th?offset.top+ch:0<offset.top-dh?offset.top-dh:(th-ch)/2),e.setPosition(t,i)),s.rendered=1,s.body.updateDom.call(s.body),s.el.updateDom.call(s.el),s.fireEvent.call(s,"afterrender",s),"window"==s.xtype&&s._setFocus()},10):s.setVisible(!0,e)},_setFocus:function(){var e,t;if(this._items&&this._items.length)for(e=0;e<this._items.length;e++)if(!(t=this._items[e]).hidden){if("textfield"==t.xtype||"combobox"==t.xtype||"textarea"==t.xtype)return t.focus.call(t),!0;if(("panel"==t.xtype||"container"==t.xtype||"form"==t.xtype||"tabpanel"==t.xtype)&&t._setFocus.call(t))return!0}},hide:function(e){this.setVisible(!1,e)},getWidth:function(){return this.$width},getHeight:function(){return this.$height},setWidth:function(e){this.changeSize(e,"width")},setHeight:function(e){this.changeSize(e,"height")},setSize:function(e,t){var i,o=this,n=o.$dx,a=o.$ex,s=0;n&&(a.$width,a.$height,a.define("width",e),a.define("height",t),a.resize(),o.title&&a.getChildViews&&(i=o.$ex.getChildViews())&&1<i.length&&(t=i[0].getChildViews())&&t.length&&"label"==t[0].config.view&&(s=t[0].$height||0),"window"!=o.xtype&&(n.define("width",e),n.define("height",t-s),n.resize()),o.ownerCt?o.ownerCt._vsize.call(o.ownerCt):o._vsize.call(o))},changeSize:function(e,t){var i=this,o=i.$dx,n=i.$ex;o&&(n.define(t,e),n.resize(),o.define(t,e),o.resize(),i.ownerCt&&i.ownerCt._vsize.call(i.ownerCt))},close:function(){var e,t=this,i=t.$ex;if(i)if(t.ownerCt&&t.ownerCt.tabBar&&"tabbar"==t.ownerCt.tabBar.xtype&&t.tab)(e=t.ownerCt.tabBar).removeTab.call(e,t.tab.tabid,!0);else{if(!1===t.fireEvent.call(t,"beforeclose",t))return;i.close&&i.close(),i.destructor(),t.$ex=null,t.fireEvent.call(t,"close",t)}},doLayout:function(){this.isviewport},doComponentLayout:function(){},getColumnIndex:function(e){var t,i=-1;if("selected"==e.column&&this.$7f)i=0;else{for(t=0;t<this.columns.length;t++)if(this.columns[t].dataIndex==e.column){i=t;break}-1<i&&this.$7f&&(i+=1)}return i},updateViewProp:function(c,a){var e,t,i,o,n,s,l,u,r,d,h,p,f,m=c;c._iconfig;if(a=a||{},!c.accl||!ig$.features[c.accl]){switch(c.width&&0==isNaN(c.width)?a.width=c.width:c.$w&&0==isNaN(c.$w)&&(a.width=c.$w),c.height&&0==isNaN(c.height)?a.height=c.height:c.$h&&0==isNaN(c.$h)&&(a.height=c.$h),c.$v&&$s.apply(a,c.$v,null,!0),c.minHeight&&(a.minHeight=c.minHeight),c.flex&&(a.gravity=c.flex),a.hidden=c.hidden,c.bodyCls&&(a.css=c.bodyCls),c.autoScroll&&(a.scroll=!0),t=e=a,c.xtype){case"fieldcontainer":a.adjust=!0;case"container":o=1,a.borderless=!0;break;case"panel":case"formpanel":a.view="form",a.borderless=!0,l=1;case"viewport":a.borderless=!0,o=1,"panel"==c.xtype&&c.renderTo&&!1!==c.frameHeader&&(isdoc=0,o=1,a.view="wpanel",a.modal=!1,a.move=!0,a.resize=!0,a.autofocus=!0,c._window=1,a.container=c.renderTo,a.position=function(e){e.top=c.y,e.left=c.x},a.on=a.on||{},a.on.onViewMoveStart=function(){return c.fireEvent("startmove",c)},a.on.onViewMove=function(e,t){var i=c.$ex.getNode().offsetTop,o=c.$ex.getNode().offsetLeft;c.fireEvent.call(c,"move",c,o,i,t)},a.on.onViewMoveEnd=function(){},a.on.onViewResize=function(){});break;case"window":case"popup":l=o=1,a.view=c.xtype,a.modal=void 0===c.modal||c.modal,a.move=void 0===c.move||c.move,a.resize=void 0===c.resize||c.resize,a.autofocus=!0,a.autofit=!1,c.position?(a.top=c.position.top,a.left=c.position.left):a.position="center",a.on=a.on||{},a.on.onHide=function(e){c.fireEvent.call(c,"hide",c,e)};break;case"treepanel":l=s=1,a.type=c.border?"line":"clear",a.rows=[{type:"header",height:$s.__hh,css:"igc-wb-header",padding:0,hidden:!m._headerVisible(),template:c.title,borderless:!0},{view:"layout",animate:!1,rows:[{view:"treetable",_mx:1,select:!0,tooltip:!0===c.tooltip,multiselect:!(!c.selModel||"MULTI"!=c.selModel.mode),padding:0,margin:0,scrollX:!0,columns:[],css:"igc-treeview",hover:"igc-grid-row-hover",dragscroll:!0,borderless:!c.border,header:!c.hideHeaders}]}],i=a.rows[1],t=e=a.rows[1].rows[0];break;case"gridpanel":l=s=1,a.rows=[{type:"header",height:$s.__hh,css:"igc-wb-header",padding:0,hidden:!m._headerVisible(),template:c.title},{view:"layout",animate:!1,flex:1,rows:[{view:"datatable",_mx:1,tooltip:!0===c.tooltip,resizeColumn:{size:6,headerOnly:!0},select:!0,multiselect:!(!c.selModel||"MULTI"!=c.selModel.mode),padding:0,margin:0,flex:1,columns:[],hover:"igc-grid-row-hover",dragscroll:!0,header:!c.hideHeaders}]}],i=a.rows[1],t=e=a.rows[1].rows[0];break;case"propertygrid":a.rows=[{type:"header",height:$s.__hh,css:"igc-wb-header",padding:0,hidden:!m._headerVisible(),template:c.title},{view:"layout",animate:!1,flex:1,gravity:1,rows:[{view:"property",_mx:1,elements:[],padding:0,margin:0,flex:1,gravity:1,autoheight:!1,scroll:!0,on:{onAfterEditStop:function(e,t,i){c.fireEvent.call(c,"propertychange",c)},onCheck:function(){c.fireEvent.call(c,"propertychange",c)}}}]}],i=a.rows[1],t=e=a.rows[1].rows[0];break;case"dataview":var x,g,b,w="",v=c.tpl;if(v&&v.length){for(r=0;r<v.length;r++)if(-1<v[r].indexOf("<tpl")||-1<v[r].indexOf("</tpl>"))v[r]="";else for(x=v[r].indexOf("{");-1<x&&(v[r]=v[r].substring(0,x)+"#"+v[r].substring(x+1),g=v[r].indexOf("{",x+1),b=v[r].indexOf("}",x+1),!(9999<(x=Math.min(-1<g?g:99999,-1<b?b:99999)))););w=v.join("")}a.rows=[{type:"header",height:$s.__hh,hidden:!m._headerVisible(),css:"igc-wb-header",padding:0,template:c.title},{view:"dataview",_mx:1,select:!0,template:w,padding:0,margin:0,columns:[],header:!c.hideHeaders,type:{width:100,height:100},on:{onSelectChange:function(e){var t,i,o,n=this.getSelectedId(!0),a=c.__frec,s=-1;if(n&&n.length&&(t=Number(n[0]),(!a||a&&a.id!=t)&&(c.selModel.$f=t,i=c.store._pull[t]))){for(c.selModel.select(i,!0),o=0;o<c.store.data.items.length;o++)if(c.store.data.items[o]==i){s=o;break}-1<s&&c.fireEvent.call(c,"itemclick",c,i,void 0,s,e)}}}}];break;case"hiddenfield":a.hidden=!0;case"textfield":a.view="text",n=a._mx=1,a.on=a.on||{},c.enableKeyEvents&&(a.on.onKeyPress=function(e,t){c.fireEvent.call(c,"keydown",c,t),c.fireEvent.call(c,"keypress",c,t),c.fireEvent.call(c,"keyup",c,t)}),c.inputType&&(a.type=c.inputType),a.value=c.value||"",a.readonly=c.readOnly,a.placeholder=c.emptyText||c.placeholder;break;case"numberfield":a.view="counter",n=a._mx=1,a.step=c.step||1,a.min=c.minValue||0,a.max=c.maxValue||Number.MAX_VALUE,a.readonly=c.readOnly,c.value&&(a.value=c.value);break;case"button":case"splitbutton":c.enableToggle?a.view="toggle":a.view="button",a._mx=1,a.type="htmlbutton",a.borderless=!0,c.iconCls?(a.type="iconButton",a.icon=" icon-c-fix "+c.iconCls,c.text&&!c.$w?a.autowidth=!0:a.width=c.$w||30):c.$w?(a.autowidth=!1,a.width=c.$w):a.autowidth=!0,a.tooltip=c.tooltip,a.label=c.text||"",a.on=a.on||{},c.border?a.borderless=!1:a.borderless=!0,a.on.onItemClick=function(e){c.menu&&c._dMenu.call(c,c.menu),c.$pm&&c.$pm.$dx.show(c.$dx.getNode()),c.handler&&c.handler.call(c.scope||c,e)},c.cls&&(a.on.onAfterRender=function(){this.$view.className+=" "+c.cls});break;case"toolbar":$s.apply(a,{view:"toolbar",_mx:1,elements:[],scroll:!1,css:"pivot-toolbar-set"},null,!0);break;case"html":a.view="template",a._mx=1,a.adjust=!0,a.borderless=!(c.border&&0<c.border),a.type="clean",a.autoheight=c.autoHeight,a.on=a.on||{};break;case"tabbar":a.view="tabbar",a._mx=1,a.borderless=!0,a.optionWidth=160,a.options=[],a.on=a.on||{},a.on.onBeforeTabClose=function(e,t){return c.removeTab.call(c,e)},a.on.onChange=function(e,t){for(var i=0,o=parseInt(e),n=c.tabPanel._items,a=0;a<n.length;a++)if(n[a].tab&&n[a].tab.tabid==o){i=a;break}c.tabPanel.setActiveItem.call(c.tabPanel,i,!0)},a.on.onBeforeTabClick=function(e,t){c.fireEvent.call(c,"tabclick",c,e)};break;case"tabpanel":o=!0;break;case"fieldset":a.view="fieldset",n=2,o=1,a.label=c.title,a.paddingY=c.paddingY||60;break;case"checkboxgroup":a.view="layout",n=2,o=1;break;case"checkbox":a.view="checkbox",n=1,c.boxLabel&&(a.labelRight=c.boxLabel),a.on=a.on||{},a.value=c.checked,a.on.onChange=function(e,t){var i=c.getValue(),o=c.$value;i!==o&&(c.fireEvent.call(c,"change",c,i,o),c.$value=i)};break;case"radiogroup":a.view="radio",n=1,a.vertical=c.vertical,a.options=c.$options,a.adjust=!0,a.name=c.name,c.value&&(a.value=c.value),a.on=a.on||{},a.on.onChange=function(e,t){var i,o;t!=e&&(i=c.getRadioGroupValue(e),o=c.$value,c.fireEvent.call(c,"change",c,i,o),c.$value=i)};break;case"combobox":a.view="combo",n=1,a.options=[],a.on=a.on||{},a.readonly=c.readOnly,a.on.onChange=function(e,t){var i=c.getComboValue(),o=c.$value;i!==o&&(c.fireEvent.call(c,"change",c,i,o),c.fireEvent.call(c,"select",c,i,o),c.$value=i)};break;case"htmleditor":a.view="layout",a._mx=1,a.rows=[{type:"header",height:$s.__hh,css:"igc-wb-header",padding:0,template:"Markup text",borderless:!0},{view:"textarea",_h1:1,attributes:{wrap:"soft"}},{view:"toolbar",cols:[{view:"button",value:"Refresh Markup to HTML",autowidth:!0,on:{onItemClick:function(e){var t=new IG$._rpc$,i={option:"downmark",value:m.sview[1].getValue()};t.init(m,{ack:"helpcontent",payload:{},mbody:i},m,function(e){m.sview[2].setValue(e.content),$("#m_preview",m.sview[3].$view).html(e.content)}),t.send()}}}]},{view:"resizer"},{view:"layout",cols:[{view:"layout",rows:[{type:"header",height:$s.__hh,css:"igc-wb-header",padding:0,template:"Preview",borderless:!0},{view:"template",_h1:3,template:"<div id='m_preview' class='idv-pnl-html'></div>"}]},{view:"resizer"},{view:"layout",rows:[{type:"header",height:$s.__hh,css:"igc-wb-header",padding:0,template:"HTML Source",borderless:!0},{view:"textarea",readonly:!0,_h1:2,attributes:{wrap:"soft"}}]}]}];break;case"textarea":a.view="textarea",n=1,a.readonly=c.readOnly,a.value=c.value||"",a.attributes={wrap:"soft"},a.placeholder=c.emptyText||c.placeholder;break;case"colorpicker":a.view="button",a.on=a.on||{},a.width=18,a.on.onItemClick=function(e){c._pui||(c._pui=webix.ui({view:"popup",width:300,height:300,body:{view:"colorboard",cols:6,rows:6,width:500,height:500,template:"<div class='value_cell'><div>{obj.val}</div><div class='color_block' style='background:{obj.val};'></div></div>",on:{onSelect:function(e){c._pui.close(),c._pui=null,$("button",c.$dx.$view).css({backgroundColor:e}),1<e.length&&"#"==e.charAt(0)&&(e=e.substring(1)),c.fireEvent.call(c,"select",c,e)}}},on:{onHide:function(){c._pui&&c._pui.close(),c._pui=null}}})),c._pui.show(c.$dx.$view,{pos:"bottom"})},n=1;break;case"datefield":a.view="datepicker",a.timepicker=!1,a.on=a.on||{},n=1;break;case"displayfield":a.borderless=!0,a.autowidth=0!=c.autowidth;case"tbtext":a.view="label","displayfield"!=c.xtype&&(a.autowidth=!a.width),n=1,a.height=26,a.label=c.value||c.text;break;case"view":case"dropzone":o=1;break;case"spacer":a.gravity=1,a.view="spacer",a._mx=1,a.borderless=!0,a.type="clear";break;case"split":case"splitter":case"tbseparator":case"menuseparator":a.$template="Separator",a._mx=1,a.width=3,d=1;break;case"fileuploadfield":a.view="layout",n=a._mx=1,a.cols=[{view:"label",label:c.fieldLabel,width:c.labelWidth||115,hidden:!c.fieldLabel},{view:"text",readonly:!0,_t:"text"},{view:"uploader",_t:"button",value:c.buttonText||"Upload",multiple:!1,autosend:!1,autowidth:!0,on:{onAfterFileAdd:function(e){var t,i,o,n=c.$dx;if(n){if(c._s=c._s||{},!(t=c._s.text)){for(i=n.getChildViews(),o=0;o<i.length;o++)i[o].config._t&&(c._s[i[o].config._t]=i[o]);t=c._s.text}return c.$$f=e.file,t.setValue(e.name),c.fireEvent.call(c,"change",c,e.name)}}}}];break;default:throw"xtype error : "+c.xtype}if(d||(void 0===a.borderless&&(a.borderless=!1),a.margin=0),n){switch(c.xtype){case"textfield":a.label=a.label||c.fieldLabel||"";break;default:a.label=a.label||c.fieldLabel||c.text||""}a.label||"button"!=c.xtype&&"displayfield"!=c.xtype||!a.value||(a.label=a.value),c.labelPosition&&(a.labelPosition=c.labelPosition),c.labelAlign&&(a.align=c.labelAlign),1==n&&(a._mx=1,a.disabled=c.disable),a.label?a.labelWidth=c.labelWidth||115:c.labelWidth&&(a.labelWidth=c.labelWidth),a.borderless=!0}if(1!=n&&"button"!=c.xtype&&"splitbutton"!=c.xtype||!c.ownerCt||"hbox"!=c.ownerCt.layout.type&&"vbox"!=c.ownerCt.layout.type||"stretch"==c.ownerCt.layout.align||a.width||("combobox"==c.xtype?(a.width=260,delete a.autowidth):"numberfield"==c.xtype?(a.width=240,delete a.autowidth):"checkbox"==c.xtype?(a.width=120,delete a.autowidth,a.label?a.width+=80:a.labelWidth=20):"colorpicker"==c.xtype&&c.hideInput?(a.width=40,delete a.label):"textfield"==c.xtype?(a.width=160,delete a.autowidth):c.flex?delete a.autowidth:a.autowidth=!0),o?e="viewport"==c.xtype?a:"window"==a.view||"popup"==a.view||c._window?((a.fitBiggest=!1)!==c.title&&!1!==c.header&&(a.head={view:"toolbar",borderless:!0,cols:[{view:"label",label:c._getHeader()},{view:"button",icon:" icon-c-fix fa fa-times",type:"iconButton",width:25,on:{onItemClick:function(e){c.close.call(c)}}}]}),a.body={view:"layout",animate:!1,padding:0,margin:0,rows:[{view:"layout",animate:!1,borderless:!0,padding:0,margin:0}]},a.body.rows[0]):"fieldset"==c.xtype?(a.adjust=!0,a.label=c.title||c.text||c.label||"",c.checkboxToggle&&(a.label="<div><input type='checkbox' id='igc_fs_toggle' class='igc_btn_toggle'></input><span>"+a.label+"</span></div>"),a.body={view:"layout",animate:!1,padding:0,margin:0,borderless:!0},a.body):(a.borderless="fieldcontainer"==c.xtype||"container"==c.xtype||0===c.border,a.rows=[{type:"header",height:$s.__hh,css:"igc-"+c.xtype+" igc-wb-header",hidden:!m._headerVisible(),cols:[{view:"label",label:c._getHeader()}]},{view:"layout",adjust:!0,animate:!1,borderless:!0,css:"igc-"+c.xtype+" igc-wb-body",padding:0,margin:0}],c.tools&&(c._tools=[],$.each(c.tools,function(e,t){var i,o,n="";switch(t.type){case"collapse":n="icon-toolbar-collapse icon-toolbar-collapse-right";break;case"close":n="fa-times";break;case"refresh":n="fa-refresh";break;case"minimize":n="fa-minimize";break;case"maximize":n="fa-maximize"}o=new $s.button(t),c._tools.push(o),i={view:"button",tooltip:t.tooltip,hidden:t.hidden,width:26,_ts:e+1,on:{onItemClick:function(){"collapse"==t.type?c.setVisible(!1):t.handler&&t.handler.call(t.scope||c,c)}}},n&&(i.type="iconButton",i.icon=" icon-c-fix fa "+n),a.rows[0].cols.push(i)})),a.rows[1]):s&&((c.enabledrag||c.enableDragDrop)&&(e.drag=!0),(u=c.viewConfig)&&($.each(u,function(e,t){"plugins"!=e&&"listeners"!=e&&(c[e]=t)}),u.plugins&&"gridviewdragdrop"==u.plugins.ptype&&(e.drag=!0,e.on=e.on||{},e.on.onBeforeDrop=function(e,t){var i,o,n,a,s,l,r,d=!0;for(u.panel=c,u.store=c.store,(o=c.$_dd=c.$_dd||{}).view=e.from.$comp,o.records=[],l=0;l<e.source.length;l++)r=o.view.store._pull[e.source[l]],o.records.push(r);return e.to&&(s=e.to.$comp)&&e.target&&(n=s.store._pull[e.target[0]||e.target.row]),!n&&s.store.data.items.length&&(n=s.store.data.items[s.store.data.items.length-1],a="after"),u.listeners&&u.listeners.beforedrop&&(i=o.records&&o.records.length?o.records[0]:null,d=u.listeners.beforedrop.call(u,i,o,n,a,void 0)),d},e.on.onAfterDrop=function(e,t){var i,o,n,a,s,l,r,d=c.$_dd;if(d){for(r=d.view.store,a=0;a<d.records.length;a++)if(l=d.records[a],0==d.copy)for(delete r._pull[l.data.id],s=0;s<r.data.items.length;s++)if(r.data.items[s].data.id==l.data.id){r.data.items.splice(s,1);break}if(e.to)for((n=e.to.$comp)&&e.target&&(i=n.store._pull[e.target[0]||e.target.row]),a=0;a<d.records.length;a++)l=d.records[a],n.store._pull[l.data.id]=l,s=n.store.indexOf(l),l.store=n.store,n.store.data.items.splice(s,0,l);!i&&n.store.data.items.length&&(i=n.store.data.items[n.store.data.items.length-1],o="after"),u.listeners&&u.listeners.drop&&u.listeners.drop.call(u,void 0,d,i,o)}})),c.columns&&(c.columns=c.configColumns.call(c,c.columns,e.columns,e),e.editable=c.editable,e.editaction=c.editaction),e.on=e.on||{},e.on.onBeforeOpen=function(e){var t=this.getItem(e),i=0,o=c.store._pull[e];return(-1===t.$count||1==t.$count&&o.childNodes[0].data._loading)&&(i=1),i?(c.store&&(c.store._clearChild(o),delete t._loading,!1!==c.fireEvent.call(c,"beforeitemexpand",o)&&c.store.proxy&&"ajax"==c.store.proxy.type&&c.store._loadNodeData.call(c.store,o)),t.webix_kids=!1,this.updateItem(e,t.data)):!1!==c.fireEvent.call(c,"beforeitemexpand",o)&&c.fireEvent.call(c,"itemexpand",o),!0},e.on.onAfterScroll=function(){c.afterScroll&&c.afterScroll.call(c)},e.on.onItemClick=function(n,a,s){clearTimeout(c.$Lc1),c.$Lc1=setTimeout(function(){var e=c.getColumnIndex(n),t=c.$dx.getIndexById(n.row),i=c.store._pull[n.row];c.fireEvent.call(c,"itemclick",c,i,s,t,a),c.fireEvent.call(c,"cellclick",c,s,e,i,s,t,a),c.$selected_cell=i;var o=c.getSelectionModel.call(c);"cell"==o.checkSelector&&"checkboxmodel"==o.selType?o.select.call(o,i,!i.data.selected):o.selType},c.editable?300:0)},e.on.onItemDblClick=function(e,t,i){clearTimeout(c.$Lc1),c.$dx.editCell(e.row,e.column,!1,!0);c.getColumnIndex(e);var o=c.$dx.getIndexById(e.row),n=c.store._pull[e.row];c.fireEvent.call(c,"itemdblclick",c,n,i,o,t)},e.on.onBeforeContextMenu=function(e,t,i){var o,n,a,s=c._listeners,l=!0;return s.beforeitemcontextmenu&&(a=s.beforeitemcontextmenu[0])&&(o=c.$dx.getIndexById(e.row),c.getColumnIndex(e),rec=c.store._pull[e.row],n=c._createEvent.call(c,"beforeitemcontextmenu",t),l=a.f.call(a.scope||c,c,rec,i,o,n)),l},e.on.onAfterEditStop=function(e,t,i){var o;e.value!=e.old&&((o=c.store._pull[t.row]).data.edited=!0,c.fireEvent.call(c,"edit",t,{record:o,value:t.getValue()}))},e.on.onSelectChange=function(){var e,t,i,o=c.$dx.getSelectedId(!0),n=c.__frec,a=c.selModel,s=a.selected,l="MULTI"==a.mode;if(o&&o.length)if(l&&"checkboxmodel"!=c.selModel.selType){for(i=s.length-1;0<=i;i--)e=s.items[i],s.map[e.data.id]=0,e.data.selected=e.data.checked=0,s.items.splice(i,1);$.each(o,function(e,t){var i=c.store._pull[t.row];i&&(s.map[i.id]=1,s.items.push(i),i.data.selected=i.data.checked=1,"checkboxmodel"==c.selModel.selType&&c.$dx&&c.$dx.updateItem(t.id,i.data))}),s.length=s.items.length,c.fireEvent.call(c,"selectionchange",c,s)}else t=o[0],(!n||n&&n.id!=t.id)&&(c.selModel.$f=t.id,(e=c.store._pull[t.row])&&"checkboxmodel"!=c.selModel.selType&&c.selModel.select(e,!0))},e.on.onCheck=function(e,t,i){c.$dx;var o,n,a=c.store._pull[e],s=c.getSelectionModel(),l="MULTI"==s.mode;if(a){if("treepanel"==c.xtype)for(n=0;n<c.columns.length;n++)if(c.columns[n].dataIndex==t&&"treecolumn"==c.columns[n].xtype){o=1;break}if("selected"==t||o){if(!l&&a.data.selected)return a.set("selected",!0),void a.set("checked",!0);a.set("selected",!!i),a.set("checked",!!i),s.select(a,i)}else a.set(t,!!i);c.fireEvent.call(c,"checkchange",a,i)}}),d||(a.padding=0,a.margin=a.margin||0,t.on=t.on||{},t.on.onViewResize=function(e,t){m._vsize.call(m)},t.on.onLayoutResize=function(e,t){m._vsize.call(m)},t.on.onResize=function(e,t){m._vsize.call(m)}),o&&"tabpanel"==c.xtype)e.rows=[{view:"tabbar",segmented:!0,multiview:!0,optionWidth:120,_mt:1,options:[],on:{onBeforeTabClose:function(e,t){c.removeTab.call(c,e)},onChange:function(e,t){for(var i=c.items.items,o=0;o<i.length;o++)if(i[o].tab&&i[o].tab.tabid==e){i[o].$ex.show();break}}}},{view:"layout",adjust:!0,padding:0,margin:0,borderless:!0,animate:!1,rows:[{view:"multiview",_mx:1,adjust:!0,animate:!1,fitBiggest:!0,keepViews:!0,hidemode:c.hidemode,padding:0,margin:0,cells:[$s.getBlank(!1)]}]}],vprop=e.rows[1].rows[0];else if(o){switch(c.layout.type){case"border":e._mx=1,e.rows=[{view:"layout",animate:!1,adjust:!0,padding:0,_bd:1,margin:0,hidden:!0,borderless:!0,rows:[$s.getBlank(!0)]},{view:"layout",animate:!1,adjust:!0,_bd:2,padding:0,margin:0,borderless:!0,cols:[$s.getBlank(!1)]},{view:"layout",animate:!1,adjust:!0,_bd:3,padding:0,margin:0,hidden:!0,borderless:!0,rows:[$s.getBlank(!0)]}],0;break;case"hbox":e.adjust=!0,e.rows=[{view:"layout",animate:!1,adjust:!0,_mx:1,padding:0,margin:c.margin||0,borderless:!0,cols:[$s.getBlank(!1)]}],vprop=c.autoScroll?(e.rows[0].view="scrollview",e.rows[0].scroll="x",delete e.rows[0].cols,delete e.rows[0]._mx,e.rows[0].body={_mx:1,padding:0,margin:0,borderless:!0,cols:[$s.getBlank(!1)]},e.rows[0].body):e.rows[0];break;case"vbox":case"anchor":e.borderless=!0,"checkboxgroup"==c.xtype?e.rows=[{view:"layout",animate:!1,adjust:!0,padding:0,margin:0,borderless:!0,cols:[{view:"layout",animate:!1,adjust:!0,_mx:1,padding:0,borderless:!0,margin:0,rows:[$s.getBlank(!1)]}]}]:e.rows=[{view:"layout",animate:!1,adjust:!0,_mx:1,padding:0,borderless:!0,margin:c.margin||0,rows:[$s.getBlank(!1)]}],vprop=c.autoScroll?(e.rows[0].view="scrollview",e.rows[0].scroll="y",e.rows[0]._sx=1,delete e.rows[0].rows,delete e.rows[0]._mx,e.rows[0].body={_mx:1,padding:0,margin:0,borderless:!0,rows:[$s.getBlank(!1)]},e.rows[0].body):e.rows[0];break;case"fit":case"card":e.rows=[{view:"multiview",_mx:1,animate:!1,borderless:!0,fitBiggest:!0,keepViews:!0,adjust:!0,hidemode:c.hidemode,padding:0,margin:0,cells:[$s.getBlank()]}],vprop=e.rows[0].cells[0];break;case"accordion":e.rows=[{view:"accordion",type:"head",borderless:!0,_mx:1,rows:[$s.getBlank(!1)]}],vprop=e.rows[0];break;case"absolute":e.rows=[{view:"abslayout",borderless:!0,padding:0,margin:0,keepViews:!0,adjust:!0,_mx:1,cells:[$s.getBlank(!1)]}],vprop=e.rows[0];break;default:throw"layout type error : "+c.xtype+":"+c.layout}}return o&&vprop&&(c.bodyPadding||c.padding?"string"==(h=typeof(f=c.bodyPadding||c.padding))?(h=f.split(" "),vprop.padding=Number(h[0])||0):vprop.padding=f:c.bodyStyle&&(p=c.bodyStyle.split(";"),$.each(p,function(e,t){var i=t.split(":");"padding"==i[0]&&("px"==i[1].substring(i[1].length-2)&&(i[1]=i[1].substring(0,i[1].length-2)),vprop.padding=Number(i[1]))}))),"checkboxgroup"!=c.xtype&&"fieldcontainer"!=c.xtype||c.fieldLabel&&(f=null,"checkboxgroup"==c.xtype&&"vbox"==c.layout.type?(f=e.rows[0].cols).splice(0,0,{view:"label",width:c.labelWidth||115,label:c.fieldLabel}):(f="vbox"==c.layout.type||"anchor"==c.layout.type?e.rows[0].rows:e.rows[0].cols).push({view:"label",width:c.labelWidth||115,label:c.fieldLabel})),l&&((e=i||e).rows.splice(0,0,{view:"layout",animate:!1,_d1:1,hidden:!0,autowidth:!1,padding:0,margin:0,borderless:!0,rows:[$s.getBlank(!0)]}),e.rows.splice(e.rows.length,0,{view:"layout",animate:!1,_d2:1,hidden:!0,autowidth:!1,padding:0,margin:0,borderless:!0,rows:[$s.getBlank(!0)]})),d||e.rows||e.cols||e.cells||"property"==e.view||(e.rows=[$s.getBlank(!0)]),a}},configColumns:function(u,a,l){var e,h=this,r=[];h.$7f=0,"checkboxmodel"==h.selModel.selType&&u.length&&(e={xtype:"checkcolumn",text:"",$cm:1,dataIndex:"selected",width:40},h.$7f=1);function t(s,d){d.dataIndex=d.dataIndex||"__dc"+s;var e,t,c=new $s.column(d);d.$cm||r.push(c),"selected"!=d.dataIndex||"checkcolumn"!=d.xtype||h.selModel.mode||(h.selModel.mode="MULTI");var i,o,n={header:d.text||d.header||"",id:d.dataIndex};d.width?n.width=d.width:(d.minWidth&&(n.minWidth=d.minWidth),n.fillspace=d.flex||1),d.hidden&&(n.hidden=!0),"checkcolumn"==d.xtype?(n.editor="checkbox",n.template=function(e,t){return t.checkbox(e,t,"selected"==d.dataIndex&&(e.selected||e.checked)||e[d.dataIndex]?1:0,{checkValue:1})},"MULTI"!=h.selModel.mode||d.text||(n.header={title:n.header,content:"masterCheckbox"})):"treecolumn"==d.xtype?(n.template=function(e,t){var i,o,n,a="treecheckbox"!=h.selModel.selType,s=h.store&&e.id?h.store._pull[e.id]:null,l=h.store,s=s||new $s.record(e,l),r=t.treetable(e,t)+(a?"":t.checkbox(e,t,e.selected||e.checked?1:0,{checkValue:1}))+" "+e[d.dataIndex];return 1!=u.length||s.__tm__||($s.__col_measure||($s.__col_measure=$("<div></div>").appendTo($("body")),$s.__col_measure.css({position:"absolute",top:"-200px",overflow:"visible",padding:"0px"})),$s.__col_measure.html(r),o=$s.__col_measure.width(),n=Math.max(h.$width||0,o,h.__cw||0),(!h.__cw||val.width<n)&&(h.__cw=n,(i=c.$g.$dx)&&(i.getColumnIndex(c.$col.id),i.setColumnWidth(c.$col.id,h.__cw))),s.__tm__=1),r},1==u.length&&(n.adjust="data",delete n.fillspace)):"templatecolumn"==d.xtype?(e=(e=d.tpl||"").replace(/\{|\}/g,"#"),n.template=e,n.sort="string"):"actioncolumn"==d.xtype?(n.css="igc-actioncolumn",n.template="",l.onClick=l.onClick||{},$.each(d.items,function(e,a){n.template+="<div class='actionitem_"+s+"_"+e+" igc-actionitem "+a.iconCls+"' ></div>",l.onClick["actionitem_"+s+"_"+e]=function(e,t,i){var o,n;return a.handler&&(o=h.$dx.getIndexById(t),n=h.store._pull[t.row],a.handler.call(a.scope||h,h,o,s,n,e,n)),!1}})):n.sort="string",d.tdCls&&(n.css=d.tdCls),d.renderer?n.template=function(e,t,i,o){var n,a,s,l=h.store._pull[e.id],r=h.store,l=l||new $s.record(e,r);return i=d.renderer.call(h,i,null,l,null,null,r),"treecolumn"==d.xtype&&(i=t.treetable(e,t)+i,1==u.length&&(l.__tm__||($s.__col_measure||($s.__col_measure=$("<div></div>").appendTo($("body")),$s.__col_measure.css({position:"absolute",top:"-200px",overflow:"visible",padding:"0px"})),$s.__col_measure.html(i),a=$s.__col_measure.width(),s=Math.max(h.$width||0,a,h.__cw||0),(!h.__cw||o.width<s)&&(h.__cw=s,(n=c.$g.$dx)&&(n.getColumnIndex(c.$col.id),n.setColumnWidth(c.$col.id,h.__cw))),l.__tm__=1))),i}:"checkcolumn"!=d.xtype&&"actioncolumn"!=d.xtype&&(n.template=function(e,t,i,o){var n,a,s,l,r;return i="<span title='"+IG$.hEE(i)+"'>"+IG$.hEE(i)+"</span>","treecolumn"==d.xtype&&(i=t.treetable(e,t)+i,r=h.store&&e.id?h.store._pull[e.id]:null,n=h.store,r=r||new $s.record(e,n),1!=u.length||r.__tm__||($s.__col_measure||($s.__col_measure=$("<div></div>").appendTo($("body")),$s.__col_measure.css({position:"absolute",top:"-200px",overflow:"visible",padding:"0px"})),$s.__col_measure.html(i),s=$s.__col_measure.width(),l=Math.max(h.$width||0,s,h.__cw||0),(!h.__cw||o.width<l)&&(h.__cw=l,(a=c.$g.$dx)&&(a.getColumnIndex(c.$col.id),a.setColumnWidth(c.$col.id,h.__cw))),r.__tm__=1)),i}),d.editor&&("combobox"==d.editor.xtype&&(d.editor.type="select"),n.editor=d.editor.type||"text",h.editable=!0,h.editaction="custom",n.editAction="custom",l.editable=!0,"select"!=n.editor&&"combo"!=n.editor||(t=d.editor.store,d.editor._store=t,d.editor.store=t?h.createClassComp(t):null,n.options=[],i=d.editor.displayField,o=d.editor.valueField,d.editor.store&&$.each(d.editor.store.$data,function(e,t){n.options.push({id:t[o],value:t[i]})}))),d.tooltip&&(n.tooltip=d.tooltip),a.push(n),c.$col=n,c.$g=h}return e&&t(0,e),$.each(u,t),r},_headerVisible:function(){var e=this,t=!1;return e.title&&!1!==e.header&&(t=!0,e.ownerCt&&("tabpanel"==e.ownerCt.xtype||e.ownerCt.tabBar)&&(t=!1)),t},_tafterrender:function(){var e=this;"combobox"==e.xtype&&e.store.$data&&e.store.loadData(e.store.$data),e.rendered=1,e.fireEvent.call(e,"afterrender",e),e.ownerCt&&e.ownerCt.onAdd&&e.ownerCt.onAdd.call(e.ownerCt,e,e.ownerCt._items.lengt-1),setTimeout(function(){e._vsize.call(e,1,1)},1)},_getHeader:function(){return this.title},_vsize:function(i,o,n){var e,t,a=this,s=a.$dx;if(s&&a.rendered&&!a.hidden){if(e=s.$width,t=s.$height,void 0===e||void 0===t)return;a.$width==e&&a.$height==t&&!o||(a.width&&(a.width=a.$width),a.height&&(a.height=a.$height),a.fireEvent("resize",a,e,t,a.$width,a.$height),a.$width=e,a.$height=t),i&&!n||$.each(a._items,function(e,t){t._vsize.call(t,i,o,n)})}},addViewItem:function(e,t,i,o){var n,a,s,l,r,d,c,u=t?t.$dx:null,h=0,p=0,f=!!t&&("card"==t.layout.type||"tab"==t.xtype),m="window"==e.xtype||"popup"==e.xtype,x=t?t._items:null,g=0;if(i&&(n=u=o=o||t["$dc"+("top"==e.dock?1:2)]),e.$dx||(s=e.updateViewProp.call(e,e)),i&&o)o.show();else if(u){for(c=0;c<x.length;c++)if(x[c]==e){h=c;break}if(u.getChildViews)switch(a=u.getChildViews(),n=u,t.layout.type){case"fit":case"card":for(s&&(s.borderless=!0),c=x.length-1;0<=c;c--)"card"==t.layout.type&&t.selectedIndex==c?x[c].show(!0):t.layout.type;p=-1;break;case"accordion":p=x.length;break;case"border":switch(bs=0,e.region){case"center":case"west":case"east":n=t.layout.$r2;break;case"north":n=t.layout.$r1;break;case"south":n=t.layout.$r3}for(c=0;c<t._items.length;c++)(d=t._items[c])==e||d.$ex&&(r=n.index(d.$ex),e.region==d.region?p=Math.max(r+1,p):"west"!=e.region||"center"!=d.region&&"east"!=d.region?"east"!=e.region||"center"!=d.region&&"west"!=d.region?"center"==e.region&&"east"==d.region?p=Math.min(r,p):"center"==e.region&&"west"==d.region&&(p=Math.max(r+1,p)):p=Math.max(r+1,p):p=Math.min(r,p));n&&n.show();break;case"vbox":case"anchor":case"hbox":p=a.length;break;case"absolute":s&&(s.top=e.y||0,s.left=e.x||0),p=a.length}}if(n&&n.addView&&e.$dx&&e.$dx.getParentView&&e.$dx.getParentView()!=n?(n.addView(e.$dx,p),e.$cx=n):n&&n.addView&&s?(l=-(g=1)<p?n.addView(s,p):n.addView(s),e.$cx=n):m&&(l=webix.ui(s)),l&&"string"==typeof l&&(l=$$(l)),n&&!i){var b=n.getChildViews();if(b&&b.length)for(c=b.length-1;0<=c;c--)"card"==t.layout.type||"fit"==t.layout.type?b[0].config._mblank:b[c].config._mblank&&n.removeView(b[c])}e._postAddView(e,l,t,g,u,i,f,h,n)},_postAddView:function(e,t,i,o,n,a,s,l,r){if(t)if(e.$ex=t,e.$dx=t,(e.$dx.$comp=e).updateViewElement(t),a)r.show();else if(!i||"card"!=i.layout.type&&"tabpanel"!=i.xtype)s&&e.$ex?l==e.ownerCt.selectedIndex&&e.show(!0):i&&"fit"==i.layout.type&&!e.hidden&&e.show(!0);else for(i.selectedIndex=i.selectedIndex||0,u=i._items.length-1;0<=u;u--)if(i.selectedIndex==u){i._items[u].show(!0);break}var d,c;if(t&&(e._items&&e._items.length&&("tabpanel"!=e.xtype&&"card"!=e.layout.type||(e.selectedIndex=e.selectedIndex||0),$.each(e._items,function(e,t){t.ownerCt&&t.addViewItem.call(t,t,t.ownerCt)})),"fieldset"==e.xtype&&(e.checkboxCmp=$("#igc_fs_toggle",t.$view),e.checkboxCmp.getValue=function(){return this.is(":checked")},e.checkboxCmp.setValue=function(e){e?this.attr("checked","checked"):this.removeAttr("checked")}),("window"==e.xtype||"popup"==e.xtype||"panel"==e.xtype||"gridpanel"==e.xtype||"treepanel"==e.xtype||"fieldset"==e.xtype)&&e._dockedItems&&e._dockedItems.length&&$.each(e._dockedItems,function(e,t){t.ownerCt&&t.addViewItem.call(t,t,t.ownerCt,1)})),o&&(e.body.updateDom.call(e.body),e.el.updateDom.call(e.el),d=$(e.body.dom),"html"==e.xtype&&e.html?(d.empty(),d.append(e.html),e.$ex._igc_content=d.children()):"container"==e.xtype&&e.contentEl?(d.empty(),d.append($(e.contentEl))):"textarea"==e.xtype&&(c=$("textarea",e.body.dom),e.$dx.attachEvent("onKeyPress",function(e,t){var i,o,n,a,s;9==(t.keyCode||t.which)&&(t.preventDefault(),n=(o=(i=$("textarea",this.$view))[0]).selectionStart,a=o.selectionEnd,s=i.val(),this.setValue(s.substring(0,n)+"\t"+s.substring(a)),o.selectionStart=o.selectionEnd=n+1)}),c.length&&(e.inputEl.dom=c[0]))),t&&e.postAddViewItem.call(e),n&&("border"==i.layout.type&&i.updateBorderRegion.call(i),"fieldcontainer"==e.xtype&&n.adjust(),"border"==e.layout.type)){var u,h,p,f,m,x={view:"resizer",borderless:!0},g={north:0,west:1,center:2,east:3,south:4};for(e._items.sort(function(e,t){var i=0;return e.region!=t.region&&(i=g[e.region]-g[t.region]),i}),u=e._items.length-1;0<=u;u--)if((p=e._items[u]).$cx&&1==p.split&&!p.$sx){for(mlist=p.$cx.getChildViews(),h=m=0;h<mlist.length;h++)mlist[h].isVisible()&&m++;f=p.$cx.index(p.$ex),1<mlist.length&&f<mlist.length-1&&!p.hidden&&(x.ownerCt=p.$cx,x.hidden=!(1<m||!p.hidden),p.$sx=p.$cx.addView(x,f+1),"string"==typeof p.$sx&&(p.$sx=$$(p.$sx)))}}},getAreaBySelector:function(e){var t,i,o,n,a=0,s=this,l=s.body.dom;if("object"==typeof e)return e;for(o=(i=e.split(" ")).length;a<o&&("self"==(n=i[a])?l=s.body.dom:"$"==n.charAt(0)?(sm=this.down("[name="+n.substring(1)+"]"),sm&&sm.isVisible()?(l=sm.body.dom,s=sm):l=null):(m=$(n,l),l=m.length?m[0]:null),l);)++a==o&&(t=l);return t},updateBorderRegion:function(){var e,t,i,o=this.layout,n=o.$r1,a=(o.$r2,o.$r3),s=this._items;if(n&&a){for(i=0;i<s.length;i++)if(!s[i].hidden)switch(s[i].region){case"north":e=1;break;case"south":t=1}n[e?"show":"hide"](),a[t?"show":"hide"]()}},_loopCDX:function(e){var t,i,o,n=this,a=e.getChildViews?e.getChildViews():null;if(a&&a.length)for(o=0;o<a.length;o++)if(a[o].config._d1&&(n.$dc1=a[o]),a[o].config._d2&&(n.$dc2=a[o]),a[o].config._mt&&(n.$mt=a[o]),a[o].config._sx&&(n.$sx=a[o]),a[o].config._mx)t=a[o],"border"==n.layout.type&&n._loopCDX(t);else if(a[o].config._ts)n._tools[a[o].config._ts-1].$dx=a[o];else if(i=n._loopCDX(a[o])){t=i;break}return t},updateViewElement:function(e){var t,i,o,n=this,a=n.type,s=n.layout,l=(s&&s.type,e.getChildViews?e.getChildViews():null);if("window"!=a&&"popup"!=a&&"fieldset"!=a&&!n._window||(e=e.getBody()),e.config._mx?t=e:(o=n._loopCDX(e))&&(t=o),!t)throw"error on view element";if(n.$dx=t,1==(n.$dx.$comp=n).disabled&&n.$dx.disable(),l&&l.length&&"header"==l[0].config.type&&(n.$tx=l[0]),n.layout&&"border"==n.layout.type)for(l=t.getChildViews(),i=0;i<l.length;i++)l[i].config._bd&&(n.layout["$r"+l[i].config._bd]=l[i]);if("htmleditor"==n.xtype)for(l=t.getChildViews(),n.sview={},i=0;i<l.length;i++)n._updateHtag(l[i],n)},_updateHtag:function(e,t){var i;if(e.config._h1)t.sview[e.config._h1]=e;else if(e.getChildViews){var o=e.getChildViews();if(o)for(i=0;i<o.length;i++)this._updateHtag(o[i],t)}},postAddViewItem:function(){var e,i,o=this,n=o.$dx;switch(o.xtype){case"html":(i=o.autoLoad)&&i.url&&(e="?",0<i.url.indexOf("?")&&(e="&"),$.ajax({type:"GET",url:i.url+e+"uniquekey="+IG$.getUniqueKey(),dataType:"text",timeout:1e4,success:function(e){var t;n&&((t=$(n.$view)).empty(),t.append(e)),i.callback&&(i.scope?i.callback.apply(i.scope):i.callback.apply(o))},error:function(e,t,i){}}));break;case"window":case"popup":o.hide(!0)}o._tafterrender()},_isAfterRender:function(){return/(gridpanel|html)/.test(this.xtype)},down:function(e){var t,i,o=this;if("["==e[0]&&"]"==e[e.length-1]&&(e=(e=e.substring(1,e.length-1)).split("=")[1]),o._dockedItems&&o._dockedItems.length){for(t=0;t<o._dockedItems.length;t++)if(o._dockedItems[t].name==e){i=o._dockedItems[t];break}if(!i)for(t=0;t<o._dockedItems.length&&!(i=o._dockedItems[t].down.call(o._dockedItems[t],e));t++);}if(!i&&o._tools)for(t=0;t<o._tools.length;t++)if(o._tools[t].name==e){i=o._tools[t];break}if(!i&&o.menu&&o.menu._items)for(t=0;t<o.menu._items.length;t++)if(o.menu._items[t].name==e){i=o.menu._items[t];break}if(!i&&o._items&&o._items.length){for(t=0;t<o._items.length;t++)if(o._items[t].name==e){i=o._items[t];break}if(!i)for(t=0;t<o._items.length&&!(i=o._items[t].down.call(o._items[t],e));t++);}if(!i&&o.columns&&o.columns.length)for(t=0;t<o.columns.length;t++)if(o.columns[t].name==e){i=o.columns[t];break}if(!i&&"radiogroup"==o.xtype&&o.$options)for(t=0;t<o.$options.length;t++)if(o.$options[t].name==e){i=o;break}if(!i&&"button"==o.xtype&&o.menu&&o.menu.items&&o.menu.items.length)for(t=0;t<o.menu.items.length;t++)if(o.menu.items.items[t].name==e){i=o.menu.items.items[t];break}return i},getRootNode:function(){var e,t=this.store;return t&&(e=t.getRootNode()),e},setRootNode:function(e){return this.store.setRootNode.call(this.store,e)},reconfigure:function(e,t){var i=this,o=i.$dx,n=[];i.store?$s.apply(i.store,e,null,!0):((i._store=e).xtype=e.xtype||"store",(e.grid=i).store=i.createClassComp(e)),$s.apply(e,i.store,null,!0),i.columns=i.configColumns.call(i,t,n),o.config.columns=n,o.refreshColumns(),i.store.loadData.call(i.store,i.store.$data)},getLayout:function(){return this},getComponent:function(e){for(var t,i=this._items,o=0;o<i.length;o++)if(i[o].id==e){t=i[o];break}return t},setActiveItem:function(e,t){var i,o=this,n=e;if("object"==typeof e)for(i=n=0;i<o._items.length;i++)if(o._items[i]==e){n=i;break}(o.selectedIndex||0)!=n?(o.selectedIndex=Math.min(n,o._items.length-1),o._items[o.selectedIndex]&&o._items[o.selectedIndex].show()):1==t&&(o.selectedIndex=n,o._items[o.selectedIndex]&&o._items[o.selectedIndex].show())},getActiveItem:function(){return this._items[this.selectedIndex]},getTabBar:function(){return this.tabBar},getAllValues:function(e,t){var i,o,n,a,s,l,r=this;for(/(checkbox|checkboxgroup|radiogroup|combobox|htmleditor|textfield|textarea|numberfield)/.test(r.xtype)&&r.getValue&&(n=r.getValue(),t&&"checkbox"==r.xtype?n=!0===n?"T":"F":t&&"numberfield"==r.xtype&&void 0!==n&&(n=""+n),r.mapname?e[r.mapname]=n:r.name&&(e[r.name]=n)),i=0;i<r.items.items.length;i++)if(o=r.items.items[i],/(panel|container|window|fieldset)/.test(o.xtype)){if(l=o.getAllValues(e,t))break}else if(/(checkbox|checkboxgroup|radiogroup|combobox|htmleditor|textfield|textarea|numberfield)/.test(o.xtype)&&o.getValue){if(o.clearInvalid&&o.clearInvalid(),n=o.getValue(),"radiogroup"==o.xtype){if(n)for(s in n){a=n[s];break}n=a}else t&&"checkbox"==o.xtype?n=!0===n?"T":"F":t&&"numberfield"==o.xtype&&void 0!==n&&(n=""+n);if(o.required&&!n){l=1,o.markInvalid&&o.markInvalid("Required");break}o.mapname?e[o.mapname]=n:o.name&&(e[o.name]=n)}return l},setAllValues:function(e,t){var i,o={};for(i in e)o[i]=1;this._setAllValues(e,o,t)},_setAllValues:function(e,t,i){for(var o,n,a,s=0;s<this.items.items.length;s++)o=this.items.items[s],/(panel|container|window|fieldset)/.test(o.xtype)?o._setAllValues(e,t,i):o.setValue&&/(checkbox|checkboxgroup|radiogroup|combobox|htmleditor|textfield|textarea|numberfield)/.test(o.xtype)&&(n=null,a=0,o.mapname&&t[o.mapname]?(n=e[o.mapname],a=1):o.name&&t[o.name]&&(n=e[o.name],a=1),a&&(i&&"checkbox"==o.xtype?n="T"===n:i&&"numberfield"==o.xtype&&n&&(n=Number(n)),o.setValue(n)))}}),$s.tabbar=$s.extend($s.base,{xtype:"tabbar",validate:function(){var e,t,i,o=this,n=o.tabPanel,a=o.$dx;if(n&&a){for(o.$tid=o.$tid||0,e=0;e<n._items.length;e++)if(n._items[e].$ex)if(i={name:n._items[e].title,value:"<span>"+IG$.hEE(n._items[e].title)+"</span>",close:!0},n._items[e].iconCls&&(i.value="<div class='igc-tab-label'><span class='webix_icon icon-c-fix "+n._items[e].iconCls+"'></span><span class='igc-tab-text'>"+IG$.hEE(n._items[e].title)+"</span></div>"),n._items[e].tab){for(t=0;t<a.data.options.length;t++)if(a.data.options[t].id==n._items[e].tab.tabid){a.data.options[t].value=i.value;break}}else i.id=o.$tid++,n._items[e].tab=new $s.tabbutton({tabbar:o,ownerCt:n._items[e],tabid:i.id}),a.addOption(i,!0);a.refresh()}},setActiveTab:function(e){var t=this.$dx;t&&e.tab&&t.setValue(""+e.tab.tabid)},removeTab:function(e,t){for(var i,o,n=parseInt(e),a=this.tabPanel,s=a._items,l=a.selectedIndex,r=-1,d=0;d<s.length;d++)if(s[d].tab&&s[d].tab.tabid==n){i=s[d],r=d;break}if(i){if(!0===t){var c=a.getTabBar();c&&c.$ex&&c.$ex.removeOption(e)}else if(!1===(o=i.fireEvent.call(i,"beforeclose",i)))return o;r<l&&a.selectedIndex--,a.onRemove.call(a,i,!0),i.fireEvent.call(i,"close",i)}}}),$s.panel=$s.extend($s.base,{xtype:"panel"}),$s.tabpanel=$s.extend($s.base,{xtype:"tabpanel",setActiveTab:function(e){var t=this.tabBar;t&&t.setActiveTab.call(t,e)},removeTab:function(e){for(var t,i=parseInt(e),o=this._items,n=0;n<o.length;n++)if(o[n].tab&&o[n].tab.tabid==i){t=o[n];break}if(t){if(!1===t.fireEvent.call(t,"beforeclose",t))return;this.onRemove.call(this,t,!0),t.fireEvent.call(t,"close",t)}}}),$s.window=$s.extend($s.base,{xtype:"window",isWindow:!0,showAt:function(e,t){this.show(null,{x:e,y:t})},showBy:function(e){this.show(null,{ctrl:e})}}),$s.popup=$s.extend($s.base,{xtype:"popup",isWindow:!0,showAt:function(e,t){this.show(null,{x:e,y:t})},showBy:function(e){this.show(null,{ctrl:e})}}),$s.container=$s.extend($s.base,{xtype:"container"}),$s.treepanel=$s.extend($s.base,{xtype:"treepanel"}),$s.treestore=$s.extend($s.dstore,{xtype:"treestore"}),$s.reader=$s.extend($s.base,{xtype:"reader"}),$s.formpanel=$s.extend($s.base,{xtype:"formpanel",getForm:function(){return this},isValid:function(){this.$ex;for(var e=this.items,t=!0,i=0;i<e.items.length;i++)0==e.items[i].isvalid()&&(t=!1);return t},submit:function(o){var n=this,e=(n.$ex,new FormData);n.getValues(e),$.ajax({url:o.url,type:"POST",data:e,cache:!1,dataType:"json",processData:!1,contentType:!1,timeout:6e5,success:function(e,t,i){o.success&&(n.errorReader.jsonData=e,o.success.call(n,n))},error:function(e,t,i){}})},getValues:function(e){var t,o,n=this.items;for(i=0;i<n.items.length;i++)"fileuploadfield"==(t=n.items[i]).xtype?t.$$f&&e.append(t.name,t.$$f,t.getRawValue()):t.getValue&&t.name&&(o=t.getValue())&&e.append(t.name,o)}}),$s.store=$s.extend($s.dstore,{xtype:"store"}),$s.menu=$s.extend($s.base,{xtype:"menu",_createMenuUI:function(e){var i=this;i.$px&&(i.$px.close(),i.$px=null);var t={view:"contextmenu",hidden:!0,autoheight:!0,borderless:!0,data:[],on:{onMenuItemClick:function(e){var t=i.$px.getMenuItem(e).key;i._processItem.call(i,i._items,t)},onHide:function(){e&&(i.$px.close(),i.$px=null)}}};return i._updateMenuItem(t.data,i._items,0),i.$px=webix.ui(t),i.$px},_processItem:function(e,t){for(var i,o=0;o<e.length;o++){if(e[o]._menukey==t){i=1,e[o].handler&&e[o].handler.call(e[o].scope||e[o]);break}if(e[o].menu&&(i=this._processItem(e[o].menu._items,t)))break}return i},_updateMenuItem:function(e,t,i){for(var o,n=0;n<t.length;n++)(o="split"==t[n].xtype||"splitter"==t[n].xtype?{$template:"Separator",key:++i}:{value:t[n].text,key:++i}).hidden=t[n].hidden,t[n].ownerCt=this,t[n]._menukey=o.key,t[n].menu&&(o.submenu=[],i=this._updateMenuItem(o.submenu,t[n].menu._items,i)),o.hidden||e.push(o);return i},showBy:function(e){var t,i,o=$(document),n=o.width(),a=o.height(),s=$(e).offset(),l=this._createMenuUI(1),r=s.left+40,d=s.top+10;l.setPosition(r,d),l.show(),t=l.$width||200,i=l.$height||200,(n<r+t||a<d+i)&&(n<r+t&&(r=n-i-40),a<d+i&&(d=a-i-10),l.setPosition(r,d))},showAt:function(e,t){var i=this._createMenuUI(1);i.setPosition(e,t),i.show()}}),$s.menuitem=$s.extend($s.base,{xtype:"menuitem"}),$s.toolbar=$s.extend($s.base,{xtype:"toolbar"}),$s.textfield=$s.extend($s.base,{xtype:"textfield"}),$s.numberfield=$s.extend($s.base,{xtype:"numberfield"}),$s.button=$s.extend($s.base,{xtype:"button",initComponent:function(){var e=this;e.menu&&("object"==typeof e.menu&&e.menu.length&&(e.menu={xtype:"menu",items:e.menu}),e.menu.items&&e.menu.items.length&&(e.menu.xtype||(e.menu.xtype="menu"),e._menu=e.menu,e.menu=e.createClassComp(e.menu))),$s.button.superclass.initComponent.call(e)}}),$s.splitbutton=$s.extend($s.button,{xtype:"splitbutton",initComponent:function(){var e,t=this,i=t.menu,o=0;if(i&&i.items&&i.items.length){for(e=0;e<i.items.length;e++)if("colorpicker"==i.items[e].xtype){o=i.items[e];break}o&&($s.apply(t,o,null,!0),t.xtype="colorpicker",t.hideInput=!0)}$s.splitbutton.superclass.initComponent.call(t)}}),$s.baseCSSPrefix="",$s.viewport=$s.extend($s.panel,{xtype:"viewport"}),$s.gridpanel=$s.extend($s.panel,{xtype:"gridpanel",clearSelection:function(){}}),$s.dataview=$s.extend($s.panel,{xtype:"dataview"}),$s.html=$s.extend($s.base,{xtype:"html"}),$s.split=$s.extend($s.base,{xtype:"split"}),$s.spacer=$s.extend($s.base,{xtype:"spacer"}),$s.splitter=$s.extend($s.split,{xtype:"splitter"}),$s.colorpicker=$s.extend($s.base,{xtype:"colorpicker"}),$s.datefield=$s.extend($s.base,{xtype:"datefield"}),$s.fieldcontainer=$s.extend($s.base,{xtype:"fieldcontainer"}),$s.fieldset=$s.extend($s.base,{xtype:"fieldset",initComponent:function(){this.layout||(this.layout={type:"anchor"}),$s.fieldset.superclass.initComponent.call(this)}}),$s.checkboxgroup=$s.extend($s.base,{xtype:"checkboxgroup"}),$s.radiogroup=$s.extend($s.base,{xtype:"radiogroup",initComponent:function(){var e,t,i=this,o=i.items;if(i.$options=[],o)for(e=0;e<o.length;e++)(t=new $s.radio(o[e])).name=t.name,t.value=t.boxLabel||t.name||t.inputValue,t.checked&&(i.value=t.value),i.$options.push(t);delete i.items,$s.radiogroup.superclass.initComponent.call(i)}}),$s.radio=$s.extend($s.object,{xtype:"radio"}),$s.checkbox=$s.extend($s.base,{xtype:"checkbox"}),$s.combobox=$s.extend($s.base,{xtype:"combobox"}),$s.displayfield=$s.extend($s.base,{xtype:"displayfield"}),$s.tbtext=$s.extend($s.base,{xtype:"tbtext"}),$s.textarea=$s.extend($s.base,{xtype:"textarea",initComponent:function(){this.inputEl=new $s.body(this,1),$s.textarea.superclass.initComponent.call(this)},getRawValue:function(){return this.getValue()},selectText:function(e,t){var i=this.inputEl.dom;i&&(i.setSelectionRange?(i.focus(),i.setSelectionRange(e,t)):i.createTextRange?(range=i.createTextRange(),range.collapse(!0),range.moveEnd("character",t),range.moveStart("character",e),range.select()):i.selectionStart&&(i.selectionStart=e,i.selectionEnd=t))}}),$s.view=$s.extend($s.base,{xtype:"view"}),$s.htmleditor=$s.extend($s.base,{xtype:"htmleditor"}),$s.propertygrid=$s.extend($s.base,{xtype:"propertygrid",setSource:function(e,s){var t,i=this,l=[];i._pvalue=e,t=i.$dx,$.each(i._pvalue,function(e,t){var i,o,n,a={id:e,label:e,type:"text",value:t};if(s[e]&&(i=s[e].editor))if("combobox"==i.xtype&&i.store&&i.store.data&&i.store.data.length)for(a.type="select",a.options=[],n=i.valueField,o=0;o<i.store.data.length;o++)a.options.push(i.store.data[o][n]);else"checkbox"==i.xtype?a.type="checkbox":"color"==i.xtype?a.type="color":console.write("other configuration");l.push(a)}),t.define("elements",l),t.refresh(),$(i.el.dom).height(i.$height||100)},getSource:function(){var e,t=this.$dx;return t&&(e=t.getValues()),e},initComponent:function(){$s.propertygrid.superclass.initComponent.call(this)}}),$s.dropzone=$s.extend($s.base,{xtype:"dropzone",initComponent:function(){var e=Array.prototype.slice.call(arguments),t=e[0];t&&(this.$config=t,this.initDrop(t)),$s.dropzone.superclass.initComponent.apply(this,e)},initDrop:function(e){var r,d=this;e.targetEl&&(r=function(e){var t=$s.getEvent(e);d.onNodeOver&&d._dinfo&&d.onNodeOver.call(d,d._dinfo.t,d._dinfo.dd,t,d._dinfo.data)},webix.DragControl.addDrop(e.targetEl,{$dragIn:function(e,t,i){var o=webix.DragControl.getContext(),n=t,a=o.from.$comp,s={records:[]},l=$s.getEvent(i);return d.getTargetFromEvent&&(n=d.getTargetFromEvent.call(d,{browserEvent:i})),a&&a.store&&o.source&&o.source.length&&$.each(o.source,function(e,t){var i=a.store._pull[t];i&&s.records.push(i)}),d.onNodeEnter&&d.onNodeEnter.call(d,n,void 0,l,s),d.onNodeOver&&(d._dinfo={t:n,dd:void 0,data:s},$("body").bind("mousemove",r)),t},$dragOut:function(e,t,i,o){$("body").unbind("mousemove",r)},$drop:function(e,t,i){var o=webix.DragControl.getContext(),n=t,a=o.from.$comp,s={records:[]},l=$s.getEvent(i);$("body").unbind("mousemove",r),d.getTargetFromEvent&&(n=d.getTargetFromEvent.call(d,{browserEvent:i})),a&&a.store&&o.source&&o.source.length&&$.each(o.source,function(e,t){var i=a.store._pull[t];i&&s.records.push(i)}),d.onNodeDrop&&d.onNodeDrop.call(d,n,void 0,l,s)},$drag:function(e,t,i){},$dragCreate:function(e,t){},$dragDestroy:function(e,t){}}))}}),$s.menuseparator=$s.extend($s.base,{xtype:"menuseparator"}),$s.tbseparator=$s.extend($s.base,{xtype:"tbseparator"}),$s.fileuploadfield=$s.extend($s.base,{xtype:"fileuploadfield",getRawValue:function(){return this._s&&this._s.text?this._s.text.getValue():null},getValue:function(){var e;return this.$$f&&(e=this._s.text.getValue()),e}}),$s.hiddenfield=$s.extend($s.base,{xtype:"hiddenfield"}),$s.create=function(){var e,t,i,o,n=Array.prototype.slice.call(arguments);function t(){}return o=n[0],n.splice(0,1),i="string"==typeof o?(e=o.split("."),$s[e[1]]):o,t.prototype=i.prototype,t=new t,i.apply(t,n),t};
IG$._berr=0,IG$.ShowErrorMessage=function(e,n,r){var t=e.errorcode,a=e.errormsg,s=e.detail||null,o=e.stacktrace||null,i=!1;switch(t){case"0x7500":case"0x6d00":i=!0}0==i&&(s||o||r)?IG$.alertmsg(ig$.appname,a+"<br/>\n\n"+(s||""),null,n,1,"error",null,{errdesc:a,errmsg:s,errstack:o,params:r},null,1):IG$.alertmsg(ig$.appname,a+"\n\n"+(s||""),null,n,1,"error",null,null,null,1)},IG$._dofilter=function(e,n,r,t){var a=e.down("[name="+n+"]")||e,s=t?t.getValue():a.down("[name=_filter]").getValue();s?a.store.addFilter({dataIndex:r,operator:"like",value:s}):a.store.removeFilter({dataIndex:r,operator:"like"})},IG$.ShowError=function(e,n){IG$.alertmsg(ig$.appname,e,null,n,1,"error",null,null,null,1)},IG$.ShowConnectionError=function(e){IG$.alertmsg(ig$.appname,IRm$.r1("M_ERR_CONNECT"),null,e,1,"error",null,null,null,1)},IG$.showDlg=function(e,n){IG$._popupDlgs=IG$._popupDlgs||[],IG$._popupDlgs.push(n),n.show()},IG$.checkLogin=function(n,r,t){var e=new IG$._rpc$;n&&n.setLoading&&n.setLoading(!0),e.checklogin=!0,IG$._popupDlgs=IG$._popupDlgs||[],e.init(n,{ack:"ping",payload:{},mbody:{}},n,function(e){n&&n.setLoading&&n.setLoading(!1),r&&(IG$._popupDlgs.push(r),r.show()),t&&t.call(n)}),e.send()},IG$.alertmsg=function(e,n,t,a,r,s,o,i,l,c){if(2==r&&(l=1),c&&IG$._berr)return IG$._berr.err.push({mtype:s,stack:o,parent:a,a1:i}),void $(".cnt",IG$._berr.h).text(IG$._berr.err.length).show();var p,u,m,g,h,I,f,v,_,b=$("body"),k=$("<div class='igc-alert-cnt'>"+(r?"<div class='igc-alert-bg'></div>":"")+"<div class='igc-alert-body'></div></div>").appendTo(b),G=$(".igc-alert-body",k),w=IRm$.r1("M_UNKNOWN"),y="",x="",R=window.bowser;switch(c&&(IG$._berr={h:k,err:[{mtype:s,stack:o,parent:a,a1:i}]}),s=s||"warning"){case"error":w=IRm$.r1("M_ERROR");break;case"warning":w=IRm$.r1("M_WARNING");break;case"info":w=IRm$.r1("M_INFO");break;case"success":w=IRm$.r1("M_SUCCESS")}if(i){if(i.params){for(g in i.params)y&&(y+="\n"),y+=g+": "+i.params[g];y+="\n\n",i.errstack&&(y+="stacktrace :"+i.errstack+"\n")}else y="stacktrace : "+i.errstack+"\n";if(R){for(I in R)"function"!=typeof R[I]&&(x+=I+": "+R[I]+"\n");y=x+"\n\n"+y,i.binfo=x}}p=$("<div class='igc-alert'><a class='close'>&#215;</a><div class='detail' style='display: none'>"+IRm$.r1("M_DETAIL")+"</div><div class='cnt' style='display:none'></div><h4 class='alert-heading'>"+w+"</h4><span>"+n+"</span></div>").appendTo(G),u=$(".close",p)[l?"hide":"show"](),m=$(".detail",p),y&&m.show(),p.addClass("igc-alert-"+s),m.bind("click",function(e){e.preventDefault(),e.stopImmediatePropagation(),(h=new IG$.ErrorDialog({messagecontent:i,renderTo:k[0]})).setPosition((k.width()-(h.width||h.$width))/2,(k.height()-(h.height||h.$height))/2),h.show()}),u.bind("click",function(e){e.preventDefault(),e.stopImmediatePropagation(),h&&h.close(),k.fadeOut(function(){t&&t.call(a),k.remove(),c&&(IG$._berr=0)})}),l?(_=[],6==l||14==l?(_.push({text:IRm$.r1("B_YES"),bseq:2,dlg:"yes"}),_.push({text:IRm$.r1("B_NO"),bseq:4,dlg:"no"}),14==l&&_.push({text:IRm$.r1("B_CANCEL"),bseq:8,dlg:"cancel"})):1!=l&&9!=l||(_.push({text:IRm$.r1("B_OK"),bseq:1,dlg:"ok"}),9==l&&_.push({text:IRm$.r1("B_CANCEL"),bseq:8,dlg:"cancel"})),f=$("<div class='igc-alert-buttons'><ul></ul></div>").appendTo(p),v=$("ul",f),$.each(_,function(e,n){var r=$("<li></li>").appendTo(v);d=$("<div class='igc-button'>"+n.text+"</div>").appendTo(r),d.bind("click",function(e){e.preventDefault(),e.stopImmediatePropagation(),h&&h.close(),k.fadeOut(function(){t&&t.call(a,n.dlg),k.remove(),c&&(IG$._berr=0)})})})):p.bind("click",function(e){e.preventDefault(),e.stopImmediatePropagation(),h&&h.close(),k.fadeOut(function(){t&&t.call(a),k.remove(),c&&(IG$._berr=0)})}),r||(k.addClass("igc-no-modal"),setTimeout(function(){h&&h.close(),k.fadeOut(function(){t&&t.call(a),k.remove(),c&&(IG$._berr=0)})},1500))},IG$.confirmMessages=function(e,n,r,t,a,s){IG$.alertmsg(e||IRm$.r1("L_SAVE_CHANGES"),n||IRm$.r1("L_SAVE_C_MSG"),r,a,1,"info",null,null,s||6)},IG$.checkLock=function(r,t){var e=new IG$._rpc$;e.init(r,{ack:"helpcontent",payload:{uid:r.uid},mbody:{option:"lock",detail:"check"}},r,function(e){var n;e?new IG$.LockWindow({lparam:e,callback:new IG$.callBackObj(r,function(e){t.call(r,e)})}).show(r):((n=new IG$._rpc$).init(r,{ack:"helpcontent",payload:{uid:r.uid},mbody:{option:"lock",detail:"set"}},r,function(e){},!1),n.send())},!1),e.send()},window.$s&&(IG$.v$pnl=$s.extend($s.panel,{frameHeader:!1,initComponent:function(){this.on("destroy",function(e,n){e.__dx=!0}),IG$.v$pnl.superclass.initComponent.call(this)},destroy:function(){var e=this;e.__dx=!0,setTimeout(function(){IG$.v$pnl.superclass.destroy.call(e)},10)},setLoading:function(e,n,r){var t=this,a={};return clearTimeout(t.__etimer),t.rendered&&0==e&&(t.__etimer=setTimeout(function(){t.customLoad&&!0!==r&&t.customLoad(!1),t.loadMask&&t.loadMask.destroy(),t.rendermask=null,t.loadMask=null},100)),t.rendered&&!1!==e&&(IG$.isObject(e)?IG$.apply(a,e):IG$.isString(e)&&(a.msg=e),a.dom=$(t.el.dom),(a.target=t).loadMask||(t.loadMask=new IG$._mask(a),t.loadMask.show())),t.loadMask}}),IG$.LockWindow=$s.extend($s.window,{modal:!0,region:"center",layout:"fit",closable:!1,resizable:!1,width:300,autoHeight:!0,callback:null,_closedlg:function(e){this.callback&&this.callback.execute(e),this.close()},initComponent:function(){var n=this;n.title=IRm$.r1("M_LOCK_TITLE"),$s.apply(this,{defaults:{bodyStyle:"padding:10px"},items:[{xtype:"displayfield",name:"txtlock",padding:10,value:""}],buttons:[{text:IRm$.r1("B_UNLOCK"),handler:function(){var e=new IG$._rpc$;e.init(n,{ack:"helpcontent",payload:{uid:n.uid},mbody:{option:"lock",detail:"unlock"}},n,function(e){n._closedlg("unlock")},!1),e.send()},scope:this},{text:IRm$.r1("B_CLOSE"),handler:function(){this._closedlg("close")},scope:this}],listeners:{afterrender:function(e){var n=this.down("[name=txtlock]"),r=this.lparam||{};this.uid=r.uid,n.setValue(IRm$.r1("M_LOCK_MSG",[r.username+"("+r.userid+")",IG$.formatDate(r.date)]))}}}),IG$.LockWindow.superclass.initComponent.apply(this,arguments)}}),IG$.ErrorDialog=$s.extend($s.panel,{modal:!0,layout:"fit",closable:!1,resizable:!1,callback:null,width:600,height:550,_cerr:0,showError:function(e){var n,r="";if(e.params){for(n in e.params)r&&(r+="\n"),r+=n+": "+e.params[n];r+="\n\n"}var t,a=this.down("[name=m_msg]"),s=$(a.body.dom);s.empty(),t=$("<div class='ing-error-dlg'></div>").appendTo(s),IG$._berr&&1<IG$._berr.err.length&&$("<div class='ing-error-cnt'>("+(this._cerr+1)+"/"+IG$._berr.err.length+" messages)</div>").appendTo(t),t.append("<div class='ing-error-desc'>"+(e.errcode||"")+":"+e.errdesc+"</div>"),t.append("<div class='ing-error-msg'>"+(e.errmsg||"")+"</div>"),$("<div class='ing-error-stack'></div>").appendTo(t).text(e.errstack||""),$("<div class='ing-error-stack'></div>").appendTo(t).text(r||""),$("<div class='ing-error-stack'></div>").appendTo(t).text(e.binfo||""),this.cboard=$("<textarea class='ing-error-cboard'></textarea>").appendTo(t).hide()},initComponent:function(){var s=this;$s.apply(this,{title:"Server Message",items:[{xtype:"container",name:"m_msg",border:0,layout:"fit",listeners:{afterrender:function(e){var n=s.messagecontent;s.showError(n)}}}],buttons:[{text:IRm$.r1("B_CLIPBOARD"),handler:function(){s.cboard.show();function r(e){var n,r="",t="",r=(e.errdesc||"no description")+"\n";if(e.params){for(n in e.params)t&&(t+="\n"),t+=n+": "+e.params[n];t+="\n\n"}else t="stacktrace : "+(e.errstack||"")+"\n";return r+=t}var t=[];IG$._berr&&IG$._berr.err.length?$.each(IG$._berr.err,function(e,n){t.push(r(n.messagecontent))}):t.push(r(s.messagecontent));var e="",n=window.bowser;if(n){for(bk in n)"function"!=typeof n[bk]&&(e+=bk+": "+n[bk]+"\n");t.push(e)}s.cboard.text(t.join("\n\n")),s.cboard.select();try{var a=document.execCommand("copy")?"successful":"unsuccessful";console.log("Copying text command was "+a)}catch(e){console.log("Oops, unable to copy")}},scope:this},"-",{text:IRm$.r1("B_PREVIOUS"),hidden:!(IG$._berr&&1<IG$._berr.err.length),handler:function(){var e=IG$._berr.err,n=(e.length,-1<this._cerr-1?e[this._cerr--]:null);n&&this.showError(n.messagecontent)},scope:this},{text:IRm$.r1("B_NEXT"),hidden:!(IG$._berr&&1<IG$._berr.err.length),handler:function(){var e=IG$._berr.err,n=e.length,r=this._cerr+1<n?e[this._cerr++]:null;r&&this.showError(r.messagecontent)},scope:this},"-",{text:IRm$.r1("B_CLOSE"),handler:function(){this.close()},scope:this}]}),IG$.ErrorDialog.superclass.initComponent.apply(this,arguments)}})),IG$.m2ER=function(){},IG$._mask=function(e){var n,r,t=this;t.owner=e.target,t.mask=$("<div class='igc-loading'></div>"),$("<div class='igc-loading-mask'></div>").appendTo(t.mask),n=$("<table class='igc-loading-body'><tr><td></td></tr></table>").appendTo(t.mask),r=$("<div class='igc-loading-box'><table><tr><td><div class='igc-loading-proc'><div class='spinner'><div class='rect1'></div><div class='rect2'></div><div class='rect3'></div><div class='rect4'></div><div class='rect5'></div></div></div></td><td><span class='igc-loading-msg'></span></td></tr></table></div>").appendTo($("td",n)),$(".igc-loading-msg",r).append(e.msg||ig$.loading_msg),t.owner.rendermask=t.mask,e.dom?e.dom.append(t.mask):t.owner._el.dom.append(t.mask)},IG$._mask.prototype={show:function(){this.mask.show()},destroy:function(){this.mask&&(this.mask.remove(),this.mask=null)}};
IG$.c$DckSplt=function(t){var o=this;o.docmain=t.docmain,o.panel=t.panel,o._dir=t.direction,o._initPos=null,o._ghost=null,o.init()},IG$.c$DckSplt.prototype={init:function(){var o=this,t="horizontal"==o._dir?"n-resize":"e-resize";o.spui=$("<div class='dock-splitter'></div>").attr({unselectable:"on"}).css({position:"absolute"}).appendTo(o.docmain.box).hide(),o.panel._SP=o.panel._SP||[],o.panel._SP.push(o),ig$._fix_split?o.spui.css({backgroundColor:"transparent"}):(o.spui.css({cursor:t,"user-select":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none"}),o.spui.bind("mousedown",function(t){o.startDrag.call(o,t)}))},setV:function(t){t&&!ig$._fix_split?this.spui.show():this.spui.hide()},startDrag:function(t){var i=this;function e(t){t.stopPropagation(),t.preventDefault(),i.doDrag.call(i,t)}t.target==i.spui[0]&&(t.stopPropagation(),t.preventDefault(),i._ghost=i._ghost||i.spui.clone(!1).appendTo(i.docmain.box),i._ghost.css("-webkit-user-select","none"),i._poff=i.docmain.box.offset(),i._initPos=i.spui.position(),$(document).bind("mousemove",e).bind("mouseup",function t(o){o.stopPropagation(),o.preventDefault(),i.endDrag.call(i,o),$(document).unbind("mousemove",e).unbind("mouseup",t)}))},doDrag:function(t){var o,i=this;i._ghost&&(t.stopPropagation(),"horizontal"==i._dir?(o=t.pageY-i._initPos.top-i._poff.top,i._ghost.css({top:i._initPos.top+o})):(o=t.pageX-i._initPos.left-i._poff.left,i._ghost.css({left:i._initPos.left+o})))},endDrag:function(t){if(t.stopPropagation(),this._ghost){var o,i,e,s=this,n=s._ghost.offset(),l=s.docmain.box.offset(),a={left:n.left-l.left,top:n.top-l.top},p="horizontal"==s._dir?"top":"left",r="horizontal"==s._dir?"height":"width",c="horizontal"==s._dir?"h":"w",u=s.panel,d=0;for(_pitem=u.parent,mval=40,o=a[p]-s._initPos[p],i=0;i<_pitem.children.length;i++)if(_pitem.children[i]==u){d=i;break}e=_pitem.children[d-1],u.lt.pos[c]-o<mval&&(o=u.lt.ubody[c]-mval),e.lt.pos[r]+o<mval&&(o=mval-e.lt.pos[c]),e.lt.pos[c]=e.lt.pos[c]+o,u.lt.pos[c]=u.lt.pos[c]-o,e.lt.ubody.lt[c]=e.lt.pos[c],u.lt.ubody.lt[c]=u.lt.pos[c],s._ghost.remove(),s._ghost=null,s.docmain.resizeContainer.call(s.docmain,[e,u]),s.docmain.updateDisplay.call(s.docmain,!0)}},remove:function(){this.spui.remove()},validate:function(){var t,o=this,i=(o._dir,0),e=0,s=0,n=0,l=o.panel;l.lt.ubody;if(l){switch(t=l.lt.pos,o._dir){case"vertical":i=t.x,e=t.y,s=2,n=t.h;break;case"horizontal":i=t.x,e=t.y,s=t.w,n=2}o.spui.css({top:e,left:i,width:s,height:n})}}};
IG$.dockingWidget=function(i,e,t){var n=this;n.owner=i,n.container=!1,n.showtitle=!0,n._v=!0,n.visible=!0,n.x=t&&t.x?t.x:null,n.y=t&&t.y?t.y:null,n.width=t&&t.width?t.width:null,n.height=t&&t.height?t.height:null,n.fixed_width=!1,n.fixed_height=!1,n.hidetitle=!1,n.docid=e,n.activeTab=0,n.dragging=!1,n.box=$("<div class='idv-dk-main' "+e+"></div>").css({position:"absolute",width:IG$.j$ext._w(i.box)||100,height:IG$.j$ext._h(i.box)||100}),n.binner=$("<div class='dock_inner'></div>").appendTo(n.box),n.box_container=$("<div class='dock_content'></div>").appendTo(n.binner),n.box_title=$("<div class='dock_title doc_title_normal'></div>").appendTo(n.binner).dselect(),$("<span class='dock_title_fbutton'></span>").appendTo(n.box_title).bind("click",function(e){n.box_slideout=!n.box_slideout,n.updTitleFloat()}),$("<div class='dock_title_icon'></div>").appendTo(n.box_title),$("<div class='dock_title_text'><span id='dock_title_text'>&nbsp;</span></div>").appendTo(n.box_title),n.btnarea=$("<div class='dock_title_btnarea'></div>").appendTo(n.box_title),n.measure_selector=$("<select class='dock_measure_selector'></select>").appendTo(n.box_title),n.measure_selector.bind("change",function(e){var t,i=n.measure_selector.val(),o=-1;if(i&&n._measures_sel){for(t=0;t<n._measures_sel.length;t++)if(n._measures_sel[t]==i){o=t;break}-1<o&&n.view._refreshMeasureGroup.call(n.view,o)}}),n.btnmap={},0!=(t=t||{}).draggable&&n.box.draggable({handle:n.box_title,delay:300,distance:5,zIndex:99,start:function(e,t){if(!i.editmode)return!1;n.dragging=!0,i.showDropProxy.call(i,e,t)},drag:function(e,t){i.dragOver.call(i,e,t)},stop:function(e,t){i.dragStop.call(i,e,t),n.dragging=!1}}),n.box.bind("resize",function(){n.resizeH.call(n)}),n._dzid=n.owner._dzid+"_"+n.docid,n.resizeH(),t&&(n.fixed_width=void 0!==t.fixed_width?t.fixed_width:n.fixed_width,n.fixed_height=void 0!==t.fixed_height?t.fixed_height:n.fixed_height,n.showtitle=!t.hidetitle,n.showTitle(n.showtitle),n.setTitle(t.title),n.objtype=n.objtype||t.objtype),n.init()},IG$.dockingWidget.prototype={updTitleFloat:function(){var e=this;clearTimeout(e._timerFT),e.box_slideout?e._timerFT=setTimeout(function(){e.btnarea.slideUp(),$(".dock_title_text",e.box_title).slideUp()},5e3):(e.btnarea.slideDown(),$(".dock_title_text",e.box_title).slideDown(),e.showtitle||(e.box_slideout=!0,e.updTitleFloat()))},validateProperty:function(){var e=this;switch(e.objtype){case"SHEET":case"FILTER":case"TEXT":case"RPT_VIEW":e.container=!1,e.children=[];break;case"PANEL":case"_dc":case"TAB":e.container=!0,e._direction=0,e.children=[]}},setToolButtons:function(e){var o=this,i=e||[],n=(o.owner,o.btnarea),t=ig$.sheet_toolbar,s=o.btnmap={};n.empty(),"SHEET"==o.objtype&&(i.push({name:"viewgrid",hidden:!0,cls:"idv-dk-btn-vgrid",handler:function(e){this.view.updateViewMode.call(this.view,"grid")},scope:o}),i.push({name:"viewchart",hidden:!0,cls:"idv-dk-btn-vchart",handler:function(e){this.view.updateViewMode.call(this.view,"chart")},scope:o}),i.push({name:"viewrstat",hidden:!0,cls:"idv-dk-btn-vrstat",handler:function(e){this.view.updateViewMode.call(this.view,"r")},scope:o})),i.push({name:"exp_excel",hidden:!0,cls:"idv-dk-btn-e-xls",handler:function(e){this.view.exportSheet.call(this.view,"EXCEL")},scope:o}),i.push({name:"exp_pdf",hidden:!0,cls:"idv-dk-btn-e-pdf",handler:function(e){this.view.exportSheet.call(this.view,"PDF")},scope:o}),i.push({name:"jasper_excel",hidden:!0,cls:"idv-dk-btn-e-xls",handler:function(e){this.view.exportSheet.call(this.view,"JASPER_EXCEL")},scope:o}),i.push({name:"jasper_pdf",hidden:!0,cls:"idv-dk-btn-e-pdf",handler:function(e){this.view.exportSheet.call(this.view,"JASPER_PDF")},scope:o}),i.push({name:"jasper_ppt",hidden:!0,cls:"idv-dk-btn-e-pdf",handler:function(e){this.view.exportSheet.call(this.view,"JASPER_PPT")},scope:o}),i.push({name:"jasper_docx",hidden:!0,cls:"idv-dk-btn-e-pdf",handler:function(e){this.view.exportSheet.call(this.view,"JASPER_DOCX")},scope:o}),i.push({name:"jasper_rtf",hidden:!0,cls:"idv-dk-btn-e-pdf",handler:function(e){this.view.exportSheet.call(this.view,"JASPER_RTF")},scope:o}),i.push({name:"jasper_html",hidden:!0,cls:"idv-dk-btn-e-pdf",handler:function(e){this.view.exportSheet.call(this.view,"JASPER_HTML")},scope:o}),i.push({name:"office_0",hidden:!0,cls:"idv-dk-btn-e-off-0",handler:function(e){this.view.exportSheet.call(this.view,"OFFICE_0")},scope:o}),i.push({name:"office_1",hidden:!0,cls:"idv-dk-btn-e-off-1",handler:function(e){this.view.exportSheet.call(this.view,"OFFICE_1")},scope:o}),i.push({name:"office_2",hidden:!0,cls:"idv-dk-btn-e-off-1",handler:function(e){this.view.exportSheet.call(this.view,"OFFICE_2")},scope:o}),i.push({name:"office_3",hidden:!0,cls:"idv-dk-btn-e-off-1",handler:function(e){this.view.exportSheet.call(this.view,"OFFICE_3")},scope:o}),i.push({name:"exp_csv",hidden:!0,cls:"idv-dk-btn-e-csv",handler:function(e){this.view.downloadAllCSV.call(this.view,"CSV")},scope:o}),ig$.features&&ig$.features.ml&&"SHEET"==o.objtype&&i.push({name:"ml_learn",cls:"ig_ml_learn",hidden:!1,handler:function(e){this.view.mlLearn.call(this.view)}}),t&&t.length&&$.each(t,function(e,t){i.push({name:t.key,label:t.label,hidden:!0,cls:t.cls,handler:function(e){try{t.handler&&t.handler.call(t.scope||o.view,o.view,t.key)}catch(e){}},scope:o})}),i.push({name:"pivot",hidden:!0,cls:"icon-toolbar-pivot",handler:function(e){var t=this.owner;t.configDock.call(t,e.docid,"config_pivot")},scope:o}),i.push({name:"config",hidden:!0,cls:"icon-grid-config",handler:function(e){var t=this.owner;t.configDock.call(t,e.docid,"config_doc")},scope:o}),i.push({name:"maximize",cls:"dock_maximize_button",handler:function(e){var t=this.owner;t.maximizeWidget.call(t,e.docid)},scope:o}),i.push({name:"close",hidden:!0,cls:"dock_close_button",handler:function(e){var t=this.owner;t.closeWidget.call(t,e.docid)},scope:o}),$.each(i,function(e,t){var i=$("<div class='dock_button "+(t.cls||"")+"'></div>").appendTo(n).dselect();t.el=i,t.label&&i.append("<span>"+t.label+"</span>"),t.hidden&&t.el.hide(),s[t.name||"btn_"+e]=t,i.bind("click",function(e){t.handler?t.handler.call(t.scope||o,o):o.box.trigger("buttonclick",{panel:o,button:t})})})},dropIn:function(e){var t=this.owner,i=this.binner,o=5,n=5,s=IG$.j$ext._w(i)-10,l=IG$.j$ext._h(i)-10;switch(e){case"right":o=s/2;case"left":s/=2;break;case"bottom":n=l/2;case"top":"top"==e&&(n+=20),l/=2}t.showDrop.call(t,this,{top:n,left:o,width:s,height:l},e)},dropOut:function(){this.owner.hideDropProxy.call(this.owner,this)},dropHit:function(e,t,i,o){var n,s,l,d,a,c,h,r,p=this,_=p._pc,f=e.x+o.left,b=e.y+o.top,x=0,v=0,u=p.bbox;if(u.x<f&&f<u.x+u.w&&u.y<b&&b<u.y+u.h&&(s="none",t&&"_dc"!=p.objtype)){for(n=_.parent;n&&("PANEL"!=n.objtype&&"TAB"!=n.objtype||(x+=20),!(n=n.parent)||n!=n.parent););v=2*x*.3,"PANEL"==p.objtype||"TAB"==p.objtype?(v=20,a=u.x+x,h=u.x+x+20,c=u.y+x+20,r=u.y+u.h-2*x-20,c<b&&b<r?a<f&&f<h?s="left":u.x+u.w-2*x-20<f&&f<u.x+u.w-2*x&&(s="right"):a<f&&f<u.x+u.w-2*x&&(u.y+x<b&&b<c?s="top":u.y+u.h-2*x-20<b&&b<u.y+u.h-2*x&&(s="bottom")),"TAB"==p.objtype&&"none"==s?(p._pc.children=p._pc.children||[],0<p._pc.children.length&&!(u.x<f&&f<u.x+u.w&&u.y+20<b&&b<u.y+40)||(s="inner")):"PANEL"==p.objtype&&"none"==s&&(s=0<p._pc.children.length&&"_dc"==p._pc.children[0].objtype&&p._pc.children[0].children.length?"_panel_":"inner")):(v=.3,l=u.h-2*x,d=u.w-2*x,a=u.x+x,c=u.y+x+l*v,h=u.x+x+d*v,r=u.y+u.h-l*v-x,c<b&&b<r?a<f&&f<h?s="left":u.x+u.w-d*v-x<f&&f<u.x+u.w-x&&(s="right"):h<f&&f<u.x+u.w-d*v-x&&(u.y+x<b&&b<u.y+x+l*v?s="top":u.y+u.h-l*v-x<b&&b<u.y+u.h-x&&(s="bottom")))}return s},init:function(){var t=this;t.setToolButtons();var e=t.btnmap,i=e.pivot.el,o=e.config.el;t.box_title.bind({click:function(){var e="FILTER"==t.objtype||"SHEET"==t.objtype;t._editmode&&(o.show(),e&&i.show())},mouseover:function(){var e="FILTER"==t.objtype||"SHEET"==t.objtype;t._editmode&&(o.show(),e&&i.show())},mouseout:function(){var e="FILTER"==t.objtype||"SHEET"==t.objtype;t._editmode&&(o.fadeOut(2e3,function(){o.hide()}),e&&i.fadeOut(2e3,function(){i.hide()}))}})},resizeH:function(){var e,t,i,o=this,n=IG$.j$ext._w(o.binner),s=IG$.j$ext._h(o.binner),l=1==o._v&&(o.showtitle||o.owner.editmode)?IG$.j$ext._h(o.box_title):0,d=o.box_container;0<n&&0<s-l&&(1==o.showtitle?(o.box_title.css({width:n+"px",left:"0px"}),o.box_slideout=!1,o.updTitleFloat()):(o.box_title.css({width:"initial",right:"0px",left:"initial"}),o._active&&(o.box_slideout=!1,o.updTitleFloat())),d.css({top:l}),d.height(s-l),o.view&&((e=o.view.renderTo)&&(e=$(e),t=IG$.j$ext._w(e),i=IG$.j$ext._h(e),t==n&&i==s-l||(IG$.j$ext._w(e,n),IG$.j$ext._h(e,s-l))),"_dc"!=o.objtype&&(o.view.setSize(n,s-l,!0),d.hide().show(0))))},setTitle:function(e){this.title=e,this.applyFlt()},getTitle:function(){return $("#dock_title_text",this.box_title).text().trim()},_title:function(e){$("#dock_title_text",this.box_title).html(e||"&nbsp;"),this.box.trigger("titlechange",{panel:this})},formatTitle:function(e){for(var t,i,o=this._param,n=(e=IG$._rrcs(this,e))?e.lastIndexOf("${"):-1;-1<n&&-1<(t=e.indexOf("}",n));)i=e.substring(n+2,t),n=(e=e.substring(0,n)+(i&&o&&o[i]?o[i]:"")+e.substring(t+1)).lastIndexOf("${",n+2);return e},applyFlt:function(){var e=this.title,t=this.formatTitle(e);this.title_disp=t,this._title(t)},showTitle:function(e,t){var i;void 0!==e&&(i=this,1!=t&&(i.showtitle=e),e!=i._v&&(i._v=!(!i.owner.editmode||!i._active)||e,i.box_title[0==i._v?"hide":"show"](),e?i.box_title.removeClass("dock_title_floating"):i.box_title.addClass("dock_title_floating"),i.resizeH()))},showMeasureSelector:function(e,t){var i,o,n=this.measure_selector,s=-1;if(e&&1<t.length)for(this._measures_sel=t,n.show(),o=(o=n.val())||t[0],n.empty(),i=0;i<t.length;i++)t[i]==o&&(s=i),$("<option"+(t[i]==o?" selected":"")+">"+t[i]+"</option>").appendTo(n);else this.measures_sel=null,n.hide();return s},hide:function(){this.box.hide()},show:function(){"_dc"!=this.objtype&&this.box.show()},viewchange:function(e,t){var i=this;i.btnmap.viewgrid&&i.btnmap.viewgrid.el[e?"show":"hide"](),i.btnmap.viewchart&&i.btnmap.viewchart.el[e?"show":"hide"](),i.btnmap.viewrstat&&i.btnmap.viewrstat.el[e&&t?"show":"hide"]()},setReportOption:function(e){var t,i,o,n,s,l=this,d=ig$.sheet_toolbar,a={},c=e.model,h=[];if(l.btnmap.exp_excel.el.hide(),l.btnmap.exp_pdf.el.hide(),l.btnmap.exp_csv.el.hide(),l.btnmap.jasper_excel.el.hide(),l.btnmap.jasper_pdf.el.hide(),l.btnmap.jasper_docx.el.hide(),l.btnmap.jasper_html.el.hide(),l.btnmap.jasper_ppt.el.hide(),l.btnmap.jasper_rtf.el.hide(),l.btnmap.office_0.el.hide(),l.btnmap.office_1.el.hide(),l.btnmap.office_2.el.hide(),l.btnmap.office_3.el.hide(),c&&c.tb_prt_i)for(n=c.tb_prt_i.split(";"),s=c.tb_prt_s?c.tb_prt_s.split(";"):[],o=0;o<n.length;o++)a[n[o]]={icon:s[o]};if(d)for(o=0;o<d.length;o++)t=d[o],(i=l.btnmap[t.key])&&i.el.hide(),a[t.key]&&l.btnmap[t.key].el.show();c&&(l.viewchange(c.tb_vch),c.tb_prt&&c.tb_prt_i&&(h=[{n:"excel",m:"exp_excel"},{n:"pdf",m:"exp_pdf"},{n:"csv",m:"exp_csv"},{n:"jasper_excel",m:"jasper_excel"},{n:"jasper_pdf",m:"jasper_pdf"},{n:"jasper_ppt",m:"jasper_ppt"},{n:"jasper_docx",m:"jasper_docx"},{n:"jasper_rtf",m:"jasper_rtf"},{n:"jasper_html",m:"jasper_html"},{n:"office_0",m:"office_0"},{n:"office_1",m:"office_1"},{n:"office_2",m:"office_2"},{n:"office_3",m:"office_3"}],$.each(h,function(e,t){a[t.n]&&(l.btnmap[t.m].el.show(),a[t.n].icon&&l.btnmap[t.m].el.addClass(a[t.n].icon))})))},showDropProxy:function(){this.owner.drawDropProxy.call(this.owner,this),this.$sizeDropProxy()},hideDropProxy:function(){this.owner.removeDropProxy.call(this.owner,this)},$sizeDropProxy:function(){var e=this,t=$(e.owner.body_container),i=e.box.offset(),o=IG$.j$ext._w(e.box),n=IG$.j$ext._h(e.box),s=e.drop_proxy;e.bbox={x:i.left+t.scrollLeft(),y:i.top+t.scrollTop(),w:o,h:n},IG$.j$ext._w(s,o),IG$.j$ext._h(s,n)},setActive:function(e){var t=this,i=t.box_title,o=t.box_container;1==(t._active=e)?(i.removeClass("doc_title_normal").addClass("doc_title_selected"),o.removeClass("doc_normal").addClass("doc_active"),t.owner.editmode&&!t.showtitle&&(t.box_title.show(),t.box_slideout=!0,t.updTitleFloat())):(i.removeClass("doc_title_selected").addClass("doc_title_normal"),o.removeClass("doc_active").addClass("doc_normal"),t.showtitle||t.owner.editmode||t.box_title.hide())},_measureContainer:function(){var e=this._pc;return{fixed:{w:e._fw,h:e._fh},flex:{w:e._w,h:e._h},m:{w:e._mw,h:e._mh}}}};
IG$.boDockZone=function(i,e){var o=this,d=-1,h=-1;o.items=[],o.splitters=[],o.editmode=!1,o.cobj=e,o.docid=0,o.invalidate=-1,o.sizeapplied=0,o.el_container=i,o._el={dom:i},o.$openmode=e.$openmode,o.body_container=$("<div class='idv-doc-base igc_view_mode'></div>").appendTo(i).css({width:IG$.j$ext._w(i),height:IG$.j$ext._h(i)}),o.box=$("<div class='idv-doc-layouter'></div>").appendTo(o.body_container).css({minWidth:IG$.j$ext._w(i),minHeight:IG$.j$ext._h(i),position:"relative"}),i.bind("resize",function(){var e=IG$.j$ext._h(i),t=IG$.j$ext._w(i);0<t&&0<e&&(d!=t||h!=e)&&(o.sizeapplied=1,o.body_container.css({width:t,height:e}),o.box.css({minWidth:t,minHeight:e}),o.cW=t,o.cH=e,o.updateDisplay.call(o,!0)),d=t,h=e}),i.css({overflow:"hidden"}),o.init(),o.draggable=null},IG$.boDockZone.prototype={init:function(){var e=this;(e.drop_proxy=$("<div class='dock-inside-wrap'></div>").css({position:"absolute",top:0,left:0}).appendTo(e.body_container).dselect()).hide(),e.dockinsg=$("<div class='dock-inside-guide'></div>").css({position:"absolute"}).appendTo(e.body_container).hide().dselect(),e.bodylist={},e._root={type:"mondrian",draggable:!1,objtype:"_dc",_direction:0,width:null,height:null,children:[]}},configDropZone:function(){var n=this,e=n.body_container[0];$s.create&&$s.dropzone&&(n.dropZone=$s.create($s.dropzone,e,{ddGroup:"_I$RD_G_",nodeouttimer:-1,notifyOut:function(e,t,i){var o=this;o.lastOverNode&&(o.onNodeOut(o.lastOverNode,e,t,i),o.lastOverNode=null),grid.isDragging=!1,grid.hideDropFeedback&&(grid.hideDropFeedback.call(grid,t),1==o.accept&&1==o.pivotmove&&grid.sheetobj&&(-1<o.nodeouttimer&&clearTimeout(o.nodeouttimer),o.nodeouttimer=setTimeout(function(){grid.hideDropFeedback.call(grid,t)},100)))},onNodeEnter:function(e,t,i,o){var d=!1;o.records&&0<o.records.length?"Report"==o.records[0].get("type")&&(d=!0):o.cellData&&(o.cellData,d=!0),d&&n.showDropProxy.call(n,i,void 0),this.accept=d},onNodeOut:function(e,t,i,o){},onNodeOver:function(e,t,i,o){var d=this,h=window.Ext?1==d.accept?Ext.dd.DropZone.prototype.dropAllowed:Ext.dd.DropZone.prototype.dropNotAllowed:d.accept;return 1==d.accept&&(o.records&&0<o.records.length?o.records[0].data:o.cellData,n.dragOver.call(n,i.browserEvent,void 0)),h},onNodeDrop:function(e,t,i,o){return 1==this.accept&&(o.records&&0<o.records.length?(dt=o.records[0].data,grid.sobj.onDropRecord.call(grid.sobj,i,dt)):dt=o.cellData),!(this.accept=!1)}}))},customLoad:function(e,t){if(1==e){var i,o,d,h=this;if(h._ldo=h._ldo||[],t)for(d=0;d<h._ldo.length;d++)if(h._ldo[d]==t)return;h._ldo.push(t),o={msg:IRm$.r1("B_PROC")+" <button id='m-mec-loader'>"+IRm$.r1("B_PROC_CANCEL")+"</button>"},h._$setLoading(o),i=$(h.rendermask),$("#m-mec-loader",i).bind("click",function(){var i=h._ldo.length;$.each(h._ldo,function(e,t){t&&t.cancelQuery&&t.cancelQuery(new IG$.callBackObj(h,function(){0==--i&&(h._ldo=[],h.setLoading(!1,void 0,!0))}))})})}},setLoading:function(e,t){var i,o=this;if(o._ldo){for(i=o._ldo.length-1;0<=i;i--)o._ldo[i]==t&&(o._ldo.splice(i,1),0);0==o._ldo.length&&o._$setLoading(!1)}},_$setLoading:function(e,t){var i=this,o={target:i};return i._el.dom&&(i.loadMask&&i.loadMask.destroy(),o.target.rendermask=null,i.loadMask=null,!1!==e&&(IG$.isObject(e)?IG$.apply(o,e):IG$.isString(e)&&(o.msg=e),i.loadMask=new IG$._mask(o),i.loadMask.show())),i.loadMask},processLayoutWidget:function(e,t,i,o){var d=this,h=o[e.docid]||new IG$.sheetfiltercomp(null),n=h.model,l=d.appendWidgetBox.call(d,e.docid,{width:e.width?parseInt(e.width):null,height:e.height?parseInt(e.height):null,title:n.name||"",close:n.close,hidetitle:n.hidetitle,fixed_width:n.fixed_width,fixed_height:n.fixed_height,showtab:!n.tab_option||"F"!=n.tab_option.showtab,draggable:d.draggable},e.objtype);e.docid=l.docid,l.objtype=e.objtype,h.objtype=l.objtype,h.docid=l.docid,o[l.docid]=h,e.lt={pos:{x:0,y:0,w:0,h:0},ubody:l},l._pc=e,l.validateProperty.call(l),$.each(e.children,function(e,t){d.processLayoutWidget.call(d,t,!1,i,o)})},processLayoutView:function(i){var o=this,d=o.ctrls,n=[];o._async={c:0,f:0,bd:[]},$.each(o.items,function(e,t){switch(t._loaded=0,o._async.bd.push(t),t.objtype){case"FILTER":o._async.f++,n.push(t);break;default:o._async.c++}}),$.each(o.items,function(e,t){d[t.docid];t.box_container.bind("i_ready",function(e){var h;if(e.stopPropagation(),!t._loaded){switch(t._loaded=1,t.objtype){case"FILTER":o._async.f--;break;default:o._async.c--}0==o._async.c&&0==o._async.f&&0==o.cmode&&(n.length?1==n.length?(h=n[0]).view&&h.view.updateFilterValues.call(h.view,!0,!0):($.each(n,function(e,t){var i,o,d=t.view;d&&((o=!!(i=d.sheetoption.filter_options)&&i.showbutton&&i.f_b_trg?1:0)&&i.f_b_trg_all,o&&(h=t))}),(h=h||n[n.length-1]).view&&h.view.updateFilterValues.call(h.view,!0,!0)):o.cobj.toolbarHandler.call(o.cobj,"cmd_run",null,null,null,1))}}),o.createWidgetView.call(o,t,i)}),$.each(o.items,function(e,t){"FILTER"==t.objtype&&t.view.init_f.call(t.view,!0)})},createWidgetView:function(e,t){var i,d=this,o=d.ctrls[e.docid];"FILTER"==e.objtype?(t.__dreg&&t.__dreg[o.docid]?((i=t.__dreg[o.docid].fobj).report=t,i.sheetoption=o,i.dzone=d,i.init_f.call(i),e.hidden=!0):i=new IG$.dynFilterView(e.box_container,o,t),i.callback=new IG$.callBackObj(t,t.onFilterUpdate)):"TEXT"==e.objtype?(i=new IG$.rfText(e.box_container,o),e.box_container.trigger("i_ready")):"NAVI"==e.objtype?(i=new IG$.rfNavi(e.box_container,o),e.box_container.trigger("i_ready")):"PANEL"==e.objtype||""==e.objtype?(i=new IG$.rfBlankPanel(e.box_container,o),e.box_container.trigger("i_ready")):"TAB"==e.objtype?(i=new IG$.rfTabPanel(e.box_container,o,d,t),e.box_container.trigger("i_ready")):"RPT_VIEW"==e.objtype?(i=new IG$.rfReportViewer(e.box_container,o,d,t)).validateItems.call(i,void 0,!0):"SHEET"==e.objtype?i=null:(i=null,e.box_container.trigger("i_ready")),e.objtype&&e.box.addClass("igc-"+e.objtype.toLowerCase()+"-cnt"),i&&(i.sheetoption=o,e.view=i,"FILTER"==e.objtype&&(e.setReportOption.call(e,o),e.box_container.bind("export_sheet",function(e,t,i){var o=d.cobj;o.exportToFile.call(o,i.filetype.toUpperCase(),!1,t)})))},isContainer:function(e){return"TAB"==e||"PANEL"==e||"_dc"==e},getNodeSize:function(e){for(var t,i=0,o=0,d=0;d<e.children.length;d++)(t=e.children[d]).width&&t.height&&(0==e._direction?(i+=t.width,o=Math.max(o,t.height)):(i=Math.max(i,t.width),o+=t.height));e.width=i,e.height=o},makeLayout:function(e,t,i){var o=this;o._root=t,o.ctrls=i,t&&(o.gdoc_id(t),o.processLayoutWidget(t,!0,e,i),o.updateDisplay(!1,!0),o.processLayoutView(e))},gdoc_id:function(e){var i=this;i.doc_id(e.docid),e.children&&$.each(e.children,function(e,t){i.gdoc_id(t)})},doc_id:function(e){var t;e&&-1<e.indexOf("_")&&(t=parseInt(e.substring(e.indexOf("_")+1))+1,this.docid=Math.max(this.docid,t))},showDrop:function(e,t,i){var o=this,d=(o.docitems[e.docid],e.binner),h=IG$.j$ext._w(d),n=IG$.j$ext._h(d),l=o.drop_proxy;o.drawDropProxy(e),IG$.j$ext._w(l,h),IG$.j$ext._h(l,n),t.top+=o.__mpos?o.__mpos.top:0,t.left+=o.__mpos?o.__mpos.left:0,o.dockinsg.css(t),o.dockinsg.show()},drawDropProxy:function(e){var t=this,i=t.drop_proxy,o=t.dockinsg,d=e.binner.offset(),h=$(t.body_container),n=h.offset();t.__mpos={top:d.top-n.top+h.scrollTop(),left:d.left-n.left+h.scrollLeft()},i.css({top:t.__mpos.top,left:t.__mpos.left,zIndex:120}),i.show(),o.css({zIndex:122}),o.show()},removeDropProxy:function(e){var t=this.drop_proxy,i=this.dockinsg;t.hide(),i.hide()},titleChangeHandler:function(){$.each(this.items,function(e,t){"TAB"==t.objtype&&t.view.validateItems.call(t.view)})},appendWidgetBox:function(e,t,i){var o,d,h,n=this;return e?-1<e.indexOf("_")&&(d=parseInt(e.substring(e.indexOf("_")+1))+1,n.docid=Math.max(n.docid,d)):(e="dock_"+n.docid++,h=!0),n.bodylist[e]?o=n.bodylist[e]:(t&&(t.objtype=t.objtype||i),(o=new IG$.dockingWidget(n,e,t)).box.appendTo(n.box),n.items.push(o),n.bodylist[e]=o),o.box.bind("titlechange",function(){n.titleChangeHandler.call(n)}),h||n.updateDisplay.call(n),o},getBox:function(e){for(var t=this.items,i=null,o=0;o<t.length;o++)if(t[o].docid==e){i=t[o];break}return i},clearAll:function(){for(var e=this.items,t=e.length-1;0<=t;t--)e[t].box.remove(),e.splice(t,1);this.bodylist={},this.docitems={},this.updateDisplay()},removeWidget:function(e,t,i){for(var o,d,h=this,n=h.items,l=0;l<n.length;l++)if(n[l].docid==e){n[l].box.remove(),n.splice(l,1);break}if((o=h.docitems[e])&&o.children&&o.children.length)for(l=o.children.length-1;0<=l;l--)h.removeWidget(o.children[l].docid,1,1);if(!i&&o&&o.parent){for(o.parent.node,d=o.parent.children,l=0;l<d.length;l++)if(d[l].docid==o.docid){d.splice(l,1);break}"_dc"==o.parent.objtype&&0==o.parent.children.length&&h.removeWidget(o.parent.docid,t)}delete h.bodylist[e],delete h.docitems[e],t||h.updateDisplay.call(h)},closeWidget:function(i){var o=this,e=o.docitems[i];1==e.container&&!e.parent||IG$.confirmMessages(ig$.appname,"Confirm to delete content?",function(e){var t;"yes"==e&&(t=!0,o.closeDockNoti&&(t=o.closeDockNoti.f.call(o.closeDockNoti.s,i)),1==t&&o.removeWidget.call(o,i))})},maximizeWidget:function(e){var t,i=this,o=!0,d=i.bodylist;i.maximizeDockNotify&&(o=i.maximizeDockNotify.f.call(i.closeDockNotify.s,e)),1==o&&((t=d[e]).status="max"==t.status?null:"max",t.btnmap.maximize.el["max"==t.status?"addClass":"removeClass"]("dock_minimize"),i.updateDisplay.call(i,!0))},configDock:function(e,t){this.box.trigger(t,e)},setLayout:function(e){this.processLayout(e,null)},processLayout:function(e,t){if(e&&0<e.length)for(var i,o,d=0;d<e.length;d++)(o=e[d]).draggable=this.draggable,(i=this.appendWidgetBox(o.docid||null,o,o.objtype)).objtype=o.objtype,o.items&&this.processLayout(o.items,i)},getLayout:function(){var e=this._root,t={type:"mondrian",children:[]};return t.children=this.$doLayout(e,null),t},$doLayout:function(d,e){var h=this,t=[],n={docid:d.docid,objtype:d.objtype,width:d.width,height:d.height,r:e?e.docid:null,p:null,d:d._direction};return t.push(n),d.children&&(n.children=[],$.each(d.children,function(e,t){for(var i=h.$doLayout.call(h,t,d),o=0;o<i.length;o++)n.children.push(i[o])})),t},setActive:function(e){for(var t,i=this.items,o=0;o<i.length;o++)(t=i[o]).setActive.call(t,e==t);this.box.trigger("activechanged",e)},clearSplitters:function(){for(var e,t=this.splitters,i=t.length-1;0<=i;i--)(e=t[i]).remove(),e.panel&&(e.panel._SP=[]);t=[]},updateDisplay:function(e,t){var i=this;-1<i.invalidate&&clearTimeout(i.invalidate),1==t?(i.validateNow.call(i),e?i.updateScale.call(i):i.box.trigger("updatecomplete")):i.invalidate=setTimeout(function(){i.validateNow.call(i),e?i.updateScale.call(i):i.box.trigger("updatecomplete")},50)},validateNow:function(){var e,t,i,o,d,h,n,l,a,r,c=this,s=IG$.j$ext._w(c.body_container)-2,_=IG$.j$ext._h(c.body_container)-2,p=null,f=0,w=0;if(c.clearSplitters(),c._root&&c._root.lt&&0<s&&0<_){if(s<500){for(o in f=1,c.docitems)"SHEET"!=(i=c.docitems[o]).objtype&&"TAB"!=i.objtype||w++;w<2&&(f=0)}for(o in l=(e=c._root).lt.ubody,e.lt.pos.x=0,e.lt.pos.y=0,e.lt.pos.w=s,e.lt.pos.h=_,f?c._updateNodeSize_responsive(c._root):c._updateNodeSize(c._root),c.docitems={},h=(d=l._measureContainer.call(l)).fixed.w,n=d.fixed.h,s=Math.max(h,s,d.m.w),_=Math.max(n,_,d.m.h),h>c.cW&&n<c.cH?_-=20:n>c.cH&&h<c.cW?s-=20:n>c.cH&&h>c.cW&&(s-=20,_-=20),a={x:0,y:0,w:s,h:_},f?(c._resp_y=0,c.updateLayout_responsive(e,0,0,s,_,0,d,a,!1)):c.updateLayout(e,0,0,s,_,0,d,a,!1),c.bodylist)if("max"==c.bodylist[o].status&&0!=c.bodylist[o].visible){p=o;break}for(o in c.docitems)i=c.docitems[o],t=(0==(t=c.bodylist[o].visible)||1!=c.bodylist[o].hidden)&&t,r=i.lt.ubody.box,i.visible=!p&&0!=t||o==p,i.visible&&"_dc"!=i.objtype?(r.show(),r.trigger("resize")):r.hide();p||c.validateSplitter()}},updateScale:function(){var e,t,i,o,d,h,n=this,l={overflowX:"hidden",overflowY:"hidden"},a=n.box,r=(a.offset(),0),c=0;for(d in n.docitems)(e=n.docitems[d])&&e.lt&&e.lt.ubody&&(h=e.lt.pos,t={top:Math.round(h.y),left:Math.round(h.x)},i=Math.round(h.w),o=Math.round(h.h),r=Math.max(r,i+t.left),c=Math.max(c,o+t.top),e.lt.ubody.width=i,e.lt.ubody.height=o,e.width=i,e.height=o);0<r&&0<c&&(n.sizeapplied=1,IG$.j$ext._w(a,r),IG$.j$ext._h(a,c),r>n.cW&&(l.overflowX="auto"),c>n.cH&&(l.overflowY="auto"),n.body_container.css(l).animate({scrollTop:0,scrollLeft:0}),n.box.trigger("boxresized"))},showTabButton:function(e,t){e.view&&e.view.tabarea&&(e.view.editmode=this.editmode,e.view.tabarea[t?"show":"hide"]())},updateLayout:function(d,e,t,i,o,h,n,l,a){var r,c,s,_,p,f,w,b,u,g,y=this,m=d.lt.ubody,x={fixedw:0,fixedh:0,flexw:0,flexh:0},v=0,j="TAB"==m.objtype,T="PANEL"==m.objtype,k="max"==m.status,I=!(1==j&&m.view&&m.view.sheetoption&&m.view.sheetoption.model&&m.view.sheetoption.model.tab_option&&"F"==m.view.sheetoption.model.tab_option.showtab),L=0,A=m.hidden,N=y.editmode?"show":"hide",B=m.btnmap;for("FILTER"==m.objtype||"SHEET"==m.objtype?B.pivot.el[N]():B.pivot.el.hide(),B.config.el[N](),B.close.el[N](),b=d.parent;b&&!A;){if(b.hidden){A=1;break}if(0==b.visible){A=1;break}if((u=b.parent)&&"TAB"==u.objtype&&u.active!=b.docid){A=1;break}b=b.parent}y.bodylist[m.docid]&&y.bodylist[m.docid].view&&(y.bodylist[m.docid].view._editmode=y.editmode),y.editmode?(m.showTitle.call(m,!0,!0),j&&y.showTabButton(m,!0),a&&"TAB"==a.objtype&&(L=24)):(m.showTitle.call(m,m.showtitle,!0),j&&I?y.showTabButton(m,!0):j&&y.showTabButton(m,!1),a&&"TAB"==a.objtype&&a.lt&&a.lt.ubody&&a.lt.ubody.view&&a.lt.ubody.view.sheetoption&&a.lt.ubody.view.sheetoption.model&&a.lt.ubody.view.sheetoption.model.tab_option&&"T"==a.lt.ubody.view.sheetoption.model.tab_option.showtab&&(L=24)),m._v&&"_dc"!=m.objtype&&(v=IG$.j$ext._h(m.box_title)),d.__titleh=v,r=(y.docitems[d.docid]=d).fixed_width,c=d.fixed_height,x.fixedw=n.fixed.w,x.fixedh=n.fixed.h,x.flexw=n.flex.w,x.flexh=n.flex.h,x.flexw,x.flexh,x.fixedw,x.fixedh,p=d.lt.pos,a?!a||"PANEL"!=a.objtype&&"TAB"!=a.objtype?a&&"_dc"==a.objtype&&(p.x=e+(0==a._direction?a._g:0),p.y=t+(1==a._direction?a._g:0),1==a._direction?p.w=i:p.w=r?d._fw>i-a._g?i-a._g:d._fw:d._w*(i-n.fixed.w)/n.flex.w,0==a._direction?p.h=o:p.h=c?d._fh>o-a._g?o-a._g:d._fh:d._h*(o-n.fixed.h)/n.flex.h):(w=0,!a.__titleh||"PANEL"!=a.objtype&&"TAB"!=a.objtype||!a.lt.ubody._v&&!y.editmode||(w=a.__titleh),p.x=e,p.y=t+w+L,p.w=i,p.h=o-(w+L)):(p.x=e,p.y=t,p.w=i,p.h=o),f=m._measureContainer.call(m),p.w=f.m.w>p.w?f.m.w:p.w,p.h=f.m.h>p.h?f.m.h:p.h,m.lt={x:p.x,y:p.y,w:p.w,h:p.h},d._g=0,$.each(d.children,function(e,t){var i,o=m.lt;t.lt.ubody;y.updateLayout.call(y,t,o.x,o.y,o.w,o.h,e,f,l,d),d._g+=0==d._direction?t.lt.pos.w:t.lt.pos.h,0<e&&(i=new IG$.c$DckSplt({docmain:y,mondrian:!0,panel:t,direction:d._direction?"horizontal":"vertical"}),y.splitters.push(i))}),(_=m.box).removeClass("ic-top"),_.removeClass("ic-left"),_.removeClass("ic-right"),_.removeClass("ic-bottom"),s=y.isContainer(m.objtype),k||(0==p.x&&_.addClass("ic-left"),0==p.y&&_.addClass("ic-top"),p.x+p.w>l.w-10&&_.addClass("ic-right"),p.y+p.h>l.h-10&&_.addClass("ic-bottom")),g={left:k?l.x:p.x,top:k?l.y:p.y,width:k?l.w:p.w,height:k?l.h:p.h,zIndex:"_dc"==m.objtype?0:s?1:2},!m._invalidate&&_.__ps&&(!_.__ps||_.__ps.top==g.top&&_.__ps.left==g.left&&_.__ps.width==g.width&&_.__ps.height==g.height)||(m._invalidate=0,_.css(g),"_dc"==m.objtype||A?_.hide():_.show(),_.__ps=g,_._invl=1)},updateLayout_responsive:function(o,e,t,i,d,h,n,l,a){var r,c,s,_,p,f,w,b,u,g=this,y=o.lt.ubody,m={fixedw:0,fixedh:0,flexw:0,flexh:0},x=0,v="TAB"==y.objtype,j="PANEL"==y.objtype,T="max"==y.status,k=!(1==v&&y.view&&y.view.sheetoption&&y.view.sheetoption.model&&y.view.sheetoption.model.tab_option&&"F"==y.view.sheetoption.model.tab_option.showtab),I=0,L=y.hidden,A=g.editmode?"show":"hide",N=y.btnmap,B="dashboard"==g.$openmode;for("FILTER"==y.objtype||"SHEET"==y.objtype?N.pivot.el[A]():N.pivot.el.hide(),N.config.el[A](),N.close.el[A](),w=o.parent;w&&!L;){if(w.hidden){L=1;break}if(0==w.visible){L=1;break}if((b=w.parent)&&"TAB"==b.objtype&&b.active!=w.docid){L=1;break}w=w.parent}g.bodylist[y.docid]&&g.bodylist[y.docid].view&&(g.bodylist[y.docid].view._editmode=g.editmode),g.editmode?(y.showTitle.call(y,!0,!0),v&&g.showTabButton(y,!0),a&&"TAB"==a.objtype&&(I=24)):(y.showTitle.call(y,y.showtitle,!0),v&&k?g.showTabButton(y,!0):v&&g.showTabButton(y,!1),a&&"TAB"==a.objtype&&a.lt&&a.lt.ubody&&a.lt.ubody.view&&a.lt.ubody.view.sheetoption&&a.lt.ubody.view.sheetoption.model&&a.lt.ubody.view.sheetoption.model.tab_option&&"T"==a.lt.ubody.view.sheetoption.model.tab_option.showtab&&(I=24)),y._v&&"_dc"!=y.objtype&&(x=IG$.j$ext._h(y.box_title)),o.__titleh=x,(g.docitems[o.docid]=o).fixed_width,r=o.fixed_height,m.fixedw=n.fixed.w,m.fixedh=n.fixed.h,m.flexw=n.flex.w,m.flexh=n.flex.h,m.flexw,m.flexh,m.fixedw,m.fixedh,_=o.lt.pos,a?!a||"PANEL"!=a.objtype&&"TAB"!=a.objtype?a&&"_dc"==a.objtype&&(_.x=e+0,_.y=t+a._g,_.w=i,r?(_.h=o._fh>d-a._g?d-a._g:o._fh,"_dc"!=y.objtype&&(g._resp_y+=_.h)):"SHEET"==y.objtype||"TAB"==y.objtype?(_.h=B?o._h*(d-n.fixed.h)/n.flex.h:.8*l.h,g._resp_y+=_.h):(_.h=B?o._h*(d-n.fixed.h)/n.flex.h:o.height||o._mh,"_dc"!=y.objtype&&(g._resp_y+=_.h))):(f=0,!a.__titleh||"PANEL"!=a.objtype&&"TAB"!=a.objtype||!a.lt.ubody._v&&!g.editmode||(f=a.__titleh),_.x=e,_.y=t+f+I,_.w=i,_.h=d-(f+I)):(_.x=e,_.y=t,_.w=i,_.h=d),p=y._measureContainer.call(y),_.w=p.m.w>_.w?p.m.w:_.w,_.h=p.m.h>_.h?p.m.h:_.h,y.lt={x:_.x,y:_.y,w:_.w,h:_.h};o._g=0;$.each(o.children,function(e,t){var i=y.lt;t.lt.ubody;"PANEL"==o.objtype||"TAB"==o.objtype?g.updateLayout_responsive.call(g,t,i.x,o.lt.pos.y,i.w,i.h,e,p,l,o):g.updateLayout_responsive.call(g,t,i.x,g._resp_y,i.w,i.h,e,p,l,o)}),(s=y.box).removeClass("ic-top"),s.removeClass("ic-left"),s.removeClass("ic-right"),s.removeClass("ic-bottom"),c=g.isContainer(y.objtype),T||(0==_.x&&s.addClass("ic-left"),0==_.y&&s.addClass("ic-top"),_.x+_.w>l.w-10&&s.addClass("ic-right"),_.y+_.h>l.h-10&&s.addClass("ic-bottom")),u={left:T?l.x:_.x,top:T?l.y:_.y,width:T?l.w:_.w,height:T?l.h:_.h,zIndex:"_dc"==y.objtype?0:c?1:2},!y._invalidate&&s.__ps&&(!s.__ps||s.__ps.top==u.top&&s.__ps.left==u.left&&s.__ps.width==u.width&&s.__ps.height==u.height)||(y._invalidate=0,s.css(u),"_dc"==y.objtype||L?s.hide():s.show(),s.__ps=u,s._invl=1)},validateSplitter:function(){for(var e,t=this.splitters,i=0;i<t.length;i++)(e=t[i]).validate.call(e),e.spui.css("zIndex",3),e.setV(e.panel&&0!=e.panel.visible)},showDropProxy:function(e,t){for(var i,o=this,d=(IG$.j$ext._w(o.box),IG$.j$ext._h(o.box),o.drop_proxy,0);d<o.items.length;d++)(i=o.items[d]).showDropProxy.call(i)},hideDropProxy:function(){var e,t,i=this;for(i.drop_proxy&&i.drop_proxy.hide(),i.dockinsg&&i.dockinsg.hide(),e=0;e<i.items.length;e++)(t=i.items[e]).hideDropProxy.call(t)},dragOver:function(e,t){for(var i,o,d,h,n,l,a=this,r={x:e.pageX,y:e.pageY},c=$(a.body_container),s={top:c.scrollTop(),left:c.scrollLeft()},_=0;_<a.items.length;_++)(l=a.items[_]).dropOut.call(l),1==l.dragging&&(h=l);for(_=0;_<a.items.length;_++)if((i=(l=a.items[_]).dropHit(r,!0,null,s))&&"none"!=i&&0==l.dragging){for(d=(o=a.docitems[l.docid]).parent;d;){if("inner"==d.loc&&d.docid==h.docid){i="none";break}d=d.parent}if("_panel_"==i){if(o&&(n=a.getSubHit(o,r,0))&&n.dhit&&"none"!=n.dhit){h.docid!=n.ditem.docid&&n.ditem.dropIn.call(n.ditem,n.dhit);break}}else if("none"!=i){h.docid!=l.docid&&l.dropIn.call(l,i);break}}},getSubHit:function(e,t,i){var o,d,h,n,l={dhit:null,ditem:null},a=$(this.body_container),r={top:a.scrollTop(),left:a.scrollLeft()};if(!e.children)return l;for(o=0;o<e.children.length;o++){if("_dc"==(n=e.children[o]).objtype)l=this.getSubHit(n,t,1);else{if((h=(d=n.lt.ubody).dropHit.call(d,t,!0,!0,r))&&"none"!=h&&"_panel_"!=h){l.dhit=h,l.ditem=d;break}l=this.getSubHit(n,t,1)}if(l.dhit)break}return l},dragStop:function(e,t){for(var i,o,d,h,n,l,a,r,c,s,_,p=this,f={x:e.pageX,y:e.pageY},w=$(p.body_container),b={top:w.scrollTop(),left:w.scrollLeft()},u=0,g=0;g<p.items.length;g++)if(1==p.items[g].dragging){d=p.items[g],0;break}for(d&&(d._invalidate=1),g=0;g<p.items.length;g++)if((o=p.items[g].dropHit(f,!0,null,b))&&"none"!=o&&0==p.items[g].dragging){if("_panel_"!=o){i=p.items[g];break}if((n=p.docitems[p.items[g].docid])&&(l=p.getSubHit(n,f,0))&&l.dhit&&"none"!=l.dhit){o=l.dhit,i=l.ditem;break}}if(p.hideDropProxy(),i&&"none"!=o){switch(h=p.docitems[i.docid],n=p.docitems[d.docid],o){case"top":case"bottom":r=1;break;case"left":case"right":r=0}if("TAB"==n.objtype||"PANEL"==n.objtype)for(a=h.parent;a;){if(a.docid==n.docid)return void p.updateDisplay();a=a.parent}if("top"!=o&&"left"!=o||(u=1),"inner"==o){for(g=0;g<n.parent.children.length;g++)if(n.parent.children[g]==n){n.parent.children.splice(g,1);break}"PANEL"==h.objtype?(0==h.children.length?(c={objtype:"_dc",docid:null,iscontainer:!0,_direction:0,children:[],width:0,height:0,parent:h},p.processLayoutWidget(c,!0,null,p.ctrls),h.children.push(c)):c=h.children[0],(n.parent=c).children.push(n)):"TAB"==h.objtype&&(n.parent=h).children.push(n)}else if("TAB"==h.parent.objtype){for(c={objtype:"PANEL",docid:null,iscontainer:!0,_direction:0,children:[],width:0,height:0,parent:h.parent},p.processLayoutWidget(c,!0,null,p.ctrls),p.createWidgetView(c.lt.ubody,null),g=0;g<h.parent.children.length;g++)if(h.parent.children[g]==h){h.parent.children.splice(g,1,c);break}for(s={objtype:"_dc",docid:null,iscontainer:!0,_direction:r,children:[],width:0,height:0,parent:c},p.processLayoutWidget(s,!0,null,null),c.children.push(s),g=0;g<n.parent.children.length;g++)if(n.parent.children[g]==n){n.parent.children.splice(g,1);break}0==n.parent.children.length&&p.removeWidget(n.parent.docid,1),h.parent=s,n.parent=s,u?(s.children.push(n),s.children.push(h)):(s.children.push(h),s.children.push(n))}else if(h.parent._direction==r){for(g=0;g<n.parent.children.length;g++)if(n.parent.children[g]==n){n.parent.children.splice(g,1);break}for(g=0;g<h.parent.children.length;g++)if(h.parent.children[g]==h){h.parent.children.splice(u?g:g+1,0,n);break}"TAB"!=n.parent.objtype&&0==n.parent.children.length&&p.removeWidget(n.parent.docid,1),n.parent=h.parent}else{for(c={objtype:"_dc",docid:null,iscontainer:!0,_direction:r,children:[],width:0,height:0,parent:h.parent},p.processLayoutWidget(c,!0,null,p.ctrls),g=0;g<n.parent.children.length;g++)if(n.parent.children[g]==n){n.parent.children.splice(g,1);break}for(_=h.parent,g=0;g<_.children.length;g++)if(_.children[g]==h){_.children.splice(g,1,c);break}"TAB"!=n.parent.objtype&&0==n.parent.children.length&&p.removeWidget(n.parent.docid,1),h.parent=c,n.parent=c,0==r?n.lt.ubody.width=h.lt.ubody.width:n.lt.ubody.height=h.lt.ubody.height,u?(c.children.push(n),c.children.push(h)):(c.children.push(h),c.children.push(n))}}this.updateDisplay()},resizeContainer:function(e){var i=this;$.each(e,function(e,t){i.changeContainer.call(i,t,t.lt.pos.w,t.lt.pos.h)})},changeContainer:function(e,t,i){var o,d,h,n,l=e.objtype,a=e.children,r=0,c=0,s=0,_=0;if(this.setSize(e,t,i),"_dc"==l){for(o=0;o<a.length;o++)d=a[o],e._direction?(r=t,d.fixed_height?_+=d.lt.pos.h:c+=d.lt.pos.h):(d.fixed_width?s+=d.lt.pos.w:r+=d.lt.pos.w,c=i);for(o=0;o<a.length;o++)d=a[o],n=h=0,e._direction?(h=r,d.fh?n=d._fh:i&&c&&d.lt.pos.h&&(n=d.lt.pos.h/c*(i-_))):(d.fixed_width?h=d._fw:t&&r&&d.lt.pos.w&&(h=d.lt.pos.w/r*(t-s)),n=c),this.changeContainer(a[o],0<t?h:0,0<i?n:0)}else if("PANEL"==l){if(a&&a.length)for(o=0;o<a.length;o++)this.changeContainer(a[o],t,i)}else if("TAB"==l&&a&&a.length)for(o=0;o<a.length;o++)this.changeContainer(a[o],t,i)},setSize:function(e,t,i){0<t&&(e.lt.pos.w=t,e.lt.ubody.width=t),0<i&&(e.lt.pos.h=i,e.lt.ubody.height=i)},_updateNodeSize:function(e){var t,i,o,d,h,n=e.lt.ubody;if(e._w=0,e._h=0,e._fw=0,e._fh=0,e._mw=0,e._mh=0,o=n.fixed_width,d=n.fixed_height,e.fixed_width=o,e.fixed_height=d,"_dc"==e.objtype){for(i=e._direction,t=0;t<e.children.length;t++)(h=e.children[t]).lt.ubody,this._updateNodeSize(h),0==i?(h.fixed_height&&(e._fh=Math.max(h._fh,e._fh)),h.fixed_width&&-1<e._fw?e._fw+=h._fw:e._fw=-1):1==i&&(h.fixed_width&&(e._fw=Math.max(h._fw,e._fw)),h.fixed_height&&-1<e._fh?e._fh+=h._fh:e._fh=-1);for((0<e._fw||0<e._fh)&&(this.changeContainer(e,1==i&&0<e._fw?e._fw:0,0==i&&0<e._ff?e._fh:0),e.fixed_width=0<e._fw,e.fixed_height=0<e._fh),e._fw=0,t=e._fh=0;t<e.children.length;t++)(h=e.children[t]).lt.ubody,this._updateNodeSize(h),0==i?(h.fixed_height?e._fh=Math.max(h._fh,e._fh):e.fixed_height||(e._h=Math.max(h._h,e._h,h._fh)),e._mh=Math.max(30,e._mh,h._mh,h._fh),h.fixed_width?(e._fw+=h._fw,e._mw+=h._mw):(e._w+=h._w,e._mw+=30)):1==i&&(h.fixed_width?e._fw=Math.max(h._fw,e._fw):e.fixed_width||(e._w=Math.max(h._w,e._w,h._fw)),e._mw=Math.max(30,e._mw,h._mw,h._fw),h.fixed_height?(e._fh+=h._fh,e._mh+=h._mh):(e._h+=h._h,e._mh+=30))}else if("PANEL"==e.objtype||"TAB"==e.objtype){for(e.children=e.children||[],n.width=0<n.width?n.width:30,n.height=0<n.height?n.height:30,t=0;t<e.children.length;t++)h=e.children[t],this._updateNodeSize(h),"TAB"==e.objtype?(e._fw=Math.max(h._fw,e._fw),e._fh=Math.max(h._fh,e._fh),e._w=Math.max(h._w,e._w),e._h=Math.max(h._h,e._h)):(e._fw+=h._fw,e._fh+=h._fh,e._w+=h._w,e._h+=h._h);o?(e._fw=n.width,e._mw=e._fw):(e._w=n.width,e._mw=30),d?(e._fh=n.height,e._mh=e._fh):(e._h=n.height,e._mh=30)}else n.width=0<n.width?n.width:30,n.height=0<n.height?n.height:30,o?(e._fw=n.width,e._mw=e._fw):(e._w=n.width,e._mw=30),d?(e._fh=n.height,e._mh=e._fh):(e._h=n.height,e._mh=30)},_updateNodeSize_responsive:function(e){var t,i,o,d,h=this,n=e.lt.ubody;h.$openmode;if(e._w=0,e._h=0,e._fw=0,e._fh=0,e._mw=0,e._mh=0,i=n.fixed_width,o=n.fixed_height,e.fixed_width=i,e.fixed_height=o,"_dc"==e.objtype){for(t=0;t<e.children.length;t++)(d=e.children[t]).lt.ubody,h._updateNodeSize_responsive(d),d.fixed_height&&(e._fh=Math.max(d._fh,e._fh)),d.fixed_width&&-1<e._fw?e._fw+=d._fw:e._fw=-1;for(0<e._fh&&(h.changeContainer(e,0,0<e._ff?e._fh:0),e.fixed_height=0<e._fh),e._fw=0,t=e._fh=0;t<e.children.length;t++)(d=e.children[t]).lt.ubody,h._updateNodeSize_responsive(d),d.fixed_height?e._fh=Math.max(d._fh,e._fh):e.fixed_height||(e._h+=d._h),e._mh=Math.max(30,e._mh,d._mh,d._fh),d.fixed_width?(e._fw+=d._fw,e._mw+=d._mw):(e._w+=d._w,e._mw+=30)}else if("PANEL"==e.objtype||"TAB"==e.objtype){for(e.children=e.children||[],n.width=0<n.width?n.width:30,n.height=0<n.height?n.height:30,t=0;t<e.children.length;t++)d=e.children[t],h._updateNodeSize_responsive(d),"TAB"==e.objtype?(e._fw=Math.max(d._fw,e._fw),e._fh=Math.max(d._fh,e._fh),e._w=Math.max(d._w,e._w),e._h=Math.max(d._h,e._h)):(e._fw+=d._fw,e._fh+=d._fh,e._w+=d._w,e._h+=d._h);e._w=n.width,e._mw=30,o?(e._fh=n.height,e._mh=e._fh):(e._h=n.height,e._mh=30)}else n.width=0<n.width?n.width:30,n.height=0<n.height?n.height:30,i?(e._fw=n.width,e._mw=e._fw):(e._w=n.width,e._mw=30),o?(e._fh=n.height,e._mh=e._fh):(e._h=n.height,e._mh=30)}};
var Base64={_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encode:function(r){var t,e,o,a,h,n,c,d="",i=0;for(r=Base64._utf8_encode(r);i<r.length;)a=(t=r.charCodeAt(i++))>>2,h=(3&t)<<4|(e=r.charCodeAt(i++))>>4,n=(15&e)<<2|(o=r.charCodeAt(i++))>>6,c=63&o,isNaN(e)?n=c=64:isNaN(o)&&(c=64),d=d+this._keyStr.charAt(a)+this._keyStr.charAt(h)+this._keyStr.charAt(n)+this._keyStr.charAt(c);return d},decode:function(r){if(!r)return"";var t,e,o,a,h,n,c="",d=0;for(r=r.replace(/[^A-Za-z0-9\+\/\=]/g,"");d<r.length;)t=this._keyStr.indexOf(r.charAt(d++))<<2|(a=this._keyStr.indexOf(r.charAt(d++)))>>4,e=(15&a)<<4|(h=this._keyStr.indexOf(r.charAt(d++)))>>2,o=(3&h)<<6|(n=this._keyStr.indexOf(r.charAt(d++))),c+=String.fromCharCode(t),64!=h&&(c+=String.fromCharCode(e)),64!=n&&(c+=String.fromCharCode(o));return c=Base64._utf8_decode(c)},_utf8_encode:function(r){r=r.replace(/\r\n/g,"\n");for(var t="",e=0;e<r.length;e++){var o=r.charCodeAt(e);o<128?t+=String.fromCharCode(o):(127<o&&o<2048?t+=String.fromCharCode(o>>6|192):(t+=String.fromCharCode(o>>12|224),t+=String.fromCharCode(o>>6&63|128)),t+=String.fromCharCode(63&o|128))}return t},_utf8_decode:function(r){for(var t="",e=0,o=c1=c2=0;e<r.length;)(o=r.charCodeAt(e))<128?(t+=String.fromCharCode(o),e++):191<o&&o<224?(c2=r.charCodeAt(e+1),t+=String.fromCharCode((31&o)<<6|63&c2),e+=2):(c2=r.charCodeAt(e+1),c3=r.charCodeAt(e+2),t+=String.fromCharCode((15&o)<<12|(63&c2)<<6|63&c3),e+=3);return t}};
var clsscript={},fnglobal={},__jsmod={};IG$.cDynScript=function(t,r){this.uid=t,this.base_class=r,this.lastError=null},IG$.cDynScript.prototype={loadScript:function(t){var r,i=this,s=(document,$("head")),e=window.bowser,n=__jsmod[i.uid];n||((n=document.createElement("script")).id="clsscript",n.type="text/javascript",s[0].appendChild(n),__jsmod[i.uid]=n),delete clsscript[i.uid],r=i.base_class?"clsscript['"+i.uid+"'] = IG$.extend("+i.base_class+", {\n"+t+"\n});":"function "+this.uid+"() {}; "+this.uid+".prototype={"+t+"}; clsscript['"+this.uid+"'] = "+this.uid+";",e.msie?n.text=r:n.innerHTML=r,delete fnglobal[i.uid],s[0].removeChild(n),delete __jsmod[i.uid];var a={};try{a=new clsscript[i.uid]}catch(t){IG$.ShowError(IRm$.r1("E_SC_LD")+": "+t.message)}fnglobal[this.uid]=a},preparePrototype:function(t,r){var i=fnglobal[this.uid];i&&(i.controls=t,i.ptr_main=r,i.parameters=r.framecontent.page_param_map)},executeScript:function(r){var t=fnglobal[this.uid],i=arguments,s=!0,i=Array.prototype.slice.call(i,1);this.lastError=null;try{if(!t[r])return this.lastError="Function call: "+r+" not found",!1;s=t[r].apply(t,i)}catch(t){return this.lastError="Error: "+r+"\n"+this.printStackTrace().join("\n\n"),!1}return s},getFunctionList:function(){var t,r=fnglobal[this.uid],i=[];if(r)for(t in r)"function"==typeof r[t]&&"$"!=t.charAt(0)&&"override"!=t&&i.push(t);return i},printStackTrace:function(){var r=[],i=!1;try{s.dont.exist+=0}catch(t){if(t.stack){for(var s=0,e=(n=t.stack.split("\n")).length;s<e;s++)n[s].match(/^\s*[A-Za-z0-9\-_\$]+\(/)&&r.push(n[s]);r.shift(),i=!0}else if(window.opera&&t.message){for(var n,a,s=0,e=(n=t.message.split("\n")).length;s<e;s++){n[s].match(/^\s*[A-Za-z0-9\-_\$]+\(/)&&(a=n[s],n[s+1]&&(a+=" at "+n[s+1],s++),r.push(a))}r.shift(),i=!0}}if(!i)for(var t=arguments.callee.caller;t;){var c=t.toString(),o=c.substring(c.indexOf("function")+8,c.indexOf(""))||"anonymous";r.push(o),t=t.caller}return r}};
IG$.geoDatas=[],IG$._app_module_={report:{name:"ReportView",opt:{itemtype:"Report"}},bobject:{name:"tableManager",modetype:"igcn"},sheet:{name:"ReportView",opt:{itemtype:"Sheet",iconCls:"icon-report"}},dashboard:{name:"DashboardView"},dashboardedit:{name:"DashboardEdit",modetype:"igc7"},cubemodel:{name:"CubeModel",modetype:"igcn"},dataset:{name:"p$DataMgr",modetype:"igcm"},cube:{name:"cubeeditor",opt:{iconCls:"icon-cube",itemtype:"Cube"}},metric:{name:"metricEditor"},multimetric:{name:"multimetric"},multimeasure:{name:"multimeasure"},measure:{name:"measureEditor"},hierarchy:{name:"HierarchyEditor"},formulameasure:{name:"formulaEditor"},custommetric:{name:"custommetric"},udg:{name:"_udgeditor"},chartmeasure:{name:"cellwizard"},datemetric:{name:"datemetric"},measuregroup:{name:"measureGroupEditor"},measuregroupdimension:{name:"measureGroupEditor"},uipage:{name:"uipage"},bigdata:{name:"flowEditor",opt:{itemtype:"BigData"},modetype:"igc9"},bayesnet:{opt:{iconCls:"icon-bigdata",itemtype:"BayesNet"},modetype:"igc9",name:"_IB9b"},javaclass:{iconCls:"icon-javaclass",name:"mr_javaeditor",modetype:"igc9"},codemap:{name:"codemapping"},classmodule:{modetype:"igcm",name:"classmodule",opt:{iconCls:"icon-javaclass"}},nlp:{opt:{iconCls:"icon-nlp",itemtype:"BayesNet"},modetype:"igcm",name:"nlpEd"},metaeditor:{name:"MetaEditorPanel"}},IG$.createAppPanel=function(e,a,r,i,n,t,c){var o,m,_,s,l,I=null,d={uid:e,writable:n};if(t)for(o in t)d[o]=t[o];if((l=IG$._app_module_[a])&&l.opt)for(o in l.opt)d[o]=l.opt[o];return m=l.name,_=l.modetype||"igcn",m&&(IG$[m]?I=new IG$[m](d):(s=ig$.bootconfig.scmap[_],IG$.getScriptCache(s,new IG$.callBackObj(this,function(){IG$[m]?c&&c.execute():IG$.ShowError(IRm$.r1("L_ERR_L_MOD"))})))),I},IG$.showHelp=function(e,a,r){var i=new IG$.helpWindow({uid:e,modal:!1!==a,dm:r||null});"report"!=r?IG$.loadHelp(e,i):i.show()},IG$.showHideAllWindow=function(e){var a;if(IG$.mainPanel)for(a=IG$.mainPanel.items.length-1;0<=a;a--)IG$.mainPanel.items.items[a].close()},IG$.procMenuCommand=function(e,a){var r,i,n,t,c,o,m=e.toLowerCase(),_={},s="igcm",l=IG$.mainPanel||null;switch(e){case"CMD_PASSWORD_CHANGE":r=new IG$.passwordMgr,IG$.checkLogin(null,r);break;case"CMD_PREF":r=new IG$.userpref,IG$.checkLogin(null,r);break;case"CMD_MAKE_WORKSPACE":r=new IG$.makeItem({itemtype:"Folder",parentnodepath:"/",parentuid:"/"}),IG$.checkLogin(null,r);break;case"CMD_SW_APP":r=new IG$.workspace_switcher({}),IG$.checkLogin(null,r);break;case"CMD_SERVER_CONFIG":break;case"CMD_HELP_MGR":C="helpManage",n=m,R=IRm$.r1("I_HELP_MGR");break;case"CMD_LOCALE":C="resourcemgr",n=m,R=IRm$.r1("I_LOC_MGR");break;case"CMD_DLOCALE":C="resourcemgr",n=m,_.dicmode=1,R=IRm$.r1("I_DLOC_MGR");break;case"CMD_META_IMP":C="metaImport",n=m,R=IRm$.r1("I_META_IMP");break;case"CMD_META_EDIT":C="MetaEditorPanel",n=m,R=IRm$.r1("I_META_EDIT");break;case"CMD_META_MIG":C="mgr_deploy",n=m,R=IRm$.r1("I_META_MIG");break;case"CMD_RELATION_VIEW":n=m,C="relationMgr",R=IRm$.r1("L_RELATION_VIEW");break;case"CMD_TABLE_REGISTER":n=m,C="tableManager",R=IRm$.r1("L_MGR_DATABASE"),s="igcn";break;case"CMD_LOOKUP":n=m,C="systemlookup",R=IRm$.r1("L_S_LK");break;case"CMD_CONNECT_DB":n=m,C="mgrdb_config",R=IRm$.r1("L_REG_DATABASE");break;case"CMD_DATASET":n=m,C="p$DataMgr",R=IRm$.r1("L_REG_DATASET");break;case"CMD_ABOUT":r=new IG$.aboutApp,IG$.checkLogin(null,r);break;case"CMD_USER_MANAGER":n=m,C="mgrUser",R=IRm$.r1("L_MGR_USER");break;case"CMD_SYS_CONFIG":n=m,C="mgrSysCfg",R=IRm$.r1("L_SYS_CONFIG");break;case"CMD_ASSIST_ROBO":n=m,C="mgrColab",R=IRm$.r1("L_ASSIST_ROBO");break;case"CMD_VAR":case"CMD_BD_CONFIG":n=m,C="hadoop_config",s="igc9",R=IRm$.r1("I_BD_CONFIG");break;case"CMD_DBD_MGR":n=m,C="mgr_dashboard",R=IRm$.r1("I_MGR_DBD");break;case"CMD_FEATURES":n=m,C="mgrFeatures";break;case"CMD_REPORT_STYLE":n=m,_.title=IRm$.r1("T_GLOBAL_REPORT_STYLE"),_.styletype="g",C="styleWizard";break;case"CMD_RSN":r=new IG$.rsn_editor({}),IG$.checkLogin(null,r);break;case"CMD_SYSMON":C="sysmon",n=m;break;case"CMD_SYSRES":C="sys_resource",n=m;break;case"CMD_SCHEDULE":n=m,C="scheduler",R=IRm$.r1("I_SCHEDULE");break;case"CMD_SCH_PROG":n=m,C="sch_prog",R=IRm$.r1("I_SCHEDULE_MOD");break;case"CMD_HOME":IG$.changeApp(0);break;case"CMD_BROWSER":var I=IG$.viewport.down("[name=mexplorer]");I&&!I.isVisible()&&IG$.changeApp(1);break;case"CMD_TABPANEL":IG$.changeApp(2);break;case"CMD_WIZARD":case"CMD_APP_WIZARD":var d,p=$(document),G=p.width(),M=p.height();IG$.dwizard;!IG$.app_wizard&&IG$.ltW&&(IG$.app_wizard=new IG$.dlgSmartWizard({})),(d=IG$.app_wizard)&&(d.setSize(.8*G,.8*M),IG$.showDlg(null,d));break;case"CMD_SYNC_USER":n=m,_.uid=a,C="sync_user",R=IRm$.r1("T_SYNC_USER");break;case"CMD_MN_MENUS":IG$.changeApp(4,a);break;case"CMD_HD_BFLOW":case"CMD_MONG_DATA":t="CMD_HD_BFLOW"==e?"BigData":"MongoData",l&&l.navigateApp.call(l,null,t.toLowerCase(),t,null,null,!0);break;case"CMD_MONG_MAPR":case"CMD_HD_MAPR":n=m,C="relationMgr",_._cmode=2,R=IRm$.r1("L_HD_BFLOW");break;case"CMD_ML_BAYES":var D=IG$._app_module_.bayesnet,C=D.name,s=D.modetype,R=R||D.opt.itemtype;if(D.opt)for(k in D.opt)_[k]=D.opt[k];break;case"CMD_D_MENU":C="dashboardmenu",R=n=m;break;case"CMD_REVISION":n=m,_.uid=a,C="mgrRevision",R=IRm$.r1("T_REVISION");break;case"CMD_MG_DISCO":n=m,_.uid=a,s=C="mg_disco",R=IRm$.r1("T_MIG_DISCO");break;case"CMD_NEW_REPORT":n=m,C="ReportView",R="Report";break;case"CMD_NEW_DASHBOARD":n=m,C="DashboardEdit",s="igc7",R="Dashboard"}C&&IG$.mainPanel&&((c=IG$.mainPanel.getComponent.call(IG$.mainPanel,n))?(IG$.mainPanel.setActiveTab.call(IG$.mainPanel,c),"cmd_revision"==m&&c.loadUID.call(c,a)):(IG$[C]?(i=new IG$[C](_),R=R||i.title):(scripts=ig$.bootconfig.scmap[s],IG$.getScriptCache(scripts,new IG$.callBackObj(this,function(){var e;IG$[C]?(i=new IG$[C](_),R=R||i.title,i.id=n,i.address=n,i.title=IG$.getTabTitle(R),1==i.isWindow?IG$.checkLogin(null,i):(e=IG$.mainPanel.add.call(IG$.mainPanel,i),IG$.mainPanel.setActiveTab.call(IG$.mainPanel,e))):IG$.ShowError(IRm$.r1("L_ERR_L_MOD"))}))),i&&(i.id=n,i.address=n,i.title=IG$.getTabTitle(R),1==i.isWindow?IG$.checkLogin(null,i):(o=IG$.mainPanel.add.call(IG$.mainPanel,i),IG$.mainPanel.setActiveTab.call(IG$.mainPanel,o)))))};
IG$.sessionUtils=function(e){},IG$.sessionUtils.prototype={doStartSession:function(){var e=IG$.dlgLogin,i=$("#loginform"),t=i.items.items[0].getValue(),n=i.items.items[1].getValue();e.initProcLogin.call(e,t,n)},getKeyPairFunc:function(s,e,a){s&&s.show(),$.ajax({url:ig$.servlet,data:JSON.stringify({ack:"security",payload:{mts:e||""},mbody:{},uniquekey:IG$.getUniqueKey()}),type:"POST",dataType:"json",timeout:3e5,async:!0,contentType:"application/json; charset=UTF-8",beforeSend:function(e,i){},cache:!1,crossDomain:!1,processData:!0,error:function(){a&&a.execute(),alert("Error while connecting server")},success:function(e){var i,t=e.errorcode,n=e.result;t?(s&&s.hide(),i=e.errormsg,a&&a.execute(),alert(i)):n&&(p1=n.p1,p2=n.p2,p1&&p2?(IG$.rsaPublicKeyModules=p1,IG$.rsaPublicKeyExpoenent=p2,IG$._g$a=n.mts,a&&a.execute(1)):s&&(a&&a.execute(),s.hide(),alert("Error while get secure key value. Please try again later!")))}})},getKeyPair:function(i,t,n,s,a,o){var l=this;l.getKeyPairFunc(n,s,new IG$.callBackObj(l,function(e){e&&setTimeout(function(){l.initProcLogin.call(l,i,t,n,s,a,o)},10)}))},initProcLogin:function(e,i,t,n,s,a){var o=this,l=new IG$._rpc$,r=IG$.encryptKey([e,i]);l.init(o,{ack:"login",payload:{userid:r[0],passwd:r[1],sso_module:a},mbody:{lang:useLocale,mts:n||"",app:"",session_expire:""+ig$.session_expire||"0"}},o,o.rdoStartSession,function(e){s&&s.execute(e),t&&t.hide()},t),l.send()},rdoStartSession:function(e,i){var t=this,n=e.token,s=e.uid,a=!1,o=e;IG$._g$a||(IG$._g$a=e.mts),window.IG$.dlgLogin&&(IG$.dlgLogin.lastLogin=o,IG$.mainPanel&&IG$.mainPanel.updateLoginInfo&&IG$.mainPanel.updateLoginInfo.call(IG$.mainPanel)),i&&i.hide(),t.uuid&&0<t.uuid.length&&s&&t.uuid!=s&&(a=!0),t.uuid=s,""!=n&&""!=t.uuid&&t.closeLoginProc.call(t,a)},closeLoginProc:function(e){this.getUserDetail(e)},finalLoginProc:function(){var e=this,i=e.logininfo.l3.substring(1),t=$("#mechanlevel");t&&t[0]&&setTimeout(function(){switch(i){case"1":t.attr("title","Your license is limited using all features."),t.animate({width:45},2e3),t.bind("click",function(){window.open("http://www.amplixbi.com/","_new")});break;case"2":t.attr("title","Your license is limited using all features."),t.animate({width:60},2e3),t.css({backgroundColor:"#0000ff"}),t.bind("click",function(){window.open("http://www.amplixbi.com/","_new")});break;case"3":case"4":t.attr("title","Currently using full feature and unlimited version."),t.animate({width:100},2e3),t.css({backgroundColor:"#00ff00"})}},200),e.callback&&setTimeout(function(){e.callback.execute()},100)},getUserDetail:function(e){var i=this,t=new IG$._rpc$;t.init(i,{ack:"usercontent",payload:{address:"/user"},mbody:{option:"_gi_",uid:i.uuid,tmpl:IG$.__ep?"sys_print_mode":IG$.__ep_||""}},i,i.rs_getUserDetail,null,[e]),t.send()},rs_getUserDetail:function(e,i){var t=this,n=i[0],s=new IG$._c$session(e.userdetail);t.logininfo=s,t.jS2=t.logininfo.hasDuty("admins","A"),t.desktopsetting=e.desktopinfo,IG$.__websocket||(IG$.__websocket=null);var a,o=window.location.href.split("/"),l="",r="ws";for("https:"==o[0].toLowerCase()&&(r="wss"),a=2;a<o.length-1&&"launcher"!=o[a];a++)l+=(2<a?"/":"")+o[a];IG$.__websocket=new IG$._ws({protocol:r,url:l,userdetail:e.userdetail}),ig$.features=s.features,$.cookie("lui",s.userid,{expires:7,path:"/"}),IG$.$loadApp(s.tmpl,s.fm),1==n&&(IG$.showHideAllWindow(!0),$("#win-mask").css({display:"none"}),IG$.mainPanel&&IG$.mainPanel.initRecentVisit.call(IG$.mainPanel)),IG$.mainPanel&&IG$.mainPanel.updateLoginInfo.call(IG$.mainPanel),t.finalLoginProc.call(t)}},IG$._c$session=function(e){var t,i,n,s,a=this,o=[],l=e;if(a.sid=l.sid,a.gid=l.gid,a.userid=l.id,a.username=l.name,a.l3=l.l3,a.l4="Y"==l.l4,a.auth=[],a.authmap={},a.features={},a.pdffonts=[],a.mts=l.mts,a.mts_name=l.mts_name,a.tmpl={},a.dfrm=l.dfrm,IG$.calendar_locale.c1disp=l.c1disp,IG$.calendar_locale.c1format=l.c1format,IG$.calendar_locale.c2disp=l.c2disp,IG$.calendar_locale.c2format=l.c2format,a.dfrm&&0<a.dfrm.indexOf(" ")?a.dfrm_short=a.dfrm.substring(0,a.dfrm.indexOf(" ")):a.dfrm_short="yyyy-mm-dd",l.a2&&!ig$.theme_id&&(ig$.theme_id=l.a2),(n=l.template)&&n.view)for(child=n.view,a.tmpl.mainview={},i=0;i<child.length;i++)(s=child[i]).html&&(s.html=IG$.replaceAll(s.html,"$APP_NAME",ig$.appname),s.html=IG$.replaceAll(s.html,"$APP_COPY",ig$.copy)),a.tmpl.mainview[s.name]=s;for(l.duties=l.duties||[],a.auth=l.duties,i=0;i<l.duties.length;i++)a.authmap[l.duties[i].name.toLowerCase()]=l;if(t=!!a.authmap.admins,l.features)for(i in l.features)a.features[i]=!0===l.features[i].hide;if(l.fonts)for(i=0;i<l.fonts.length;i++)a.pdffonts.push(l.fonts[i]+";");if(ig$.fmcss&&ig$.fmcss.remove(),o.push("<style type='text/css'>"),$.each(a.features,function(e,i){"ig_mngr"==e||"ig_ft"==e?t||o.push("."+e+" { display: none; }"):1==i&&o.push("."+e+" { display: none; }")}),o.push("</style>"),ig$.fmcss=$(o.join("")).appendTo($("head")),a.themes=[],l.themes){for(i=0;i<l.themes.length;i++)a.themes.push({name:l.themes[i]});if(window.app_themes)try{window.app_themes(a.themes)}catch(e){}}},IG$._c$session.prototype={hasDuty:function(e,i){for(var t=0;t<this.auth.length;t++)if((!i||i&&this.auth[t].dutytype==i)&&this.auth[t].name.toLowerCase()==e)return!0;return!1}},IG$.dlgLogin=new IG$.sessionUtils;
IG$.chkSess=function(n,s){$.ajax({url:ig$.servlet,data:JSON.stringify({ack:"loginstatus",payload:{},mbody:{lang:useLocale,app:loadingApp},uniquekey:IG$.getUniqueKey()}),type:"POST",contentType:"application/json; charset=UTF-8",dataType:"json",timeout:3e4,async:!0,beforeSend:function(e,i){},cache:!1,crossDomain:!1,processData:!0,error:function(){alert("Error while connecting server"),s&&s.call()},success:function(e){var i,o=e.result;e.errorcode?s&&s.call():(o.token,o.uid,i=o.redirect,n?n.call():i&&0<i.length&&window.location.replace(i))}})},IG$.doStartSession=function(a,r,l,c,d){l&&l.show();var p=$("#il_err");p.hide(),$.ajax({url:ig$.servlet,type:"POST",data:JSON.stringify({ack:"security",payload:{mts:c},mbody:{},uniquekey:IG$.getUniqueKey()}),dataType:"json",timeout:3e5,async:!0,contentType:"application/json; charset=UTF-8",beforeSend:function(e,i){},cache:!1,crossDomain:!1,processData:!0,error:function(){l.hide(),alert("Error while connecting server")},success:function(e){var i,o,n,s,t=e.errorcode?null:e.result;t?(i=t.p1,o=t.p2,i&&o?(IG$.rsaPublicKeyModules=i,IG$.rsaPublicKeyExpoenent=o,IG$._g$a=t.mts,setTimeout(function(){IG$.pLoginRSA(a,r,l,c,d)},10)):(alert("Error while get security key"),l&&l.hide())):(n=e.errorcode,s=e.errormsg,n&&(l&&l.hide(),"0x6d00"==n?(p.unbind("click"),p.bind("click",function(){p.hide()}),p.show(),$(".igc-errorinfo-msg",p).html(s)):IG$.ShowErrorMessage(e,null)))}})},IG$.pLoginRSA=function(e,i,t,o,a){var n=IG$.encryptKey([e,i]),r=$("#il_err");r.hide(),$.ajax({url:ig$.servlet,data:JSON.stringify({ack:"login",payload:{userid:n[0],passwd:n[1]},mbody:{lang:useLocale,app:loadingApp,theme:ig$.theme_id,session_expire:""+(ig$.session_expire||0),mts:o||""},uniquekey:IG$.getUniqueKey()}),type:"POST",dataType:"json",timeout:3e5,async:!0,contentType:"application/json; charset=UTF-8",beforeSend:function(e,i){},cache:!1,crossDomain:!1,processData:!0,error:function(){t&&t.hide(),alert("Error while connecting server")},success:function(e){var i,o,n=e.result,s=e.errorcode;t&&t.hide(),n?(n.token,n.uid,(i=n.redirect)&&0<i.length?window.location.replace(i):alert("System Error:: Application is not defined on config.xml")):s&&(o=e.errormsg,"0x6d00"==s?(r.unbind("click"),r.bind("click",function(){r.hide()}),r.show(),$(".igc-errorinfo-msg",r).html(o),a&&a.execute()):a?a.execute():IG$.ShowErrorMessage(e,null))}})},IG$.chkSvrInfo=function(i){ig$.appInfo?i&&i.call():$.ajax({url:ig$.servlet,data:{sreq:"version",uniquekey:IG$.getUniqueKey()},dataType:"json",type:"GET",timeout:3e4,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",beforeSend:function(e,i){},cache:!1,crossDomain:!1,processData:!0,error:function(){ig$.appInfo={appversion:"_._",apprelease:"_._.___"},i&&i.call()},success:function(e){ig$.appInfo={appversion:e.version||"0.0",apprelease:e.release||"0.0.000"},i&&i.call()}})},IG$.createLoginPanel=function(e,i,o){var n,s,t,a,r=$("<div id='loginWindow' class='loginWindow'></div>"),l=ig$.lang,c=ig$.themes;if(window.bowser.msie&&(r.css({width:"100%",height:"100%"}),ig$.appbg&&((t=$("<img src='./images/"+ig$.appbg+"' class='background'/>")).css({width:"100%",height:"100%",position:"absolute",top:0,left:0}),r.append(t))),l)for(n=0;n<l.length;n++)if(l[n].code==useLocale){s=l[n];break}if(a=["<div class='login-mc bounceInDown animated'>","<div class='login-ic'>","<img class='login-logo' src='./images/logo_7186.png'>","<div id='login_locale'><div class='locale_button'><span>Language</span>","<select id='b_loc'>"],l)for(n=0;n<l.length;n++)a.push("<option value='"+l[n].code+"'"+(useLocale==l[n].code?" selected":"")+">"+l[n].disp+"</option>");if(a.push("</select></div></div>"),c){for(a.push("<div id='login_theme'><div class='locale_button'><span>Theme</span>"),a.push("<select id='b_theme'>"),n=0;n<c.length;n++)a.push("<option value='"+c[n].code+"'"+(ig$.theme_id==c[n].code?" selected":"")+">"+c[n].disp+"</option>");a.push("</select></div></div>")}a.push("<form name='login_form' id='login_form' rel='nofollow' target='temp' action=''>"),a.push(" <ul>"),a.push("   <li>"),a.push("    <div id='user_lbl' class='login-lbl'>"+(s&&s.l1?s.l1:"User ID")+"</div>"),a.push("    <input id='userid' type='text' name='userid' value='"+(e||"")+"'>"),a.push("   </li>"),a.push("   <li>"),a.push("    <div id='pass_lbl' class='login-lbl'>"+(s&&s.l2?s.l2:"Password")+"</div>"),a.push("    <input id='userpassword' type='password' name='userpassword' value='"+(i||"")+"'>"),a.push("   </li>"),a.push("   <li>"),a.push("    <div class='login-lbl'>&nbsp;</div>"),a.push("    <input id='login_btn' type='button' value='"+(s&&s.l3?s.l3:"Login")+"'>"),a.push("   </li>"),a.push(" </ul>"),a.push("</form>"),a.push("<div id='license'>Licensed to: MPLIX</div>"),a.push("</div>"),a.push("</div>"),$(a.join("")).appendTo(r).addClass("loginForm");$("<div class='legal'><table width='494' border='0' cellpadding='0' cellspacing='0'>  <tr>    <td width='78'>&nbsp;</td>    <td width='416' valign='top'><div align='left'>      <p class='style2'>"+ig$.copy+"</p>      <p class='style1'><span class='style4'>For support please contact</span>      <a href='"+ig$.companydomain+"' target='_new'>"+ig$.companydomain+"</a></p>    </div></td>  </tr></table></div>").appendTo(r);var d=$("<div class='build'><div align='right'><span class='style6'>Build Id: <span id='app_release'"+(ig$.appInfo&&ig$.appInfo.apprelease)+"</span></span></div></div>").appendTo(r),p=($("<div id='il_err' class='igc-errorinfo'><div class='igc-errorinfo-msg'></div></div>").appendTo(r),$("<div id='login-progress' class='login-progress'></div>").css({position:"absolute",width:"100%",height:"100%",top:0,left:0,right:0,bottom:0}).hide().appendTo(r));return window.IG$.cLogin&&window.IG$.cLogin(r),$(document.body).append(r),IG$.chkSvrInfo(function(){$("#app_release",d).text(ig$.appInfo.apprelease)}),setTimeout(function(){e?$("#userpassword").focus():$("#userid").focus()},200),$("#userpassword").bind("focus",function(){$("#userpassword").select()}),$("#userid").bind("focus",function(){$("#userid").select()}),$("#userpassword").bind("mouseup",function(){setTimeout(function(){$("#userpassword").select()},80)}),$("#userid").bind("mouseup",function(){setTimeout(function(){$("#userid").select()},80)}),!1!==o&&($("#b_loc").bind("change",function(e){var i,o,n,s=$("#b_loc"),t=$("option:selected",s).val(),a=$(location).attr("href"),r={},l=!1;if(t&&t!=window.useLocale){if($.removeCookie("lang"),$.cookie("lang",t,{path:"/"}),-1<a.indexOf("?")){for(i=a.substring(0,a.indexOf("?")),r=(o=a.substring(a.indexOf("?")+1)).split("&"),n=0;n<r.length;n++)if("lang="==r[n].substring(0,5)){r[n]=r[n].substring(0,5)+t,l=!0;break}o=r.join("&"),a=i+"?"+o}1==l&&(p.show(),setTimeout(function(){window.location.replace(a)},100))}}),$("#b_theme").bind("change",function(e){var i,o,n,s=$("#b_theme"),t=$("option:selected",s).val(),a=$(location).attr("href"),r={},l=!1;if(t!=ig$.theme_id){if($.removeCookie("theme"),$.cookie("theme",t,{path:"/"}),-1<a.indexOf("?")){for(i=a.substring(0,a.indexOf("?")),r=(o=a.substring(a.indexOf("?")+1)).split("&"),n=0;n<r.length;n++)if("theme="==r[n].substring(0,6)){r[n]=r[n].substring(0,6)+t,l=!0;break}l||(r.push("theme="+t),l=!0),o=r.join("&"),a=i+"?"+o}1==l&&(p.show(),setTimeout(function(){window.location.replace(a)},100))}}),$("#login_btn").bind("click",function(e){e.preventDefault(),e.stopPropagation();var i=$("#userid").val(),o=$("#userpassword").val();return $("#userpassword").val(""),$(this).blur(),IG$.dlgLogin.getKeyPair.call(IG$.dlgLogin,i,o,p,window.m$mts),!1}),$("#userpassword").bind("keypress",function(e){if(13!=e.keyCode)return!0;var i=$("#userid").val(),o=$("#userpassword").val();return $("#userpassword").val(""),$(this).blur(),IG$.dlgLogin.getKeyPair.call(IG$.dlgLogin,i,o,p,window.m$mts),!1})),r},IG$.showLogin=function(e,i){$("#idv-mnu-pnl").hide(),IG$.dlgLogin&&(IG$.dlgLogin.callback=new IG$.callBackObj(this,function(){IG$.dlgLogin.tl=-1,IG$.showLoginProc()})),window.hist&&window.hist.addHistory(""),IG$._popupDlgs&&($.each(IG$._popupDlgs,function(e,i){try{i&&i.close&&i.close()}catch(e){}}),IG$._popupDlgs=[]);var o=$("#loginWindow"),n=window.bowser;o.css({zIndex:99}),n.msie&&o.css({position:"absolute",top:0,left:0,right:0,bottom:0,width:"100%",height:"100%",margin:0,padding:0}),o.show()},IG$.showLogout=function(o){-1<IG$.msgint&&(clearInterval(IG$.msgint),IG$.msgint=-1),IG$.confirmMessages(IRm$.r1("B_CONFIRM"),IRm$.r1("L_T_LOUT"),function(e){var i;"yes"==e&&((i=new IG$._rpc$).init(null,{ack:"logout",payload:{},mbody:{}},null,function(e){},function(){return!0}),i.send(),IG$.showLogin(o,1))})};
IG$.prepareCustomMenu=function(n,e){var t,a,i=this,r=i.customMenu,c=n.data,s=c.type.toLowerCase(),d=c.locale_name||c.name,o=c.nodepath||"/",h=c.uid,l=c.type,_=!(!c.writable&&!c.manage),u=!!c.manage,m=c.issubcube,I=c.isrfolder,f=c.isbo,p=i.isdatasource,g=IG$.mainPanel,E=!1,b=c.is_priv,M=c.is_dept;switch(r.removeAll(),s){case"root":(t={text:IRm$.r1("L_WORKSPACE"),hidden:ig$.features.ig_n_wks,handler:function(){this._createMetaObject.call(this,"Folder",h,o,n)},scope:this}).hidden||(r.add(t),E=!0);break;case"folder":case"rfolder":case"javapackage":"javapackage"==s&&(f=s),f?a=[{text:IRm$.r1("B_FOLDER"),hidden:ig$.features.ig_n_f_f,handler:function(){this._createMetaObject.call(this,"Folder",h,o,n)},scope:this},{text:"Make JavaClass",hidden:ig$.features.ig_n_jc,handler:function(){this._createMetaObject.call(this,"JavaClass",h,o,n)},scope:this}]:"codemap"==e?a=[{text:IRm$.r1("B_FOLDER"),hidden:ig$.features.ig_n_f_f,handler:function(){this._createMetaObject.call(this,"Folder",h,o,n)},scope:this},{text:IRm$.r1("L_CODEMAPPING"),hidden:ig$.features.ig_n_lk,handler:function(){this._createMetaObject.call(this,"CodeMap",h,o,n)},scope:this}]:"NLP"==e?a=[{text:IRm$.r1("B_FOLDER"),hidden:ig$.features.ig_n_f_f,handler:function(){this._createMetaObject.call(this,"Folder",h,o,n)},scope:this},{text:IRm$.r1("L_NLP"),handler:function(){this._createMetaObject.call(this,"NLP",h,o,n)},scope:this}]:p?a=[{text:"Import tables",handler:function(){this.raiseCustomEvent("toolbar","import_object",n)},scope:this},{text:"Inline view",handler:function(){this.raiseCustomEvent("toolbar","cmd_inlineview",n)},scope:this},{text:"DataSet",handler:function(){this._createMetaObject.call(this,"DataSet",h,o,n)},scope:this},{text:IRm$.r1("B_FOLDER"),iconCls:"icon-folder",hidden:ig$.features.ig_n_f_f,handler:function(){this._createMetaObject.call(this,"Folder",h,o,n)},scope:this}]:null==m?a=[{text:IRm$.r1("B_FOLDER"),iconCls:"icon-folder",hidden:ig$.features.ig_n_f_f,handler:function(){this._createMetaObject.call(this,"Folder",h,o,n)},scope:this},{text:IRm$.r1("L_REPORT"),iconCls:"icon-report",hidden:ig$.features.ig_n_rpt,handler:function(){this._createMetaObject.call(this,"Report",h,o,n)},scope:this},{text:IRm$.r1("L_UIPAGE"),hidden:!0,handler:function(){this._createMetaObject.call(this,"UIPage",h,o,n)},scope:this},{text:IRm$.r1("L_DASHBOARD"),iconCls:"icon-dashboard",hidden:ig$.features.ig_n_dbd,handler:function(){this._createMetaObject.call(this,"Dashboard",h,o,n)},scope:this},{text:IRm$.r1("L_BOBJ"),hidden:ig$.features.ig_n_bobj,handler:function(){this._createMetaObject.call(this,"Bobject",h,o,n)},scope:this},{text:IRm$.r1("L_HD_BPROC"),hidden:1==IG$.dlgLogin.logininfo.l4||ig$.features.ig_n_hb,handler:function(){this._createMetaObject.call(this,"BigData",h,o,n)},scope:this}]:"cube"==m?a=[{text:IRm$.r1("B_FOLDER"),hidden:ig$.features.ig_n_f_f,handler:function(){this._createMetaObject.call(this,"Folder",h,o,n)},scope:this},{text:IRm$.r1("L_CUSTOM_METRIC"),hidden:ig$.features.ig_n_cm,handler:function(){this._createMetaObject.call(this,"CustomMetric",h,o,n)},scope:this},{text:IRm$.r1("L_HIERARCHY"),hidden:ig$.features.ig_n_hm,handler:function(){this._createMetaObject.call(this,"Hierarchy",h,o,n)},scope:this},{text:IRm$.r1("L_DATE_METRIC"),hidden:ig$.features.ig_n_dm,handler:function(){this._createMetaObject.call(this,"DateMetric",h,o,n)},scope:this},{text:IRm$.r1("L_MEASURE"),hidden:ig$.features.ig_n_ms,handler:function(){this._createMetaObject.call(this,"Measure",h,o,n)},scope:this},{text:IRm$.r1("L_FORMULA"),hidden:ig$.features.ig_n_fm,handler:function(){this._createMetaObject.call(this,"FormulaMeasure",h,o,n)},scope:this},{text:IRm$.r1("L_CHART_MEASURE"),hidden:ig$.features.ig_n_cms,handler:function(){this._createMetaObject.call(this,"ChartMeasure",h,o,n)},scope:this},{text:IRm$.r1("L_GROUP_MEASURE"),hidden:(ig$.features.ig_n_gm,"mcube"!=m),handler:function(){this._createMetaObject.call(this,"MeasureGroup",h,o,n)},scope:this}]:I&&(a=[{text:IRm$.r1("B_FOLDER"),hidden:ig$.features.ig_n_f_f,handler:function(){this._createMetaObject.call(this,"Folder",h,o,n)},scope:this},{text:"Make RScript",hidden:ig$.features.ig_n_f_r,handler:function(){this._createMetaObject.call(this,"RScript",h,o,n)},scope:this}]),1==_&&r.add({text:IRm$.r1("L_MAKEITEM_G"),hidden:ig$.features.ig_n_f,menu:a,scope:this}),1==IG$.dlgLogin.jS2&&r.add({text:IRm$.r1("L_EXPORT_META"),hidden:ig$.features.ig_n_exp,handler:function(){this.exportMeta.call(this,{uid:h,name:d,nodepath:o,type:s})},scope:this}),"folder"!=s&&"rfolder"!=s&&"javapackage"!=s&&(r.add({text:IRm$.r1(1==_?"L_EDIT_ITEM":"L_VIEW_ITEM",d),handler:function(){g&&g.navigateApp.call(g,h,s,d,o,!0,_,{editmode:_})},scope:this}),"report"!=s||ig$.features.ig_n_cp||r.add({text:IRm$.r1("L_COPY_ITEM",d),handler:function(){IG$.clipboard={uid:h,name:d,nodepath:o,type:s}},scope:this})),"folder"!=s||1!=_&&1!=u||null==IG$.clipboard||r.add({text:IRm$.r1("L_PASTE_ITEM"),handler:function(){this.pasteMetaObject(n)},scope:this}),E=!0;break;case"table":case"inlineview":1!=_&&1!=u||r.add({text:IRm$.r1("B_FOLDER"),hidden:ig$.features.ig_n_f_f,handler:function(){this._createMetaObject.call(this,"Folder",h,o,n)},scope:this});break;case"bobject":0!=c.leaf||1!=_&&1!=u||r.add({text:IRm$.r1("B_FOLDER"),hidden:ig$.features.ig_n_f_f,handler:function(){this._createMetaObject.call(this,"Folder",h,o,n)},scope:this}),1==c.leaf&&r.add({text:IRm$.r1("L_BROWSE_ITEM",d),handler:function(){var e=n;e.data.leaf=!1,e.dirty=!0,e.expand()},scope:this}),r.add({text:IRm$.r1(1==_?"L_EDIT_ITEM":"L_VIEW_ITEM",d),handler:function(){g&&g.navigateApp.call(g,h,s,d,o,!0,_,{editmode:_})},scope:this}),E=!0;break;case"report":case"bigdata":case"javaclass":case"uipage":case"cubemodel":case"dataset":r.add({text:IRm$.r1(1==_?"L_EDIT_ITEM":"L_VIEW_ITEM",d),handler:function(){g.navigateApp.call(g,h,s,d,o,!0,_,{editmode:_})},scope:this});break;case"dashboard":r.add({text:IRm$.r1(1==_?"L_EDIT_ITEM":"L_VIEW_ITEM",d),handler:function(){g&&g.navigateApp.call(g,h,_?"dashboardedit":"dashboard",d,o,!0,!0)},scope:this}),E=!0;break;case"measure":case"hierarchy":r.add({text:IRm$.r1(1==_?"L_EDIT_ITEM":"L_VIEW_ITEM",d),handler:function(){var e;IG$.measureEditor?(e=new IG$.measureEditor({uid:h,name:d}),IG$.checkLogin(i,e)):IG$.getScriptCache(ig$.scmap.igcn,new IG$.callBackObj(this,function(){var e;IG$.measureEditor?(e=new IG$.measureEditor({uid:h,name:d}),IG$.checkLogin(i,e)):IG$.ShowError(IRm$.r1("L_ERR_L_MOD"))}))}});break;case"formulameasure":r.add({text:IRm$.r1(1==_?"L_EDIT_ITEM":"L_VIEW_ITEM",d),handler:function(){var e=new IG$.formulaEditor({uid:h,name:d});IG$.checkLogin(i,e)}});break;case"chartmeasure":r.add({text:IRm$.r1(1==_?"L_EDIT_ITEM":"L_VIEW_ITEM",d),handler:function(){var e=new IG$.cellwizard({uid:h,name:d});IG$.checkLogin(i,e)}});break;case"datemetric":r.add({text:IRm$.r1(1==_?"L_EDIT_ITEM":"L_VIEW_ITEM",d),handler:function(){var e=n.get("type").toLowerCase(),t=n.get("name"),a=n.get("nodepath"),i=n.get("uid"),r="T"==n.get("writable")||"T"==n.get("manage");n.get("manage"),n.get("issubcube");g&&g.navigateApp.call(g,i,e,t,a,!0,r)}});break;case"custommetric":r.add({text:IRm$.r1(1==_?"L_EDIT_ITEM":"L_VIEW_ITEM",d),handler:function(){var e;IG$.custommetric?(e=new IG$.custommetric({uid:h,name:d}),IG$.checkLogin(i,e)):IG$.getScriptCache(ig$.scmap.igcn,new IG$.callBackObj(this,function(){var e;IG$.custommetric?(e=new IG$.custommetric({uid:h,name:d}),IG$.checkLogin(i,e)):IG$.ShowError(IRm$.r1("L_ERR_L_MOD"))}))}});break;case"metric":r.add({text:IRm$.r1(1==_?"L_EDIT_ITEM":"L_VIEW_ITEM",d),handler:function(){var e;IG$.metricEditor?(e=new IG$.metricEditor({uid:h,name:d}),IG$.checkLogin(i,e)):IG$.getScriptCache(ig$.scmap.igcn,new IG$.callBackObj(this,function(){var e;IG$.metricEditor?(e=new IG$.metricEditor({uid:h,name:d}),IG$.checkLogin(i,e)):IG$.ShowError(IRm$.r1("L_ERR_L_MOD"))}))}});break;case"qicustom":var R,L=n.get("stype");L&&window.qicustom_menus.popupmenu&&window.qicustom_menus.popupmenu[L]&&0<(R=window.qicustom_menus.popupmenu[L]).length&&($.each(R,function(e,t){r.add({text:t.text,handler:function(){var e;window.qicustom_menus.popupmenu.handler&&(e=window.qicustom_menus.menuitems[n.get("uid")],window.qicustom_menus.popupmenu.handler.call(window,e,t))}})}),E=!0)}IG$.dlgLogin.jS2;return"qicustom"==s||1!=_&&1!=u||b||M||(r.add({text:IRm$.r1("L_RENAME_ITEM",d),hidden:ig$.features.ig_n_ren,handler:function(){this._renameMetaObject.call(this,c.name,h,o,n)},scope:this}),r.add({text:IRm$.r1("L_DELETE_ITEM",d),hidden:ig$.features.ig_n_del,handler:function(){this.deleteMetaObject.call(this,h,n)},scope:this}),E=!0),"qicustom"!=s&&"folder"!=s&&(!n.isRoot||n.isRoot&&0==n.isRoot())&&("report"==s&&(r.add({text:IRm$.r1("L_COPY_ITEM",d),handler:function(){IG$.clipboard={uid:h,name:d,nodepath:o,type:s}},scope:this}),E=!0),1==IG$.dlgLogin.jS2&&(!1!==ig$.features.ig_n_e_meta||b||M||r.add({text:IRm$.r1("L_EDIT_META"),hidden:ig$.features.ig_n_e_meta,handler:function(){this.editMeta.call(this,{uid:h,name:d,nodepath:o,type:s})},scope:this}))),"qicustom"!=s&&1==u&&(r.add({text:IRm$.r1("L_OBJECT_AUTH"),hidden:ig$.features.ig_n_oauth,handler:function(){var e=new IG$.objectAuth({uid:h,itemtype:l});IG$.checkLogin(this,e)},scope:this}),r.add({text:IRm$.r1("L_SUBSCRIBE"),hidden:ig$.features.ig_n_osubscr,handler:function(){var e=new IG$.objectSubscribe({uid:h,itemtype:l});IG$.checkLogin(this,e)},scope:this}),r.add({text:IRm$.r1("L_REVISION"),hidden:ig$.features.ig_n_rev,handler:function(){IG$.procMenuCommand("CMD_REVISION",h)},scope:this}),E=!0),"qicustom"==s||"folder"!=s&&0!=c.leaf||r.add({text:IRm$.r1("L_REFRESH"),handler:function(){this.refreshNode(n)},scope:this}),"qicustom"!=s&&1==u&&r.add({text:IRm$.r1("L_MGR_FD"),hidden:ig$.features.ig_n_mgf,handler:function(){this.manageFolder(n)},scope:this}),E},IG$.deleteMetaObject=function(r,n,c){var s=this;IG$.confirmMessages(ig$.appname,"Confirm to delete content?",function(e){if("yes"==e){var t,a=new IG$._rpc$,i=[];if("object"==typeof r&&r.length){for(t=0;t<r.length;t++)i.push({uid:r[t],option:"delete"});a.init(s,{ack:"batchcontent",payload:i,mbody:{}},s,s.rdeleteMetaObject,null,[n,c])}else a.init(s,{ack:"deletecontent",payload:{uid:r},mbody:{}},s,s.rdeleteMetaObject,null,[n,c]);a.send()}},s,s)},IG$.rdeleteMetaObject=function(e,t){var a=this,i=t[0],n=t[1];a.selectedNode=[],IG$.alertmsg(ig$.appname,IRm$.r1("M_DELETED"),null,a,0,"success"),a.fireEvent&&(r=a.fireEvent("refreshTree",a,i),r)||(n?n.execute():i&&a.refreshNode&&a.refreshNode(i.parentNode))},IG$._itemEditCtrlMap={measure:"measureEditor",hierarchy:"HierarchyEditor",custommetric:"custommetric",datemetric:"datemetric",formulameasure:"formulaEditor",chartmeasure:"cellwizard",udg:"_udgeditor"},IG$._createMetaObject=function(e,t,a,i,r){var n=this,c=IG$._itemEditCtrlMap[e.toLowerCase()],s=c?new IG$[c]({parentnodepath:a,itemtype:e,parentuid:t,callback:n.r_createMetaObject?new IG$.callBackObj(n,n.r_createMetaObject,[i,r]):r}):new IG$.makeItem({parentnodepath:a,itemtype:e,parentuid:t,callback:n.r_createMetaObject?new IG$.callBackObj(n,n.r_createMetaObject,[i,r]):r});IG$.checkLogin(this,s)},IG$.r_createMetaObject=function(e){var t=this,a=e[0],i=e[1];t.fireEvent&&t.fireEvent("refreshTree",t,a)||(a&&t.refreshNode&&t.refreshNode(a),!a&&t.refreshCurrent&&t.refreshCurrent(),i&&i.execute())},IG$.editMeta=function(e){},IG$._renameMetaObject=function(e,t,a,i){var r=new IG$.makeItemEditor({itemname:e,uid:t,nodepath:a,itemtype:i.data.itemtype||i.data.type,memo:i.data.memo||"",callback:new IG$.callBackObj(this,this.r_renameMetaObject,i)});IG$.checkLogin(this,r)},IG$.r_renameMetaObject=function(e){this.fireEvent&&(r=this.fireEvent("refreshTree",this,e),r)||(e&&e.parentNode&&this.refreshNode(e.parentNode),e||this.refreshCurrent())},IG$.pasteMetaObject=function(e){var t=new IG$._rpc$;t.init(this,{ack:"writecontent",payload:{pid:e.get("uid"),address:IG$.clipboard.uid},mbody:{option:"copy"}},this,this.rpasteMetaObject,null,e),t.send()},IG$.rpasteMetaObject=function(e,t){this.fireEvent&&(r=this.fireEvent("refreshTree",this,node),r)||this.refreshNode(t)},IG$.load_content=function(e,t,a){var i,r=new IG$._rpc$,n="helpcontent";switch(e){case 0:case 5:n="content";break;case 2:i="favorites";break;case 3:i="recent";break;case 4:i="trashbin"}r.init(this,{ack:n,payload:{uid:t,type:"/"==t?"Folder":void 0},mbody:a||{option:i,subfolder:"T"}},this,this.rload_content,null,e),r.send()};
IG$.explorerSearch=$s.extend($s.window,{modal:!0,resizable:!1,width:400,autoHeight:!0,bodyPadding:10,layout:{type:"vbox",align:"stretch"},init_f:function(){var e,t,a=this,l=a.searchOption,d=a.down("[name=fltsetdate]"),o=a.down("[name=fltfromdate]"),n=a.down("[name=flttodate]"),i=a.down("[name=fltypegrid]"),s={};if(i.store.loadData([{name:"Folder",type:"Folder"},{name:"Cube",type:"Cube"},{name:"Report",type:"Report"},{name:"Dimension",type:"Dimension"},{name:"Measure",type:"Measure"}]),l&&(a.down("[name=keyword]").setValue(l.keyword),d.setValue(l.fltsetdate),l.fltfromdate&&o.setValue(l.fltfromdate),l.flttodate&&n.setValue(l.flttodate),l.typelist&&0<l.typelist.length)){for(t=0;t<l.typelist.length;t++)s[l.typelist[t]]=1;for(t=0;t<i.store.data.items.length;t++)1==s[(e=i.store.data.items[t]).get("type")]&&e.set("selected",!0)}},_confirm:function(){for(var e=this,t=e.searchOption,a=e.down("[name=fltsetdate]").getValue(),l=e.down("[name=fltfromdate]").getValue(),d=e.down("[name=flttodate]").getValue(),o=e.down("[name=fltypegrid]"),n=[],i=0;i<o.store.data.items.length;i++)1==o.store.data.items[i].get("selected")&&n.push(o.store.data.items[i].get("type"));t.fltsetdate=a,t.fltfromdate=l?l.getTime():null,t.flttodate=d?d.getTime():null,t.typelist=n,t.keyword=e.down("[name=keyword]").getValue(),e.callback&&e.callback.execute(),e.close()},initComponent:function(){this.title=IRm$.r1("I_EXP_SCH"),$s.apply(this,{defaults:{bodyStyle:"padding:0px"},items:[{xtype:"fieldset",title:"Show only..",collapsible:!1,autoHeight:!0,collapsed:!1,defaults:{labelWidth:80,anchor:"100%",layout:"anchor",defaults:{anchor:"100%"}},items:[{xtype:"textfield",name:"keyword",fieldLabel:"Keyword"},{xtype:"combobox",name:"fltypegroup",labelField:"Type",queryMode:"local",displayField:"name",valueField:"gcode",editable:!1,store:{fields:["name","gcode"],data:[{name:"----- Quick Select -----",gcode:""},{name:"All",gcode:"all"},{name:"Folder and Workspace",gcode:"folder"},{name:1==IG$.level?"Report or dashboard":"Report",gcode:"report"},{name:"Analysis item",gcode:"dimensions"}]},listeners:{select:function(e,t,a){var l,d,o=e.getValue(),n=this.down("[name=fltypegrid]").store,i=null,s=null;switch(o){case"all":i=null;break;case"report":i="Report|Dashboard";break;case"folder":i="Folder";break;case"dimensions":i="Dimension|Measure"}for(null!=i&&(s=new RegExp(i)),l=0;l<n.data.items.length;l++)d=n.data.items[l].get("type"),null==i||null!=s&&1==s.test(d)?n.data.items[l].set("selected",!0):n.data.items[l].set("selected",!1)},afterrender:function(e){e.setValue("")},scope:this}},{xtype:"gridpanel",name:"fltypegrid",region:"center",layout:"fit",hideHeaders:!0,flex:1,height:140,scroll:"vertical",stateful:!1,store:{fields:["selected","name","type","nodepath","uid","iconimg"]},columns:[{xtype:"checkcolumn",dataIndex:"selected",width:30,editor:{xtype:"checkbox",cls:"x-grid-checkheader-editor"}},{header:"",dataIndex:"iconimg",sortable:!1,hideable:!1,width:20},{header:"Name",dataIndex:"name",sortable:!1,hideable:!1,flex:1}],listeners:{afterrender:function(e){}}}],listeners:{}},{xtype:"fieldset",title:"Date period",layout:{type:"vbox",align:"stretch"},items:[{xtype:"checkbox",name:"fltsetdate",fieldLabel:"",boxLabel:"Enable date period",listeners:{change:function(e,t,a,l){var d=e.getValue(),o=this.down("[name=fltfromdate]"),n=this.down("[name=flttodate]");o.setDisabled(!d),n.setDisabled(!d)},scope:this}},{xtype:"datefield",name:"fltfromdate",disabled:!0,labelWidth:70,fieldLabel:"From",maxValue:new Date,format:"Y-m-d",value:new Date},{xtype:"datefield",name:"flttodate",disabled:!0,labelWidth:70,fieldLabel:"To",maxValue:new Date,format:"Y-m-d",value:new Date}]}],buttons:[{text:IRm$.r1("B_CONFIRM"),handler:function(){this._confirm()},scope:this},{text:IRm$.r1("B_CLOSE"),handler:function(){this.close()},scope:this}]}),IG$.explorerSearch.superclass.initComponent.apply(this,arguments)},listeners:{afterrender:function(e){this.init_f()}}});
IG$.explorer=$s.extend($s.panel,{bodyPadding:"0 0 0 0",layout:"border",border:0,searchOption:{},deleteContent:function(t){var n=this;IG$.confirmMessages(IRm$.r1("B_CONFIRM"),IRm$.r1("B_CD_CHS"),function(e){"yes"==e&&n._deleteContent.call(n,t)})},getSelected:function(e){for(var t={items:[],length:0},n=0;n<e.store.data.items.length;n++)rec=e.store.data.items[n],1==rec.get("selected")&&t.items.push(rec);return t.length=t.items.length,t},_deleteContent:function(e){var t,n=this,a=n.down("[name=mg]"),o=[],s=n.getSelected(a),c=0,r=new IG$._rpc$;if(0<s.length){for(i=0;i<s.length;i++)if(".."!=(t=s.items[i]).get("name")&&(t.get("manage")||t.get("writable")))o.push({uid:t.get("uid"),option:"delete"}),c++;else if(".."!=t.get("name")){c=0,IG$.ShowError(IRm$.r1("E_PV_L",t.get("name")),n);break}0<c&&(r.init(n,{ack:"batchcontent",payload:o,mbody:{option:"delete"}},n,n.rdeleteContent,null,e),r.send())}},rdeleteContent:function(e,t){this.refreshCurrent()},deleteMetaObject:function(e,t){var n=this,a=new IG$._rpc$;a.init(n,{ack:"deletecontent",payload:{uid:e},mbody:{}},n,n.rdeleteMetaObject,null,t),a.send()},rdeleteMetaObject:function(e,t){t&&t.store.remove(t),IG$.alertmsg(ig$.appname,IRm$.r1("M_DELETED"),null,this,0,"success")},processMenu:function(e,t){var n=this,a=n.openItem,o=n.mainPanel;switch(e){case"cmd_c_workspace":IG$.procMenuCommand("CMD_MAKE_WORKSPACE");break;case"cmd_c_folder":a&&n._createMetaObject("Folder",a.uid,a.nodepath,t);break;case"cmd_c_reports":a&&n._createMetaObject("Report",a.uid,a.nodepath,t);break;case"cmd_c_dbd":a&&n._createMetaObject("Dashboard",a.uid,a.nodepath,t);break;case"cmd_c_upload":a&&n._createMetaObject("DataCube",a.uid,a.nodepath,t);break;case"cmd_c_cube":a&&n._createMetaObject("Cube;SQLCube;NoSQL;MDBCube",a.uid,a.nodepath,t);break;case"cmd_c_dbmodel":a&&n._createMetaObject("CubeModel",a.uid,a.nodepath,t);break;case"cmd_c_metrics":t&&a&&n._createMetaObject(t,a.uid,a.nodepath,t);break;case"cmd_c_workflow":a&&n._createMetaObject("BigData",a.uid,a.nodepath,t);break;case"cmd_c_java":a&&n._createMetaObject("JavaClass",a.uid,a.nodepath,t);break;case"cmd_up":n._breadcrumbitems&&1<n._breadcrumbitems.length&&n.load_content(0,n._breadcrumbitems[n._breadcrumbitems.length-2].cpath);break;case"cmd_moveto":n.moveTo();break;case"cmd_remove":n.deleteContent(t);break;case"cmd_open":if(a&&o&&/cube|datacube|sqlcube|nosql|mcube|mdbcube/.test(a.type.toLowerCase()))o.navigateApp.call(o,a.uid,a.type.toLowerCase(),a.name,a.nodepath,!0,a.writable);else{for(var i=(c=n.down("[name=mg]")).getSelectionModel(),s=0;s<c.store.data.items.length;s++)if(r=c.store.data.items[s],i.isFocused(r)){l=r;break}l&&/cube|datacube|sqlcube|nosql|mcube|mdbcube/.test(l.get("type").toLowerCase())&&o.navigateApp.call(o,l.get("uid"),l.get("type").toLowerCase(),l.get("name"),l.get("nodepath"),!0,l.get("writable"))}break;case"cmd_edit":var c,r,l,i=(c=n.down("[name=mg]")).getSelectionModel();for(s=0;s<c.store.data.items.length;s++)if(r=c.store.data.items[s],i.isFocused(r)){l=r;break}l&&o.navigateApp.call(o,l.get("uid"),l.get("type").toLowerCase(),l.get("name"),l.get("nodepath"),!0,l.get("writable"));break;case"cmd_recover":n.trashbinAction(!1);break;case"cmd_delete":n.trashbinAction(!0)}},moveTo:function(){var e=new IG$.metaSelectDlg({visibleItems:"folder",targetobj:"folder",tree_options:{cubebrowse:!1,rootuid:null},callback:new IG$.callBackObj(this,this.m_moveTo)});IG$.checkLogin(this,e)},m_moveTo:function(t){var n=this;t&&IG$.confirmMessages(IRm$.r1("B_CONFIRM"),IRm$.r1("B_CD_MHS",t.name),function(e){"yes"==e&&n.r_moveTo.call(n,t)})},r_moveTo:function(e){var t,n=this.down("[name=mg]"),a=this.getSelected(n);if(a&&0<a.length){for(var o,i="<smsg>",s=this,c=0,r=0;r<a.length;r++)"T"!=(t=a.items[r]).get("writable")&&"T"!=t.get("manage")||(i+="<item uid='"+t.get("uid")+"'/>",c++);i+="</smsg>",0<c&&((o=new IG$._rpc$).init(s,{ack:"helpcontent",payload:i,mbody:{option:"move",target:e.uid}},s,s.s_moveTo,null,null),o.send())}},s_moveTo:function(e){this.refreshCurrent()},trashbinAction:function(e){for(var t=this,n="<smsg>",a=new IG$._rpc$,o=0,i=t.down("[name=mg]"),s=t.getSelected(i).items,c=0;c<s.length;c++)n+="<item"+IG$.XUpdateInfo({uid:s[c].get("uid")},"uid","s")+"/>",o++;n+="</smsg>",0<o&&(a.init(t,{ack:"helpcontent",payload:n,mbody:{option:e?"remove_trash":"recover_trash"}},t,t.rtrashbinAction,null,null),a.send())},rtrashbinAction:function(e){this.refreshCurrent()},initData:function(){var e,t,a,n,o,i,s=this,c=s.down("[name=pl1]"),r=$(c.body.dom);for(r.empty(),ig$.features&&ig$.features.ig_n_lst&&c.hide(),s.toolbarbuttons={items:[{name:"btn_refresh"},{name:"btn_moveto",fcls:"ig_n_mv"},{name:"btn_remove",fcls:"ig_n_del"},{name:"btn_recover"},{name:"btn_open"},{name:"btn_up"},{name:"btn_delete"},{name:"btn_edit"},{name:"btn_create",cls:"ig_n_f"}],c_menu:[]},n=0;n<s.toolbarbuttons.items.length;n++){if((t=s.toolbarbuttons.items[n]).obj=s.down("[name="+t.name+"]"),t.obj.setVisible(!1),t.ltype=t.obj.ltype,t.ctype=t.obj.ctype,t.sroot=t.obj.sroot,t.fcls=t.cls,"btn_create"==t.name)for(o=0;o<t.obj.menu.items.length;o++)i=t.obj.menu.items.items[o],s.toolbarbuttons.c_menu.push({obj:i,name:i.name,ltype:i.ltype,mtype:i.mtype,sroot:i.sroot,fcls:i.fcls});s.toolbarbuttons[t.name]=t}e=[{text:IRm$.r1("L_C_PR"),cls:"ig_n_p",handler:function(){this.load_content(1)}},{text:IRm$.r1("L_C_AL"),cls:"ig_n_a",handler:function(){this.load_content(0,"/")}},{text:IRm$.r1("L_C_FC"),cls:"ig_n_fav",handler:function(){this.load_content(2)}},{text:IRm$.r1("L_C_MW"),cls:"ig_n_mw",handler:function(){this.load_content(5,"/")}},{text:IRm$.r1("L_C_LC"),cls:"ig_n_rcnt",handler:function(){this.load_content(3)}},{text:IRm$.r1("L_C_CD"),cls:"ig_n_del",handler:function(){this.load_content(4)}}],a=$("<ul class='ig-navi-list'></ul>").appendTo(r),$.each(e,function(e,t){var n;1!=t.hidden&&(n=$("<li class='"+(t.cls||"")+(t.iconCls?" ig-navi-icon "+t.iconCls:"")+"'><span>"+t.text+"</span></li>").appendTo(a),t.handler&&n.bind("click",function(){t.handler.call(s)}))})},load_content:IG$.load_content,isVisibleItem:function(e,t,n,a){var o=-1<e.ltype.indexOf(t+";"),i=this.openItem&&"/"==this.openItem.nodepath;return o&&e.fcls&&ig$.features[e.fcls]&&(o=!1),(o=(0!=e.sroot||1!=i)&&o)&&e.ctype&&n&&(o=-1<e.ctype.indexOf(n+";")),o&&"btn_up"==e.name&&(!a||a&&a.split("/").length<2)&&(o=!1),o},isVisibleCreate:function(e,t,n){var a,o,i=-1<e.ltype.indexOf(t+";"),s=this.openItem&&"/"==this.openItem.nodepath,i=!(!i||ig$.features[e.fcls]);return 1==(i=(1!=s||0!=e.sroot)&&i)&&e.mtype&&(("nvl"!=e.mtype||!n)&&("nvl"==e.mtype||n)?n&&(o=-1<(a=n.indexOf(";"))?n.substring(a+1).toLowerCase():"formaterror",i=!!(n&&-1<e.mtype.indexOf(o+";"))):i=!1),"c_workspace"!=e.name||!s||1!=IG$.dlgLogin.jS2&&ig$.features[e.fcls]||(i=!0),i},navigateTree:function(e){var t=this.mtree.getRootNode();this.ntritem=e,this.ntrnode=t,this.ntrseq=1,this.navigateTreeOpen()},navigateTreeOpen:function(){var e,t,n,a=this.mtree,o=this.ntritem.nodepath||this.ntritem,i=o.split("/"),s=this.ntrseq,c=this.ntrnode;if(c&&i.length>s)for(e=i[s],t=0;t<c.childNodes.length;t++)if((n=c.childNodes[t]).data.name==e){0==n.isLeaf()?(this.ntrnode=n,this.ntrseq++,n.expand(!1,this.navigateTreeOpen,this),n.get("nodepath")==o&&a.getSelectionModel().select(n)):(this.ntrnode=null,this.ntrseq=0,a.getSelectionModel().select(n));break}},rload_content:function(e,t){var n,a,o,i,s,c=this,r=c.down("[name="+("tree"==c.vmode?"mg_t":"mg")+"]"),l=e.children||[],d=[],m=null,u=c.toolbarbuttons.items,p=c.toolbarbuttons.c_menu,h=c.mtree.cacheSet;for(c.openItem=null,0!=(c.ltype=t)&&5!=t&&1!=t||(c.openItem=e,c.openItem.name,m=c.openItem.nodepath,i=c.openItem.uid,n=c.openItem.type.toLowerCase()),a=0;a<p.length;a++)s=c.isVisibleCreate(p[a],n,null!=c.openItem?c.openItem.subcube:null),p[a].obj.setVisible(s);for(a=0;a<u.length;a++)s=c.isVisibleItem(u[a],t,n,m),u[a].obj.setVisible(s);for(c.setBreadCrumb(m,i),a=0;a<l.length;a++)(o=l[a]).ltype=o.type.toLowerCase(),o.iconcls=IG$.get_metatype_icon(o.ltype,o),d.push(o);IG$.sortMeta(d),c.openItem&&(h[c.openItem.uid]={datas:d,item:c.openItem}),r.store.loadData(d)},setBreadCrumb:function(e,t){var n,a,o,i,s,c=this,r=c.down("[name=bc]"),l=$(r.body.dom),d=[];if(l.empty(),c.bcuid=t,c._breadcrumbitems=[],e){for(n=e.split("/"),o=1;o<n.length;o++){for(a={name:n[o],cpath:""},i=1;i<o+1;i++)a.cpath+="/"+n[i];d.push(a)}s=$("<ul class='ig-navi-breadcrumb'></ul>").appendTo(l),$.each(d,function(e,t){var n,a=e<d.length-1;"SYS_Config"!=t.name&&(c._breadcrumbitems.length&&$("<li class='ig-navi-breadcrumb-sep'>&gt;</li>").appendTo(s),(n=$("<li class='"+(a?"qlink":"")+"'>"+t.name+"</li>").appendTo(s)).appendTo(s),c._breadcrumbitems.push(t),a&&n.bind("click",function(){c.load_content.call(c,0,t.cpath)}))})}},updateGridContent:function(e,t){var n,a,o=this,i=o.down("[name=mg]"),s=t&&t.nodepath?t.nodepath:null,c=t&&t.uid?t.uid:null,r=o.toolbarbuttons,l=r?r.items:null,d=r?r.c_menu:null;if(r){for(o.ltype=0,(o.openItem=t)&&(o.openItem.name,n=o.openItem.type.toLowerCase()),a=0;a<d.length;a++)v=o.isVisibleCreate(d[a],n,null!=o.openItem?o.openItem.subcube:null),d[a].obj.setVisible(v);for(a=0;a<l.length;a++)v=o.isVisibleItem(l[a],0,n,s),l[a].obj.setVisible(v);o.setBreadCrumb(s,c),i.store.loadData(e)}},refreshCurrent:function(e){var t=e||this.bcuid,n=this.mtree.cacheSet;t&&n[t]&&delete n[t],this.load_content(this.ltype,t)},prepareCustomMenu:IG$.prepareCustomMenu,_createMetaObject:IG$._createMetaObject,r_createMetaObject:IG$.r_createMetaObject,_renameMetaObject:IG$._renameMetaObject,r_renameMetaObject:IG$.r_renameMetaObject,editMeta:IG$.editMeta,pasteMetaObject:IG$.pasteMetaObject,rpasteMetaObject:IG$.rpasteMetaObject,refreshNode:function(e){this.refreshCurrent(e.get("uid"))},doSearch:function(e,t){var n,a=this,o=a.down("[name=kword]"),i=a.down("[name=pl2]"),s=a.down("[name=b_csch]"),c=o.getValue(),r=(new IG$._rpc$,a.searchOption);t&&(e=r.keyword),e&&(o.setValue(e),c=e),"tree"==a.vmode&&(i.getLayout().setActiveItem(e||t?1:0),s.setVisible(e)),!c&&1!=r.fltsetdate||(n={option:"search",name:c},r.fltsetdate&&(n.fromdate=r.fltfromdate,n.todate=r.flttodate),r.typelist&&0<r.typelist.length&&(n.typelist=r.typelist.join(";")),a.load_content(6,null,n))},showSearchOption:function(){var e,t=this.down("[name=kword]");this.searchOption.keyword=t.getValue(),e=new IG$.explorerSearch({searchOption:this.searchOption,callback:new IG$.callBackObj(this,function(){this.doSearch(null,!0)})}),IG$.checkLogin(this,e)},exportMeta:function(e){var t=this.mtree;t.exportMeta.call(t,e)},editMeta:function(e){},initComponent:function(){var e,t=this;t.mainPanel=IG$.mainPanel,t.customMenu=new $s.menu({items:[]}),e=new IG$.n$navTreeCom({_meta_move:t._meta_move,gridupdate:{handler:t.updateGridContent,scope:t},custom_click_func:t.custom_click_func||new IG$.callBackObj(t,function(e,t){var n,a,o=e.get("uid"),i=e.get("type").toLowerCase(),s="root"==i||IG$.isFolder(i)<5,c=ig$.c_menus;"c_menu"==i?(a=c&&c.menuitems?c.menuitems[o]:null)&&a.handler&&a.handler.call(window,a):this.custom_click_func?this.custom_click_func.execute(e):0==s?(n=IG$.mainPanel).navigateApp.call(n,o,i,e.get("locale_name")||e.get("name"),e.get("nodepath"),!0,e.get("writable")):e.isExpanded()||e.expand()}),custom_expand_func:t.custom_expand_func||new IG$.callBackObj(t,t.custom_expand_func),show_tree_items:t.show_tree_items}),t.mtree=e,ig$.uiconfig=ig$.uiconfig||{},ig$.uiconfig.navigator=ig$.uiconfig.navigator||{},t.items=[{xtype:"panel",region:"tree"==this.vmode?"center":"west",layout:"border",border:0,width:"tree"==this.vmode?null:200,collapsible:!0,split:!1,titleCollapse:!1,header:!1,collapseMode:"mini",items:[{xtype:"panel",border:0,hidden:ig$.uiconfig.navigator.list_hidden||"tree"==this.vmode||!1,region:ig$.uiconfig.navigator.list_pos||"north",name:"pl1",height:180,margin:"0 0 0 0",title:"List",cls:"igc-f-dec"},{xtype:"panel",flex:1,border:0,margin:"0 0 0 0",bodyPadding:0,region:"center",title:IRm$.r1("B_FOLDER"),layout:"card",cls:"igc-f-dec",name:"pl2",tools:[{type:"close",name:"b_csch",tooltip:"Close",hidden:!0,handler:function(e,t,n){this.doSearch()},scope:this},{type:"refresh",tooltip:"Refresh",handler:function(e,t,n){this.mtree.refreshTree.call(this.mtree)},scope:this}],items:[e,{xtype:"grid",flex:1,name:"mg_t",store:{xtype:"store",fields:["selected","uid","nodepath","name","type","description","iconcls","updatedate","owner","modifier","updatedatefm","writable","manage"]},tbar:{xtype:"toolbar",items:["->",{text:"Advanced",handler:function(){this.showSearchOption()},scope:this},{iconCls:"icon-toolbar-close",handler:function(){this.down("[name=pl2]").setActiveItem(0)},scope:this}]},viewConfig:{plugins:[{ptype:"gridviewdragdrop",ddGroup:"_I$RD_G_",enableDrop:!1,enableDrag:!0}]},columns:[{xtype:"templatecolumn",text:IRm$.r1("B_NAME"),menuDisabled:!0,flex:1,minWidth:100,tdCls:"ig-navi-namecol",renderer:function(e,t,n){var a=n.get("locale_name")||n.get("name");return n.get("locale_name")&&(a+="("+n.get("locale_name")+")"),a+="\n==>"+(n.get("nodepath")||""),"<div class='ig-navi-itemicon "+(n.get("iconcls")||"")+"'></div><span title='"+IG$.hEE(a)+"'>"+IG$.hEE(n.get("locale_name")||n.get("name"))+"</span>"}},{xtype:"gridcolumn",text:IRm$.r1("B_LOC"),minWidth:200,menuDisabled:!0,flex:1,dataIndex:"nodepath"}],listeners:{cellclick:function(e,t,n,a,o,i,s,c){var r=this.down("[name=pl2]"),l=(this.toolbarbuttons,a.get("type").toLowerCase()),d=IG$.isFolder(l),m=a.get("uid"),u=(a.get("type"),this.down("[name=b_csch]"));1==n||0==n&&d<5?(r.getLayout().setActiveItem(0),u.hide(),this.navigateTree({nodepath:a.get("nodepath")})):4<d&&IG$.navigateMenu(m)},beforeitemcontextmenu:function(e,t,n,a,o){o.stopEvent();o.pageX,o.pageY;var i=o.getTarget();return 1==this.prepareCustomMenu(t)&&4!=this.ltype&&this.customMenu.showBy(i),!1},scope:this}}]}]},{xtype:"panel",region:"tree"==this.vmode?"east":"center",hidden:"tree"==this.vmode,flex:1,border:0,layout:"border",items:[{xtype:"panel",border:0,margin:"0 5 0 0",region:"north",layout:{type:"vbox",align:"stretch"},items:[{xtype:"container",hidden:ig$.uiconfig.navigator.search_hidden||!1,layout:{type:"hbox"},items:[{xtype:"textfield",name:"kword",fieldLabel:IRm$.r1("L_BTN_SEARCH"),labelPosition:"right",enableKeyEvents:!0,width:300,labelWidth:60,listeners:{keyup:function(e,t,n){13==t.keyCode&&this.doSearch()},scope:this}},{xtype:"button",text:"..",handler:function(){this.showSearchOption()},scope:this},{xtype:"button",text:IRm$.r1("B_GO"),handler:function(){this.doSearch()},scope:this}]},{xtype:"panel",name:"bc",height:22},{xtype:"toolbar",defaults:{xtype:"button",scope:this},items:[{xtype:"button",text:IRm$.r1("B_CR"),ltype:"0;1;2;3;5;",ctype:"folder;cube;sqlcube;datacube;javapackage;",sroot:!0,name:"btn_create",menu:{xtype:"menu",defaults:{scope:this,sroot:!1},items:[{text:IRm$.r1("B_WORKSPACE"),name:"c_workspace",fcls:"ig_n_cw",sroot:!0,ltype:";",mtype:"nvl",handler:function(){this.processMenu("cmd_c_workspace")}},{text:IRm$.r1("B_FOLDER"),name:"c_folder",fcls:"ig_n_f_f",ltype:"folder;cube;sqlcube;datacube;javapackage;",handler:function(){this.processMenu("cmd_c_folder")}},{text:IRm$.r1("L_REPORT"),name:"c_report",fcls:"ig_n_rpt",ltype:"folder;",mtype:"nvl",handler:function(){this.processMenu("cmd_c_reports")}},{text:IRm$.r1("L_DASHBOARD"),name:"c_dashboard",fcls:"ig_n_dbd",ltype:"folder;",mtype:"nvl",handler:function(){this.processMenu("cmd_c_dbd")}},{text:IRm$.r1("L_B_ADC"),name:"c_dcube",fcls:"ig_n_c_lc",ltype:"folder;",mtype:"nvl",handler:function(){this.processMenu("cmd_c_upload")}},{text:IRm$.r1("L_B_CM"),name:"c_metrics",fcls:"ig_n_cm",ltype:"cube;sqlcube;datacube;folder;",mtype:"cube;sqlcube;datacube;",handler:function(){this.processMenu("cmd_c_metrics","CustomMetric")}},{text:IRm$.r1("D_MEASURE"),name:"c_measure",fcls:"ig_n_ms",ltype:"cube;sqlcube;datacube;folder;",mtype:"cube;sqlcube;datacube;",handler:function(){this.processMenu("cmd_c_metrics","Measure")}},{text:IRm$.r1("D_FORMULA"),name:"c_fmr",fcls:"ig_n_fm",ltype:"cube;sqlcube;datacube;folder;",mtype:"cube;sqlcube;datacube;",handler:function(){this.processMenu("cmd_c_metrics","FormulaMeasure")}},{text:IRm$.r1("D_DATEMETRIC"),name:"c_dmetric",fcls:"ig_n_dm",ltype:"cube;sqlcube;datacube;folder;",mtype:"cube;sqlcube;datacube;",handler:function(){this.processMenu("cmd_c_metrics","DateMetric")}},{text:IRm$.r1("D_CHARTMEASURE"),name:"c_cmeasure",fcls:"ig_n_cms",ltype:"cube;sqlcube;datacube;folder;",mtype:"cube;sqlcube;datacube;",handler:function(){this.processMenu("cmd_c_metrics","ChartMeasure")}},{text:IRm$.r1("D_UDG"),name:"c_udg",fcls:"ig_n_udg",ltype:"cube;sqlcube;datacube;folder;",mtype:"cube;sqlcube;datacube;",handler:function(){this.processMenu("cmd_c_metrics","UDG")}},{text:IRm$.r1("L_B_BW"),name:"c_workflow",fcls:"ig_n_hb",ltype:"folder;",mtype:"nvl",handler:function(){this.processMenu("cmd_c_workflow")}},{text:IRm$.r1("L_B_JV"),name:"c_javaclass",fcls:"ig_n_jc",ltype:"folder;javapackage;",mtype:"nvl",handler:function(){this.processMenu("cmd_c_java")}}]}},{text:IRm$.r1("L_REFRESH"),ltype:"0;1;2;3;5;",sroot:!0,name:"btn_refresh",handler:function(){this.refreshCurrent()}},"-",{text:IRm$.r1("L_B_U"),ltype:"0;1;2;3;5;",sroot:!1,name:"btn_up",handler:function(){this.processMenu("cmd_up")}},{text:IRm$.r1("L_B_MVT"),sroot:!1,ltype:"0;1;2;3;5;6;",name:"btn_moveto",fcls:"ig_n_mv",handler:function(){this.processMenu("cmd_moveto")}},{text:IRm$.r1("L_REMOVE"),sroot:!0,ltype:"0;1;2;3;5;6;",name:"btn_remove",fcls:"ig_n_del",handler:function(){this.processMenu("cmd_remove")}},{name:"btn_recover",ltype:"4;",sroot:!1,text:IRm$.r1("L_RECOVER"),handler:function(){this.processMenu("cmd_recover")}},{name:"btn_open",ltype:"0;1;2;3;5;6;",ctype:"cube;sqlcube;datacube;nosql;mcube;mdbcube",sroot:!1,text:IRm$.r1("L_E_CB"),handler:function(){this.processMenu("cmd_open")}},{name:"btn_edit",ltype:";",sroot:!1,text:IRm$.r1("L_E_IT"),handler:function(){this.processMenu("cmd_edit")}},{name:"btn_delete",ltype:"4;",sroot:!1,fcls:"ig_n_del",text:IRm$.r1("L_E_DEL"),handler:function(){this.processMenu("cmd_delete")}},"->",{text:"Show detail",sroot:!1,hidden:!0,handler:function(){this.processMenu("cmd_detail")}}]}]},{xtype:"panel",region:"center",margin:"0 5 0 0",flex:1,border:0,layout:{type:"vbox",align:"stretch"},items:[{xtype:"grid",flex:1,name:"mg",store:{xtype:"store",fields:["selected","uid","nodepath","name","type","description","iconcls","updatedate","owner","modifier","updatedatefm","writable","manage"]},viewConfig:{plugins:[{ptype:"gridviewdragdrop",ddGroup:"_I$RD_G_",enableDrop:!1,enableDrag:!0}]},columns:[{xtype:"checkcolumn",dataIndex:"selected",width:28,listeners:{checkchange:function(e,t,n,a){var o=this,i=o.down("[name=mg]"),s=o.toolbarbuttons,c=!1,r=!1,l=record.get("type").toLowerCase(),d=IG$.isFolder(l),m=(record.get("uid"),record.get("type"),i.getView()),r=!(!o.openItem||!/cube|datacube|sqlcube|nosql|mcube|mdbcube/.test(o.openItem.type.toLowerCase()));4!=o.ltype&&(4<d?c=!0:2==d&&(r=!0),m.select(t),s.btn_edit.obj.setVisible(c),s.btn_open.obj.setVisible(r))},scope:this}},{xtype:"templatecolumn",text:IRm$.r1("B_NAME"),menuDisabled:!0,flex:1,minWidth:160,tdCls:"ig-navi-namecol",tpl:"<div class='ig-navi-itemicon-p'><div class='ig-navi-itemicon {iconcls}'></div></div><span class='ig-navi-text' title='{name} ({type})'>{name}</span>"},{xtype:"gridcolumn",text:IRm$.r1("B_DESC"),minWidth:120,menuDisabled:!0,flex:1,dataIndex:"description"},{xtype:"gridcolumn",text:IRm$.r1("B_LOC"),minWidth:200,menuDisabled:!0,flex:1,dataIndex:"nodepath"},{xtype:"gridcolumn",text:IRm$.r1("B_LASTUPD"),menuDisabled:!0,width:100,dataIndex:"updatedatefm"},{xtype:"gridcolumn",text:IRm$.r1("B_OWNER"),menuDisabled:!0,width:80,dataIndex:"owner"},{xtype:"gridcolumn",text:IRm$.r1("B_MODI"),menuDisabled:!0,width:80,dataIndex:"modifier"}],listeners:{cellclick:function(e,t,n,a,o,i,s,c){var r,l=this.toolbarbuttons,d=!1,m=!1,u=a.get("type").toLowerCase(),p=IG$.isFolder(u),h=a.get("uid"),m=(a.get("type"),!(!this.openItem||!/cube|datacube|sqlcube|nosql|mcube|mdbcube/.test(this.openItem.type.toLowerCase())));return 0==n?r:4!=this.ltype?(1==n?(r=!1,p<5?this.load_content(0,h):IG$.navigateMenu(h)):4<p?d=!0:2==p&&(m=!0),l.btn_edit.obj.setVisible(d),l.btn_open.obj.setVisible(m),r):void 0},beforeitemcontextmenu:function(e,t,n,a,o){o.stopEvent();o.pageX,o.pageY;var i=o.getTarget();return 1==this.prepareCustomMenu(t)&&4!=this.ltype&&this.customMenu.showBy(i),!1},scope:this}}]},{xtype:"panel",border:0,width:150,layout:"fit",title:"Detail",region:"east",hidden:!0}]}],IG$.explorer.superclass.initComponent.call(this)},listeners:{afterrender:function(e){this.rendered=!0,e.initData.call(e)}}});
IG$.folderManager=$s.extend($s.gridpanel,{loadRoot:function(e){var t,a,n=this;n.root=e,n.mpath=[n.root],a=n.root,(t=new IG$._rpc$).init(n,{ack:"content",payload:{uid:a.uid,nodepath:a.nodepath,name:a.name,type:a.type},mbody:{}},n,n.rs_loadRoot,null),t.send()},topWS:function(){this.loadRoot({uid:"/",nodepath:"/",name:"Workspace",type:"Folder"})},naviFolder:function(e){var t,a=this,n=e.get("type").toLowerCase();/(folder|cube|parent)/.test(n)&&(meta={uid:e.get("uid"),type:e.get("type"),nodepath:e.get("nodepath"),name:e.get("oname")||e.get("name"),manage:e.get("manage"),writable:e.get("writable")},".."==e.get("name")&&(delete meta.type,delete meta.name,delete meta.nodepath,null==meta.uid&&(meta.uid="/")),(t=new IG$._rpc$).init(a,{ack:"content",payload:{uid:meta.uid,nodepath:meta.nodepath,name:meta.name,type:meta.type},mbody:{subfolder:"T"}},a,a.rs_loadRoot,null),t.send())},rs_loadRoot:function(e){var t,a,n=e,o=e.children||[],i=[],r={},d=n.nodepath.split("/");if(this.cpath={uid:n.uid,name:n.name,nodepath:n.nodepath,type:n.type,writable:n.writable,manage:n.manage},1<d.length&&d[1]&&(r.oname=n.name,r.name="..",r.uid=n.uid==n.pid?null:n.pid,r.type="parent",i.push(r)),o){for(t=0;t<o.length;t++)(a=o[t]).iconcls=IG$.get_metatype_icon(a.type.toLowerCase(),a),i.push(a);IG$.sortMeta(i)}this.store.loadData(i)},refresh:function(){var e=this,t=e.cpath,a=new IG$._rpc$;a.init(e,{ack:"content",payload:{uid:t.uid,nodepath:t.nodepath,name:t.name,type:t.type},mbody:{}},e,e.rs_loadRoot,null),a.send()},_createMetaObject:function(e,t,a,n){var o=new IG$.makeItem({parentnodepath:a,itemtype:e,parentuid:t});o.callback=new IG$.callBackObj(this,this.r_createMetaObject,n),IG$.checkLogin(this,o)},r_createMetaObject:function(){this.refresh()},_renameMetaObject:function(e,t,a,n){var o=this,i=new IG$.makeItemEditor({itemname:e,uid:t,nodepath:a,itemtype:n,callback:new IG$.callBackObj(o,o.r_renameMetaObject,null)});IG$.checkLogin(o,i)},r_renameMetaObject:function(){this.refresh()},toolbarHandler:function(e){var t=this;switch(e){case"cmd_new_folder":t._createMetaObject("Folder",t.cpath.uid,t.cpath.nodepath,null);break;case"cmd_refresh":t.refresh();break;case"cmd_gotop":t.loadRoot(t.root);break;case"cmd_top_ws":t.topWS();break;case"cmd_delete":t.deleteMetaObject();break;case"cmd_rename":var a,n=t.getSelectionModel();0<n.selected.items.length&&".."!=(a=n.selected.items[0]).get("name")&&(a.get("writable")||a.get("manage"))&&t._renameMetaObject(a.get("name"),a.get("uid"),a.get("nodepath"),a.get("type"))}},deleteMetaObject:function(){var e,t=this,a=[],n=0,o=t.getChecked();if(0<o.length){for(e=0;e<o.length;e++)if(".."!=o[e].name&&(o[e].manage||o[e].writable))a.push({uid:o[e].uid,option:"delete"}),n++;else if(".."!=o[e].name){n=0,IG$.ShowError("Privilege error on content: "+o[e].name,t);break}0<n&&(req=new IG$._rpc$,req.init(t,{ack:"batchcontent",payload:a,mbody:{option:"delete"}},t,t.rdeleteMetaObject,null),req.send())}},rdeleteMetaObject:function(e){this.refresh()},getChecked:function(){for(var e,t=this,a=[],n=0;n<t.store.data.items.length;n++)t.store.data.items[n].get("selected")&&(e=t.store.data.items[n],a.push({uid:e.get("uid"),type:e.get("type"),nodepath:e.get("nodepath"),name:e.get("name"),manage:e.get("manage"),writable:e.get("writable")}));return a},initComponent:function(){var l=this;$s.apply(this,{name:"grd",store:{xtype:"store",fields:["uid","name","oname","nodepath","type","writable","manage","updatedate","updatedatafm","selected","iconcls"]},columns:[{xtype:"checkcolumn",dataIndex:"selected",width:30,editor:{xtype:"checkbox",cls:"x-grid-checkheader-editor"}},{xtype:"templatecolumn",text:"",tpl:"<div class='{iconcls}' style='width:16px;height:16px'></div>",dataIndex:"iconcls",width:28},{text:"Name",dataIndex:"name",flex:1,minWidth:200},{text:"Type",dataIndex:"type",width:60},{text:"Updated",dataIndex:"updatedatefm",width:140}],dockedItems:[{xtype:"toolbar",dock:"top",items:[{xtype:"textfield",flex:1,name:"_filter",enableKeyEvents:!0,listeners:{keyup:function(e,t,a){13==t.keyCode&&IG$._dofilter(this,"grd",["name"])},scope:this}},{xtype:"button",text:"..",handler:function(){IG$._dofilter(this,"grd",["name"])},scope:this}]},{xtype:"toolbar",dock:"top",items:[{xtype:"splitbutton",text:"New",menu:[{text:"Folder",handler:function(){this.toolbarHandler("cmd_new_folder")},scope:this}]},{text:"Rename",handler:function(){this.toolbarHandler("cmd_rename")},scope:this},{iconCls:"icon-toolbar-remove",handler:function(){var t=this;IG$.confirmMessages(IRm$.r1("B_CONFIRM"),IRm$.r1("B_CD_CHS"),function(e){"yes"==e&&t.toolbarHandler("cmd_delete")})},scope:this},"->",{iconCls:"icon-tb-refresh",handler:function(){this.toolbarHandler("cmd_refresh")},scope:this},{xtype:"button",name:"t_btn",text:"Shortcut",disabled:!0,menu:{xtype:"menu",items:[{text:"Go Top",handler:function(){this.toolbarHandler("cmd_gotop")},scope:this},{text:"Workspace",handler:function(){this.toolbarHandler("cmd_top_ws")},scope:this}]}}]}],listeners:{cellclick:function(e,t,a,n,o,i,r,d){2==a&&l.naviFolder.call(l,n)}}}),IG$.folderManager.superclass.initComponent.apply(this,arguments)}}),IG$.dlgFolderMgr=$s.extend($s.window,{modal:!0,region:"center",layout:"fit",closable:!1,resizable:!1,width:950,autoHeight:!0,dbscan:1,_init:function(){var e=this.grd_l,t=this.grd_r;e.loadRoot.call(e,this.root),t.loadRoot.call(t,this.root)},moveChecked:function(e,t){var a=this.grd_l,n=this.grd_r,o=e?a.getChecked.call(a):n.getChecked.call(n);if(a.cpath.uid!=n.cpath.uid){if(o&&0<o.length){for(var i,r=[],d=0,l=0;l<o.length;l++)".."!=o[l].name&&(o[l].writable||o[l].manage)&&(r.push({uid:o[l].uid}),d++);0<d&&((i=new IG$._rpc$).init(this,{ack:"helpcontent",payload:r,mbody:{option:1==t?"copy":"move",target:e?n.cpath.uid:a.cpath.uid}},this,this.r_moveSelItems,null,null),i.send())}}else IG$.alertmsg(ig$.appname,IRm$.r1("E_DUP_FOLDER"),null,null,1,"error")},r_moveSelItems:function(e){var t=this.grd_l,a=this.grd_r;IG$.alertmsg(ig$.appname,"Moved items successfully",null,this,0,"success"),t.refresh.call(t),a.refresh.call(a)},initComponent:function(){var e=this;e.title=IRm$.r1("T_MGR_FOLDER"),e.grd_l=new IG$.folderManager({name:"grd_l",height:500,flex:1}),e.grd_r=new IG$.folderManager({name:"grd_r",height:500,flex:1});$s.apply(this,{layout:"fit",items:[{xtype:"panel",layout:{type:"hbox",align:"stretch"},border:0,padding:10,items:[e.grd_l,{width:60,layout:{type:"vbox",align:"stretch",pack:"center"},items:[{xtype:"container",flex:1},{xtype:"displayfield",value:"Move"},{xtype:"button",text:">>",$w:60,tooltip:"Move items",handler:function(){this.moveChecked(!0,!1)},scope:this},{xtype:"button",text:"<<",$w:60,tooltip:"Move items",handler:function(){this.moveChecked(!1,!1)},scope:this},{xtype:"container",height:10},{xtype:"displayfield",value:"Copy"},{xtype:"button",text:">",$w:60,tooltip:"Copy items",handler:function(){this.moveChecked(!0,!0)},scope:this},{xtype:"button",text:"<",$w:60,tooltip:"Copy items",handler:function(){this.moveChecked(!1,!0)},scope:this},{xtype:"container",flex:1}]},e.grd_r]}],buttons:[{text:IRm$.r1("B_CLOSE"),handler:function(){this.close()},scope:this}],listeners:{afterrender:function(e){this._init()}}}),IG$.dlgFolderMgr.superclass.initComponent.apply(this,arguments)}});
IG$.MainPanel=$s.extend($s.panel,{margin:"0 0 0 0",resizeTabs:!0,minTabWidth:void 0,enableTabScroll:!0,activeTab:0,layout:{type:"card",deferredRender:!1},deferredRender:!0,hidemode:"offset",tabPosition:"top",removePanelHeader:!0,plain:!1,maxTabWidth:void 0,___tabseq:0,customAddTab:function(e,t){var n=this,i=n.getComponent(e);i?IG$.changeApp(2):(IG$.changeApp(2),t.id=e,i=n.add(t)),n.setActiveTab(i)},navigateApp:function(e,t,n,i,a,s,o,l){var d,c=t+"_"+(e||this.___tabseq++),r=this.getComponent(c);if(r){IG$.changeApp(2),this.setActiveTab(r),l&&r.applyOption?r.applyOption.call(r,l):"dashboard"==t&&this.getComponent("dashboardedit_"+e)&&r.uid&&0<r.uid.length&&r.procRunDashboard.call(r)}else{var p,m=new IG$.callBackObj(this,function(){this.navigateApp(e,t,n,i,a,s,o,l)}),g=IG$.createAppPanel(e,t,n,i,s,o||null,m);if(g){if(g.address=i,g.title=IG$.getTabTitle(n),o)for(d in o)g[d]=o[d];if(l)for(d in l)g[d]=l[d];1==g.isWindow?(a=!1,g.title=IG$.getTabTitle(n)+" ("+IRm$.r1("D_"+t.toUpperCase())+")",IG$.ps[g.address]||((IG$.ps[g.address]=g).on("close",function(){delete IG$.ps[g.address]}),g.show())):(IG$.changeApp(2),g.id=c,this.selectedIndex=this.selectedIndex<0?0:this.selectedIndex,p=this.add(g),this.setActiveTab(p))}else a=!1}1==a&&e&&t&&(lastHist="&p1="+t+"&p2="+e,setTimeout(function(){hist.addHistory(lastHist)},10))},initRecentVisit:function(){var e,i,t=this,n=$("#mbutton1"),a=($("#idv_recitems"),$("#welcome"));t.mviewer={mode:"recent",mrecenttext:n.text()},n.unbind("click"),n.bind("click",function(){t.loadRecentVisit.call(t)}),e=[{title:"Step by Step",cls:"getting_started",handler:function(){IG$.procMenuCommand("CMD_APP_WIZARD")}},{title:"Navigator",cls:"navigator",handler:function(){var e=t.down("[name=mexplorer]");e&&!e.isVisible()&&IG$.changeApp(1)}},{title:"About",cls:"about_app",handler:function(){IG$.procMenuCommand("CMD_ABOUT")}}],(i=$("#pg_links",a)).empty(),$.each(e,function(e,t){var n;t.hidden||((n=$("<div class='intro-pg-column'><div class='intro-figure'><div class='image' title='"+t.title+"'><span class='"+t.cls+"'></span></div><div class='intro-figure-caption'><span class='intro-links'>"+t.title+"</span></div></div></div>")).appendTo(i),0<n.length&&t.handler&&($(".image",n).bind("click",function(){t.handler()}),$(".intro-links",n).bind("click",function(){t.handler()})),t.el=n)}),t.__pg_linksitems=e,t.updateLoginInfo(),t.loadRecentVisit()},initAdminMenu:function(){var a,e=IG$.dmgrmenu.body.dom,n=$(".ig-mgr-body",e),t=$(".ig-mgr-panel-close",e),i=ig$.mainmenu.mainmenu;n.empty(),t.bind("click",function(){IG$.procMenuCommand("CMD_HOME")}),i&&$.each(i,function(e,t){a=$("<ul class='ig-mgr-group'></ul>").appendTo(n),t.tul=a,t.tul.hide(),t.menus&&$.each(t.menus,function(e,t){var n=$("<li class='ig-mgr-group-item "+(t.acls||"")+" animate-box fadeInLeft animated'><div class='ig-mgr-title'><span class='icon'></span><h3>"+(IRm$.r1(t.rcs)||t.text)+"</h3></div><ul class='ig-mgr-menu'></ul></li>").appendTo(a),i=$(".ig-mgr-menu",n);$.each(t.items,function(e,t){$("<li class='ig-mgr-menu-item "+(t.acls||"")+"'>"+(IRm$.r1(t.rcs)||t.text)+"</li>").appendTo(i).bind("click",function(){t.handler?t.handler.call(this):"logout"==t.cmd?IG$.showLogout(new IG$.callBackObj(this,IG$.showLoginProc)):t.cmd&&IG$.procMenuCommand(t.cmd)})})})})},updateLoginInfo:function(){var e,t,n,i,a,s,o,l=$("#last_login"),d=(IG$.viewport,IG$.dlgLogin?IG$.dlgLogin.logininfo:null);l&&0<l.length&&d&&IG$.dlgLogin.lastLogin&&(s=$(".last_login_time",l),o=$(".last_login_host",l),a=$(".cur_login_host",l),n=$(".cur_login_user_id",l),i=$(".cur_login_user_nm",l),e=IG$.dlgLogin.lastLogin.lastaccesstime,n.text(d.u1),i.text(d.username),e&&(t=IG$.formatDate(e),s.text(t),o.text(IG$.dlgLogin.lastLogin.lastaccessaddr+", "+IG$.dlgLogin.lastLogin.lastaccesshost),a.text(IG$.dlgLogin.lastLogin.accessaddr+", "+IG$.dlgLogin.lastLogin.accesshost)))},loadRecentVisit:function(){$("#idv_recitems");var e=new IG$._rpc$;e.init(this,{ack:"helpcontent",payload:{},mbody:{option:"bookmarks"}},this,this.rs_loadContent,null,null),e.send()},rs_loadContent:function(e){var t,n,i,a=$("#idv_recitems"),s=[],l=[],o={};if(a.empty(),a){for(t=0;t<3;t++)(i=$("<div class='recent-columns'></div>").appendTo(a)).css({width:100/3+"%",float:"left"}),l.push({div:i,di:!1});for(t=0;t<e.length;t++)o[(n=e[t]).uid]?o[n.uid].fatype="F"==n.fatype?n.fatype:o[n.uid].fatype:(o[n.uid]=n,s.push(n));s.sort(function(e,t){var n=0;return e.type!=t.type&&(n=e.type>t.type?1:-1),n}),this.shortcuts={};var d,c=0;$.each(s,function(e,t){var n,i,a;0==e?(i=(n=l[0]).div,$("<div class='recent-itemtype'><span>"+IRm$.r1("D_"+t.type.toUpperCase())+"</span></div>").appendTo(i)):d&&d!=t.type?(c=(c+1)%l.length,i=(n=l[c]).div,a=$("<div class='recent-itemtype'><span>"+IRm$.r1("D_"+t.type.toUpperCase())+"</span></div>").appendTo(i),n.di&&a.css({marginTop:"20px"})):i=(n=l[c]).div,n.di=!0;var s=$("<div class='recent-row' title='"+t.nodepath+"'></div>"),o=$("<span>"+t.name+("F"==t.fatype?"<span class='ig-fa-mark'></span>":"")+"</span>");o.bind("click",function(){IG$.navigateMenu(t.uid)}),s.append(o),i.append(s),d=t.type})}},onAdd:function(e,t){$s.tabpanel.prototype.onAdd.call(this,e,t)},initComponent:function(){var n=this,e=([].concat(n.dockedItems||[]),n.activeTab||(n.activeTab=0));n.tabPosition;n.layout={owner:n,type:"card",deferredRender:n.deferredRender,itemCls:n.itemCls,activeItem:e},IG$.mainPanelTabBar=new $s.tabbar({xtype:"tabbar",ui:n.ui,dock:"top",id:"ig-tabbar",cls:"ig-main-tabbar",flex:1,orientation:"horizontal",plain:!0,cardLayout:n.layout,tabPanel:n,padding:0,margin:0,bodyPadding:0,listeners:{tabclick:function(e,t,n){IG$.changeApp(2)}}}),n.tabBar=IG$.mainPanelTabBar,IG$.MainPanel.superclass.initComponent.call(this),n.setActiveTab=function(e){IG$.changeApp(2),$s.tabpanel.prototype.setActiveTab.call(n,e)},n.getActiveTab=$s.tabpanel.prototype.getActiveTab,n.getTabBar=$s.tabpanel.prototype.getTabBar,n.onItemEnable=$s.tabpanel.prototype.onItemEnable,n.onItemDisable=$s.tabpanel.prototype.onItemDisable,n.onRemove=function(e,t){$s.tabpanel.prototype.onRemove.call(n,e,t),0==n.items.length&&(IG$.m_explorer,IG$.changeApp(IG$.__atab))},e&&n.tabBar.setActiveTab(e.tab,!0)},listeners:{beforeadd:function(e,t,n,i){this.getTabBar();var a,s=ig$.maxtapcount||0;0<s&&this.items.length>=s&&(a=this.items.items[0],this.remove(a))}}});
var hist,lastHist;IG$.historyManager=function(){this.addHistory=function(e){unFocus.History.addHistory(e)},this.hasMenu=function(){var e=unFocus.History.getCurrent();if(e&&""!=e){for(var n,t,i,a,o,l,s=e.split("&"),r=0;r<s.length;r++)if(0<(o=(l=s[r]).indexOf("=")))switch(i=l.substring(0,o),a=l.substring(o+1),i){case"lang":break;case"p1":n=a;break;case"p2":t=a}if(n&&t)return!0}return!1},this.historyListener=function(){var e=unFocus.History.getCurrent();return null!=e&&""!=e&&IG$.dlgLogin.logininfo&&IG$.navigateMenu(e),e},unFocus.History.addEventListener("historyChange",this.historyListener)},IG$.navigateMenu=function(e){if(e&&0<e.length&&lastHist!=e){if(IG$.checkUID(e))t=e;else for(var n,t,i,a,o,l,s=e.split("&"),r=0;r<s.length;r++)if(0<(o=(l=s[r]).indexOf("=")))switch(i=l.substring(0,o),a=l.substring(o+1),i){case"lang":break;case"p1":n=a;break;case"p2":t=a}t&&IG$.navigateMenuByUID(t,n)}},IG$.navigateMenuByUID=function(e,m,p,u){var n=new IG$._rpc$;n.init(null,{ack:"helpcontent",payload:{uid:e},mbody:{option:"translate"}},null,function(e){var n,s,t,i=e[0],a=i.uid,o=i.type.toLowerCase(),l=i.locale_name||i.name,r=i.nodepath,c=i.manage||i.writable,d=!1;"dashboard"==o&&"dashboardedit"==m?o=m:"export"==o&&(d=!0,o="report"),1==d?(n=$(document),t={renderTo:(s=$("#main"))[0],minHeight:n.height(),address:r,closable:!1,_ts_:!1,hiddenstatusbar:!0,hiddentoolbar:!0,header:!1,title:IG$.getTabTitle(l)},pitem=IG$.createAppPanel(a,o,l,r,c,t),pitem.on({_lc0:function(){},_lc1:function(){var e=pitem.calcSize.call(pitem);pitem.setSize(e.width,e.height)},resize:function(e,n,t,i,a,o){var l=$(document.body);IG$.j$ext._w(s,n),IG$.j$ext._h(s,t),IG$.j$ext._w(l,n),IG$.j$ext._h(l,t)}}),pitem.updateLayout(),pitem.setSize(n.width(),n.height()),s.css({minHeight:n.height()+"px"})):IG$.mainPanel.navigateApp.call(IG$.mainPanel,a,o,l,r,void 0===u||u,c,null,p)},null),n.send()},IG$.changeApp=function(e,n){var t,i,a,o=IG$.appsel,l=o.getLayout(),s=ig$.mainmenu.mainmenu,r=e;switch(e){case 2:for(t=0;t<o.items.items.length;t++)if("_I7d"==o.items.items[t].name){r=t;break}}if(l.setActiveItem(r),a=l.getActiveItem(),1==e&&n&&(a=a.down("[name=mexplorer]")).doSearch.call(a,n),2!=e&&(IG$.__atab=e),a.initComp&&a.initComp.call(a),4==e&&n)for(t=0;t<s.length;t++)(i=s[t]).tul&&i.tul[i.acls==n?"show":"hide"]()},IG$.$loadApp=function(e){var n,t,i,a,o,l,s,r,c=IG$.viewport,d=0,m=ig$.mainmenu.mainmenu,p=parseInt($.cookie("lmopt_w"))||0;if(IG$.__1m||1==IG$.__ep)setTimeout(function(){$("#loading").fadeOut({complete:function(){$(this).remove()}}),$("#loading-mask").fadeOut({complete:function(){$(this).remove()}})},IG$.__ep?0:100);else{if((e=e||{}).mainview=t=e.mainview||{},t.appmenu=i=t.appmenu||{},t.navitab=a=t.navitab||{},t.navitree=o=t.navitree||{},ig$.theme_id)switch(ig$.theme_id.toLowerCase()){case"desertlight":ig$.echarts_theme="dark"}if(i.bodyCls=void 0===i.bodyCls?"idv-side-bar":i.bodyCls,void 0===i.html&&(i.html="<div class='mainHeader'><div id='innerLogo' class='innerLogo'><span class='ig-c-text'>$APP_NAME</span><div class='ig-c-button'></div></div><ul class='mainNav' id='mainNav'></ul><div class='searchForm' id='searchForm'><input type='text' id='tsearch' placeholder='Search' class='searchKeyword' maxlength='1000' autocomplete='off'></input><span class='searchGo'></span></div></div><ul class='mainFooter' id='mainFooter'><li class='last'>$APP_COPY</li></ul>"),IG$.__ep=t.appmenu.printmode,IG$.__ep_m=t.appmenu.runmode?t.appmenu.runmode:0,!i.m_explorer&&m)for(r=0;r<m.length;r++)if("ig_mnav"==m[r].acls){m.splice(r,1);break}IG$.__ep_m<1&&(l=[{xtype:"button",border:0,width:30,margin:"0",cls:"ig-top-button",overCls:"ig-top-button-over",focusCls:"ig-top-button-click",text:IRm$.r1("S_HOME"),handler:function(){IG$.changeApp(0)}},{xtype:"button",border:0,hidden:a.hidden,text:IRm$.r1("S_NAVI"),cls:"ig-top-button",overCls:"ig-top-button-over",focusCls:"ig-top-button-click",margin:"0 5 0 0",handler:function(){IG$.changeApp(1)}}]),s=[{name:"app_main",header:!1,title:null,autoLoad:{url:"./html/"+(ig$.intropage||"navi_intro")+".jsp?lang="+useLocale,callback:IG$.mainPanel.initRecentVisit,scope:IG$.mainPanel},iconCls:"icon-welcome",autoScroll:!0},{xtype:"container",layout:"fit",items:[!1===o.hidden?{xtype:"container"}:new IG$.explorer({name:"mexplorer",show_tree_items:!(!ig$.uiconfig||!ig$.uiconfig.navigator)&&ig$.uiconfig.navigator.show_tree_items})]},IG$.mainPanel,{xtype:"panel",layout:"fit",bodyPadding:20,items:[{xtype:"panel",layout:{type:"vbox",align:"stretch"},items:[{xtype:"container",layout:"fit",flex:1,name:"dwizard",autoScroll:!0},{xtype:"container",layout:"fit",height:40,name:"dwizard_bar"}]}]},{xtype:"panel",layout:"fit",bodyPadding:0,items:[{xtype:"html",name:"dmgr",layout:"fit",autoScroll:!0,autoLoad:{url:"./html/menu.jsp",callback:IG$.mainPanel.initAdminMenu,scope:IG$.mainPanel}}]}],a.items&&0<a.items.length&&$.each(a.items,function(e,n){var t,i;"navitab"==n.mtype&&("Dashboard"!=n.type&&"Report"!=n.type||(t=IG$.createAppPanel(n.uid,n.type.toLowerCase(),n.name,null,!1,{closable:!1,header:!1}),s.push(t),i=s.length-1,0==d&&(d=i),IG$.__ep_m<1&&l.push({xtype:"button",border:0,text:n.name,cls:"ig-top-button",overCls:"ig-top-button-over",focusCls:"ig-top-button-click",margin:"0 5 0 0",handler:function(){IG$.changeApp(i)},scope:this})))}),0<IG$.__ep_m&&(s.splice(0,2),d=0),IG$.__ep_m<1&&l.push(IG$.mainPanelTabBar),IG$.__atab=d,n=new $s.panel({layout:"border",padding:"0 0 0 0",items:[{xtype:"panel",width:i.width||223,ig_width_o:Number(i.o_width)||223,ig_width_c:Number(i.c_width)||30,height:i.height||null,region:i.region||"west",name:"appmenu",collapsible:!1,collapsed:!1,titleCollapse:!1,hidden:i.hidden,header:!1,border:!1,margins:"0 0 0 0",collapseMode:"mini",bodyCls:i.bodyCls||"",html:i.html,toggleSide:function(e){var n=this,t=$(n.body.dom),i=n.getWidth();(2===e?0:i<150)?($.cookie("lmopt","E"),t.removeClass("igc-t-collapsed"),t.addClass("igc-t-expanded"),n.setWidth(n.ig_width_o)):($.cookie("lmopt","C",{expires:7}),t.removeClass("igc-t-expanded"),t.addClass("igc-t-collapsed"),n.setWidth(n.ig_width_c))},listeners:{afterrender:function(e){var n=$(e.body.dom),t=$("#mainFooter",n),i=$(".searchGo",n),a=$("#tsearch",n);t.css("position","absolute"),a.bind("keyup",function(e){var n,t,i;13==e.keyCode&&(n=IG$.__1m,i=$(this).val(),o.hidden?IG$.changeApp(1,i):(t=n.down("[name=mexplorer]"))&&t.doSearch.call(t,i))}),i.bind("click",function(){var e,n=IG$.__1m,t=$(a).val();o.hidden?IG$.changeApp(1,t):(e=n.down("[name=mexplorer]"))&&e.doSearch.call(e,t)})},resize:function(e,n,t,i,a,o){var l=n<120,s=$(this.body.dom),r=$("#mainFooter",s),c=$("#innerLogo",s),d=$("#searchForm",s),m=l?"hide":"show";r[m](),$(".ig-c-text",c)[m](),d[m]()}}},{xtype:"panel",region:"west",width:100<p?p:200,border:!1,hidden:o.hidden,margins:"0 0 0 0",collapseMode:"mini",split:!0,header:!1,collapsible:!0,titleCollapse:!1,layout:{type:"vbox",align:"stretch"},items:!1===o.hidden?[new IG$.explorer({name:"mexplorer",vmode:"tree",border:0,flex:1,split:!1,show_tree_items:!0,_meta_move:!0})]:null,listeners:{resize:function(e,n,t){100<n&&$.cookie("lmopt_w",""+n)}}},{xtype:"panel",region:"center",border:1,layout:"border",items:[{xtype:"container",region:"north",height:28,hidden:a.tabhidden,padding:"2 2 2 2",layout:{type:"hbox",align:"stretch"},items:l},{xtype:"container",layout:"card",name:"appsel",region:"center",minTabWidth:40,deferredRender:!1,activeItem:d,items:s}]}]}),c.add(n),IG$.m_explorer=c.down("[name=mexplorer]"),n.doLayout(),IG$.__1m=n,IG$.appmenu=n.down("[name=appmenu]"),IG$.appsel=n.down("[name=appsel]"),IG$.dwizard={dwizard:n.down("[name=dwizard]"),dwizard_bar:n.down("[name=dwizard_bar]")},IG$.dmgrmenu=n.down("[name=dmgr]"),setTimeout(function(){$("#loading").fadeOut({complete:function(){$(this).remove()}}),$("#loading-mask").fadeOut({complete:function(){$(this).remove()}}),IG$.__ep_l&&IG$.navigateMenuByUID(IG$.__ep_l,void 0,void 0,!1)},IG$.__ep?0:50)}},$s.ready(function(){$("#lpt","#loading").css("width","80%"),webix.ui.fullScreen(),!webix.env.touch&&webix.ui.scrollSize&&webix.CustomScroll.init(),ig$.timer_ping&&100<ig$.timer_ping&&setInterval(function(){var e=new IG$._rpc$;e.init(null,{ack:"ping",payload:{},mbody:{}},null,function(e){},!1),e.send()},ig$.timer_ping),IRm$.r2({func:function(){$("#lpt","#loading").css("width","100%"),setTimeout(function(){var e;IG$.loadExtend.rcsloaded=!0,IG$.mainPanel=new IG$.MainPanel({name:"_I7d"}),IG$.mainPanel.on("tabchange",function(e,n){}),e={closeText:IRm$.r1("L_C_CLOSE"),prevText:IRm$.r1("L_C_PREV"),nextText:IRm$.r1("L_C_NEXT"),currentText:IRm$.r1("L_C_CUR"),monthNames:IRm$.r1("L_C_M_NAMES").split("#"),monthNamesShort:IRm$.r1("L_C_M_NAMES_S").split("#"),dayNames:IRm$.r1("L_C_D_NAMES").split("#"),dayNamesShort:IRm$.r1("L_C_D_NAMES_S").split("#"),dayNamesMin:IRm$.r1("L_C_D_NAMES_M").split("#"),weekHeader:IRm$.r1("L_C_W_H"),firstDay:0,isRTL:!1,showMonthAfterYear:!0,yearSuffix:IRm$.r1("L_C_YR_SFX"),c1disp:"yyyy-mm-dd",c1format:"yy-mm-dd",c2disp:"yyyy-mm",c2format:"yy-mm"},$.datepicker.setDefaults(e),IG$.calendar_locale=e,IG$.m_explorer=null,$.each(IG$.loadExtend.items,function(e,n){IG$.extend(n.name,n.base,n.option)}),$.each(IG$.filteropcodes,function(e,n){var t=n.lcode;n.locale=IRm$.r1(t)});var n=new $s.viewport({layout:"fit",id:"mainview"});n.doLayout(),IG$.viewport=n;var t=$.cookie("lui")||"";IG$.createLoginPanel(t,"",!0),IG$.loadMapData();var i=new IG$._rpc$;i.init(null,{ack:"helpcontent",payload:{},mbody:{option:"ls",mts:window.m$mts||"",lang:window.useLocale||""}},null,function(e){var n=!1;if(e.uuid){if(n=!0,IG$.dlgLogin.callback=new IG$.callBackObj(this,IG$.showLoginProc),IG$.dlgLogin.uuid=e.uuid,IG$.dlgLogin.mts={sid:e.mts,name:e.mts_name},IG$._g$a=IG$.dlgLogin.mts.sid,window.m$mts&&IG$.dlgLogin.mts.name!=window.m$mts&&IG$.dlgLogin.mts.sid!=window.m$mts)return void IG$.showLogout(new IG$.callBackObj(this,IG$.showLoginProc));IG$.dlgLogin.lastLogin=e,IG$.mainPanel&&IG$.mainPanel.updateLoginInfo.call(IG$.mainPanel),IG$.dlgLogin.getUserDetail.call(IG$.dlgLogin,!1),(hist=new IG$.historyManager).historyListener(),"function"==typeof window.callPhantom&&window.callPhantom({_proc:"C"})}0==n&&IG$.showLogin(new IG$.callBackObj(this,IG$.showLoginProc),0)},function(e){return IG$.showLogin(new IG$.callBackObj(this,IG$.showLoginProc),0),!0}),i.send()},IG$.__ep?10:30)}})}),IG$._n5=function(){var a=ig$.session,o=60*ig$.session_expire,n=!1,e=-1;a&&($(document).bind("mousemove",function(){(a.count=0)==n&&(-1<e&&(clearTimeout(e),e=-1),e=setTimeout(function(){n=!0;var e=new IG$._rpc$;e.init(null,{ack:"helpcontent",payload:{mode:"write"},mbody:{option:"wake"}},null,function(e){n=!1,a.count=0},null),e.send()},2e3))}),a.timer=setInterval(function(){var e=o-a.count,n="",t=0,i=60<e?e-60*(t=Math.floor(e/60)):e,n=0<t?t+" min "+i+" sec":i+" sec";e<300?a.text.addClass("warn-sess-timer"):a.text.removeClass("warn-sess-timer"),a.text.html(n),e<0&&(clearInterval(a.timer),IG$.showLogout(new IG$.callBackObj(this,IG$.showLoginProc))),a.count+=1},1e3))},IG$.refreshMessages=function(){var e=new IG$._rpc$;e.init(null,{ack:"helpcontent",payload:{mode:"read"},mbody:{option:"rsn",readmode:0}},null,IG$.rs_refreshMessages,function(e){return!0}),e.showerror=!1,e.send()},IG$.rs_refreshMessages=function(e){var n,t,i,a,o=$("#chatsublist"),l=IG$.XGetNode(e,"/smsg"),s=IG$.XGetChildNodes(l);if(!(s&&0<s.length&&IG$.L_SPPL&&(i=IG$.XGetAttrProp(s[0])).msgid==IG$.L_SPPL)&&(o.empty(),o.append($("<li class='view'><span><a href='javascript:f$7(\"CMD_RSN\")'>Write Message</a></span></li>")),s&&0<s.length))for(a=Math.min(5,s.length),IG$.L_SPPL&&$("#alertstext").text("Messages (New)"),n=0;n<a;n++)i=IG$.XGetAttrProp(s[n]),0==n&&(IG$.L_SPPL=i.msgid),t="<li><a href='#' class='delete'>X</a><p><span style='color:#0000ff;'>"+(i.username||"")+": </span><br>"+IG$.XGetTextVal(s[n])+" <br><span style='color:#4d4d4d; font-size: 9px; float: right'>("+(IG$.getFormattedDate(i.updatedate,!0)||"")+")</span></p></li>",o.append($(t))},IG$.setWeb3TopMenu=function(){if(IG$.appmenu){var e,n=IG$.appmenu,t=$(n.body.dom),i=$("#mainFooter",t),a=$("#mainNav",t),o=$("#innerLogo",t),c=ig$.mainmenu,d=ig$.features,l=$(".ig-c-button",o);if("C"==$.cookie("lmopt")&&n.toggleSide(2),l.unbind("click"),l.bind("click",function(){n.toggleSide()}),c){if(c.footmenu){for(e=0;e<c.footmenu.length;e++)c.footmenu[e].html&&(c.footmenu[e].html.remove(),c.footmenu[e].html=null);$.each(c.footmenu,function(e,n){var t=$("<li"+(n.acls?" class='"+n.acls+"'":"")+"><span>"+(n.rcs?IRm$.r1(n.rcs):n.text)+"</span></li>");i.prepend(t),t.bind("click",function(){n.handler?n.handler.call(this):"logout"==n.cmd?IG$.showLogout(new IG$.callBackObj(this,IG$.showLoginProc)):n.cmd&&IG$.procMenuCommand(n.cmd)}),n.html=t})}if(c.mainmenu&&d){for(e=0;e<c.mainmenu.length;e++)c.mainmenu[e].html&&(c.mainmenu[e].html.remove(),c.mainmenu[e].html=null);$.each(c.mainmenu,function(e,o){var l,n,r,t,s;o.acls&&1==d[o.acls]||(l=$("<li class='"+(o.acls||"")+"'></li>").appendTo(a),n=$("<span class='parent'>"+(o.rcs?IRm$.r1(o.rcs):o.text)+"<span class='menuicon'></span></span>").appendTo(l),!1===d[o.acls]&&l.show(),o.cmd?IG$.procMenuCommand(cmd):o.handler&&(r=function(e){var o=e.pageX,l=e.pageY,n=$(".flyout"),s=!1;$.each(c.mainmenu,function(e,n){var t,i,a=n.html;a&&0==s&&(i={x:(t=a.offset()).left,y:t.top,w:IG$.j$ext._w(a),h:IG$.j$ext._h(a)}).x<o&&o<i.x+i.w&&i.y<l&&l<i.y+i.h&&(s=!0)}),0==s&&$.each(c.mainmenu,function(e,n){n.sv=0}),n.hide(),$(document).unbind("mouseup",r)},n.bind("click",function(e){var n,t=$(".flyout",l),i=1,a=IG$.appsel.getLayout().selectedIndex;t&&0<t.length&&4!=a&&(n=o.sv,$(".flyout").hide(),$.each(c.mainmenu,function(e,n){n!=o&&(n.sv=0)}),i=n?(o.sv=0,1):(o.sv=1,t.show(),$(document).bind("mouseup",r),0)),1==i&&o.handler()})),o.html=l,o.menus&&"column"==o.type&&(t=$("<div class='flyout'><h3><span>"+(o.rcs?IRm$.r1(o.rcs):o.text)+"</span><span class='rightRaquoBlue'></span></h3></div>").appendTo(l),s=$("<div class='colwrapper'>").appendTo(t),o.handler&&$(".rightRaquoBlue",t).bind("click",function(){o.handler()}),$.each(o.menus,function(e,n){var t,i,a,o=$("<div class='column"+(n.acls?" "+n.acls:"")+"'><h6>"+(n.rcs?IRm$.r1(n.rcs):n.text)+"</h6></div>").appendTo(s);"list"==n.type?(t=$("<ul class='"+(n.acls||"")+"'></ul>").appendTo(o),$.each(n.items,function(e,n){$("<li class='chevronLink"+(n.acls?" "+n.acls:"")+"'><span class='icon'></span><span class='title'>"+(n.rcs?IRm$.r1(n.rcs):n.text)+"</span></li>").appendTo(t).bind("click",function(){n.cmd&&IG$.procMenuCommand(n.cmd)})})):"image"==n.type&&(i=n.src&&$("<img src='"+n.src+"'></img>").appendTo(o),a=n.desc&&$("<h3>"+n.desc+"</h3>").appendTo(o),n.cmd&&(i.bind("click",function(){IG$.procMenuCommand(n.cmd)}),a.bind("click",function(){IG$.procMenuCommand(n.cmd)})))})))})}c.afterrender&&c.afterrender.call(this,c)}}},IG$.showLoginProc=function(){var e=$("#loginWindow"),n=$("#userid");e.hide(),IG$.m_explorer&&IG$.m_explorer.initData.call(IG$.m_explorer),lastHist=null,(hist=hist||new IG$.historyManager).historyListener(),n&&0<n.length&&(n[0].value=IG$.dlgLogin.logininfo.userid),IG$.__ep||(IG$.setWeb3TopMenu(),IG$.mainPanel.initRecentVisit.call(IG$.mainPanel))};
IG$.chartSeries=$s.extend($s.window,{modal:!0,region:"center",layout:{type:"fit",align:"stretch"},closable:!1,resizable:!1,width:340,autoHeight:!0,padding:6,_init:function(){var e=this,a=e.down("[name=seriestype]"),l=e.down("[name=dl_marker]"),t=e.down("[name=dl_enable]"),n=e.down("[name=dl_linewidth]"),i=e.down("[name=dl_linetype]"),o=e.cell_record;a.setValue(o.get("seriestype")),l.setValue(o.get("dl_marker")),t.setValue(o.get("dl_enable")),n.setValue(o.get("dl_linewidth")||1),i.setValue(o.get("dl_linetype")||"")},_confirm:function(){var e=this;e.seriestype=e.down("[name=seriestype]").getValue(),e.dl_marker=e.down("[name=dl_marker]").getValue(),e.dl_enable=e.down("[name=dl_enable]").getValue(),e.dl_linetype=e.down("[name=dl_linetype]").getValue(),e.dl_linewidth=""+e.down("[name=dl_linewidth]").getValue(),e.callback&&e.callback.execute(e),e.close()},initComponent:function(){$s.apply(this,{title:IRm$.r1("T_CHART_SERIES"),items:[{xtype:"panel",layout:{type:"vbox",align:"stretch"},padding:6,defaults:{anchor:"100%"},items:[{xtype:"fieldset",title:IRm$.r1("L_SERIES"),defaultType:"textfield",items:[{name:"seriestype",xtype:"combobox",fieldLabel:IRm$.r1("L_SERIES_TYPE"),editable:!1,valueField:"value",displayField:"name",queryMode:"local",autoSelect:!0,store:{fields:["name","value"],data:[{name:"Default",value:""},{name:"Column",value:"column"},{name:"Line",value:"line"},{name:"Spline",value:"spline"},{name:"Area",value:"area"},{name:"Bar",value:"Bar"},{name:"Area Spline",value:"areaspline"}]}},{name:"dl_linetype",xtype:"combobox",fieldLabel:IRm$.r1("L_LINE_TYPE"),editable:!1,valueField:"value",displayField:"name",queryMode:"local",autoSelect:!0,store:{fields:["name","value"],data:[{name:"Default",value:""},{name:"Solid",value:"solid"},{name:"Dashed",value:"dashed"},{name:"Dotted",value:"dotted"}]}},{name:"dl_linewidth",xtype:"numberfield",fieldLabel:IRm$.r1("L_LINE_WIDTH"),value:1},{name:"dl_marker",xtype:"combobox",fieldLabel:IRm$.r1("L_MARKER"),editable:!1,valueField:"value",displayField:"name",queryMode:"local",autoSelect:!0,store:{fields:["name","value"],data:[{name:"Default",value:""},{name:"Enable",value:"T"},{name:"Disable",value:"F"}]}},{name:"dl_enable",xtype:"combobox",fieldLabel:IRm$.r1("L_DATA_LABEL"),editable:!1,valueField:"value",displayField:"name",queryMode:"local",autoSelect:!0,store:{fields:["name","value"],data:[{name:"Default",value:""},{name:"Enable",value:"T"},{name:"Disable",value:"F"}]}}]}]}],buttons:[{text:IRm$.r1("B_CONFIRM"),handler:function(){this._confirm()},scope:this},{text:IRm$.r1("B_CANCEL"),handler:function(){this.close()},scope:this}],listeners:{afterrender:function(e){e._init()}}}),IG$.chartSeries.superclass.initComponent.apply(this,arguments)}}),IG$.chartPlotband=$s.extend($s.window,{modal:!0,region:"center",layout:{type:"fit",align:"stretch"},closable:!1,resizable:!1,width:380,autoHeight:!0,callback:null,_init:function(){var e=this.ditem;e&&this.setAllValues(e._content)},_confirm:function(){var e,a=this,l=a.ditem;l&&(e=a.getAllValues(l._content)),e||(a.callback&&a.callback.execute(a.ditem),a.close())},initComponent:function(){$s.apply(this,{defaults:{padding:10},title:IRm$.r1("T_CHART_PLOTBAND"),items:[{xtype:"panel",layout:"anchor",defaults:{anchor:"100%"},padding:10,items:[{xtype:"fieldset",title:IRm$.r1("T_CHART_PLOTBAND"),items:[{xtype:"textfield",name:"name",fieldLabel:IRm$.r1("B_NAME")},{name:"type",xtype:"combobox",fieldLabel:IRm$.r1("L_BAND_TYPE"),editable:!1,valueField:"value",displayField:"name",queryMode:"local",autoSelect:!0,store:{fields:["name","value"],data:[{name:"Line",value:"line"},{name:"Band",value:"band"},{name:"CurveFit",value:"curvefit"}]},listeners:{change:function(e){var a=e.getValue(),l=this.down("[name=t_1]"),t=this.down("[name=t_2]");l.setVisible("line"==a||"band"==a),t.setVisible("curvefit"==a)},scope:this}},{xtype:"fieldcontainer",layout:"anchor",name:"t_1",hidden:!0,items:[{xtype:"textfield",name:"value_1",fieldLabel:IRm$.r1("L_BAND_VALUE_1")},{xtype:"textfield",name:"value_2",fieldLabel:IRm$.r1("L_BAND_VALUE_2")},{xtype:"fieldcontainer",fieldLabel:IRm$.r1("L_BAND_COLOR"),layout:{type:"hbox"},items:[{xtype:"textfield",name:"color",width:120},{xtype:"splitter"},{xtype:"splitbutton",width:30,menu:{showSeparator:!1,items:[{xtype:"colorpicker",listeners:{select:function(e,a){this.down("[name=color]").setValue("#"+a)},scope:this}},"-"]}}]},{xtype:"combobox",name:"cf_lc",fieldLabel:IRm$.r1("L_CFIT_LC"),editable:!1,valueField:"value",displayField:"name",queryMode:"local",autoSelect:!0,store:{fields:["name","value"],data:[{name:"Solid",value:"Solid"},{name:"ShortDash",value:"ShortDash"},{name:"ShortDot",value:"ShortDot"},{name:"ShortDashDot",value:"ShortDashDot"},{name:"ShortDashDotDot",value:"ShortDashDotDot"},{name:"Dot",value:"Dot"},{name:"Dash",value:"Dash"},{name:"LongDash",value:"LongDash"},{name:"DashDot",value:"DashDot"},{name:"LongDashDot",value:"LongDashDot"},{name:"LongDashDotDot",value:"LongDashDotDot"}]}},{xtype:"numberfield",name:"borderwidth",fieldLabel:IRm$.r1("L_BAND_BORDER"),minValue:0,maxValue:10},{xtype:"checkbox",name:"isxaxis",fieldLabel:"On X Axis",boxLabel:IRm$.r1("B_ENABLED")}]},{xtype:"fieldcontainer",layout:"anchor",name:"t_2",hidden:!0,items:[{name:"rtype",xtype:"combobox",fieldLabel:IRm$.r1("L_CFIT_TYPE"),editable:!1,valueField:"value",displayField:"name",queryMode:"local",autoSelect:!0,store:{fields:["name","value"],data:[{name:"Linear",value:"linear"},{name:"Polynomial",value:"polynomial"},{name:"Exponential",value:"exponential"},{name:"Logarithmic",value:"logarithmic"},{name:"Power",value:"power"}]},listeners:{change:function(e){var a=e.getValue();this.down("[name=order]").setDisabled("polynomial"!=a)},scope:this}},{xtype:"numberfield",name:"order",disabled:!0,fieldLabel:IRm$.r1("L_CFIT_PORD"),minValue:2,maxValue:5},{xtype:"checkbox",name:"showfitexp",fieldLabel:IRm$.r1("L_CFIT_FOR"),boxLabel:IRm$.r1("B_ENABLED")},{xtype:"numberfield",name:"cfitfcs",fieldLabel:IRm$.r1("L_CFIT_FCS"),minValue:0,step:.1,value:0},{xtype:"checkbox",name:"cfitallseries",fieldLabel:IRm$.r1("L_CFIT_AS"),boxLabel:IRm$.r1("B_ENABLED")},{xtype:"checkbox",name:"cfitshowsum",fieldLabel:IRm$.r1("L_CFIT_SS"),boxLabel:IRm$.r1("B_ENABLED")}]}]}]}],buttons:[{text:IRm$.r1("B_CONFIRM"),handler:function(){this._confirm()},scope:this},{text:IRm$.r1("B_CANCEL"),handler:function(){this.close()},scope:this}],listeners:{afterrender:function(e){this._init()}}}),IG$.chartPlotband.superclass.initComponent.apply(this,arguments)}});
IG$.d$RsWiz=$s.extend($s.window,{modal:!0,region:"center",layout:{type:"fit",align:"stretch"},closable:!1,resizable:!1,width:320,height:280,_confirm:function(){var e,t,a=this,n=a.down("[name=gridparams]").getSelectionModel();0!=n.selected.items.length?(t=n.selected.items[0],a.rec&&(e=t.get("name"),e=IG$.replaceAll(e," ","_"),a.rec.set("value",e)),a.callback&&a.callback.execute(a),a.close()):IG$.alertmsg(ig$.appname,"Select field name to set as a parameter value.",null,null,0,"error")},_init:function(){var e,t=this.dc,a=this.down("[name=gridparams]"),n=[];if(t)for(e=0;e<t.length;e++)n.push({name:t[e].name,cindex:t[e].cindex,isdata:t[e].isdata});a.store.loadData(n)},items:[{xtype:"gridpanel",name:"gridparams",selType:"rowmodel",store:{sortInfo:{},fields:["name","isdata","cindex"]},columns:[{text:"Field name",flex:1,sortable:!1,dataIndex:"name"},{text:"Is measure",flex:1,sortable:!1,dataIndex:"isdata"},{text:"Column index",flex:1,sortable:!1,dataIndex:"cindex"}]}],initComponent:function(){this.title=IRm$.r1("T_R_WIZARD"),this.buttons=[{text:IRm$.r1("B_CONFIRM"),handler:function(){this._confirm()},scope:this},{text:IRm$.r1("B_CANCEL"),handler:function(){this.close()},scope:this}],IG$.d$RsWiz.superclass.initComponent.apply(this,arguments)},listeners:{afterrender:function(e){this._init()}}}),IG$.r_wizard_u=$s.extend($s.window,{modal:!0,region:"center",layout:{type:"fit",align:"stretch"},closable:!1,resizable:!1,width:500,height:400,_confirm:function(){var e=this;e.callback&&e.callback.execute(e.m),e.close()},cardNav:function(e){var t=this,a=this.down("[name=mainpanel]"),n=a.getLayout(),i=a.getActiveItem().id.split("card-")[1],o=parseInt(i,10)+e;if("0"==i&&0<o){t.down("[name=rtypeview]");var r,s,l=t.down("[name=rname]"),d=t.down("[name=rcontent]"),m=t.down("[name=rprompt]");if(1==t.newitem&&!t.ufolder)return;if(0==t.newitem&&(!t.ufolder||t.ufolder&&"RScript"!=t.ufolder.get("type")))return void IG$.alertmsg(ig$.appname,"Select script template to continue.",null,null,0,"error");1==t.newitem?(l.setValue(""),d.setValue(""),m.setValue(""),l.enable(),r=(r=t.ufolder.get("nodepath")).substring(0,r.lastIndexOf("/")),t.m={uid:null,content:"",manage:"T",name:null,isnew:"T",parentcontentpath:r}):t.ufolder&&(s=t.ufolder,p=new IG$._rpc$,s.get("manage")?l.enable():l.disable(),t.m={uid:s.get("uid"),manage:s.get("manage"),content:"",name:s.get("name")},p.init(t,{ack:"content",payload:{uid:s.get("uid"),type:s.get("type")},mbody:{}},t,t.rs_loadRsCnt,null),p.send())}else if("1"==i&&2==o){0;l=t.down("[name=rname]"),d=t.down("[name=rcontent]"),m=t.down("[name=rprompt]");if(""==l.getValue())return void IG$.alertmsg(ig$.appname,"Please fill template name to continue.",null,null,0,"error")}else if("2"==i&&3==o){0;var p,c,u,l=t.down("[name=rname]"),d=t.down("[name=rcontent]"),m=t.down("[name=rprompt]");if(""==l.getValue())return void IG$.alertmsg(ig$.appname,"Please fill template name to continue.",null,null,0,"error");if(1==t.newitem)return t.m.name=l.getValue(),t.m.content=d.getValue(),t.m.prompt=m.getValue(),c="RFolder"==t.ufolder.get("type")||"blank"==t.ufolder.get("type")?(u=t.ufolder.get("uid"),t.ufolder.get("nodepath")):(u=t.ufolder.get("pid"),(c=t.ufolder.get("nodepath")).substring(0,c.lastIndexOf("/"))),(p=new IG$._rpc$).init(t,{ack:"writecontent",payload:{address:c+"/"+l.getValue(),name:l.getValue(),type:"RScript",pid:u,description:""},mbody:{rscript:Base64.encode(d.getValue()),prompt:Base64.encode(m.getValue())}},t,t.rs_saveNewTmpl),void p.send();if("T"!=t.m.isnew&&""!=l.getValue()&&"T"==t.m.manage&&(t.m.content!=d.getValue()||t.m.name!=l.getValue()))return t.m.content=d.getValue(),t.m.prompt=m.getValue(),t.m.name=l.getValue(),void IG$.confirmMessages("R Wizard","Template content is changed and not saved. Would you save this content on the template?",t.doCloseSave,t,t);t.updateParams()}else if("3"==i&&4==o&&0==t.validateParams())return;n.setActiveItem(o),t.down("[name=card-prev]").setDisabled(0===o),t.down("[name=card-next]").setDisabled(4===o),t.down("[name=btnconfirm]").setDisabled(4!==o)},updateParams:function(){for(var e,a,n,i,o=[],r={},s=this.m.content,l=this.down("[name=rparamview]"),d=0;!((e=s.indexOf("@",d))<0||(t=s.indexOf("@",e+1),t<0));)a=s.substring(e+1,t),pobj={param:a,name:a},-1<a.indexOf(":")&&(pobj.name=a.substring(0,a.indexOf(":")),pobj.desc=a.substring(a.indexOf(":")+1)),-1<pobj.name.indexOf("_")&&(i=pobj.name.substring(0,pobj.name.indexOf("_")).toLowerCase(),n=pobj.name.substring(pobj.name.indexOf("_")+1),"column"!=i&&"dimension"!=i||1!=IG$.isNumber(n)||(pobj.p=!0,n=Number(n),"column"!=i||pobj.desc?pobj.desc||(pobj.desc=n+"th column starting from 0"):pobj.desc=n+"th column of starting from numeric")),r[pobj.name]||(r[pobj.name]=pobj,o.push(pobj)),d=t+1;l.store.loadData(o)},validateParams:function(){for(var e,t=!0,a=this,n=[],i=a.m.content,o=a.down("[name=rparamview]").store,r=0;r<o.data.items.length;r++)e=o.data.items[r],n.push({param:e.get("param"),name:e.get("name"),value:e.get("value"),p:e.get("p")});for(r=0;r<n.length;r++)if(!0!==n[r].p){if(!n[r].value){IG$.alertmsg(ig$.appname,"Fill or set parameter ["+n[r].name+"] value to continue.",null,null,0,"error"),t=!1;break}i=IG$.replaceAll(i,"@"+n[r].param+"@",n[r].value)}return a.m.vcontent=i,t},doCloseSave:function(e){var t,a=this,n=this.down("[name=mainpanel]").getLayout();"yes"==e&&((t=new IG$._rpc$).init(a,{ack:"writecontent",payload:{name:a.m.name,type:"RScript",uid:a.m.uid},mbody:"<smsg><item><Content><rscript><![CDATA["+Base64.encode(a.m.content)+"]]></rscript><prompt><![CDATA["+Base64.encode(a.m.prompt)+"]]></prompt></Content></item></smsg>"},a,a.rs_saveNewTmpl),t.send()),a.updateParams(),n.setActiveItem(2)},rs_saveNewTmpl:function(e){var t=IG$.XGetNode(e,"/smsg/item");t&&(this.m.uid=IG$.XGetAttr(t,"uid"),this.m.name=IG$.XGetAttr(t,"name"),this.newitem=!1),this.loadRsList()},rs_loadRsCnt:function(e){var t,a,n,i=this,o=i.down("[name=rname]"),r=i.down("[name=rcontent]"),s=i.down("[name=rprompt]"),l=IG$.XGetNode(e,"/smsg/item");l&&(i.m.name=IG$.XGetAttr(l,"name"),i.m.content="",i.m.prompt="",o.setValue(i.m.name),(t=IG$.XGetNode(l,"Content"))&&((n=IG$.XGetNode(t,"rscript"))&&(a=IG$.XGetTextVal(n),a=Base64.decode(a),i.m.content=a),(n=IG$.XGetNode(t,"prompt"))&&(a=IG$.XGetTextVal(n),a=Base64.decode(a),i.m.prompt=a)),r.setValue(i.m.content),s.setValue(i.m.prompt))},_init:function(){this.loadRsList()},loadRsList:function(){var e=new IG$._rpc$;e.init(this,{ack:"content",payload:{uid:"/RScripts",type:"RFolder",depth:"5"},mbody:{}},this,this.rs_loadRsList,null),e.send()},rs_loadRsList:function(e){var t=this.down("[name=rtypeview]"),a=[];e&&this.parseRscr(e,a),t.store.loadData(a)},toolbarHandler:function(e){var t;switch(e){case"cmd_add_group":(t=new IG$.makeItem({parentnodepath:"/RScripts",itemtype:"RFolder",parentuid:this.rootuid})).callback=new IG$.callBackObj(this,this.rs_createFolderGrp),t.show(this);break;case"cmd_add_template":this.appendTmpl()}},appendTmpl:function(){var e=this.down("[name=rtypeview]").getSelectionModel();0<e.selected.items.length?(this.ufolder=e.selected.items[0],this.newitem=!0,this.cardNav(1)):IG$.ShowError("Click item to add on the same folder.",this)},rs_createFolderGrp:function(e){this.loadRsList()},parseRscr:function(e,t){for(var a,n,i,o=IG$.XGetChildNodes(e),r=0;r<o.length;r++)"folder"==(a=(n=IG$.XGetAttrProp(o[r])).type.toLowerCase())||"rfolder"==a?0==o[r].hasChildNodes()?(n.groupname=n.nodepath,n.name="No item is defined!",n.type="blank",t.push(n)):this.parseRscr(o[r],t):"rscript"==a&&((i=n.nodepath.split("/")).splice(i.length-1,1),n.groupname=i.join("/"),t.push(n))},loadDataSet:function(e){var t=this.down("[name=rtypeview]").store.data.items[e];t&&"RScript"==t.get("type")&&(this.ufolder=t,this.newitem=!1,this.cardNav(1))},removeDataSet:function(e){var t=this.down("[name=rtypeview]").store.data.items[e];t&&("T"!=t.get("manage")?IG$.alertmsg(ig$.appname,"The content is not removeable.",null,null,1,"error"):(this.mrec=t,IG$.confirmMessages("R Wizard","Click yes to remove item or folder.",this.doClose,this,this)))},updateParam:function(e){var t=this.down("[name=rparamview]").store.data.items[e];if(t){if(1==t.get("p"))return void IG$.alertmsg(ig$.appname,"Predefined parameters could not be mapped with result.");new IG$.d$RsWiz({dc:this.dc,rec:t,callback:new IG$.callBackObj(this,this.rs_updateParam)}).show(this)}},rs_updateParam:function(e){},doClose:function(e){var t;"yes"==e&&((t=new IG$._rpc$).init(this,{ack:"batchcontent",payload:{uid:this.mrec.get("uid")},mbody:{option:"delete"}},this,this.rs_removeDataSet,null),t.send())},rs_removeDataSet:function(e){this.loadRsList()},initComponent:function(){var n=this;n.title=IRm$.r1("T_R_WIZARD"),$s.apply(this,{items:[{xtype:"panel",name:"mainpanel",layout:"card",activeItem:0,bodyPadding:10,items:[{id:"card-0",xtype:"panel",layout:{type:"vbox",align:"stretch"},border:0,padding:10,items:[{xtype:"gridpanel",name:"rtypeview",selType:"rowmodel",features:[{ftype:"grouping",groupHeaderTpl:'RScript: {name} ({rows.length} Item{[values.rows.length > 1 ? "s" : ""]})'}],store:{sortInfo:{},groupField:"groupname",fields:["name","uid","nodepath","groupname","description","type","manage"]},columns:[{text:"Name",flex:1,sortable:!1,dataIndex:"name"},{text:"Description",flex:1,sortable:!1,dataIndex:"description"},{xtype:"actioncolumn",width:50,sortable:!1,items:[{iconCls:"icon-grid-config",tooltip:IRm$.r1("B_CONFIG_ITEM"),handler:function(e,t,a){n.loadDataSet(t)},scope:n},{iconCls:"icon-grid-delete",tooltip:IRm$.r1("B_DELETE_ITEM"),handler:function(e,t,a){n.removeDataSet(t)},scope:n}]}]},{xtype:"container",layout:{type:"hbox",align:"stretch"},items:[{xtype:"container",flex:1},{xtype:"button",plain:!0,text:"Add Folder",handler:function(){this.toolbarHandler("cmd_add_group")},scope:this},{xtype:"button",text:"Or click here to create new template",handler:function(){this.toolbarHandler("cmd_add_template")},scope:this}]}]},{id:"card-1",xtype:"panel",border:!1,padding:10,layout:{type:"vbox",align:"stretch"},items:[{xtype:"fieldset",title:"R Script",layout:"anchor",defaults:{anchor:"100%"},items:[{xtype:"textfield",name:"rname",fieldLabel:"Name",labelWidth:60},{xtype:"textarea",height:240,name:"rcontent"}]}]},{id:"card-2",xtype:"panel",padding:10,border:!1,layout:{type:"vbox",align:"stretch"},items:[{xtype:"fieldset",title:"R Prompt",layout:"anchor",defaults:{anchor:"100%"},items:[{xtype:"textarea",height:260,name:"rprompt"}]}]},{id:"card-3",xtype:"panel",padding:10,border:!1,layout:{type:"vbox",align:"stretch"},items:[{xtype:"fieldset",title:IRm$.r1("L_R_PARAM"),layout:"anchor",defaults:{anchor:"100%"},items:[{xtype:"gridpanel",name:"rparamview",height:270,store:{sortInfo:{},fields:["name","desc","param","value","p"]},columns:[{text:"Name",flex:1,sortable:!1,dataIndex:"name"},{text:"Value",flex:1,sortable:!1,dataIndex:"value"},{text:"Description",flex:1,sortable:!1,dataIndex:"desc"},{xtype:"actioncolumn",width:50,sortable:!1,items:[{iconCls:"icon-grid-config",tooltip:IRm$.r1("B_CONFIG_ITEM"),handler:function(e,t,a){n.updateParam(t)},scope:n}]}]}]}]},{id:"card-4",padding:10,xtype:"panel",border:!1,layout:{type:"vbox",align:"stretch"},items:[{xtype:"fieldset",title:"Summary",defaults:{width:280},items:[{html:"Parameters are mapped with report result and ready to run. <BR> Click confirm to get Revolution results on the sheet",border:0}]}]}]}],buttons:[{name:"card-prev",text:"&laquo; "+IRm$.r1("B_PREVIOUS"),handler:function(){this.cardNav(-1)},scope:this,disabled:!0},{name:"card-next",text:IRm$.r1("B_NEXT")+" &raquo;",handler:function(){var e=this.down("[name=mainpanel]"),t=this.down("[name=rtypeview]").getSelectionModel();"card-0"==e.getLayout().activeItem.id&&(this.ufolder=t.selected&&0<t.selected.length?t.selected.items[0]:null,this.newitem=!1),this.cardNav(1)},scope:this},"->",{name:"btnconfirm",text:IRm$.r1("B_CONFIRM"),handler:function(){this._confirm()},scope:this},{text:IRm$.r1("B_CANCEL"),handler:function(){this.close()},scope:this}],listeners:{afterrender:function(e){this._init()}}}),IG$.r_wizard_u.superclass.initComponent.apply(this,arguments)}});
IG$.chartwizard=$s.extend($s.window,{modal:!0,layout:"fit",closable:!1,resizable:!1,width:620,height:520,_confirm:function(e){var t=this;this.down("[name=_a]");1==t._updateSetting()&&(t.callback&&t.callback.execute(),e||t.close())},_cardNav:function(e){for(var t,a=this,l=a.down("[name=_a]"),i=l.getLayout(),n=i.getActiveItem(),d=-1,o=0;o<l.items.length;o++)if(l.items.items[o]==n){d=o;break}-1<d&&d<l.items.length&&(t=d+e,i.setActiveItem(t),a._setAdvOpt.call(a),a.down("[name=card_prev]").setDisabled(0===t),a.down("[name=card_next]").setDisabled(t===l.items.length-1))},_changeGroup:function(){var e,t,a,l=this,i=l.down("[name=chartgroup]"),n=l.charttypelist,d=l.down("[name=_b]"),o=i.getValue(),s=this.sheetoption.model.chart_option,r=d.selModel.selected.items,m=r&&0<r.length?r[0].data.subtype:s.subtype,p=[];if(o!=l.charttype){for(t=0;t<n.length;t++)e=n[t],"all"!=o&&e.grp!=o&&m!=e.subtype||p.push(e);for(d.store.loadData(p),t=0;t<d.store.data.items.length;t++)if((a=d.store.data.items[t]).data.subtype==m){setTimeout(function(){d.select(a)},100);break}l.charttype=o}},_init:function(){var e=this;if(e.reportoption&&e.sheetoption){var t,a,l=e.sheetoption.model.chart_option,i=e.down("[name=_b]"),n=e.down("[name=relation_group]"),d=e.down("[name=maptype]"),o=e.down("[name=colorset]"),s=[],r=[],m=[];for(l.settings=l.settings||{},d.store.loadData(IG$.mLU?IG$.mLU.maptype:[]),u=0;u<i.store.data.items.length;u++)if((t=i.store.data.items[u]).data.subtype==l.subtype){setTimeout(function(){i.select(t)},100);break}for(r.push({name:"Not use",uid:""}),u=0;u<e.sheetoption.model.rows.length;u++)a=IG$.CloneObject(e.sheetoption.model.rows[u]),s.push(a),r.push(a);if(0==e.sheetoption.model.cols.length)for(u=0;u<e.sheetoption.model.measures.length;u++)a=IG$.CloneObject(e.sheetoption.model.measures[u]),m.push(a);else for(u=0;u<10;u++)a={name:"column "+(u+1),value:u},m.push(a);e.down("[name=anderson_species]").store.loadData(s),e.down("[name=mapcategory]").store.loadData(s),e.down("[name=nat_timefield]").store.loadData(s),e.down("[name=nat_datafield]").store.loadData(s),e.down("[name=nat_groupfield]").store.loadData(s),e.down("[name=nat_xdata]").store.loadData(m),e.down("[name=nat_ydata]").store.loadData(m),e.down("[name=nat_vdata]").store.loadData(m),e.down("[name=timeseriesfield]").store.loadData(r),e.down("[name=bmapsizeaxisfield]").store.loadData(m),e.down("[name=bmapyaxisfield]").store.loadData(m);for(var p=[],c=l.relationgroups||[],u=0;u<e.sheetoption.model.measures.length;u++)p.push({seq:""+u,name:e.sheetoption.model.measures[u].name,groupindex:u<c.length&&""!=c[u]?parseInt(c[u]):u});n.store.loadData(p);var _,b=[{name:"Default",value:""}];for(_ in IG$.__chartoption.chartcolors)b.push({name:_,value:_});o.store.loadData(b),e.setAllValues(l),e.down("[name=opt_chord]").setAllValues(l.settings),e.down("[name=piedatalabel]").setValue(l.piedatalabel),e.down("[name=bands]").store.loadData(l.bands),e._upd_series_grid()}},_upd_series_grid:function(){var e,t=this,a=t.sheetoption.model.chart_option,l=t.down("[name=renderbymeasures]").getValue(),n=t.down("[name=grid_seriestype]"),d=[],o=t.sheetoption.model.measures,s=l?o.length:Math.max(5,o.length);for(i=0;i<s;i++)(e={}).index=i+1,e.name=o.length>i?o[i].name:"",e.m_name=l?o.length>i?o[i].name:"N/A":"series "+e.index,e.seriestype=a.renderas&&a.renderas.length>i?a.renderas[i]:"",e.y2axis=!!(a.dualaxisitem&&a.dualaxisitem.length>i)&&"T"==a.dualaxisitem[i],e.dl_enable=a.dl_enable_l&&a.dl_enable_l.length>i?a.dl_enable_l[i]:"",e.dl_marker=a.dl_marker_l&&a.dl_marker_l.length>i?a.dl_marker_l[i]:"",e.dl_linetype=a.dl_linetype_l&&a.dl_linetype_l.length>i?a.dl_linetype_l[i]:"",e.dl_linewidth=a.dl_linewidth_l&&a.dl_linewidth_l.length>i?a.dl_linewidth_l[i]:"",d.push(e);n.store.loadData(d)},_validate:function(){var e,t,a=this,l=a.down("[name=_b]").selModel.selected.items,i={};if(l&&l.length&&(i={charttype:l[0].get("charttype"),subtype:l[0].get("subtype")},a._custPnls&&0<a._custPnls.length))for(t=0;t<a._custPnls.length;t++)(e=a._custPnls[t]).invalidateFields&&e.invalidateFields.call(e,i)},_updateSetting:function(){var e,t,a,l,i,n=this,d=n.sheetoption.model.chart_option,o=n.down("[name=_b]").selModel.selected.items,s=n.down("[name=relation_group]").store.data.items,r=[],m=n.down("[name=grid_seriestype]").store.data.items,p=n.down("[name=bands]");for(o&&0<o.length&&(d.charttype=o[0].data.charttype,d.subtype=o[0].data.subtype),e=0;e<s.length;e++)t=s[e].data.groupindex,t=parseInt(t),0==isNaN(t)&&r.push(t);for(d.bands=[],e=0;e<p.store.data.items.length;e++)l=p.store.data.items[e],(i=new IG$.chartPlotbandObject({})).getRecords(l),d.bands.push(i._content);if(d.relationgroups=r,this.getAllValues(d),n.down("[name=opt_chord]").getAllValues(d.settings),d.piedatalabel=n.down("[name=piedatalabel]").getValue(),d.renderas=[],d.dualaxisitem=[],d.dl_marker_l=[],d.dl_enable_l=[],d.dl_linetype_l=[],d.dl_linewidth_l=[],m)for(e=0;e<m.length;e++)d.renderas.push(m[e].data.seriestype||""),d.dualaxisitem.push(m[e].data.y2axis?"T":""),d.dl_marker_l.push(m[e].data.dl_marker||""),d.dl_enable_l.push(m[e].data.dl_enable||""),d.dl_linetype_l.push(m[e].data.dl_linetype||""),d.dl_linewidth_l.push(m[e].data.dl_linewidth||"");if(n._custPnls&&0<n._custPnls.length)for(e=0;e<n._custPnls.length;e++)(a=n._custPnls[e]).updateOptionValues&&a.updateOptionValues.call(a);return!0},_setAdvOpt:function(){var e,t,a=this,l=a.down("[name=_b]").selModel.selected.items,i=l&&0<l.length?l[0].data.charttype:null,n={optview:["opt_anderson","opt_relation","opt_range","opt_series","opt_nations","opt_series","opt_chord"],matrix:["opt_comparison"],anderson:["opt_anderson"],matrixdiagram:["opt_relation","opt_range"],networkdiagram_pos:["opt_relation","opt_range"],networkdiagram_neg:["opt_relation","opt_range"],forcelayout:["opt_relation","opt_range"],nation:["opt_nations"],chord:["opt_chord","opt_range"],defaults:["opt_series"]};for(a.down("[name=timeoption]").setVisible("nation"==i),a.down("[name=tm_opt]").setVisible("treemap"==i),a.down("[name=bubblemapoption]").setVisible("bubblemap"==i),a.down("[name=mapoptions]").setVisible("map"==i),t=n[i]||n.defaults,e=0;e<n.optview.length;e++)a.down("[name="+n.optview[e]+"]").hide();for(e=0;e<t.length;e++)a.down("[name="+t[e]+"]").show();a._validate()},_chage3dOpt:function(e){var t=this;t.down("[name=e3d_al]")&&(t.down("[name=e3d_al]").setValue(e?45:15),t.down("[name=e3d_be]").setValue(e?0:15),t.down("[name=e3d_de]").setValue(e?35:50),t.down("[name=e3d_vd]").setValue(e?0:25))},initComponent:function(){var d=IG$.__chartoption.charttype;this.title=IRm$.r1("T_CHART_WIZARD"),this.charttypelist=d,this._custPnls=[],$s.apply(this,{items:[{xtype:"panel",layout:{type:"hbox",align:"stretch"},border:0,padding:8,items:[{xtype:"container",layout:{type:"vbox",align:"stretch"},width:80,items:[{xtype:"container",name:"_c",layout:{type:"vbox",align:"stretch"}},{xtype:"container",flex:1}]},{xtype:"panel",name:"_a",flex:1,padding:10,layout:"card",activeItem:0,border:0,defaults:{header:!1,hideHeaders:!0},items:[{xtype:"panel",title:IRm$.r1("L_CSTEP_1"),border:0,layout:{type:"vbox",align:"stretch"},items:[{name:"chartgroup",fieldLabel:IRm$.r1("L_CHART_GROUP"),xtype:"combobox",queryMode:"local",displayField:"name",valueField:"value",editable:!1,autoSelect:!0,width:320,store:{xtype:"store",fields:["name","value"],data:IG$.__chartoption.chartcateg},listeners:{afterrender:function(e){e.setValue("all")},change:function(e,t,a,l){this._changeGroup()},scope:this}},{xtype:"panel",border:1,flex:1,layout:"fit",items:[{xtype:"dataview",name:"_b",store:{fields:["label","charttype","subtype","img","grp"],sortInfo:{},data:d},tpl:['<tpl for=".">','<div class="thumb-wrap" id="{subtype}">','<div class="thumb"><div class="ig-chart-base ig-chart-{img}" title="{label}"><span class="chart-icon"></span></div></div>','<span class="x-editable">{label}</span>',"</div>","</tpl>",'<div class="x-clear"></div>'],overItemCls:"phone-hover",itemSelector:"div.thumb-wrap",multiSelect:!1,autoScroll:!0,trackOver:!0,listeners:{beforecontainerclick:function(e,t){return!1},itemclick:function(e,t,a,l,i,n){var d=t.get("subtype");"pie"==d||"doughnut"==d?this._chage3dOpt(1):this._chage3dOpt(0)},scope:this}}]}]},{xtype:"panel",title:IRm$.r1("L_CSTEP_2"),border:!1,autoScroll:!0,layout:{type:"vbox",align:"stretch"},items:[{xtype:"fieldset",title:IRm$.r1("L_DATA_OPTION"),defaults:{width:280},items:[{name:"useformula",fieldLabel:IRm$.r1("L_USE_FORMULA"),xtype:"checkbox",boxLabel:IRm$.r1("B_ENABLE"),checked:!1},{name:"swapaxis",fieldLabel:IRm$.r1("L_SWAP_AXIS"),xtype:"checkbox",boxLabel:IRm$.r1("B_ENABLE"),checked:!1},{name:"maxchartresult",fieldLabel:IRm$.r1("L_MAX_CHART_ELEMENT"),xtype:"numberfield",value:0,minValue:0,maxValue:1e6,allowDecimals:!1,decimalPrecision:0,step:1},{name:"cunittext",xtype:"textfield",fieldLabel:IRm$.r1("L_UNIT_TEXT")}]},{xtype:"fieldset",title:IRm$.r1("L_DATA_LABEL"),items:[{name:"dl_enable",xtype:"checkbox",fieldLabel:IRm$.r1("B_ENABLED"),boxLabel:IRm$.r1("B_SHOW"),checked:!1},{name:"useformatvalue",xtype:"checkbox",boxLabel:IRm$.r1("B_ENABLED"),fieldLabel:IRm$.r1("L_C_FMT_VAL")},{name:"dl_marker",xtype:"checkbox",fieldLabel:IRm$.r1("L_MARKER"),boxLabel:IRm$.r1("B_SHOW"),checked:!1},{name:"dl_align",fieldLabel:IRm$.r1("L_LABEL_ALIGN"),xtype:"combobox",queryMode:"local",displayField:"name",valueField:"value",editable:!1,autoSelect:!0,store:{xtype:"store",fields:["name","value"],data:[{name:"Center",value:"center"},{name:"Right",value:"right"},{name:"Left",value:"Left"}]}},{name:"dl_inside",xtype:"checkbox",fieldLabel:IRm$.r1("B_INSIDE"),boxLabel:IRm$.r1("B_ENABLE"),checked:!1}]},{xtype:"fieldset",title:IRm$.r1("L_CHART_OPTION"),defaults:{width:280},items:[{name:"enablepivot",fieldLabel:IRm$.r1("L_ENABLE_PIVOT"),xtype:"checkbox",boxLabel:IRm$.r1("B_ENABLED"),hidden:!0,checked:!1},{name:"enabledrill",fieldLabel:IRm$.r1("L_ENABLE_DRILL"),xtype:"checkbox",boxLabel:IRm$.r1("B_ENABLED"),checked:!1},{name:"datazoom",fieldLabel:IRm$.r1("B_DATA_ZOOM"),xtype:"checkbox",boxLabel:IRm$.r1("B_ENABLED"),checked:!1,hidden:!window.echarts},{name:"enablezoom",fieldLabel:IRm$.r1("B_ZOOM"),xtype:"checkbox",boxLabel:IRm$.r1("B_ENABLED"),checked:!1,listeners:{change:function(e){var t=this.down("[name=enabledragselect]"),a=e.getValue();t.setDisabled(a),a&&t.setValue(!1)},scope:this}},{name:"enabledragselect",fieldLabel:IRm$.r1("L_DRAG_SELECT"),xtype:"checkbox",boxLabel:IRm$.r1("B_ENABLED"),checked:!1,listeners:{change:function(e){var t=this.down("[name=enablezoom]"),a=e.getValue();t.setDisabled(a),a&&t.setValue(!1)},scope:this}}]}]},{xtype:"panel",title:IRm$.r1("L_CSTEP_3"),border:!1,autoScroll:!0,layout:{type:"vbox",align:"stretch"},items:[{xtype:"fieldset",title:IRm$.r1("L_VIEW_OPTION"),items:[{name:"showlegend",xtype:"checkbox",boxLabel:IRm$.r1("B_SHOW"),checked:!1},{name:"legendposition",fieldLabel:IRm$.r1("L_LEGEND_POSITION"),xtype:"combobox",queryMode:"local",displayField:"name",valueField:"value",editable:!1,autoSelect:!0,store:{xtype:"store",fields:["name","value"],data:[{name:"Bottom Left",value:"BOTTOM_LEFT"},{name:"Bottom Center",value:"BOTTOM_CENTER",selected:!0},{name:"Bottom Right",value:"BOTTOM_RIGHT"},{name:"Top Left",value:"TOP_LEFT"},{name:"Top Center",value:"TOP_CENTER"},{name:"Top Right",value:"TOP_RIGHT"},{name:"Right Top",value:"RIGHT_TOP"},{name:"Right Center",value:"RIGHT_CENTER"},{name:"Right Bottom",value:"RIGHT_BOTTOM"},{name:"Left Top",value:"LEFT_TOP"},{name:"Left Center",value:"LEFT_CENTER"},{name:"Left Bottom",value:"LEFT_BOTTOM"}]}},{name:"lgndfloating",fieldLabel:IRm$.r1("L_FLOATING"),xtype:"checkbox",boxLabel:IRm$.r1("B_ENABLED")}]},{xtype:"fieldset",title:IRm$.r1("L_TITLE_OPTION"),layout:{type:"vbox",align:"stretch"},$w:350,items:[{name:"showtitle",$w:350,fieldLabel:"Visible",boxLabel:IRm$.r1("B_SHOW"),xtype:"checkbox"},{name:"title",$w:350,xtype:"textfield",fieldLabel:IRm$.r1("L_TITLE")},{name:"titleposition",fieldLabel:IRm$.r1("L_TITLE_POSITION"),xtype:"combobox",queryMode:"local",displayField:"name",valueField:"value",editable:!1,autoSelect:!0,store:{xtype:"store",fields:["name","value"],data:[{name:"Bottom Left",value:"BOTTOM_LEFT"},{name:"Bottom Center",value:"BOTTOM_CENTER",selected:!0},{name:"Bottom Right",value:"BOTTOM_RIGHT"},{name:"Top Left",value:"TOP_LEFT"},{name:"Top Center",value:"TOP_CENTER"},{name:"Top Right",value:"TOP_RIGHT"}]}},{xtype:"displayfield",value:"Ex) {SERIES}",$w:230}]}]},{xtype:"panel",title:IRm$.r1("L_CSTEP_4"),border:!1,autoScroll:!0,layout:{type:"vbox",align:"stretch"},items:[{xtype:"fieldset",title:IRm$.r1("L_PLOT_STYLES"),items:[{xtype:"combobox",queryMode:"local",name:"colorset",fieldLabel:IRm$.r1("L_CLR_SET"),editable:!1,autoSelect:!1,valueField:"value",displayField:"name",store:{xtype:"store",fields:["name","value"]}}]},{xtype:"fieldset",title:IRm$.r1("L_BB_OPT"),name:"bubblemapoption",hidden:!0,defaults:{width:280},items:[{xtype:"checkbox",name:"bmaprow",fieldLabel:IRm$.r1("L_BB_SL"),boxLabel:"Row data to redraw"},{xtype:"checkbox",name:"bmapyaxis",fieldLabel:IRm$.r1("L_BB_YA")},{xtype:"combobox",name:"bmapsizeaxisfield",queryMode:"local",fieldLabel:IRm$.r1("L_BB_SA"),editable:!1,autoSelect:!1,valueField:"uid",displayField:"name",store:{xtype:"store",fields:["name","uid","nodepath","type"]}},{xtype:"combobox",queryMode:"local",name:"bmapyaxisfield",fieldLabel:IRm$.r1("L_BB_CA"),valueField:"uid",displayField:"name",editable:!1,autoSelect:!1,store:{xtype:"store",fields:["name","uid","nodepath","type"]}},{xtype:"numberfield",name:"bmapsize",fieldLabel:IRm$.r1("L_BB_MS"),minValue:10,maxValue:300}]},{xtype:"fieldset",title:IRm$.r1("L_TIME_OPTION"),name:"timeoption",hidden:!0,defaults:{width:280},items:[{name:"timeseriesfield",fieldLabel:IRm$.r1("L_TC_TA"),xtype:"combobox",queryMode:"local",displayField:"name",valueField:"uid",editable:!1,autoSelect:!1,store:{xtype:"store",fields:["name","uid","nodepath","type"]}},{name:"timeseriesduration",fieldLabel:IRm$.r1("L_TC_DU"),xtype:"numberfield",value:.3,minValue:.3,maxValue:8e3}]},{xtype:"fieldset",title:IRm$.r1("L_PIE_OPTION"),name:"pieoption",hidden:!1,defaults:{width:280},items:[{name:"pieinnerradius",fieldLabel:IRm$.r1("L_INNER_RADIUS"),xtype:"numberfield",value:0,minValue:0,maxValue:80},{name:"pielabeldist",fieldLabel:IRm$.r1("L_LABEL_DIST"),xtype:"numberfield",value:0,minValue:-50,maxValue:50},{name:"pielayout",fieldLabel:IRm$.r1("L_SERIES_LAYOUT"),xtype:"combobox",editable:!1,queryMode:"local",displayField:"name",valueField:"value",store:{fields:["name","value"],data:[{name:"Only One Circle",value:""},{name:IRm$.r1("L_HORIZONTAL"),value:"h"},{name:IRm$.r1("L_VERTICAL"),value:"v"}]}},{name:"piedatalabel",fieldLabel:IRm$.r1("L_DATA_LABEL_FMT"),xtype:"textfield"},{xtype:"displayfield",value:"Ex) <b>{name}</b>: {value} ({percent} %)"}]},{xtype:"fieldset",title:IRm$.r1("L_TREEM_OPTION"),name:"tm_opt",hidden:!0,defaults:{width:280},items:[{name:"tm_l_alg",fieldLabel:IRm$.r1("L_TM_ALG"),xtype:"combobox",editable:!1,queryMode:"local",displayField:"name",valueField:"value",store:{fields:["name","value"],data:[{name:"Default",value:""},{name:"sliceAndDice",value:"sliceAndDice"},{name:"stripes",value:"stripes"},{name:"squarified",value:"squarified"},{name:"strip",value:"strip"}]}},{name:"tm_l_cl",fieldLabel:IRm$.r1("L_TM_CL"),xtype:"checkbox",boxLabel:IRm$.r1("B_ENABLED")}]},{xtype:"fieldset",title:IRm$.r1("L_MAP_OPT"),name:"mapoptions",defaults:{width:280},items:[{name:"maptype",fieldLabel:IRm$.r1("L_MAP_TYPE"),xtype:"combobox",queryMode:"local",displayField:"name",valueField:"subtype",editable:!1,autoSelect:!1,store:{xtype:"store",fields:["name","subtype","filename"]}},{name:"mapcategory",fieldLabel:IRm$.r1("L_MAP_AXIS"),xtype:"combobox",queryMode:"local",displayField:"name",valueField:"uid",editable:!1,autoSelect:!1,store:{xtype:"store",fields:["name","uid","type","nodepath"]}}]},{xtype:"fieldset",name:"opt_anderson",title:"Anderson Option",hidden:!0,items:[{xtype:"combobox",name:"anderson_species",fieldLabel:"Species",queryMode:"local",displayField:"name",valueField:"name",editable:!1,autoSelect:!0,store:{xtype:"store",fields:["name","value"],data:[]}}]},{xtype:"fieldset",name:"opt_range",title:"Relation Ranges",hidden:!0,items:[{xtype:"numberfield",name:"rel_range1",fieldLabel:"From Range",minValue:-1,value:0,maxValue:1,step:.01},{xtype:"numberfield",name:"rel_range2",fieldLabel:"End Range",minValue:-1,value:1,maxValue:1,step:.01}]},{xtype:"fieldset",name:"opt_relation",title:"Group Mapping",hidden:!0,items:[{xtype:"grid",name:"relation_group",hideHeaders:!1,stateful:!0,store:{fields:["name","groupindex","seq"]},height:80,plugins:[{ptype:"cellediting",clicksToEdit:1}],columns:[{text:"Sequence",flex:1,sortable:!1,dataIndex:"seq"},{text:"Group Index",flex:1,sortable:!1,dataIndex:"groupindex",editor:{allowBlank:!1}},{text:IRm$.r1("B_NAME"),flex:1,sortable:!1,dataIndex:"name"}]}]},{xtype:"fieldset",name:"opt_series",title:IRm$.r1("L_SERIES_TYPE"),hidden:!0,layout:{type:"vbox",align:"stretch"},items:[{name:"usedualaxis",fieldLabel:IRm$.r1("L_DUAL_AXIS"),xtype:"checkbox",boxLabel:IRm$.r1("B_ENABLED"),listeners:{change:function(e){var t=this.down("[name=usedualaxis]").getValue();this.down("[name=usedualaxis2]").setValue(t),this.down("[name=y2axis]").setDisabled(!t)},scope:this}},{name:"renderbymeasures",fieldLabel:IRm$.r1("L_RENDER_BY_MEA"),xtype:"checkbox",boxLabel:IRm$.r1("B_ENABLED"),listeners:{change:function(e){this._upd_series_grid()},scope:this}},{xtype:"grid",name:"grid_seriestype",hideHeaders:!1,stateful:!0,store:{fields:["name","m_name","seriestype","y2axis","dl_marker","dl_enable"]},height:120,columns:[{text:"Index",flex:1,tdCls:"igc-td-link",sortable:!1,dataIndex:"index"},{text:IRm$.r1("B_NAME"),flex:2,sortable:!1,tdCls:"igc-td-link",dataIndex:"m_name"},{text:IRm$.r1("L_SERIES_TYPE"),flex:1,sortable:!1,tdCls:"igc-td-link",dataIndex:"seriestype"},{xtype:"checkcolumn",text:"Y2 Axis",flex:1,sortable:!1,tdCls:"igc-td-link",dataIndex:"y2axis"}],listeners:{itemclick:function(e,t,a,l,i,n){new IG$.chartSeries({modal:!0,charttype:d,cell_record:t,cell_item:a,cell_index:l,callback:new IG$.callBackObj(this,function(e){var t=e.cell_record;t&&(t.set("seriestype",e.seriestype||""),t.set("dl_marker",e.dl_marker||""),t.set("dl_enable",e.dl_enable||""),t.set("dl_linetype",e.dl_linetype||""),t.set("dl_linewidth",e.dl_linewidth||""))})}).show()},scope:this}}]},{xtype:"fieldset",name:"opt_comparison",title:"Comparison Matrix",hidden:!0,items:[{xtype:"numberfield",name:"comp_range0",fieldLabel:"Red Color Range",minValue:-1,value:0,maxValue:.8,step:.01},{xtype:"numberfield",name:"comp_range1",fieldLabel:"Blue Color Range",minValue:-.8,value:0,maxValue:1,step:.01},{xtype:"displayfield",value:"Middle range is colored in gray"}]},{xtype:"fieldset",name:"opt_chord",title:"Chord Chart",hidden:!0,items:[{xtype:"combobox",name:"chd_method",fieldLabel:"Chort Data",queryMode:"local",displayField:"name",valueField:"value",editable:!1,autoSelect:!0,store:{xtype:"store",fields:["name","value"],data:[{name:"Calculate Relations",value:"relations"},{name:"Table Result Matrix",value:"tablematrix"}]}},{xtype:"displayfield",value:"Relations calculates coefficient."},{xtype:"displayfield",value:"Table matrix need same name on column and row metrics"}]},{xtype:"fieldset",name:"opt_nations",title:"Timeseries Chart",hidden:!0,items:[{xtype:"combobox",name:"nat_timefield",fieldLabel:"Time field",queryMode:"local",displayField:"name",valueField:"name",editable:!1,autoSelect:!0,store:{xtype:"store",fields:["name","value"],data:[]}},{xtype:"combobox",name:"nat_datafield",fieldLabel:"Data Field",queryMode:"local",displayField:"name",valueField:"name",editable:!1,autoSelect:!0,store:{xtype:"store",fields:["name","value"],data:[]}},{xtype:"combobox",name:"nat_groupfield",fieldLabel:"Group Field",queryMode:"local",displayField:"name",valueField:"name",editable:!1,autoSelect:!0,store:{xtype:"store",fields:["name","value"],data:[]}},{xtype:"combobox",name:"nat_xdata",fieldLabel:"X Axis",queryMode:"local",displayField:"name",valueField:"name",editable:!1,autoSelect:!0,store:{xtype:"store",fields:["name","value"],data:[]}},{xtype:"combobox",name:"nat_ydata",fieldLabel:"Y Axis",queryMode:"local",displayField:"name",valueField:"name",editable:!1,autoSelect:!0,store:{xtype:"store",fields:["name","value"],data:[]}},{xtype:"combobox",name:"nat_vdata",fieldLabel:"Volume",queryMode:"local",displayField:"name",valueField:"name",editable:!1,autoSelect:!0,store:{xtype:"store",fields:["name","value"],data:[]}}]}]},{xtype:"panel",title:IRm$.r1("L_CSTEP_5"),border:!1,autoScroll:!0,layout:{type:"vbox",align:"stretch"},items:[{xtype:"fieldset",title:"XAxis Settings",items:[{name:"xlabel",fieldLabel:IRm$.r1("L_SHOW_LABEL"),xtype:"checkbox",boxLabel:IRm$.r1("B_ENABLED")},{name:"xaxisrot",fieldLabel:IRm$.r1("L_AUTO_ROT"),xtype:"checkbox",boxLabel:IRm$.r1("B_ENABLED"),listeners:{change:function(e){var t=e.getValue(),a=this.down("[name=xstagl]"),l=this.down("[name=xstep]");a.setDisabled(t),l.setDisabled(t)},scope:this}},{name:"xstagl",fieldLabel:IRm$.r1("L_STG_LINE"),xtype:"numberfield",value:0,minValue:0,maxValue:5,step:1},{name:"xstep",fieldLabel:IRm$.r1("L_L_STEP"),xtype:"numberfield",value:1,minValue:1,maxValue:5,step:1}]},{xtype:"fieldset",title:"YAxis Settings",items:[{name:"yaxisformat",fieldLabel:IRm$.r1("L_YAXIS_FORMAT"),xtype:"textfield"},{name:"yaxismin",fieldLabel:IRm$.r1("L_YAXIS_MIN"),xtype:"textfield"},{name:"yaxismax",fieldLabel:IRm$.r1("L_YAXIS_MAX"),xtype:"textfield"},{name:"precision",fieldLabel:IRm$.r1("L_NUMBER_PRECISION"),xtype:"numberfield",value:0,minValue:0,maxValue:10,allowDecimals:!1,decimalPrecision:0,step:1},{name:"yaxistitle",fieldLabel:IRm$.r1("L_YAXIS_TITLE"),xtype:"textfield"},{name:"ytickint",fieldLabel:IRm$.r1("L_TK_INTVL"),xtype:"numberfield",value:0,minValue:0,maxValue:1e8,allowDecimals:!0,decimalPrecision:2},{name:"yaxislog",xtype:"checkbox",fieldLabel:IRm$.r1("L_YAXIS_LOG"),boxLabel:IRm$.r1("B_ENABLED")},{name:"yaxislogbase",xtype:"numberfield",fieldLabel:IRm$.r1("L_YAXIS_LOGBASE"),value:10}]},{name:"usedualaxis2",fieldLabel:IRm$.r1("L_DUAL_AXIS"),xtype:"checkbox",boxLabel:IRm$.r1("B_ENABLED"),checked:!1,listeners:{change:function(e){var t=this.down("[name=usedualaxis2]").getValue();this.down("[name=usedualaxis]").setValue(t)},scope:this}},{xtype:"fieldset",name:"y2axis",disabled:!0,title:"Second Y Axis Settings",items:[{name:"yaxisformat2",fieldLabel:IRm$.r1("L_YAXIS_FORMAT"),xtype:"textfield"},{name:"yaxismin2",fieldLabel:IRm$.r1("L_YAXIS_MIN"),xtype:"textfield"},{name:"yaxismax2",fieldLabel:IRm$.r1("L_YAXIS_MAX"),xtype:"textfield"},{name:"yaxistitle2",fieldLabel:"Right YAxis Title",xtype:"textfield"},{name:"yaxislog2",xtype:"checkbox",fieldLabel:IRm$.r1("L_YAXIS_LOG"),boxLabel:IRm$.r1("B_ENABLED")},{name:"yaxislogbase2",xtype:"numberfield",fieldLabel:IRm$.r1("L_YAXIS_LOGBASE"),value:10}]},{xtype:"fieldset",title:"Data Series",items:[{name:"stack",fieldLabel:IRm$.r1("L_STACK_VALUE"),xtype:"checkbox",boxLabel:IRm$.r1("B_ENABLED"),checked:!1,listeners:{change:function(e){var t=e.getValue();this.down("[name=stackperc]").setVisible(t)},scope:this}},{name:"stackperc",fieldLabel:IRm$.r1("L_STACK_PERCENT"),xtype:"checkbox",boxLabel:IRm$.r1("B_ENABLED"),checked:!1}]}]},{xtype:"panel",title:IRm$.r1("L_CSTEP_6"),border:!1,autoScroll:!0,layout:{type:"vbox",align:"stretch"},items:[{xtype:"container",layout:{type:"hbox",align:"stretch"},items:[{xtype:"displayfield",flex:1,value:"Defines PlotLine and PlotBand for Cartesian Charts"},{xtype:"button",text:IRm$.r1("L_ADD_NEW"),handler:function(){var e=new IG$.chartPlotbandObject({enabled:!0});new IG$.chartPlotband({ditem:e,callback:new IG$.callBackObj(this,function(e){this.down("[name=bands]").store.add(e._content)})}).show()},scope:this}]},{xtype:"gridpanel",name:"bands",flex:1,store:{fields:["name","color","borderwidth","type","value_1","value_2","value_desc","enabled","rtype","porder","showfitexp","cfitallseries","cfitshowsum","cfitfcs","cf_lc"]},columns:[{text:IRm$.r1("B_NAME"),flex:1,tdCls:"igc-td-link",dataIndex:"name"},{text:IRm$.r1("B_VALUE"),flex:1,tdCls:"igc-td-link",dataIndex:"value_desc"},{xtype:"checkcolumn",text:IRm$.r1("B_STATUS"),width:60,dataIndex:"enabled"},{xtype:"actioncolumn",width:30,items:[{iconCls:"icon-grid-delete",tooltip:"Delete item",handler:function(e,t,a){e.store.getAt(t);e.store.removeAt(t)}}]}],listeners:{cellclick:function(e,t,a,l,i,n,d,o){var s;2!=a&&3!=a&&((s=new IG$.chartPlotbandObject({})).getRecords(l),new IG$.chartPlotband({ditem:s,callback:new IG$.callBackObj(this,function(e){e.updateRecords.call(e,l)})}).show())},scope:this}}]}],listeners:{afterrender:function(e){this._init()},scope:this}}]}],buttons:[{name:"card_prev",text:"&laquo; "+IRm$.r1("B_PREVIOUS"),handler:function(){this._cardNav(-1)},scope:this,disabled:!0},{name:"card_next",text:IRm$.r1("B_NEXT")+" &raquo;",handler:function(){this._cardNav(1)},scope:this},"->",{text:IRm$.r1("B_APPLY"),handler:function(){this._confirm(1)},scope:this},{text:IRm$.r1("B_CONFIRM"),handler:function(){this._confirm()},scope:this},{text:IRm$.r1("B_CANCEL"),handler:function(){this.close()},scope:this}],listeners:{afterrender:function(){var a=this,l=a.down("[name=_a]"),i=a.down("[name=_c]");window.IG$.makeCustomChartOption&&(a._custPnls=window.IG$.makeCustomChartOption(a,a.down("[name=_a]"))),$.each(l.items.items,function(e,t){i.add({xtype:"button",p:a,pu:l,p1:e,$w:70,margin:"0 0 3",text:t.title,handler:function(){l.getLayout().setActiveItem(e),a._setAdvOpt.call(a)}})})}}}),IG$.chartwizard.superclass.initComponent.apply(this,arguments)}});
IG$.jasper_template=$s.extend($s.window,{modal:!0,width:460,autoHeight:!0,layout:"fit",_confirm:function(){var e=this,t=e.down("[name=grdmain]").getSelectionModel().selected;t&&t.length&&(e.callback&&e.callback.execute(t),e.close())},load_content:function(){var e,t,a,d=this,l=new IG$._rpc$,p=d.down("[name=tmpl_type]").getValue(),r=d.down("[name=grdmain]");p?(a="file"==p?(e="helpcontent",t={},{option:d._fopt||"jasper"}):(e="content",t={uid:"/DashboardResources"},{option:"folder"}),l.init(d,{ack:e,payload:t,mbody:a},d,function(e){var t,a,l,o="file"==p?e:e.children,n=[],i=d._fopt||"jasper";if(o){for(t=0;t<o.length;t++)a=o[t],"resources"==p?(l=a.name,a.type="resource",-1<l.indexOf(".")&&(l=l.substring(l.lastIndexOf(".")+1),"jasper"==i?"jrxml"==l&&n.push(a):"office_files"==i&&/(xls|xlsx|doc|docx|ppt|pptx)/.test(l)&&n.push(a))):(a.type="file",n.push(a));r.store.loadData(n)}},!1),l.send()):r.store.loadData([])},initComponent:function(){this.title=IRm$.r1("T_JASP_TMPL"),$s.apply(this,{items:[{xtype:"panel",bodyPadding:5,layout:{type:"vbox",align:"stretch"},items:[{fieldLabel:"Template",name:"tmpl_type",xtype:"combobox",queryMode:"local",valueField:"value",displayField:"name",editable:!1,store:{xtype:"store",fields:["name","value"],data:[{name:"Select",value:""},{name:"Resources",value:"resources"},{name:"File",value:"file"}]},listeners:{change:function(e){this.load_content()},scope:this}},{xtype:"gridpanel",height:200,name:"grdmain",store:{xtype:"store",fields:["uid","name","contentfullpath","type","ext"]},selType:"checkboxmodel",selModel:{mode:"SINGLE"},columns:[{dataIndex:"name",flex:1,text:IRm$.r1("B_NAME")},{dataIndex:"ext",width:80,text:"Extension"}]}]}],buttons:[{text:IRm$.r1("B_CONFIRM"),handler:function(){this._confirm()},scope:this},{text:IRm$.r1("B_CANCEL"),handler:function(){this.close()},scope:this}]}),IG$.jasper_template.superclass.initComponent.apply(this,arguments)},listeners:{afterrender:function(e){e.down("[name=tmpl_type]").setValue("")}}}),IG$.exportWizard=$s.extend($s.window,{modal:!0,region:"center",layout:{type:"fit",align:"stretch"},closable:!1,resizable:!1,width:760,height:450,reportoption:null,sheetoption:null,callback:null,_confirm:function(){var l=this;if(l.reportoption){var e,t,a,o,n,i,d=l.reportoption._mc.export_option,p=l.down("[name=grdoption]"),r=l.down("[name=grd_otmpl]");l.j_param;for(d.repeatheader=l.down("[name=repeatheader]").getValue(),d.title=l.down("[name=headertitle]").getValue(),d.pagenumber=l.down("[name=pagenumber]").getValue(),d.footertitle=l.down("[name=footertitle]").getValue(),d.alldata=l.down("[name=alldata]").getValue(),d.startpage=l.down("[name=startpage]").getValue(),d.endpage=l.down("[name=endpage]").getValue(),d.filterdesc=l.down("[name=filterdesc]").getValue(),d.layout=l.down("[name=layout]").getValue().layouttype,d.pagesize=l.down("[name=pagesize]").getValue(),d.fontname=l.down("[name=fontname]").getValue(),d.scaledown=l.down("[name=scaledown]").getValue(),$.each(["excel","pdf","csv","html","office"],function(e,t){var a=l.down("[name=t_e"+(e+1)+"]");d["u_"+t]=a.getValue()}),d.dockitems={},a=0;a<p.store.data.items.length;a++)i=p.store.data.items[a],d.dockitems[i.get("docid")]={docid:i.get("docid"),overflow:i.get("overflow"),hidden:i.get("hidden")};for(d.jasper=d.jasper||{},d.otmpl=[],a=0;a<r.store.data.items.length;a++)i=r.store.data.items[a],d.otmpl.push({name:i.get("name"),type:i.get("type"),uid:i.get("uid"),description:i.get("description"),export_type:i.get("export_type")});for(e in window.IExport)if(t=window.IExport[e],d[t.name]={},t.extPanel)for(a=0;a<t.params.length;a++)(o=t.extPanel.down("[name="+t.params[a]+"]"))&&(n=o.getValue(),d[t.name][t.params[a]]=n)}this.callback&&this.callback.execute(),this.close()},init_f:function(){var a=this,e=a.down("[name=_mtab]"),t=a.down("[name=grd_otmpl]");for(n in window.IExport=window.IExport||{},a.j_param=["pdf_output","pdf_label","rtf_output","rtf_label","ppt_output","ppt_label","excel_label","excel_output","html_output","html_label","docx_output","docx_label","xml_output","xml_label"],window.IExport)IExport[n].configPanel&&(IExport[n].configPanel.maincfg=this,IExport[n].configPanel.name=IExport[n].name,IExport[n].extPanel=new $s.panel(IExport[n].configPanel),e.add(IExport[n].extPanel));if(a.reportoption){a.reportoption._mc.export_option=a.reportoption._mc.export_option||{};var l,o,n,d,p=a.reportoption._mc.export_option,r=a.down("[name=layout]"),m=[],s=a.dzone;for(r.setValue({layouttype:p.layout||"portrait"}),a.down("[name=repeatheader]").setValue(p.repeatheader),a.down("[name=headertitle]").setValue(p.title),a.down("[name=pagenumber]").setValue(p.pagenumber),a.down("[name=footertitle]").setValue(p.footertitle),a.down("[name=alldata]").setValue(p.alldata),a.down("[name=startpage]").setValue(p.startpage),a.down("[name=endpage]").setValue(p.endpage),a.down("[name=filterdesc]").setValue(p.filterdesc),a.down("[name=pagesize]").setValue(p.pagesize||"A4"),a.down("[name=fontname]").setValue(p.fontname),a.down("[name=scaledown]").setValue(p.scaledown),$.each(["excel","pdf","csv","html","office"],function(e,t){a.down("[name=t_e"+(e+1)+"]").setValue(p["u_"+t])}),l=p.dockitems||{},i=0;i<s.items.length;i++)o=s.items[i].docid,m.push({docid:o,objtype:s.items[i].objtype,title:s.items[i].title,overflow:!l[o]||l[o].overflow,hidden:!!l[o]&&l[o].hidden});if(a.down("[name=grdoption]").store.loadData(m),p.jasper)for(i=0;i<a.j_param.length;i++)(d=a.down("[name="+a.j_param[i]+"]"))&&(val=p.jasper[a.j_param[i]],d.setValue(val));p.otmpl&&t.store.loadData(p.otmpl),$.each(window.IExport,function(e,t){t.extPanel&&(t.extPanel.opt=p,(t.extPanel.ep=t).extPanel.pt_p=a)})}},initComponent:function(){var e,t,a=[{label:"Select Font",value:""},{label:"HELVETICA",value:"HELVETICA;CP1252"},{label:"STSong-Light",value:"STSong-Light;UniGB-UCS2-H"},{label:"KozMinPro-Regular",value:"KozMinPro-Regular;UniJIS-UCS2-H"},{label:"HYGoThic-Medium",value:"HYGoThic-Medium;UniKS-UCS2-H"}];for(this.title=IRm$.r1("T_EXPORT_WIZARD"),t=IG$.dlgLogin.logininfo.pdffonts,e=0;e<t.length;e++)a.push({label:t[e].substring(0,t[e].length-1),value:t[e]});$s.apply(this,{defaults:{bodyStyle:"padding:10px"},items:[{xtype:"panel",bodyBorder:!1,layout:"fit",fieldDefaults:{labelWidth:160},items:[{xtype:"tabpanel",name:"_mtab",activeTab:0,defaults:{bodyStyle:"padding: 10px"},items:[{title:IRm$.r1("L_EXP_MET"),xtype:"panel",layout:"anchor",items:[{xtype:"fieldset",layout:"vbox",title:IRm$.r1("L_EXP_MET_DESC"),items:[{xtype:"checkbox",name:"t_e1",boxLabel:IRm$.r1("L_EXPORT_EXCEL")},{xtype:"checkbox",name:"t_e2",boxLabel:IRm$.r1("L_EXPORT_PDF")},{xtype:"checkbox",name:"t_e3",boxLabel:IRm$.r1("L_EXPORT_CSV")},{xtype:"checkbox",name:"t_e4",boxLabel:IRm$.r1("L_EXPORT_HTML")},{xtype:"checkbox",name:"t_e5",boxLabel:IRm$.r1("L_EXPORT_OFFICE")}]}]},{title:IRm$.r1("L_GENERAL_OPTION"),defaultType:"textfield",layout:"anchor",defaults:{width:380},fieldDefaults:{labelWidth:55,anchor:"100%"},items:[{name:"repeatheader",fieldLabel:IRm$.r1("L_REPEAT_HEADER"),xtype:"checkbox",boxLabel:IRm$.r1("B_ENABLED"),checked:!1},{name:"headertitle",fieldLabel:IRm$.r1("L_TITLE"),xtype:"textfield"},{name:"pagenumber",fieldLabel:IRm$.r1("L_SHOW_PAGENUMBER"),xtype:"checkbox",boxLabel:IRm$.r1("B_ENABLED"),checked:!1},{name:"footertitle",fieldLabel:IRm$.r1("L_FOOTER"),xtype:"textfield"},{name:"alldata",fieldLabel:IRm$.r1("L_ALL_DATA"),xtype:"checkbox",boxLabel:IRm$.r1("B_ENABLED"),checked:!1},{name:"startpage",fieldLabel:IRm$.r1("L_PG_START"),xtype:"numberfield",value:1,minValue:1,maxValue:125},{name:"endpage",fieldLabel:IRm$.r1("L_PG_RANGE"),xtype:"numberfield",value:30,minValue:1,maxValue:30},{name:"filterdesc",fieldLabel:IRm$.r1("L_SHOW_FILTER_INFO"),xtype:"checkbox",boxLabel:IRm$.r1("B_ENABLED"),checked:!1}]},{title:IRm$.r1("L_PAGE_OPTIONS"),defaultType:"textfield",layout:"anchor",defaults:{width:380},items:[{name:"layout",fieldLabel:IRm$.r1("L_PG_DIRECTION"),xtype:"radiogroup",plain:!0,items:[{boxLabel:IRm$.r1("L_VERTICAL"),name:"layouttype",inputValue:"portrait"},{boxLabel:IRm$.r1("L_HORIZONTAL"),name:"layouttype",inputValue:"landscape",checked:!0}]},{name:"pagesize",fieldLabel:IRm$.r1("L_PG_SIZE"),xtype:"combobox",labelAlign:"left",labelWidth:120,valueField:"value",displayField:"label",editable:!1,store:{fields:["label","value"],data:[{label:"A1",value:"A1"},{label:"A2",value:"A2"},{label:"A3",value:"A3"},{label:"A4",value:"A4"},{label:"A5",value:"A5"},{label:"B4",value:"B4"},{label:"B5",value:"B5"}]}},{name:"fontname",fieldLabel:IRm$.r1("L_FONT_SELECT"),xtype:"combobox",labelAlign:"left",labelWidth:120,valueField:"value",displayField:"label",editable:!1,store:{fields:["label","value"],data:a}},{name:"scaledown",fieldLabel:"",xtype:"checkbox",boxLabel:IRm$.r1("L_SCALE_DOWN"),checked:!1},{name:"setvertical",fieldLabel:"",xtype:"checkbox",boxLabel:IRm$.r1("L_ALIGN_VERTICAL"),checked:!1}]},{xtype:"panel",title:IRm$.r1("L_SHEET_OPTIONS"),layout:{type:"vbox",align:"stretch"},items:[{xtype:"displayfield",value:IRm$.r1("L_OVF_DESC")},{xtype:"gridpanel",name:"grdoption",store:{type:"store",fields:["docid","title","objtype","overflow","hidden"]},flex:1,columns:[{text:"ID",width:60,dataIndex:"docid"},{text:IRm$.r1("B_TITLE"),flex:1,dataIndex:"title"},{text:IRm$.r1("B_TYPE"),width:50,dataIndex:"objtype"},{xtype:"checkcolumn",text:IRm$.r1("B_OVERFLOW"),width:60,dataIndex:"overflow"},{xtype:"checkcolumn",text:IRm$.r1("B_HIDE"),width:60,dataIndex:"hidden"}]}]},{xtype:"panel",title:IRm$.r1("L_EXP_OFFICE"),name:"t_report",layout:{type:"vbox",align:"stretch"},defaults:{anchor:"100%"},items:[{fieldLabel:"Template",xtype:"fieldcontainer",labelWidth:80,layout:"hbox",items:[{xtype:"textfield",name:"office_template",readOnly:!0},{xtype:"textfield",hidden:!0,name:"office_tmpl_uid"},{xtype:"textfield",hidden:!0,name:"office_tmpl_type"},{xtype:"button",text:"..",handler:function(){var a=this;new IG$.jasper_template({_fopt:"office_files",callback:new IG$.callBackObj(a,function(e){var t="";e&&e.length&&(t=e.items[0],a.down("[name=office_tmpl_uid]").setValue(t.get("uid")),a.down("[name=office_template]").setValue(t.get("name")),a.down("[name=office_tmpl_type]").setValue(t.get("type")))})}).show()},scope:this},{xtype:"button",text:"Add",handler:function(){var e,t=this,a=t.down("[name=office_tmpl_uid]"),l=t.down("[name=office_tmpl_type]"),o=t.down("[name=office_template]"),n=t.down("[name=grd_otmpl]"),i=t.down("[name=t_e5]"),d={uid:a.getValue(),type:l.getValue(),name:o.getValue()};i.setValue(!0),-1<d.name.indexOf(".")&&("docx"==(e=d.name.substring(d.name.lastIndexOf(".")+1))?d.export_type="pdf":"xlsx"!=e&&"xls"!=e||(d.export_type=e)),d.name&&(n.store.add(d),a.setValue(""),l.setValue(""),o.setValue(""))},scope:this}]},{xtype:"gridpanel",name:"grd_otmpl",flex:1,store:{fields:["name","type","uid","description","export_type"]},plugins:[{ptype:"cellediting",clicksToEdit:!0}],columns:[{text:"Name",dataIndex:"name",flex:1},{text:"Desc",flex:1,dataIndex:"description",editor:{allowBlank:!0}},{text:"Export As",flex:1,dataIndex:"export_type",editor:{allowBlank:!1}},{text:"Type",dataIndex:"type",width:50},{xtype:"actioncolumn",width:30,items:[{iconCls:"icon-grid-delete",tooltip:"Delete item",handler:function(e,t,a){e.store.getAt(t);e.store.removeAt(t)}}]}]},{xtype:"displayfield",value:"* For DOCX template, export as options could be docx / pdf / html / field (For Template)."}]}]}]}],buttons:[{text:IRm$.r1("B_CONFIRM"),handler:function(){this._confirm()},scope:this},{text:IRm$.r1("B_CANCEL"),handler:function(){this.close()},scope:this}],listeners:{afterrender:function(e){this.init_f()}}}),IG$.exportWizard.superclass.initComponent.apply(this,arguments)}});
IG$.statistics=$s.extend($s.window,{modal:!0,region:"center",layout:{type:"fit",align:"stretch"},closable:!1,resizable:!1,width:500,height:440,_init:function(){var s,e,a,i,t,n,r,l,o,p,d=this.mresults,m=d&&d.results?d.results:null,c=this.down("[name=mainpanel]"),y=$(c.el.dom);if(y.empty(),y.css({"overflow-y":"scroll"}),m)for(n=0;n<m.length;n++)if(e=$("<div class='idv-br-stable'></div>").appendTo(y),s=m[n].statistics)for(r=0;r<s.length;r++)if(s[r]){if(t="",o=s[r].colindex+m[n].colfix,p=m[n]._tabledata,0<m[n].rowfix)for(l=0;l<m[n].rowfix;l++)t+=" "+(p[l][o].text||p[l][o].code);$("<span>Column "+o+"</span>&nbsp;&nbsp;: &nbsp;<span class='idv-br-stable-blue'>"+t+"</span><br>").appendTo(e),a=$("<table></table>").appendTo(e),$.each([{rname:"S_AVG",key:"average"},{rname:"S_STDERR",key:"stderr"},{rname:"S_MEDIAN",key:"median"},{rname:"S_STDEV",key:"stdev"},{rname:"S_VAR",key:"variance"},{rname:"S_KURT",key:"kurtosis"},{rname:"S_SKEW",key:"skewness"},{rname:"S_RAN",key:"ranges"},{rname:"S_MIN",key:"min"},{rname:"S_MAX",key:"max"},{rname:"S_SUM",key:"sum"},{rname:"S_COUNT",key:"count"}],function(e,t){var n=s[r][t.key];""!=n&&null!=n&&void 0!==n||(n="N/A"),i=$("<tr></tr>").appendTo(a),th=$("<td>"+IRm$.r1(t.rname)+"</td>").appendTo(i),th=$("<td>"+n+"</td>").appendTo(i)})}},initComponent:function(){this.title=IRm$.r1("T_STATISTICS");$s.apply(this,{padding:10,items:[{xtype:"panel",layout:{type:"vbox",align:"stretch"},padding:10,items:[{xtype:"panel",name:"mainpanel",border:1,flex:1,autoScroll:!1,html:"",listeners:{resize:function(e){$(e.el.dom).css({"overflow-y":"scroll"})}}}]}],buttons:[{text:IRm$.r1("B_CLOSE"),handler:function(){this.close()},scope:this}],listeners:{afterrender:function(e){this._init()}}}),IG$.statistics.superclass.initComponent.apply(this,arguments)}});
IG$.sortOptionDlg=$s.extend($s.window,{modal:!0,region:"center",layout:{type:"fit",align:"stretch"},closable:!1,resizable:!1,width:580,height:440,_confirm:function(){this.commit_f(),this.callback&&this.callback.execute(),this.close()},init_f:function(){var e,t,o,r=this,a=r.sheetoption.model,s=a.sortoption||{},n=a.rows,i=a.measures,d=[],l=[],m=r.down("[name=sortpartition]"),c=r.down("[name=sortmeasure]"),u=r.down("[name=sortbyvalue]"),p=s.sortorder||[],h=r.down("[name=mgrid_src]"),b=r.down("[name=mgrid_tgt]"),g=[],f=[];for(d.push({name:IRm$.r1("B_DEFAULT"),uid:"",type:"",nodepath:""}),e=0;e<n.length;e++)d.push({name:n[e].name,uid:n[e].uid,type:n[e].type,nodepath:n[e].nodepath}),g.push({name:n[e].name,uid:n[e].uid,type:n[e].type,nodepath:n[e].nodepath,sortorder:n[e].sortorder||"",memo:"NUMBER"==n[e].memo||"VARCHAR"==n[e].memo?n[e].memo:"",numeric:"NUMBER"==n[e].memo,sorder:"asc"==n[e].sortorder?IRm$.r1("B_ASC"):"desc"==n[e].sortorder?IRm$.r1("B_DSC"):""});for(l.push({name:IRm$.r1("B_DEFAULT"),uid:"",type:"",nodepath:""}),e=0;e<i.length;e++)l.push({name:i[e].name,uid:i[e].uid,type:i[e].type,nodepath:i[e].nodepath});for(t=0;t<p.length;t++)for(e=g.length-1;0<=e;e--)if(g[e].uid==p[t].uid){(o=g[e]).sortorder=p[t].sortorder||"",o.sorder="asc"==o.sortorder?IRm$.r1("B_ASC"):"desc"==o.sortorder?IRm$.r1("B_DSC"):"",o.memo=p[t].datatype||"",o.numeric="NUMBER"==o.memo,f.push(o),g.splice(e,1);break}m.store.loadData(d),c.store.loadData(l),h.store.loadData(g),b.store.loadData(f),r.down("[name=sortmethod]").setValue({sm:s.sortmethod||"normal"}),r.down("[name=showlastrank]").setValue(s.showlastrank),r.down("[name=sortcount]").setValue(s.sortcount||5),c.setValue(s.sortmeasure),m.setValue(s.sortpartition),u.setValue(s.sortbyvalue)},changeSortMethod:function(){var e=this.down("[name=sortmethod]").getValue().sm,t=this.down("[name=rankfield]"),o=this.down("[name=customfield]");switch(e){case"normal":t.setVisible(!1),o.setVisible(!1);break;case"custom":t.setVisible(!1),o.setVisible(!0);break;case"top":case"bottom":t.setVisible(!0),o.setVisible(!1)}},commit_f:function(){for(var e,t,o,r=this,a=r.sheetoption.model,s=r.down("[name=mgrid_tgt]").store,n=a.rows,i=[],d=a.sortoption={},l=0;l<s.data.items.length;l++)for(t=(e=s.data.items[l]).get("uid"),o=0;o<n.length;o++)if(n[o].uid==t){switch(e.get("sorder")){case IRm$.r1("B_ASC"):n[o].sortorder="asc";break;case IRm$.r1("B_DSC"):n[o].sortorder="desc";break;default:n[o].sortorder=null}1==e.get("numeric")?n[o].memo="NUMBER":n[o].memo="VARCHAR",i.push({uid:n[o].uid,name:n[o].name,datatype:n[o].memo,sortorder:n[o].sortorder});break}d.sortorder=i,d.sortmethod=r.down("[name=sortmethod]").getValue().sm,d.showlastrank=r.down("[name=showlastrank]").getValue(),d.sortcount=r.down("[name=sortcount]").getValue(),d.sortmeasure=r.down("[name=sortmeasure]").getValue(),d.sortpartition=r.down("[name=sortpartition]").getValue(),d.sortbyvalue=r.down("[name=sortbyvalue]").getValue()},moveSelections:function(e){var t,o,r=this.down("[name=mgrid_"+(1==e?"src":"tgt")+"]"),a=this.down("[name=mgrid_"+(1==e?"tgt":"src")+"]"),s=r.getSelectionModel().selected;if(s&&s.length)for(t=0;t<s.length;t++)o=s.items[t],r.store.remove(o),a.store.add(o)},changeOrder:function(e){var t,o,r=this.down("[name=mgrid_tgt]"),a=r.getSelectionModel(),s=a.selected;s&&1==s.length&&(o=s.items[0],t=r.store.indexOf(o),-1==e?0<t&&(r.store.remove(o),o=r.store.insert(t-1,o),a.select(o,!0)):t+1<r.store.data.items.length&&(r.store.remove(o),o=r.store.insert(t+1,o),a.select(o,!0)))},initComponent:function(){this.title=IRm$.r1("L_SORT_OPTION");var a=this;$s.apply(this,{defaults:{bodyStyle:"padding:10px"},items:[{xtype:"panel",bodyBorder:!1,autoScroll:!0,layout:{type:"vbox",align:"stretch"},defaults:{anchor:"100%"},fieldDefaults:{labelWidth:160},items:[{xtype:"radiogroup",name:"sortmethod",fieldLabel:IRm$.r1("L_SORT_SEL"),columns:1,labelWidth:100,vertical:!0,items:[{boxLabel:IRm$.r1("B_DEFAULT"),name:"sm",inputValue:"normal"},{boxLabel:IRm$.r1("B_CUSTOM"),name:"sm",inputValue:"custom"},{boxLabel:IRm$.r1("L_RANK_TOP"),name:"sm",inputValue:"top"},{boxLabel:IRm$.r1("L_RANK_BOTTOM"),name:"sm",inputValue:"bottom"}],listeners:{change:function(e,t,o,r){a.changeSortMethod.call(a)}}},{xtype:"fieldset",name:"rankfield",border:0,hidden:!0,flex:1,fieldDefaults:{labelWidth:100},items:[{name:"sortcount",xtype:"numberfield",fieldLabel:IRm$.r1("L_RNK_CNT")},{name:"showlastrank",xtype:"checkbox",fieldLabel:IRm$.r1("L_RNK_LST")},{name:"sortmeasure",fieldLabel:IRm$.r1("L_RNK_VAL"),xtype:"combobox",queryMode:"local",displayField:"name",valueField:"uid",editable:!1,autoSelect:!0,store:{fields:["name","uid","type","nodepath"]}},{name:"sortpartition",fieldLabel:IRm$.r1("L_RNK_PAR"),xtype:"combobox",queryMode:"local",displayField:"name",valueField:"uid",editable:!1,autoSelect:!0,store:{fields:["name","uid","type","nodepath"]}},{name:"sortbyvalue",fieldLabel:IRm$.r1("L_RNK_SVAL"),xtype:"checkbox"}]},{xtype:"panel",name:"customfield",hidden:!0,border:0,flex:1,layout:{type:"hbox",align:"stretch"},items:[{xtype:"fieldset",flex:1,title:IRm$.r1("L_SORT_SRC"),layout:"fit",items:[{name:"mgrid_src",flex:1,xtype:"gridpanel",stateful:!0,$h:240,border:1,store:{fields:["name","uid","type","sortorder","sorder","memo","nodepath"]},selType:"checkboxmodel",selModel:{checkSelector:".x-grid-cell"},viewConfig:{plugins:{ptype:"gridviewdragdrop",dragGroup:"gridDDGroup",dropGroup:"gridDDGroup"}},columns:[{header:IRm$.r1("B_NAME"),dataIndex:"name",sortable:!1,hideable:!1,flex:1},{header:IRm$.r1("B_TYPE"),dataIndex:"type",hidden:!0,sortable:!1,hideable:!1,flex:1}]}]},{xtype:"container",layout:{type:"vbox",align:"stretch",pack:"center",padding:5},items:[{xtype:"container",flex:1},{xtype:"button",iconCls:"ig-btn-dblright",handler:function(){this.moveSelections(1)},scope:this},{xtype:"button",iconCls:"ig-btn-dblleft",handler:function(){this.moveSelections(2)},scope:this},{xtype:"container",flex:1}]},{xtype:"fieldset",flex:1,layout:{type:"hbox",align:"stretch"},title:IRm$.r1("L_SORT_ORD"),items:[{name:"mgrid_tgt",xtype:"gridpanel",stateful:!0,$h:240,flex:1,selType:"checkboxmodel",selModel:{checkSelector:".x-grid-cell"},store:{fields:["name","uid","type","nodepath","sortorder","sorder","memo","numeric"]},viewConfig:{plugins:{ptype:"gridviewdragdrop",dragGroup:"gridDDGroup",dropGroup:"gridDDGroup"}},plugins:[{ptype:"cellediting",clicksToEdit:1}],seltype:"cellmodel",columns:[{header:IRm$.r1("B_NAME"),dataIndex:"name",sortable:!1,hideable:!1,flex:1},{header:IRm$.r1("B_TYPE"),dataIndex:"type",hidden:!0,sortable:!1,hideable:!1,flex:1},{header:IRm$.r1("B_METHOD"),dataIndex:"sorder",sortable:!1,hideable:!1,width:60},{header:IRm$.r1("B_NUMERIC"),xtype:"checkcolumn",dataIndex:"numeric",sortable:!1,hideable:!1,width:50}],listeners:{cellclick:function(e,t,o,r,a,s,n,i){if(3==o)switch(r.get("sorder")){case"":r.set("sorder",IRm$.r1("B_ASC"));break;case IRm$.r1("B_ASC"):r.set("sorder",IRm$.r1("B_DSC"));break;case IRm$.r1("B_DSC"):r.set("sorder","")}}}},{xtype:"container",layout:{type:"vbox",align:"stretch",pack:"center",padding:2},items:[{xtype:"container",flex:1},{xtype:"button",iconCls:"ig-btn-up",handler:function(){this.changeOrder(-1)},scope:this},{xtype:"button",iconCls:"ig-btn-down",handler:function(){this.changeOrder(1)},scope:this},{xtype:"container",flex:1}]}]}]}]}],buttons:[{text:IRm$.r1("B_CONFIRM"),handler:function(){this._confirm()},scope:this},{text:IRm$.r1("B_CANCEL"),handler:function(){this.close()},scope:this}],listeners:{afterrender:function(e){this.init_f()}}}),IG$.sortOptionDlg.superclass.initComponent.apply(this,arguments)}});
IG$.filterMainEditor=$s.extend($s.panel,{layout:"fit",busy:!1,reportoption:null,sheetoption:null,confirmFilterSetting:function(){var i,e,n,o=this,t=o.rootnode;o.sheetoption&&(e=(i=o.sheetoption.model).filter,n=i.havingfilter,i.filter={ftype:"group",children:[]},i.havingfilter={ftype:"group",children:[]},(e||n)&&(e&&(i.filter.auth=e.auth,i.filter.active=e.active),n&&(i.havingfilter.auth=n.auth,i.havingfilter.active=n.active)),$.each(t.children,function(e,n){var t=null;"WHERE"==n.condition?t=i.filter:"HAVING"==n.condition&&(t=i.havingfilter),0<n.children.length&&$.each(n.children,function(e,n){o.updateFilterChanges.call(o,t,n)})}))},updateFilterChanges:function(e,n){var t,i,o=this;"group"==n.nodetype?((t={ftype:"group",children:[]}).name=n.name,t.conjunction=n.conjunction,e.children.push(t),n.children.length&&$.each(n.children,function(e,n){o.updateFilterChanges.call(o,t,n)})):"condition"==n.nodetype&&((i=n.filternode.model).ftype="condition",i.conjunction=i.conjunction||"AND",e.children.push(i))},getGroupRenderer:function(e,n,t){var i,o,r,l=$("<div class='filterbtn'></div>"),c=this,d=$("<div class='filterbtnitem icon-addfilter-group' title='Add SubGroup'>&nbsp;</div>"),a=(n.pid,$("<span>"+n.name+"</span>")),h=$("<input type='text'></input>"),p=$("<div class='filter-header'></div>"),s=!1;if(0<t.children.length){for(o=0;o<t.children.length;o++)if("group"==t.children[o].nodetype){s=!0;break}s&&(n.cblk=$("<div class='filter-condition filter-conjunction'>"+(n.conjunction||"AND")+"</div>").appendTo(t.htmlgrp),n.cblk.bind("click",function(){"OR"==n.conjunction?n.conjunction="AND":n.conjunction="OR",n.cblk.text(n.conjunction)}))}n.html=$("<div class='filter-block'><div class='filter-block-cnt'></div></div>"),r=$(".filter-block-cnt",n.html),n.html.appendTo(t.htmlgrp),r.append(p),p.append(a),h.css({width:80,display:"none"}),p.append(h),p.append(l),l.append(d),n.html.draggable({revert:!0,handle:p,create:function(e,n){},drag:function(e,n){},start:function(e,n){},stop:function(e,n){}}),n.fnameeditor=h,(n.fnamefield=a).bind("click",function(){c.editName.call(c,n)}),h.bind("keypress",function(e){13==e.keyCode&&c.endEditName.call(c,n)}),d.bind("click",function(){0<n.children.length&&c.appendGroup.call(c,e,n)});var f=$("<div class='filterbtnitem icon-addfilter-cond' title='Add Condition'>&nbsp;</div>");l.append(f),f.bind("click",function(){c.appendCondition.call(c,e,n)});var u=$("<div class='filterbtnitem icon-filter-remove' title='Delete Condition'>&nbsp;</div>");l.append(u),u.bind("click",function(){c.deleteItem.call(c,n,t)}),n.htmlcond=$("<div class='filtercond'></div>"),i=$("<ul class='filtergroup'></ul>"),n.htmlgrp=$("<li></li>").appendTo(i),r.append(n.htmlcond),r.append(i)},getCondRenderer:function(e,l,c){var d=this,n=$("<div class='filterbtn'></div>");l.html=$("<li></li>"),c.htmlcond.append(l.html),l.html.append($("<div class='filter-conjunction'></div>"));var t=$("<div class='filtereditbtn'>"+l.name+"</div>");l.html.append(t);var i=$(".filter-conjunction",l.html);i.text(l.filternode.model.conjunction||"AND"),i.bind("click",function(){"OR"==l.filternode.model.conjunction?l.filternode.model.conjunction="AND":l.filternode.model.conjunction="OR",i.text(l.filternode.model.conjunction)}),t.draggable({containment:e,helper:"clone",create:function(e,n){},drag:function(e,n){},start:function(e,n){},stop:function(e,n){var t,i=[n.offset.left,n.offset.top],o=d.rootnode,r=d.hitBoundary(o,i);if(r&&"group"==r.nodetype){for(t=0;t<c.children.length;t++)if(c.children[t]==l){c.children.splice(t,1);break}r.children.push(l),r.htmlcond.append(l.html)}}}),(l.deschtml=t).bind("click",function(){d.editItem.call(d,l)}),l.html.append(n);var o=$("<div class='filterbtnitem icon-filter-remove' title='Delete Condition'>&nbsp;</div>");n.append(o),o.bind("click",function(){d.deleteItem.call(d,l,c)})},editName:function(e){var n=e.fnameeditor,t=e.fnamefield;t.css({display:"none"}),n[0].value=e.name,n.css({display:"inline",width:IG$.j$ext._w(t)||100})},endEditName:function(e){var n=e.fnameeditor,t=e.fnamefield,i=n[0].value;n.css({display:"none"}),t.css({display:"inline"}),e.name=i,t.text(e.name),this._refreshFilter()},appendGroup:function(e,n){var t={name:"Conditions",nodetype:"group",unode:n,children:[],filternode:null};return this.getGroupRenderer(e,t,n),n.children.push(t),this._refreshFilter(),t},appendCondition:function(e,n,t){var i,o=this,r=new IG$.clFilter(null),l=o.reportoption,c=o.sheetoption;c&&c.model&&c.model.cube_object?i=c.model.cube_object.uid:l&&l.cube_objects&&0<l.cube_objects.length&&(i=l.cube_objects[0].uid),r.operator=6;var d=new IG$.filterEditor({filteritem:r,reportoption:o.reportoption,targetitem:t,cubeuid:i,callback:new IG$.callBackObj(o,o.rs_appendCondition,[n,r,e])});IG$.checkLogin(this,d)},editItem:function(e){var n,t=this,i=t.sheetoption&&t.sheetoption.datasource?t.sheetoption.datasource.uid:null;e&&(n=new IG$.filterEditor({filteritem:e.filternode,reportoption:t.reportoption,cubeuid:i,callback:new IG$.callBackObj(t,t.rs_editCondition,[e,e.filternode])}),IG$.checkLogin(this,n))},rs_editCondition:function(e){var n,t=e[0],i=e[1];t&&(n=i.getDesc(),t.name=n,t.deschtml.text(t.name)),this._refreshFilter()},deleteItem:function(e,n){var t,i=0;if(e){for(t=0;t<n.children.length;t++)if(n.children[t]==e){n.children.splice(t,1);break}if(e.cblk&&e.cblk.remove(),e.cblk=null,e.html.remove(),0<n.children.length)for(t=0;t<n.children.length;t++)"group"==n.children[t].nodetype&&(0==i&&(n.children[t].cblk&&n.children[t].cblk.remove(),n.children[t].cblk=null),i++)}this._refreshFilter()},rs_appendCondition:function(e){var n,t=e[0],i=e[1],o=e[2];t&&(n={unode:t,name:i.getDesc(),nodetype:"condition",filternode:i},this.getCondRenderer(o,n,t),t.children.push(n)),this._refreshFilter()},_init:function(){var h=this,e=h.sheetoption,p=e?e.model:null;h.filterview=h.down("[name=filterview]");var s=$(".igc-filter-el",h.filterview.body.dom);$(s).empty(),h.rootnode={},h.rootnode_w={},h.rootnode_h={},p&&(p.filter||(p.filter={ftype:"group",children:[]}),p.havingfilter||(p.havingfilter={ftype:"group",children:[]}),h.rootnode={name:"Conditions",nodetype:"rootgroup",children:[]},h.rootnode_w={name:"WHERE",nodetype:"rootgroup",condition:"WHERE",children:[]},h.rootnode_h={name:"HAVING",condition:"HAVING",nodetype:"rootgroup",children:[]},h.rootnode.children.push(h.rootnode_w),h.rootnode.children.push(h.rootnode_h),$.each(h.rootnode.children,function(e,t){var n,i,o=$("<div class='filter-root'></div>"),r=$("<div class='filterbtn'></div>"),l=p.filter,c=p.havingfilter,d=$("<div class='filterbtnitem icon-addfilter-group' title='Add SubGroup'>&nbsp;</div>");if(o.appendTo(s),(n=t).html=$("<div class='filtercontainer'><div class='filter-header'><span class='filtertitle'>"+t.name+"</span></div></div>"),d.appendTo(r),$(".filter-header",n.html).append(r),i=$("<ul class='filtergroup'></ul>"),n.htmlgrp=$("<li></li>").appendTo(i),n.html.append(i),n.html.appendTo(o),d.bind("click",function(){h.appendGroup.call(h,o,t)}),"WHERE"==t.condition){if(l&&l.children&&l.children.length){if("condition"==l.children[0].ftype){var a={ftype:"group",name:"Conditions",active:!0,children:[]};for(e=0;e<l.children.length;e++)a.children.push(l.children[e]);l.children=[a]}$.each(l.children,function(e,n){h.makeFilterData.call(h,o,t,n)})}}else if("HAVING"==t.condition&&c&&c.children&&c.children.length){if("condition"==c.children[0].ftype){a={ftype:"group",name:"Conditions",active:!0,children:[]};for(e=0;e<c.children.length;e++)a.children.push(c.children[e]);c.children=[a]}$.each(c.children,function(e,n){h.makeFilterData.call(h,o,t,n)})}}),h.targetitem&&setTimeout(function(){h.in$l.call(h)},400))},in$l:function(){var e,n=this,t=n.sheetoption.filter,i=n.rootnode_w,o=n.targetitem,r=null;(e=t.findItem.call(t,o.uid))?n.editItem.call(n,e.id):(r=0<t.subGroups.length?i.children[0]:n.appendGroup(n.rootnode_w),n.appendCondition(r,o)),n._refreshFilter()},makeFilterData:function(t,e,n){var i,o,r=this;n.children&&1<n.children.length?e.htmlgrp.addClass("filter-multi-cond"):e.htmlgrp.removeClass("filter-multi-cond"),"condition"==n.ftype?(i=new IG$.clFilter(n),o={pnode:e,name:i.getDesc(),nodetype:"condition",filternode:i},r.getCondRenderer.call(r,t,o,e),e.htmlcond.append(o.html),e.children.push(o)):(o={name:n.name||"SubGroup",pnode:e,children:[],nodetype:"group",filternode:n},r.getGroupRenderer.call(r,t,o,e),e.children.push(o),n.children&&n.children.length&&$.each(n.children,function(e,n){r.makeFilterData.call(r,t,o,n)})),r._refreshFilter()},make_dropzone:function(o){var r=this;r.dropZone=$s.create($s.dropzone,o,{ddGroup:"_I$RD_G_",nodeouttimer:-1,getTargetFromEvent:function(e){return o},onNodeEnter:function(e,n,t,i){var o,r=!1;i.records&&0<i.records.length&&("Metric"!=(o=i.records[0].get("type"))&&"CustomMetric"!=o&&"Measure"!=o&&"FormulaMeasure"!=o||(r=!0)),this.accept=r},onNodeOut:function(e,n,t,i){},onNodeOver:function(e,n,t,i){var o=1==this.accept;return 1==this.accept&&(i.records&&0<i.records.length?i.records[0].data:i.cellData,t.xy),o},onNodeDrop:function(e,n,t,i){return 1==this.accept&&(i.records&&0<i.records.length?(dt=i.records[0],t.xy&&r.processFilterDrop.call(r,o,dt,o,t.xy)):dt=i.cellData),!(this.accept=!1)}})},hitBoundary:function(e,n){for(var t,i,o,r=0;r<e.children.length;r++)if((i=(t=e.children[r].html).offset()).left<n[0]&&n[0]<i.left+IG$.j$ext._w(t)&&i.top<n[1]&&n[1]<i.top+IG$.j$ext._h(t)){o=e.children[r],sobj=this.hitBoundary(e.children[r],n),sobj&&(o=sobj);break}return o},processFilterDrop:function(e,n,t,i){var o,r,l=this.rootnode,c=this.hitBoundary(l,i);if(c){var d={};for(d.uid=n.get("uid"),d.name=n.get("name"),d.type=n.get("type"),d.contentfullpath=n.get("contentfullpath"),d.itemtype=d.type,o=c.unode;o;){if("rootgroup"==o.nodetype){r=o.condition;break}o=o.unode}if("Measure"!=d.type&&"FormulaMeasure"!=d.type&&"HAVING"==r)return;this.appendCondition(e,c,d)}this._refreshFilter()},render:function(){var e=this.down("[name=filterview]").body.dom;this.make_dropzone(e)},set_count:function(t){var i=this;i.count_seq=0,$.each(i.rootnode.children,function(e,n){"WHERE"==n.condition&&i.update_count.call(i,n,t)})},update_count:function(e,n){for(var t,i=0;i<e.length;i++)"group"==(t=e[i]).nodetype&&(n.length>me.count_seq&&n[me.count_seq],me.count_seq++,t.children&&t.children.length&&me.update_count(t.children,n))},_refreshFilter:function(){var e=this.rootnode;e&&(0<e.children.length&&this._refFltSec(e.children[0],0),1<e.children.length&&this._refFltSec(e.children[1],0))},_refFltSec:function(e,o){var r,l=this;e.children&&e.children.length&&(r=e.children.length,$.each(e.children,function(e,n){var t=0,i=$(".filter-conjunction",n.html);1<r&&0<e&&(t=1),i[t?"show":"hide"](),l._refFltSec(n,o+1)}))},initComponent:function(){$s.apply(this,{items:[{html:"<div class='igc-filter-el'></div>",name:"filterview",flex:1,autoScroll:!0}],listeners:{afterrender:function(){this.render()},resize:function(){}}}),IG$.filterMainEditor.superclass.initComponent.apply(this,arguments)}}),IG$.filterEditorWindow=$s.extend($s.window,{title:"Filter",modal:!0,layout:"fit",closable:!1,resizable:!1,width:500,height:400,confirmFilterSetting:function(){var e=this;e.mainpanel.confirmFilterSetting.call(e.mainpanel),e.callback&&e.callback.execute(e.sheetoption),e.close()},initComponent:function(){var n=this;n.mainpanel=new IG$.filterMainEditor({reportoption:n.reportoption,sheetoption:n.sheetoption,targetitem:n.targetitem}),$s.apply(n,{defaults:{bodyStyle:"padding:10px"},items:[this.mainpanel],buttons:["->",{text:IRm$.r1("B_CONFIRM"),handler:function(){this.confirmFilterSetting()},scope:this},{text:IRm$.r1("B_CANCEL"),handler:function(){this.close()},scope:this}],listeners:{afterrender:function(e){n.mainpanel._init()}}}),IG$.filterEditorWindow.superclass.initComponent.apply(this,arguments)}});
IG$.objectAuth=$s.extend($s.window,{modal:!0,region:"center",layout:"fit",closable:!1,resizable:!1,width:500,height:400,_confirm:function(){this.updateAuthConfig()},updateAuthConfig:function(){var t,e,a,i=this,n=new IG$._rpc$,d=!1,s=i.down("[name=updateall]"),o=i.down("[name=datagridview]").store.data.items;for(0==s.hidden&&1==s.getValue()&&(d=!0),t={option:"update",updateall:d,auths:[]},e=0;e<o.length;e++)a=o[e].data,t.auths.push({sid:a.sid,readable:a.readable,writable:a.writable,manage:a.manage});n.init(i,{ack:"authcontent",payload:{uid:this.uid,type:this.itemtype},mbody:t,meta_type:"auth_req"},i,i.rs_updateAuthConfig,null),n.send()},rs_updateAuthConfig:function(t){var e=this;IG$.alertmsg(ig$.appname,IRm$.r1("M_SUCCESS"),null,e,0,"success"),e.callback&&e.callback.execute(),e.close()},init_f:function(){var t,e;this.uid&&(t=this,(e=new IG$._rpc$).init(t,{ack:"authcontent",payload:{uid:this.uid,type:this.itemtype},mbody:{option:"standard"}},t,t.rs__getAuthInfo,null),e.send())},rs__getAuthInfo:function(t){var e,a,i;for(this.dataset=[],e=0;e<t.length;e++){switch((a=t[e]).dutytype){case"A":i="Default";break;case"C":i="Custom";break;case"G":i="Group";break;case"U":i="User";break;default:i="Unknown"}a.dutytype_d=i,"A"==a.dutytype&&"admins"==a.name.toLowerCase()||this.dataset.push(a)}this.down("[name=datagridview]").store.loadData(this.dataset)},initComponent:function(){var t=this.itemtype.toLowerCase(),e="folder"==t||"userdb"==t;this.title=IRm$.r1("T_OBJECT_AUTH"),$s.apply(this,{items:[{xtype:"panel",layout:{type:"vbox",align:"stretch"},border:!1,bodyPadding:10,items:[{xtype:"displayfield",value:IRm$.r1("L_AU_TITLE")},{xtype:"gridpanel",name:"datagridview",store:{fields:["name","readable","writable","manage","uid","nodepath","type","sid","dutytype_d","dutytype"]},flex:1,columns:[{text:"Name",flex:1,sortable:!1,dataIndex:"name"},{text:"Type",width:60,dataIndex:"dutytype_d"},{xtype:"checkcolumn",text:"Read",width:50,sortable:!1,dataIndex:"readable",editor:{xtype:"checkbox"}},{xtype:"checkcolumn",text:"Write",width:50,sortable:!1,dataIndex:"writable",editor:{xtype:"checkbox"}}]},{name:"updateall",fieldLabel:IRm$.r1("B_OPTION"),xtype:"checkbox",boxLabel:IRm$.r1("L_AU_APPLY_SUB"),checked:!1,hidden:!e}]}],buttons:[{text:IRm$.r1("L_SUBSCRIBE"),hidden:ig$.features.ig_n_osubscr,handler:function(){var t=this,e=new IG$.objectSubscribe({uid:t.uid,itemtype:t.itemtype});IG$.checkLogin(t,e)},scope:this},"->",{text:IRm$.r1("B_CONFIRM"),handler:function(){this._confirm()},scope:this},{text:IRm$.r1("B_CANCEL"),handler:function(){this.close()},scope:this}],listeners:{afterrender:function(t){this.init_f()}}}),IG$.objectAuth.superclass.initComponent.apply(this,arguments)}});
IG$.objectSubscribe=$s.extend($s.window,{modal:!0,region:"center",layout:"fit",closable:!1,resizable:!1,width:500,height:400,_confirm:function(){this.updateAuthConfig()},updateAuthConfig:function(){var t,e,i,a=this,n=new IG$._rpc$,s=!1,d=a.down("[name=updateall]"),o=a.down("[name=datagridview]").store.data.items;for(0==d.hidden&&1==d.getValue()&&(s=!0),t={option:"update_subscript",updateall:s,auths:[]},e=0;e<o.length;e++)i=o[e].data,t.auths.push({mtu:i.mtu,scid:i.scid,shared:1==i.shared});n.init(a,{ack:"authcontent",payload:{uid:this.uid,type:this.itemtype},mbody:t,meta_type:"auth_req"},a,a.rs_updateAuthConfig,null),n.send()},rs_updateAuthConfig:function(t){var e=this;IG$.alertmsg(ig$.appname,IRm$.r1("M_SUCCESS"),null,e,0,"success"),e.callback&&e.callback.execute(),e.close()},init_f:function(){var t,e;this.uid&&(t=this,(e=new IG$._rpc$).init(t,{ack:"authcontent",payload:{uid:t.uid,type:t.itemtype},mbody:{option:"subscription"}},t,function(t){for(var e=0;e<t.length;e++)t[e].shared=t[e].scid&&0<t[e].scid.length;this.dataset=t,this.down("[name=datagridview]").store.loadData(this.dataset)},null),e.send())},initComponent:function(){var t=this,e=t.itemtype.toLowerCase(),i="folder"==e||"userdb"==e;t.title=IRm$.r1("T_SUBSCR_AUTH"),$s.apply(t,{items:[{xtype:"panel",layout:{type:"vbox",align:"stretch"},border:!1,padding:10,items:[{xtype:"displayfield",value:IRm$.r1("L_AU_TITLE")},{xtype:"gridpanel",name:"datagridview",store:{fields:[]},flex:1,columns:[{text:"Tenant",flex:1,dataIndex:"mtname"},{xtype:"checkcolumn",text:"Shared",width:50,sortable:!1,dataIndex:"shared",editor:{xtype:"checkbox"}}]},{name:"updateall",fieldLabel:IRm$.r1("B_OPTION"),xtype:"checkbox",boxLabel:IRm$.r1("L_AU_APPLY_SUB"),checked:!1,hidden:!i}]}],buttons:[{text:IRm$.r1("B_CONFIRM"),handler:function(){this._confirm()},scope:this},{text:IRm$.r1("B_CANCEL"),handler:function(){this.close()},scope:this}],listeners:{afterrender:function(t){this.init_f()}}}),IG$.objectSubscribe.superclass.initComponent.apply(this,arguments)}});
IG$.workspace_switcher=$s.extend($s.window,{modal:!0,region:"center",layout:"fit",closable:!1,resizable:!1,width:380,autoHeight:!0,loadMTS:function(){var e=this,t=e.down("[name=mkw]"),n=new IG$._rpc$;n.init(e,{ack:"usercontent",payload:{address:"/tenants",action:"get",keyword:t.getValue()},mbody:{option:"select"}},e,function(e){var t,n,s=[];if(e)for(t=0;t<e.length;t++)"1"!=(n=e[t]).status&&"A"!=n.status||s.push(n);this.down("[name=mtsgrd]").store.loadData(s)},!1),n.send()},confirm:function(){var e=this,a=e.down("[name=mtsgrd]").getSelectionModel().selected;a&&a.length?IG$.confirmMessages(IRm$.r1("B_CONFIRM"),IRm$.r1("L_SWA_CFM"),function(e){var t,n,s;"yes"==e&&(n=(t=a.items[0]).get("uid"),t.get("name"),-1<(s=document.location.href).indexOf("?")&&(s=s.substring(0,s.indexOf("?"))),s=s+"?lang="+(window.useLocale||"en_US")+"&mts="+n,document.location.href=s)},e,e):IG$.alertmsg(ig$.appname,IRm$.r1("E_SWA_CFM"),null,null,0,"error")},initComponent:function(){$s.apply(this,{title:IRm$.r1("L_SW_APP"),items:[{xtype:"panel",bodyPadding:10,layout:{type:"vbox",align:"stretch"},items:[{xtype:"container",layout:"hbox",items:[{xtype:"textfield",labelAlign:"right",fieldLabel:"Search",name:"mkw",labelWidth:60,width:200,enableKeyEvents:!0,listeners:{keyup:function(e,t,n){13==t.keyCode&&this.loadMTS()},scope:this}},{xtype:"button",text:"..",handler:function(){this.loadMTS()},scope:this}]},{xtype:"gridpanel",hideHeaders:!0,name:"mtsgrd",height:150,store:{xtype:"store",fields:["name","uid"]},selType:"checkboxmodel",selModel:{checkSelector:".x-grid-cell",mode:"SINGLE"},columns:[{text:"Name",dataIndex:"name",flex:1}]}]}],buttons:[{text:IRm$.r1("B_CONFIRM"),handler:function(){this.confirm()},scope:this},{text:IRm$.r1("B_CANCEL"),handler:function(){this.close()},scope:this}]}),IG$.workspace_switcher.superclass.initComponent.apply(this,arguments)}}),IG$.passwordMgr=$s.extend($s.window,{modal:!0,region:"center",layout:{type:"vbox",align:"stretch"},closable:!1,resizable:!1,width:380,height:200,parentnodepath:null,itemtype:null,parentuid:null,callback:null,processChangePasswd:function(){var e=this,t=new IG$._rpc$;t.init(e,{ack:"security",payload:{},mbody:{}},e,e.rs_getSecureKey,null),t.send()},rs_getSecureKey:function(e){e&&(p1=e.p1,p2=e.p2,p1&&p2&&(IG$.rsaPublicKeyModules=p1,IG$.rsaPublicKeyExpoenent=p2,this.postSecurityKey.call(this)))},postSecurityKey:function(){var e,t,n=this,s=n.inputpanel,a=s.down("[name=oldpasswd]").getValue(),l=s.down("[name=newpasswd1]").getValue();l==s.down("[name=newpasswd2]").getValue()?(a=(e=IG$.encryptKey([a,l]))[0],l=e[1],(t=new IG$._rpc$).init(n,{ack:"usercontent",payload:{address:"/user"},mbody:{option:"changepassword",password:l,oldpassword:a}},n,n.rs_processChangePasswd,null),t.send()):IG$.alertmsg(ig$.appname,"Password is not match with confirm value",null,null,1,"error")},rs_processChangePasswd:function(e){var t=this;t.callback&&t.callback.execute(),t.close()},initComponent:function(){this.title=IRm$.r1("T_PASSWORD_CHANGE"),$s.apply(this,{defaults:{bodyStyle:"padding:10px"},items:[{html:IRm$.r1("L_PWD_LABEL"),flex:1,border:0},{xtype:"panel",name:"passwordform",defaultType:"textfield",fieldDefaults:{labelWidth:150,anchor:"100%"},layout:"anchor",items:[{name:"oldpasswd",fieldLabel:IRm$.r1("L_PWD_OLD"),xtype:"textfield",inputType:"password",allowblack:!1,labelWidth:150},{name:"newpasswd1",fieldLabel:IRm$.r1("L_PWD_NEW"),xtype:"textfield",inputType:"password",allowblack:!1,labelWidth:150},{name:"newpasswd2",fieldLabel:IRm$.r1("L_PWD_CONFIRM"),xtype:"textfield",inputType:"password",allowblack:!1,labelWidth:150}]}],buttons:[{text:IRm$.r1("B_CONFIRM"),handler:function(){this.processChangePasswd()},scope:this},{text:IRm$.r1("B_CANCEL"),handler:function(){this.close()},scope:this}],listeners:{afterrender:function(e){e.inputpanel=e.down("[name=passwordform]")}}}),IG$.passwordMgr.superclass.initComponent.apply(this,arguments)}});
IG$.userpref=$s.extend($s.window,{modal:!0,layout:"fit",closable:!0,resizable:!1,width:500,autoHeight:!0,_confirm:function(){var e=this,a=new IG$._rpc$,t=e.getFormatString();grdtz=e.down("[name=grdtz]"),dtz=e.dtz,e.tzloaded&&0<grdtz.getSelectionModel().selected.length&&(dtz=grdtz.getSelectionModel().selected.items[0].get("id")),a.init(e,{ack:"usercontent",payload:{address:"/user"},mbody:{option:"_gu_",uid:e.uuid,dtz:dtz,dfrm:t,a1:e.down("[name=a1]").getValue(),a2:e.down("[name=a2]").getValue()}},e,function(e){this.close()}),a.send()},loadConfig:function(){var e=this,a=new IG$._rpc$,t=e.uuid||IG$.dlgLogin.logininfo.sid;e.uuid=t,a.init(e,{ack:"usercontent",payload:{address:"/user"},mbody:{option:"_gi_",uid:t,tmpl:IG$.__ep?"sys_print_mode":""}},e,e.rs_loadConfig),a.send()},rs_loadConfig:function(e){var a=this,t=e.userdetail,l=(l=t?t.dfrm:"").replace(/\\&apos;/g,"'");$s.defaults(a,{dzt:t.dtz,a1:t.a1,a2:t.a2}),a.down("[name=a1]").setValue(a.a1),a.down("[name=a1]").setValue(a.a2),a.updateForm(l)},updateForm:function(e){var a,t,l,n,d=this,o=d.down("[name=f_order]"),i=d.down("[name=f_year]"),m=d.down("[name=f_month]"),s=d.down("[name=f_day]"),r=d.down("[name=f_ampm]"),u=(d.down("[name=f_timezone]"),d.down("[name=f_datesep]")),f=d.down("[name=f_timesep]"),_=d.down("[name=f_wkday]"),y=d.down("[name=f_weekday]"),c=d.down("[name=f_wkdayod]"),p=e.indexOf("y"),b=e.indexOf("M"),x=e.indexOf("d");x<b&&b<p?(a="DMY",l=b):p<b&&b<x?(a="YMD",l=b):b<x&&x<p&&(a="MDY",l=x),t=e.charAt(l-1),u.setValue(t),o.setValue(a||"YMD"),n=e.substring(p,e.lastIndexOf("y")+1),0<p&&"'"==e.charAt(p-1)&&(n="''"+n),i.setValue(n),m.setValue(e.substring(b,e.lastIndexOf("M")+1)),s.setValue(e.substring(x,e.lastIndexOf("d")+1)),a=-1<(p=e.indexOf("E"))?e.substring(p,e.lastIndexOf("E")+1):"EEEE",y.setValue(a),0==p&&c.setValue(!0),_.setValue(-1<p),p=e.indexOf("a"),r.setValue(-1<p),t=e.charAt(e.indexOf("m")-1),f.setValue(t)},loadTimeZone:function(){var e=this,a=new IG$._rpc$;a.init(e,{ack:"helpcontent",payload:{},mbody:{option:"timezone"}},e,e.rs_loadTimeZone),a.send()},rs_loadTimeZone:function(e){var a,t,l=this,n=[],d=l.down("[name=grdtz]"),o=l.down("[name=a1]"),i=(l.down("[name=a2]"),e?e.timezone:null);if(i)for(a=0;a<i.length;a++)(t=i[a]).oh=t.offset/36e5;if(i=e?e.app_tmpl:null,n.push({name:"Select",value:""}),i)for(a=0;a<i.length;a++)"sys_"==(t=i[a]).name.substring(0,4)?i.splice(a,1):n.push(t);for(o.store.loadData(n),o.setValue(l.a1||""),l.tzloaded=!0,d.store.loadData(e.timezone),a=0;a<d.store.data.items.length;a++)if((t=d.store.data.items[a]).get("id")==l.dtz){d.getSelectionModel().select(t);break}},getFormatString:function(){var e,a=this,t=a.down("[name=f_order]"),l=a.down("[name=f_year]"),n=a.down("[name=f_month]"),d=a.down("[name=f_day]"),o=a.down("[name=f_ampm]"),i=a.down("[name=f_timezone]"),m=a.down("[name=f_datesep]"),s=a.down("[name=f_timesep]"),r=a.down("[name=f_wkday]"),u=a.down("[name=f_weekday]"),f=a.down("[name=f_wkdayod]"),_=l.getValue(),y=n.getValue(),c=d.getValue(),p=o.getValue()?"hh":"HH";switch(t.getValue()){case"DMY":e=[c,y,_];break;case"YMD":e=[_,y,c];break;case"MDY":e=[y,c,_]}return e=e.join(m.getValue()),r.getValue()&&(e=f.getValue()?u.getValue()+" "+e:e+" "+u.getValue()),e+=" "+[p,"mm","ss"].join(s.getValue()),e+=o.getValue()?" a":"",e+=i.getValue()?", z":""},initComponent:function(){var e=this;e.title=IRm$.r1("L_PREFERENCES"),$s.apply(this,{items:[{xtype:"tabpanel",minHeight:400,minTabWidth:120,deferredRender:!1,defaults:{bodyPadding:10},items:[{xtype:"form",title:IRm$.r1("L_DATE_FORMAT"),deferredRender:!1,layout:"anchor",items:[{xtype:"combobox",queryMode:"local",editable:!1,fieldLabel:IRm$.r1("L_DF_OS"),name:"f_order",valueField:"value",displayField:"name",store:{xtype:"store",fields:["name","value"],data:[{name:"Day Month Year",value:"DMY"},{name:"Year Month Day",value:"YMD"},{name:"Month Day Year",value:"MDY"}]}},{xtype:"combobox",queryMode:"local",editable:!1,fieldLabel:IRm$.r1("L_DF_YF"),name:"f_year",valueField:"value",displayField:"name",store:{xtype:"store",fields:["name","value"],data:[{name:"2009",value:"yyyy"},{name:"09",value:"yy"},{name:"'09",value:"''yy"}]}},{xtype:"combobox",queryMode:"local",editable:!1,name:"f_month",fieldLabel:IRm$.r1("L_DF_MF"),valueField:"value",displayField:"name",store:{xtype:"store",fields:["name","value"],data:[{name:"1",value:"M"},{name:"01",value:"MM"},{name:"January",value:"MMMMM"},{name:"Jan",value:"MMM"}]}},{xtype:"combobox",queryMode:"local",editable:!1,name:"f_day",fieldLabel:IRm$.r1("L_DF_DF"),valueField:"value",displayField:"name",store:{xtype:"store",fields:["name","value"],data:[{name:"1",value:"d"},{name:"01",value:"dd"}]}},{xtype:"combobox",queryMode:"local",editable:!1,name:"f_weekday",fieldLabel:IRm$.r1("L_DF_WF"),valueField:"value",displayField:"name",store:{xtype:"store",fields:["name","value"],data:[{name:"Monday",value:"EEEE"},{name:"Mon",value:"EEE"},{name:"Mo",value:"EE"},{name:"M",value:"E"}]}},{xtype:"fieldset",title:IRm$.r1("L_OPTIONS"),items:[{xtype:"checkbox",fieldLabel:IRm$.r1("L_DF_APM"),name:"f_ampm",boxLabel:IRm$.r1("B_SHOW")},{xtype:"checkbox",fieldLabel:IRm$.r1("L_DF_WD"),name:"f_wkday",boxLabel:IRm$.r1("B_SHOW")},{xtype:"checkbox",fieldLabel:IRm$.r1("L_DF_WD_O"),name:"f_wkdayod",boxLabel:IRm$.r1("L_SHOW_FIRST")},{xtype:"checkbox",fieldLabel:"checkbox",name:"f_timezone",fieldLabel:IRm$.r1("L_TIMEZONE"),boxLabel:IRm$.r1("L_SHOW_TZ")},{xtype:"combobox",queryMode:"local",fieldLabel:IRm$.r1("L_DF_DS"),name:"f_datesep",editable:!1,valueField:"value",displayField:"name",store:{xtype:"store",fields:["name","value"],data:[{name:". (dot)",value:"."},{name:": (colon)",value:":"},{name:", (comma)",value:","},{name:"- (hypen)",value:"-"},{name:"/ (slash)",value:"/"},{name:"  (non)",value:""}]}},{xtype:"combobox",queryMode:"local",fieldLabel:IRm$.r1("L_DF_TS"),name:"f_timesep",editable:!1,valueField:"value",displayField:"name",store:{xtype:"store",fields:["name","value"],data:[{name:": (colon)",value:":"},{name:". (dot)",value:"."},{name:", (comma)",value:","},{name:"- (hypen)",value:"-"},{name:"  (non)",value:""}]}}]}]},{xtype:"form",title:IRm$.r1("L_TIMEZONE"),deferredRender:!1,layout:"fit",items:[{xtype:"gridpanel",name:"grdtz",maxHeight:380,selType:"checkboxmodel",selModel:{checkSelector:".x-grid-cell",mode:"SINGLE"},store:{xtype:"store",fields:["name","offset","id","oh","select"]},columns:[{text:"Id",dataIndex:"id",flex:1},{text:IRm$.r1("B_NAME"),dataIndex:"name",flex:1},{text:IRm$.r1("L_TZ_OFFSET"),dataIndex:"oh"}]}],listeners:{afterrender:function(){e.loadTimeZone.call(e)}}},{xtype:"form",title:IRm$.r1("L_APPL"),deferredRender:!1,layout:"anchor",items:[{xtype:"combobox",name:"a1",fieldLabel:IRm$.r1("L_APPL_TMPL"),labelWidth:120,queryMode:"local",editable:!1,valueField:"value",displayField:"name",store:{xtype:"store",fields:["name","value"]}},{xtype:"combobox",name:"a2",fieldLabel:IRm$.r1("L_APPL_THEME"),labelWidth:120,queryMode:"local",editable:!1,valueField:"value",displayField:"name",store:{xtype:"store",fields:["name","value"]}}]}]}],buttons:[{text:IRm$.r1("B_CONFIRM"),handler:function(){this._confirm()},scope:this},{text:IRm$.r1("B_CLOSE"),handler:function(){this.close()},scope:this}]}),IG$.userpref.superclass.initComponent.call(this)},listeners:{afterrender:function(e){e.loadConfig()}}});
IG$.formulas={t_sum:{name:"t_sum",title:"Subtotal",expr:"SUM",grp:"aggr"},t_avg:{name:"t_avg",title:"Average",expr:"AVG",grp:"aggr"},t_min:{name:"t_min",title:"Minimum",expr:"MIN",grp:"aggr"},t_max:{name:"t_max",title:"Maximum",expr:"MAX",grp:"grp"},t_pot:{name:"t_pot",title:"Percent of total",usecolumnformat:!1,formatstring:"#,##0.00 %",expr:"PERCENT_OF_TOTAL",grp:"pcnt"},t_cumul:{name:"t_cumul",title:"Cumulative Percentage",usecolumnformat:!1,formatstring:"#,##0.00 %",expr:"CUMUL_PERCENT",grp:"pcnt"},t_incr:{name:"t_incr",title:"Incremental",expr:"INCR",grp:"pcnt"},t_diff:{name:"t_diff",title:"Difference",expr:"DIFF",grp:"pcnt"},t_rank:{name:"t_rank",title:"Ranking",expr:"RANK",grp:"pcnt"},t_stdev:{name:"t_stdev",title:"Standard Deviation",expr:"STDEV",grp:"stat",usecolumnformat:!1,formatstring:"#,##0.00"},t_stdevp:{name:"t_stdevp",title:"Standard Deviation P",expr:"STDEVP",grp:"stat",usecolumnformat:!1,formatstring:"#,##0.00"},t_percentile:{name:"t_percentile",title:"Percentile",expr:"PERCENTILE",grp:"stat",params:[{name:"k",type:"float"}],usecolumnformat:!1,formatstring:"#,##0.00"},t_percentile_exe:{name:"t_percentile_exe",title:"Percentile Excel",expr:"PERCENTILE_EXE",grp:"stat",params:[{name:"k",type:"float"}],usecolumnformat:!1,formatstring:"#,##0.00"}},IG$.dlgFormulaSelector=$s.extend($s.window,{modal:!0,region:"center",layout:"fit",closable:!1,resizable:!0,width:650,height:440,sheetindex:-1,init_f:function(){var e,t=this,i=[],a=t.down("[name=grddata]"),l=t.down("[name=grddata_sel]"),n=[],o=IG$.formulas,r=(t.sheetoption,t.formulas),s=t.uitem;if(s){for($.each(o,function(e,t){var a=IG$.copyObject(t);i.push(a)}),a.store.loadData(i),e=0;e<r.length;e++)r[e].baseuid==s.uid&&n.push(r[e]);l.store.loadData(n)}},_confirm:function(){var e,t=this,a=t.down("[name=grddata_sel]").store,l=t.sheetoption,n=[];if(l.si=l.si||0,!t._lprop||t.confirmProperty()){for(i=0;i<a.data.items.length;i++)(e=a.data.items[i].data).fid="formula_"+l.si++,n.push(e);t.__dloaded=!1,t.callback&&t.callback.execute(n),t.close()}},addFormula:function(e){var t,a,i,l,n,o,r=this,s=r.down("[name=grddata]"),m=r.down("[name=grddata_sel]"),d=r.sheetoption,c=IG$.formulas,p=[];for(d.si=d.si||0,a=0;a<e.length;a++)l={title:(t=e.items[a]).get("title"),expression:t.get("expr"),baseuid:r.uitem.uid},o=t.get("name"),l.direction="vertical",l.formatstring="",l.stylename=null,l.separatecolumn=!0,l.subtotalbase=null,l.usecolumnformat=!0,l.showtoprow=!1,l.groupresults=!1,l.fid="formula_"+d.si++,(n=c[o])&&(void 0!==n.usecolumnformat&&(l.usecolumnformat=n.usecolumnformat),void 0!==n.formatstring&&(l.formatstring=n.formatstring)),i=m.store.add(l),p.push(i);p.length&&r.configItem(p[p.length-1]),s.clearSelection()},configItem:function(e){var t=this,a=new IG$.dlgFormulaConfig({rec:e,sheetoption:t.sheetoption,uitem:t.uitem});IG$.checkLogin(t,a)},initComponent:function(){var t=this;t.title=IRm$.r1("T_FM_SEL"),IG$.apply(this,{items:[{xtype:"container",padding:10,layout:{type:"vbox",align:"stretch"},items:[{xtype:"displayfield",height:20,value:IRm$.r1("L_DYN_SELECT")},{xtype:"container",layout:{type:"hbox",align:"stretch"},flex:1,items:[{xtype:"container",layout:{type:"vbox",align:"stretch"},width:300,items:[{xtype:"combobox",fieldLabel:"Formula Group",displayField:"name",valueField:"value",store:{xtype:"store",fields:["name","value"],data:[{name:"All Formula",value:""},{name:"Mostly used",value:"aggr"},{name:"Percentage",value:"pcnt"},{name:"Statistics",value:"stat"}]},listeners:{change:function(e){var t=e.getValue(),a=this.down("[name=grddata]");t?a.store.filter("grp",t):a.store.clearFilter()},scope:this}},{xtype:"gridpanel",name:"grddata",store:{xtype:"store",fields:["sel","name","title","expr"]},selType:"checkboxmodel",selModel:{checkSelector:".x-grid-cell"},flex:1,columns:[{text:"Name",dataIndex:"title",flex:1}]}]},{xtype:"container",width:30,padding:3,layout:{type:"vbox",align:"middle"},items:[{xtype:"container",flex:1},{xtype:"button",text:" > ",height:25,handler:function(){var e=this.down("[name=grddata]").getSelectionModel().selected;this.addFormula(e)},scope:this},{xtype:"container",flex:1}]},{xtype:"panel",border:0,layout:{type:"vbox",align:"stretch"},title:IRm$.r1("L_DYN_SELECT"),flex:1,items:[{xtype:"container",flex:1,layout:{type:"vbox",align:"stretch"},items:[{xtype:"gridpanel",name:"grddata_sel",selType:"checkboxmodel",selModel:{checkSelector:".x-grid-cell"},store:{xtype:"store",fields:["sel","name","title","baseuid","direction","stylename","expression","type","fid","formatstring","showtoprow","groupresults","quart","k"]},flex:1,columns:[{text:"Title",dataIndex:"title",flex:1},{text:"Expression",dataIndex:"expression",width:120},{xtype:"actioncolumn",width:70,items:[{iconCls:"icon-grid-config",handler:function(e,t,a,i){this.configItem(i)},scope:this},{iconCls:"icon-grid-delete",handler:function(e,t,a,i){e.store.remove(i)},scope:this}]}]}]}]}]}]}],buttons:[{text:IRm$.r1("B_CONFIRM"),handler:function(){this._confirm()},scope:this},{text:IRm$.r1("B_CANCEL"),handler:function(){this.close()},scope:this}],listeners:{afterrender:function(e){t.init_f.call(t)}}}),IG$.dlgFormulaSelector.superclass.initComponent.apply(this,arguments)}}),IG$.dlgFormulaConfig=$s.extend($s.window,{modal:!0,region:"center",layout:"fit",closable:!1,resizable:!0,width:400,height:500,padding:10,callback:null,params:["title","showtoprow","groupresults","usecolumnformat","formatstring","direction","separatecolumn","expression","display_template"],configItem:function(a){var e,t,i,l=this,n=IG$.formulas,o=l.params,r=l.sheetoption;if($.each(n,function(e,t){if(t.expr==a.get("expression"))return!1}),"M_DATA"==r.model.dataquerymode){for(var s,m=[],d=l.down("[name=group_columns]"),c=a.get("group_columns")||[],p={},u=0;u<c.length;u++)p[c[u]]=1;for(u=0;u<r.model.rows.length;u++)(s=r.model.rows[u]).uid!=l.uitem.uid&&m.push({uid:s.uid,name:s.locale_name||s.name,title:s.title,selected:!!p[s.uid]});d.store.loadData(m)}for(u=0;u<o.length;u++)e=o[u],t=a.get(e),(i=l.down("[name="+e+"]"))&&i.setValue&&("display_template"==e&&(t=t||"{value}"),i.setValue(t))},confirmProperty:function(){var e,t,a,i,l,n=this,o=n.rec,r=n.params,s=[];if(r){for(i=0;i<r.length;i++){if(a=r[i],t=(e=n.down("[name="+a+"]")).getValue(),e.clearInvalid(),e.required&&!t)return e.markInvalid("Required Field"),0;o.set(a,t)}for(l=n.down("[name=group_columns]"),gsel=l.getSelectionModel().selected,i=0;i<gsel.length;i++)s.push(gsel.items[i].get("uid"));o.set("group_columns",s)}n.callback&&n.callback.execute(),n.close()},initComponent:function(){var e=IG$.formulas,i=[],t="M_DATA"==this.sheetoption.model.dataquerymode;$.each(e,function(e,t){var a=IG$.copyObject(t);i.push(a)}),IG$.apply(this,{title:IRm$.r1("T_FM_SEL_CONFIG"),items:[{xtype:"container",name:"_prop",padding:10,autoScroll:!0,layout:{type:"vbox",align:"stretch"},items:[{name:"title",fieldLabel:"Title",xtype:"textfield",required:1},{name:"expression",xtype:"combobox",fieldLabel:"Expression",valueField:"expr",displayField:"title",store:{fields:["name"],data:i}},{name:"display_template",fieldLabel:"Display template",hidden:t,xtype:"textfield"},{xtype:"checkbox",name:"showtoprow",fieldLabel:IRm$.r1("L_S_TROW")},{xtype:"checkbox",name:"groupresults",fieldLabel:IRm$.r1("L_S_GRST")},{xtype:"checkbox",name:"usecolumnformat",fieldLabel:" ",boxLabel:"Use Column Format"},{name:"formatstring",xtype:"textfield",fieldLabel:IRm$.r1("L_FORMAT")},{name:"direction",xtype:"combobox",hidden:t,fieldLabel:IRm$.r1("L_C_DIR"),displayField:"name",valueField:"value",store:{fields:["name","value"],data:[{name:IRm$.r1("L_VERTICAL"),value:"vertical"},{name:IRm$.r1("L_HORIZONTAL"),value:"horizontal"}]}},{name:"separatecolumn",xtype:"checkbox",hidden:t,fieldLabel:IRm$.r1("L_SEP_COL")},{xtype:"gridpanel",height:200,hidden:!t,name:"group_columns",selType:"checkboxmodel",selModel:{checkSelector:".x-grid-cell"},store:{},columns:[{text:IRm$.r1("B_NAME"),dataIndex:"name",flex:1}]}]}],buttons:[{text:IRm$.r1("B_CONFIRM"),handler:function(){this.confirmProperty()},scope:this},{text:IRm$.r1("B_CANCEL"),handler:function(){this.close()},scope:this}],listeners:{afterrender:function(e){this.configItem(this.rec)}}}),IG$.dlgFormulaConfig.superclass.initComponent.apply(this,arguments)}});
IG$.dynFilter=$s.extend($s.window,{modal:!0,region:"center",layout:"fit",closable:!1,resizable:!0,width:450,height:400,sheetoption:null,sheetindex:-1,callback:null,doSearch:function(){var e=this,t=e.filteritem,i=(t.model,t?t.data:null);i&&1e3==i.length||IG$._dofilter(e,"grddata",["value","disp","code","name"],e.down("[name=_filter]"))},init_f:function(){var e=this;if(i,hfilter=e.hfilter,item=e.filteritem,fmodel=item.model,item){if(item.validated&&item.data&&item.data.length)return void e._updGrid(item.data);if(!1===hfilter)return;e._reqData()}},_reqData:function(){var e,d=this;i,item=d.filteritem,fmodel=item.model,hfilter=d.hfilter,address=[],cnt={items:[]},itemtype=fmodel.type,"prompt"==itemtype?(item.validate=!0,item.data=[],fmodel.codemapping&&fmodel.codemapping.uid?(address.push({uid:fmodel.codemapping.uid,type:fmodel.type,rptid:fmodel.codemapping.uid}),cnt.items.push({uid:fmodel.codemapping.uid,cmap:fmodel.codemapping,hfilter:hfilter})):fmodel.pvalues&&(item.data=d.getPvalue(item),d.updateFilterValue(filteritems[i]))):(address.push({name:fmodel.name,uid:fmodel.uid,objtype:fmodel.objtype,nodepath:fmodel.nodepath,rptid:fmodel.uid}),cnt.items.push({uid:fmodel.uid,cmap:fmodel.codemapping,hfilter:hfilter})),address.length&&(e=new IG$._rpc$,cnt.option="ValueInfo",e.init(d,{ack:"olapservice",payload:address,mbody:cnt,meta_type:"valueinfo"},d,function(e){var t=IG$.parseValueList(e.value_results),i=[];t&&t.length&&(i=t[0].data),e.erroritems&&e.erroritems.length&&$.each(e.erroritems,function(e,t){IG$.ShowErrorMessage(t,d,null)}),item.validated=!0,item.data=i,d._updGrid(i)}),e.send())},_updGrid:function(e){var t,d,l=this.down("[name=grddata]"),a=[],o={},n=this.filteritem;n.model;if(l.store.loadData(e),(d=n.selection)&&0<d.length){for(i=0;i<d.length;i++)o[d[i].code]=d[i];for(i=0;i<l.store.data.items.length;i++)o[(t=l.store.data.items[i]).get("code")]&&a.push(t);l.select(a)}},_confirm:function(){var e=this,t=e.down("[name=grddata]").getSelectionModel().selected;e.__dloaded=!1,e.callback&&e.callback.execute(t),e.close()},initComponent:function(){var t=this,e=[],i=ig$.valueselect?ig$.valueselect.width:null;switch(t.title=IRm$.r1("T_DYN_SELECT"),t.smode=t.smode||"codevalue",t.smode){case"code":e.push({text:"Code",dataIndex:"code",flex:1});break;case"value":e.push({text:"Value",dataIndex:"disp",flex:1});break;case"valuecode":e.push({text:"Value",dataIndex:"disp",flex:1}),e.push({text:"Code",dataIndex:"code",flex:i?null:1,width:i||null});break;default:e.push({text:"Code",dataIndex:"code",flex:i?null:1,width:i||null}),e.push({text:"Value",dataIndex:"disp",flex:1})}$s.apply(this,{items:[{xtype:"container",padding:10,layout:{type:"vbox",align:"stretch"},items:[{xtype:"fieldset",layout:{type:"hbox",align:"stretch"},paddingY:20,items:[{xtype:"textfield",fieldLabel:"Search",name:"_filter",labelWidth:60,flex:1,enableKeyEvents:!0,listeners:{keyup:function(e,t){13==t.keyCode&&this.doSearch()},scope:this}},{xtype:"button",text:"..",handler:function(){this.doSearch()},scope:this}]},{xtype:"gridpanel",name:"grddata",selModel:t.selModel,flex:1,store:{xtype:"store",fields:["code","value"]},columns:e}]}],buttons:[{text:IRm$.r1("B_CONFIRM"),handler:function(){this._confirm()},scope:this},{text:IRm$.r1("B_CANCEL"),handler:function(){this.close()},scope:this}],listeners:{afterrender:function(e){t.init_f.call(t)}}}),IG$.dynFilter.superclass.initComponent.apply(this,arguments)}}),IG$.dynfilterFileLoader=$s.extend($s.window,{modal:!0,region:"center",layout:"fit",closable:!1,resizable:!0,width:450,height:400,sheetoption:null,sheetindex:-1,callback:null,init_f:function(){var e,t,i,d,l=this,a=[],o=l.down("[name=grddata]"),n=[],s={},r=l.filteritem,u=r.model;if(l.initOpts(),u&&u.uid&&((d=new IG$._rpc$).init(l,{ack:"helpcontent",payload:{uid:u.uid},mbody:{option:"ftables"}},l,function(e){e.item&&(r.__tbuid=e.item.uid,r.__tbuid&&(l.showColInfo(),l.loadHist(r.__tbuid)))}),d.send()),r&&r.data){for(e=0;e<r.data.length;e++)a.push({code:r.data[e].code,value:r.data[e].disp||r.data[e].code});if(o.store.loadData(a),(i=r.selection)&&0<i.length){for(e=0;e<i.length;e++)s[i[e].code]=i[e];for(e=0;e<o.store.data.items.length;e++)s[(t=o.store.data.items[e]).get("code")]&&n.push(t);o.select(n)}}},initOpts:function(){var r=this,e=r.down("[name=_m4]").body.dom,t=$("#fileupload",e),l=$("#d_progress",e);t.fileupload({url:ig$.servlet,dataType:"text",formData:{_mts_:IG$._g$a||""},done:function(e,t){var i,d,l,a,o=t.result||'<smsg errorcode="0xffff" errormsg="Server incorrect responding"/>',n=IG$.loadXML(o),s=[];if(IG$.getErrorCode(n))IG$.ShowErrorMessage(n,r,null);else if(i=IG$.XGetNode(n,"/smsg"))for(d=IG$.XGetChildNodes(i),l=0;l<d.length;l++)a=IG$.XGetAttrProp(d[l]),s.push(a);r.loadDataSet.call(r,s)},progressall:function(e,t){var i=parseInt(t.loaded/t.total*100,10),d=$(".bar",l);d.css("width",i+"%"),d.text("Loaded "+t.loaded+" / "+t.total)}}).bind("fileuploadsubmit",function(e,t){}),t.fileupload("option","url",ig$.servlet)},loadDataSet:function(e){var t,i;if(e){for(t=0;t<e.length;t++)"{ENC}"==(i=e[t]).filename.substring(0,"{ENC}".length)&&(i.filename=i.filename.substring("{ENC}".length),i.filename=Base64.decode(i.filename));e.length&&this.loadFileToTbl(e)}},loadFileToTbl:function(e){for(var t=this,i=new IG$._rpc$,d=[],l=t.filteritem,a=0;a<e.length;a++)d.push(e[a].uid);0!=d.length&&(!l||l&&!l.__tbuid||(i.init(t,{ack:"uploadcontent",payload:{tuid:l.__tbuid,uid:d.join(";")},mbody:{option:"loaddatacontent"}},t,function(e){t.loadColumnInfo()}),i.send()))},showColInfo:function(){var f=this,e=new IG$._rpc$,t=f.filteritem;t&&t.__tbuid&&(e.init(f,{ack:"tablecontent",payload:{uid:t.__tbuid,option:"StoredContent"},mbody:{option:"StoredContent"}},f,function(e){var t,i,d=IG$.XGetNode(e,"/smsg/item"),l=d?IG$.XGetNode(d,"objinfo"):null,a=d?IG$.XGetChildNodes(d,"Field"):null,o=l?IG$.XGetAttrProp(l):null,n=[],s=0,r=f.down("[name=_mt]"),u=[];if(a)for(t=0;t<a.length;t++)(i=IG$.XGetAttrProp(a[t])).name!=o.file_field&&i.name!=o.seq_field&&(i.seq=++s,u.push(i.name),n.push(i));r.setValue(u.join("\t"))},!1),e.send())},loadHist:function(e){var t=new IG$._rpc$,f=this.down("[name=grddata]");t.init(this,{ack:"helpcontent",payload:{uid:e,option:"ftable_hist"},mbody:{option:"ftable_hist"}},this,function(e){var t,i,d,l,a,o,n,s=IG$.XGetNode(e,"/smsg/item"),r=s?IG$.XGetChildNodes(s):null,u=(this.down("[name=m2]"),[]);if(r)for(t=0;t<r.length;t++){if(n=r[t],d=IG$.XGetAttrProp(n),l=IG$.XGetChildNodes(n))for(i=0;i<l.length;i++)a=IG$.XGetNodeName(l[i]),o=IG$.XGetTextVal(l[i]),d[a]=o;u.push(d)}f.store.loadData(u)}),t.send()},removeHist:function(e,t){var i=this,d=new IG$._rpc$;d.init(i,{ack:"helpcontent",payload:{uid:e.get("uid"),option:"ftable_rm"},mbody:{option:"ftable_rm"}},i,function(e){i.loadColumnInfo()}),d.send()},loadColumnInfo:function(){var e=this.filteritem;e&&e.__tbuid&&this.loadHist(e.__tbuid)},_confirm:function(){for(var e=this,t=e.down("[name=grddata]").getSelectionModel().selected,i=0;i<t.length;i++)t[i].set("code",t[i].get("uname")),t[i].set("value",t[i].get("fname"));e.__dloaded=!1,e.callback&&e.callback.execute(t),e.close()},initComponent:function(){var t=this;t.title=IRm$.r1("T_DYN_LFILE"),IG$.apply(this,{items:[{xtype:"container",padding:10,layout:{type:"vbox",align:"stretch"},items:[{xtype:"displayfield",height:20,value:IRm$.r1("L_DYN_LFILE")},{xtype:"container",html:"<div class='igc-o-dzone' id='_tb_f' style='padding:5px;'><input type='file' id='fileupload' name='files[]' data-url='upload' multiple></input><div class='file-progress' id='d_progress' style='height:20px;'><div class='bar' style='width: 0%;'></div></div></div>",name:"_m4",height:55},{xtype:"textarea",fieldLabel:"Headers",name:"_mt",height:60},{xtype:"gridpanel",name:"grddata",selModel:t.selModel,store:{xtype:"store",fields:["fname","sel","rowcount","uname","code","value"]},flex:1,columns:[{xtype:"checkcolumn",dataIndex:"sel",width:30},{text:"File name",dataIndex:"fname",flex:1},{text:"Rows",dataIndex:"rowcount",width:50}]}]}],buttons:[{text:IRm$.r1("B_CONFIRM"),handler:function(){this._confirm()},scope:this},{text:IRm$.r1("B_CANCEL"),handler:function(){this.close()},scope:this}],listeners:{afterrender:function(e){t.init_f.call(t)}}}),IG$.dynfilterFileLoader.superclass.initComponent.apply(this,arguments)}});
IG$.dynFilterDateConfig={data:[{name:"Today",value:"today"},{name:"Last 1 days",value:"last1day"},{name:"Last 2 days",value:"last2day"},{name:"Last 3 days",value:"last3day"},{name:"Last 4 days",value:"last4day"},{name:"Last 5 days",value:"last5day"},{name:"Last 6 days",value:"last6day"},{name:"Last 7 days",value:"last7day"},{name:"Last 8 days",value:"last8day"},{name:"Last 10 days",value:"last10day"},{name:"From monday",value:"frweek"},{name:"Last 15 days",value:"last15day"},{name:"Last 30 days",value:"last30day"},{name:"From 1st month",value:"frmon"},{name:"Last 1 month",value:"last1mon"},{name:"Last 2 month",value:"last2mon"},{name:"Last 6 month",value:"last6mon"},{name:"Last 1 year",value:"last1year"},{name:"Last 2 year",value:"last2year"},{name:"Last 3 year",value:"last3year"},{name:"Last 4 year",value:"last4year"},{name:"Last 5 year",value:"last5year"}],getValue:function(e,t,a,l){var i,o,n,s,d=new Date;if(0==t){if(-1<e.indexOf("last")){if(0<e.indexOf("day"))for(i=1;i<32;i++)if(e=="last"+i+"day"){d.setDate(d.getDate()-i),s=1;break}if(!s&&0<e.indexOf("mon"))for(i=1;i<13;i++)if(e=="last"+i+"mon"){d.setMonth(d.getMonth()-i),s=1;break}if(!s&&0<e.indexOf("year"))for(i=1;i<11;i++)if(e=="last"+i+"year"){d.setMonth(d.getMonth()-12*i),s=1;break}}if(!s)switch(e){case"today":break;case"frweek":startDay=0,d.setDate(d.getDate()-(7+d.getDay()-startDay)%7);break;case"frmon":d.setDate(1)}}return o=(o=d.getMonth()+1)<10?"0"+o:o,n=(n=d.getDate())<10?"0"+n:n,d.getFullYear(),l?""+d.getFullYear():a?d.getFullYear()+"-"+o:d.getFullYear()+"-"+o+"-"+n}},IG$.dynFilterView=function(e,t,a,l){var i=this;i.report=a,i.dzone=a?a.dzone:null,i.isdashboard=l,i.container=e,i.utimer=-1,i.sheetoption=t,i.reportoption=a.reportoption,i._minit(),i.updateValues=!0,i._fmax=0,i.dzone&&i.setDocZone(i.dzone)},IG$.dynFilterView.prototype={_rcs:[],_minit:function(){var e,t=this;t.reportoption&&((e=t.reportoption._mc).prompt_default_valueset=e.prompt_default_valueset||{},default_valuesets=e.prompt_default_valueset.default_valuesets=e.prompt_default_valueset.default_valuesets||{},t.prompt_valueset=default_valuesets[t.sheetoption.docid]=default_valuesets[t.sheetoption.docid]||[])},_sinit:function(){var i=this,e=i.sheetoption;i.filter_items=[],$.each(e.model.filter_items,function(e,t){var a,l=t.fuid;l&&(a=Number(l.substring(l.indexOf("_")+1)),i._fmax=Math.max(a,i._fmax)),i.filter_items.push({model:t})}),$.each(i.filter_items,function(e,t){t.model.fuid||(t.model.fuid="uid_"+ ++i._fmax)})},setDocZone:function(e){var t=this;!t.dzone&&e&&e.box&&(t.dzone=e,t.dzone.box.bind("updatecomplete",function(){t.updateViewSelector.call(t)}))},exportSheet:function(e){this.container.trigger("export_sheet",[this,{filetype:e}])},init_f:function(e){var t,o=this,a=o.sheetoption;$(o.container).empty(),o.contentarea=$("<div class='idv-filter-main'></div>").appendTo(o.container),o.splash=$("<div class='idv-dfilt-splash'></div>").appendTo(o.container).hide(),t=o.contentarea[0],a&&(a.model.filter_options=a.model.filter_options||{},o._sinit(),!o.isdashboard&&$s.dropzone&&(o.dropZone=$s.create($s.dropzone,t,{ddGroup:"_I$RD_G_",nodeouttimer:-1,getTargetFromEvent:function(e){e.browserEvent.pageX||e.browserEvent.clientX,e.browserEvent.pageY||e.browserEvent.clientY;return t},onNodeEnter:function(e,t,a,l){var i=!1,o=l.records;o&&0<o.length?(o[0].data.type.toLowerCase(),i=!0):l.cellData&&(l.cellData,i=!0),this.accept=i},onNodeOver:function(e,t,a,l){var i=this.accept,o=l.records;return 1==i&&(o&&0<o.length?o[0].data:l.cellData),i},onNodeDrop:function(e,t,a,l){var i=l.records;return 1==this.accept&&(dt=i&&0<i.length?i[0].data:l.cellData,o.appendFiltering.call(o,dt)),!(o.accept=!1)}})),setTimeout(function(){o.validateItems.call(o,void 0,e)},100))},removeObj:function(){},setSize:function(e,t){IG$.j$ext._w(this.contentarea,e),IG$.j$ext._h(this.contentarea,t),this.updateDisplay.call(this)},isPromptName:function(e){return e&&3<e.length&&"$"==e.charAt(0)&&"{"==e.charAt(1)&&"}"==e.charAt(e.length-1)?e=e.substring(2,e.length-1):0},getDefaultDate:function(dformat){var me=this,c=new Date,m,dy,dm,dd,op,opval,bp=0,promptname;if("object"==typeof dformat&&dformat.length&&dformat[0].code&&(dformat=dformat[0].code),dformat&&14==dformat.length&&IG$.isNumber(dformat))dy=dformat.substring(0,4),dm=dformat.substring(4,6),dd=dformat.substring(6,8),c=new Date(parseInt(dy),parseInt(dm)-1,parseInt(dd));else if(dformat&&8==dformat.length&&IG$.isNumber(dformat))dy=dformat.substring(0,4),dm=dformat.substring(4,6),dd=dformat.substring(6,8),c=new Date(parseInt(dy),parseInt(dm)-1,parseInt(dd));else if(dformat&&-1<dformat.indexOf("cdate"))dy=c.getFullYear(),dm=c.getMonth(),dd=c.getDate(),(-1<dformat.indexOf("-")||-1<dformat.indexOf("+"))&&(m=dformat.indexOf("-")||dformat.indexOf("+"),op=dformat.substring(m,m+1),opval=dformat.substring(m+1),op&&opval&&($.each(["y","m","d",""],function(e,t){if(!bp&&(-1<(m=t?opval.indexOf(t):-1)||""==t)){if(opval=-1<m?opval.substring(0,m):opval,opval=parseInt(opval))switch(t){case"y":dy="+"==op?dy+opval:dy-opval;break;case"m":dm="+"==op?dm+opval:dm-opval;break;default:dd="+"==op?dd+opval:dd-opval}bp=1}}),c=new Date(parseInt(dy),parseInt(dm),parseInt(dd))));else if(dformat&&me.isPromptName(dformat)){var pname=me.isPromptName(dformat);me._parameters&&me._parameters[pname]&&(dformat=me._parameters[pname].value,dformat&&8==dformat.length&&IG$.isNumber(dformat)&&(dy=dformat.substring(0,4),dm=dformat.substring(4,6),dd=dformat.substring(6,8),c=new Date(parseInt(dy),parseInt(dm)-1,parseInt(dd))))}else if(dformat)try{m=eval("(function() {\n"+dformat+"\n}())"),m&&(c=m)}catch(e){IG$.alertmsg(ig$.appname,IRm$.r1("M_DEF_DATE"),null,null,1,"error")}return c},getRangeLabel:function(e,t,a,l){var i,o=null,n="";return l&&e&&e.length>t&&e[t]&&(i=e[t],(2==a||1==a&&"_"==i.substring(0,1)||0==a&&"_"!=i.substring(0,1))&&(o={},1==a&&(i=i.substring(1)),(o.t=i)&&1<i.length&&"@"==i.charAt(0)&&(i=IRm$.r1(i),o.e=1),2!=a&&2!=l&&(n="<td class='igc-f-range-label-td'>"),n+="<span class='igc-f-range-label f-label_"+t+(a<2?"_"+a:"")+"'>"+i+"</span>",2!=a&&2!=l&&(n+="</td>"),o.d=n)),o},getRangeCol:function(e,t,a,l){var i="";return l&&e&&e.length>t&&e[t]&&(v=e[t],(2==a||1==a&&"_"==v.substring(0,1)||0==a&&"_"!=v.substring(0,1))&&(i="<col width='40px'></col>")),i},createFilterUI:function(d,e,t){var a,l,i,o,n,s,r,c,p=this,u=((p=this).parentUI,p.sheetoption.model.filter_options),f=u.f_viewtype||"",h=0,m=u.showbutton,v=(u.f_bx_enable,!m&&u.f_b_evt?1:0),_=((m&&u.f_b_trg?1:0)&&u.f_b_trg_all,d.model),b=_.showpopup,g=_.rangevalue,y=_.rangelabel,k=_.dateseltype,x=window.bowser;if(1!=p.__dx){switch(f){case"row":h=1;break;case"table":h=2}switch(y=y&&y.split("^"),d.objtype=_.objtype=_.objtype||"text",d.objtype){case"slider":i=_.s1a?Number(_.s1a):0,o=_.s1b?Number(_.s1b):100,n=_.s1c?Number(_.s1c):1,c=$("<div class='igc-slider'></div>").slider({orientation:"horizontal",range:!0,min:i,max:o,values:[i,o],step:n,create:function(e,t){p.updateSlideValue.call(p,this)},slide:function(e,t){var a=$(this).offset(),l=$(t.handle).offset().left-a.left;p.slideValueHandler.call(p,this,t,l)},change:function(e,t){1!=d.updateValues&&(p.updateSlideValue.call(p,this),p.updateHierarchy.call(p,d),m||v||p.updateFilterValues.call(p))},start:function(e,t){var a=$(this).offset();$(t.handle).offset().left,a.left;$("<div class='guide'></div>").appendTo(this)},stop:function(e,t){var a=$(this).children(".guide");a&&a.remove()}});break;case"combobox":1==b?(c=$("<div></div>"),$("<input type='text' class='idv-checkbox-inp'></input>").appendTo(c).css({float:"left"}),$("<div class='idv-btn-selected'></div>").appendTo(c).bind("click",function(e){var t;e.stopPropagation(),0!=(r=p.checkHFilter(d))&&(t=new IG$.dynFilter({selModel:{mode:"SINGLE",selType:"checkboxmodel",checkSelector:".x-grid-cell"},smode:d.smode,callback:new IG$.callBackObj(p,p.rs_checkPopup,d),filteritem:d,hfilter:r}),IG$.checkLogin(this,t))})):(c=$("<table class='idv-sel-combo"+(g?" idv-sel-rangevalue":"")+"'>"+p.getRangeCol(y,0,0,g)+"<col width='*'><col width='17px'>"+p.getRangeCol(y,0,1,g)+(g?"<col width='18px'>"+p.getRangeCol(y,2,0,g)+"<col width='*'><col width='17px'>"+p.getRangeCol(y,2,1,g):"")+"<tr></tr></table>"),V=$("tr",c),F=null,(T=p.getRangeLabel(y,0,0,g))&&(D=$(T.d).appendTo(V),T.e&&IG$._rrcs(p,T.t,$("span",D),1)),w=$("<td><input type='text' name='c_m1'/></td><td style='width:17px'><div class='idv-sel-combo-button'></div></td>").appendTo(V),(T=p.getRangeLabel(y,0,1,g))&&(D=$(T.d).appendTo(V),T.e&&IG$._rrcs(p,T.t,$("span",D),1)),g&&(T=p.getRangeLabel(y,1,2,g),L=$("<td class='igc-f-range-label-td'></td>").appendTo(V),T&&(D=$(T.d).appendTo(L),T.e&&IG$._rrcs(p,T.t,$("span",D),1)),(T=p.getRangeLabel(y,2,0,g))&&(D=$(T.d).appendTo(V),T.e&&IG$._rrcs(p,T.t,$("span",D),1)),F=$("<td><input type='text' name='c_m2'/></td><td style='width:17px'><div class='idv-sel-combo-button'></div></td>").appendTo(V),(T=p.getRangeLabel(y,2,1,g))&&(D=$(T.d).appendTo(V),T.e&&IG$._rrcs(p,T.t,$("span",D),1))),I=g?[w,F]:[w],$.each(I,function(n,e){var o=e,s=$("input[type=text]",o);s.__c=!0,s.bind("input",function(e){return e.stopPropagation(),e.stopImmediatePropagation(),e.preventDefault(),!1}),s.autocomplete({minLength:0,sortResults:!1,sortable:!1,source:function(e,t){var a=e.term,l=a.split(/,\s*/);d.sdp&&(a=l.pop(),t($.ui.autocomplete.filter(d.sdp,a)))},focus:function(e,t){return!1},select:function(e,t){var a=t.item;return a.value?(this.value=a.label,d._svalues=[{code:a.value,text:a.label}],o.trigger("change")):_.showallvalue&&(this.value="",o.trigger("change")),x.msie&&s.blur(),!1},open:function(e,t){s.__c=!1},close:function(e,t){s.__c=!1,setTimeout(function(){s.__c=!0,x.msie&&s.blur()},1200)}}),s.bind("keydown",function(e){if(event.keyCode===$.ui.keyCode.TAB)s.__c=!0,$(this).autocomplete("widget").menu.active&&e.preventDefault();else if(event.keyCode===$.ui.keyCode.ENTER){var t,a,l=0,i=s.val().toLowerCase();if(d.sdp&&d.sdp.length&&i)for(a=i.length,t=0;t<d.sdp.length;t++)if(d.sdp[t].label.substring(0,a).toLowerCase()==i){d._svalues=[{code:d.sdp[t].value,text:d.sdp[t].label}],s.val(d.sdp[t].label),o.trigger("change"),l=1;break}l&&(s.autocomplete("close"),s.__c=!0)}}),$(".idv-sel-combo-button",o).bind("click",function(e){e.stopImmediatePropagation(),e.stopPropagation(),e.preventDefault(),s.__c?(s.__c=!1,s.autocomplete("search",""),s.focus()):(s.__c=!0,s.autocomplete("close"))}),o.bind("change",function(){var e,t=!0,a="__pval"+n,l=s.val(),i="",o=s.attr("placeholder");if(d.sdp&&d.sdp.length)for(e=0;e<d.sdp.length;e++)if(!(o&&l==o||d.sdp[e].value!=l&&d.sdp[e].label!=l)){i={code:d.sdp[e].value,text:d.sdp[e].text||d.sdp[e].label}.code;break}d[a]==i&&(t=!1),t&&(d[a]=i,_.isnecessary&&d.u3[i?"removeClass":"addClass"]("df-title-error"),p.updateHierarchy.call(p,d),m||1==d.updateValues||v||p.updateFilterValues.call(p))})}));break;case"radiobox":(c=$("<select multiple='multiple'></select>").css({height:80})).bind("change",function(){p.updateHierarchy.call(p,d),m||1==d.updateValues||v||p.updateFilterValues.call(p)});break;case"checkbox":1==b?(c=$("<div></div>"),$("<input type='text' class='idv-checkbox-inp'></input>").appendTo(c).css({float:"left"}),$("<div class='idv-btn-selected'></div>").appendTo(c).bind("click",function(e){var t;e.stopPropagation(),0!=(r=p.checkHFilter(d))&&(t=new IG$.dynFilter({selModel:{mode:"MULTI",selType:"checkboxmodel",checkSelector:".x-grid-cell"},smode:d.smode,callback:new IG$.callBackObj(p,p.rs_checkPopup,d),filteritem:d,hfilter:r}),IG$.checkLogin(this,t))})):(c=$("<select multiple='multiple'></select>").css({height:80})).bind("change",function(){p.updateHierarchy.call(p,d),m||1==d.updateValues||v||p.updateFilterValues.call(p)});break;case"checkbuttons":c=$("<table class='idv-checkbuttons'><tr><td><ul></ul></td></tr></table>"),$("td",c).bind("checkboxchanged",function(e,t){t&&d._c_a1&&$("input[type='checkbox']",d._c_a1).is(":checked")&&!$("input[type='checkbox']",t.u2).is(":checked")&&$("input[type='checkbox']",d._c_a1).prop("checked",!1),p.updateHierarchy.call(p,d),m||1==d.updateValues||v||p.updateFilterValues.call(p)});break;case"radiobuttons":c=$("<table class='mec-radiobuttons'><tr><td><ul></ul></td></tr></table>"),$("td",c).bind("radioboxchanged",function(){p.updateHierarchy.call(p,d),m||v||p.updateFilterValues.call(p)});break;case"text":c=$("<table class='idv-sel-combo"+(g?" idv-sel-rangevalue":"")+"'>"+p.getRangeCol(y,0,0,g)+"<col width='*'>"+p.getRangeCol(y,0,1,g)+(g?"<col width='18px'>"+p.getRangeCol(y,2,0,g)+"<col width='*'>"+p.getRangeCol(y,2,1,g):"")+"<tr></tr></table>");var w,I,T,D,L,V=$("tr",c),F=null;(T=p.getRangeLabel(y,0,0,g))&&(D=$(T.d).appendTo(V),T.e&&IG$._rrcs(p,T.t,$("span",D),1)),w=$("<td><input type='text' name='c_m1'/></td>").appendTo(V),(T=p.getRangeLabel(y,0,1,g))&&(D=$(T.d).appendTo(V),T.e&&IG$._rrcs(p,T.t,$("span",D),1)),g&&((T=p.getRangeLabel(y,1,2,g))&&(L=$("<td class='igc-f-range-label-td'></td>").appendTo(V),D=$(T.d).appendTo(L),T.e&&IG$._rrcs(p,T.t,$("span",D),1)),(T=p.getRangeLabel(y,2,0,g))&&(D=$(T.d).appendTo(V),T.e&&IG$._rrcs(p,T.t,$("span",D),1)),F=$("<td><input type='text' name='c_m2'/></td>").appendTo(V),(T=p.getRangeLabel(y,2,1,g))&&(D=$(T.d).appendTo(V),T.e&&IG$._rrcs(p,T.t,$("span",D),1))),I=g?[w,F]:[w],$.each(w,function(e,t){$("input",t).bind("keyup",function(e){13==e.which&&p.updateHierarchy.call(p,d),13!=e.which||m||v||p.updateFilterValues.call(p)})}),_.initial_values&&_.initial_values.length&&($("[name=c_m1]",w).val(p.sheetoption.getDefaultValue.call(p.sheetoption,d,0)),p.updateHierarchy.call(p,d),m||v||p.updateHierarchy.call(p,d));break;case"fileupload":c=$("<div></div>"),$("<input type='text' class='idv-checkbox-inp'></input>").appendTo(c).css({float:"left"}),$("<div class='idv-btn-selected'></div>").appendTo(c).bind("click",function(e){e.stopPropagation();var t=new IG$.dynfilterFileLoader({smode:d.smode,callback:new IG$.callBackObj(p,p.rs_checkPopup,d),filteritem:d});IG$.checkLogin(this,t)});break;case"calendar":if(c=$("<table class='mec-dateperiod-box'></table>"),s=$("<tr></tr>").appendTo(c),"year"==k){P=$("<td></td>").appendTo(s),d.dt=$("<select class='mec-dateperiod-year'></select>").appendTo(P);var G=_.yearfrom||"cyear-5",C=_.yearto||"cyear";for(G=p.sheetoption.getYearField.call(p.sheetoption,G),C=p.sheetoption.getYearField.call(p.sheetoption,C),$("<option value=''>"+IRm$.r1("L_SELECT_VALUE")+"</option>").appendTo(d.dt),O=G;O<C+1;O++)$("<option value='"+O+"'>"+O+"</option>").appendTo(d.dt);if(_.initial_values&&_.initial_values.length){var R=$("option",d.dt),E=""+p.getDefaultDate(_.initial_values).getFullYear();for(O=0;O<R.length;O++)$(R[O]).val()==E&&$(R[O]).attr("selected","selected")}d.dt.bind("change",function(){p.updateHierarchy.call(p,d),m||v||p.updateFilterValues.call(p)})}else"month"==k?(l="yyyy-mm",P=$("<td></td>").appendTo(s),d.dt=$("<input class='mec-dateperiod-input' type='text' placeholder='"+IG$.calendar_locale.c2disp+"'></input>").monthpicker({constrainInput:!1,monthNames:$.datepicker._defaults.monthNamesShort,buttonImageOnly:!0,pattern:l,dateFormat:IG$.calendar_locale.c2format,onSelect:function(e,t){p.updateHierarchy.call(p,d),m||v||p.updateFilterValues.call(p)}}).appendTo(P),_.initial_values&&_.initial_values.length&&d.dt.monthpicker("setDate",p.getDefaultDate(_.initial_values)),P=$("<td></td>").appendTo(s),$("<div class='mec-dateperiod-button'>&nbsp;</div>").appendTo(P).bind("click",function(){d.dt.monthpicker("show")})):(P=$("<td></td>").appendTo(s),d.dt=$("<input class='mec-dateperiod-input' type='text' placeholder='"+IG$.calendar_locale.c1disp+"'></input>"),IG$.dateUtil.createDatePicker(p,d.dt,function(e,t){p.updateHierarchy.call(p,d),m||v||p.updateFilterValues.call(p)}).appendTo(P),_.initial_values&&_.initial_values.length&&d.dt.datepicker("setDate",p.getDefaultDate(_.initial_values)),P=$("<td></td>").appendTo(s),$("<div class='mec-dateperiod-button'>&nbsp;</div>").appendTo(P).bind("click",function(){d.dt.datepicker("show")}));break;case"calendarperiod":c=$("<div class='mec-dateperiod-box'></div>");var j=$("<div class='period1'></div>").appendTo(c),S=$("<div class='period2'></div>").appendTo(c),A=$("<select></select>").appendTo(j),N=!1,z=!1;if(A[_.showperiodselector?"show":"hide"](),"year"==k){N=!(z=!0),(T=p.getRangeLabel(y,0,0,2))&&(L=$("<div class='igc-f-range-label-td'></div>").appendTo(j),$(T.d).appendTo(L)),d.dt1=$("<select></select>").appendTo(j);G=_.yearfrom||"cyear-5",C=_.yearto||"cyear";for(G=p.sheetoption.getYearField.call(p.sheetoption,G),C=p.sheetoption.getYearField.call(p.sheetoption,C),$("<option value=''>"+IRm$.r1("L_SELECT_VALUE")+"</option>").appendTo(d.dt1),O=G;O<C+1;O++)$("<option value='"+O+"'>"+O+"</option>").appendTo(d.dt1);if(_.startdate){R=$("option",d.dt1),E=""+p.getDefaultDate(_.startdate).getFullYear();for(O=0;O<R.length;O++)$(R[O]).val()==E&&$(R[O]).attr("selected","selected")}d.dt1.bind("change",function(){p.updateHierarchy.call(p,d),m||v||p.updateFilterValues.call(p)}),(T=p.getRangeLabel(y,0,1,2))&&(L=$("<div class='igc-f-range-label-td'></div>").appendTo(j),$(T.d).appendTo(L))}else"month"==k?(z=!(N=!0),l="yyyy-mm",(T=p.getRangeLabel(y,0,0,2))&&(L=$("<div class='igc-f-range-label-td'></div>").appendTo(j),$(T.d).appendTo(L)),d.dt1=$("<input class='mec-dateperiod-input' type='text' placeholder='"+IG$.calendar_locale.c2disp+"'></input>").monthpicker({monthNames:$.datepicker._defaults.monthNamesShort,constrainInput:!1,buttonImageOnly:!0,pattern:l,dateFormat:IG$.calendar_locale.c2format,onSelect:function(e,t){p.updateHierarchy.call(p,d),m||v||p.updateFilterValues.call(p)}}).appendTo(j),_.startdate&&d.dt1.monthpicker("setDate",p.getDefaultDate(_.startdate)),$("<div class='mec-dateperiod-button'>&nbsp;</div>").appendTo(j).bind("click",function(){d.dt1.monthpicker("show")})):((T=p.getRangeLabel(y,0,0,2))&&(L=$("<div class='igc-f-range-label-td'></div>").appendTo(j),$(T.d).appendTo(L)),d.dt1=$("<input class='mec-dateperiod-input' type='text' placeholder='yyyy-mm-dd'></input>").appendTo(j),d.dt1.css({zIndex:100}),IG$.dateUtil.createDatePicker(p,d.dt1,function(e,t){d.dt1.datepicker("getDate")&&d.dt2.datepicker("getDate")&&(p.updateHierarchy.call(p,d),m||v||p.updateFilterValues.call(p))}),_.startdate&&d.dt1.datepicker("setDate",p.getDefaultDate(_.startdate)),$("<div class='mec-dateperiod-button'>&nbsp;</div>").appendTo(j).bind("click",function(){d.dt1.datepicker("show")})),(T=p.getRangeLabel(y,0,1,2))&&(L=$("<div class='igc-f-range-label-td'></div>").appendTo(j),$(T.d).appendTo(L));if((T=p.getRangeLabel(y,1,0,2))&&(L=$("<div class='igc-f-range-label-td'></div>").appendTo(j),$(T.d).appendTo(L)),"year"==k){(T=p.getRangeLabel(y,2,0,2))&&(L=$("<div class='igc-f-range-label-td'></div>").appendTo(S),$(T.d).appendTo(L)),N=!(z=!0),d.dt2=$("<select></select>").appendTo(S);var O,G=_.yearfrom||"cyear-5",C=_.yearto||"cyear";for(G=p.sheetoption.getYearField.call(p.sheetoption,G),C=p.sheetoption.getYearField.call(p.sheetoption,C),$("<option value=''>"+IRm$.r1("L_SELECT_VALUE")+"</option>").appendTo(d.dt2),O=G;O<C+1;O++)$("<option value='"+O+"'>"+O+"</option>").appendTo(d.dt2);if(_.enddate){R=$("option",d.dt2),E=""+p.getDefaultDate(_.enddate).getFullYear();for(O=0;O<R.length;O++)$(R[O]).val()==E&&$(R[O]).attr("selected","selected")}d.dt2.bind("change",function(){p.updateHierarchy.call(p,d),m||v||p.updateFilterValues.call(p)}),(T=p.getRangeLabel(y,2,1,2))&&(L=$("<div class='igc-f-range-label-td'></div>").appendTo(S),$(T.d).appendTo(L))}else"month"==k?(z=!(N=!0),l="yyyy-mm",(T=p.getRangeLabel(y,2,0,2))&&(L=$("<td class='igc-f-range-label-td'></td>").appendTo(S),$(T.d).appendTo(L)),d.dt2=$("<input class='mec-dateperiod-input' type='text' placeholder='"+IG$.calendar_locale.c2disp+"'></input>").monthpicker({constrainInput:!1,monthNames:$.datepicker._defaults.monthNamesShort,buttonImageOnly:!0,pattern:l,dateFormat:IG$.calendar_locale.c2format,onSelect:function(e,t){p.updateHierarchy.call(p,d),m||v||p.updateFilterValues.call(p)}}).appendTo(S),IG$.dateUtil.updateDatePicker(d.dt2),_.enddate&&d.dt2.monthpicker("setDate",p.getDefaultDate(_.enddate)),$("<div class='mec-dateperiod-button'>&nbsp;</div>").appendTo(S).bind("click",function(){d.dt2.monthpicker("show")}),(T=p.getRangeLabel(y,2,1,2))&&(L=$("<td class='igc-f-range-label-td'></td>").appendTo(S),$(T.d).appendTo(L))):(l="yyyy-mm-dd",(T=p.getRangeLabel(y,2,0,2))&&(L=$("<div class='igc-f-range-label-td'></div>").appendTo(S),$(T.d).appendTo(L)),d.dt2=$("<input class='mec-dateperiod-input' type='text' placeholder='"+l+"'></input>").appendTo(S),d.dt2.css({zIndex:100}),IG$.dateUtil.createDatePicker(p,d.dt2,function(e,t){d.dt1.datepicker("getDate")&&d.dt2.datepicker("getDate")&&(p.updateHierarchy.call(p,d),m||v||p.updateFilterValues.call(p))}).appendTo(S),_.enddate&&d.dt2.datepicker("setDate",p.getDefaultDate(_.enddate)),$("<div class='mec-dateperiod-button'>&nbsp;</div>").appendTo(S).bind("click",function(){d.dt2.datepicker("show")}),(T=p.getRangeLabel(y,2,1,2))&&(L=$("<div class='igc-f-range-label-td'></div>").appendTo(S),$(T.d).appendTo(L)));if(_.periodlist)for(a=0;a<_.periodlist.length;a++)if($("<option value='"+_.periodlist[a].value+"'"+(1==_.periodlist[a].isdefault?" selected":"")+">"+_.periodlist[a].name+"</option>").appendTo(A),1==_.periodlist[a].isdefault)if(1==z){R=$("option",d.dt1),E=IG$.dynFilterDateConfig.getValue(_.periodlist[a].value,0,N,z);for(O=0;O<R.length;O++)$(R[O]).val()==E&&$(R[O]).attr("selected","selected");R=$("option",d.dt2),E=IG$.dynFilterDateConfig.getValue(_.periodlist[a].value,1,N,z);for(O=0;O<R.length;O++)$(R[O]).val()==E&&$(R[O]).attr("selected","selected")}else{var H=IG$.dynFilterDateConfig.getValue(_.periodlist[a].value,0,N,z),M=IG$.dynFilterDateConfig.getValue(_.periodlist[a].value,1,N,z);d.dt1.val(H),d.dt2.val(M),N&&H&&M&&(H=(H=H.split("-")).join("")+"01",M=(M=M.split("-")).join("")+"01",d.dt1.monthpicker("setDate",p.getDefaultDate(H)),d.dt2.monthpicker("setDate",p.getDefaultDate(M)))}A.bind("change",function(){var e=$("option:selected",A).val();if(e){if(1==z){for(var t=$("option",d.dt1),a=IG$.dynFilterDateConfig.getValue(e,0,N,z),l=0;l<t.length;l++)$(t[l]).val()==a&&$(t[l]).attr("selected","selected");t=$("option",d.dt2),a=IG$.dynFilterDateConfig.getValue(e,1,N,z);for(l=0;l<t.length;l++)$(t[l]).val()==a&&$(t[l]).attr("selected","selected")}else d.dt1.val(IG$.dynFilterDateConfig.getValue(e,0)),d.dt2.val(IG$.dynFilterDateConfig.getValue(e,1));z?$("option:selected",d.dt1).val()&&$("option:selected",d.dt2).val()&&(p.updateHierarchy.call(p,d),m||v||p.updateFilterValues.call(p)):d.dt1.val()&&d.dt2.val()&&(p.updateHierarchy.call(p,d),m||v||p.updateFilterValues.call(p))}})}titlecap="top"==u.f_t_dir?$("<div class='df-titlecap-top'></div>"):$("<div class='df-titlecap-row'></div>"),e.append(titlecap);var P=$("<div class='df-item-row'></div>");"top"==u.f_t_dir?P.appendTo(titlecap):P.appendTo(e),c.appendTo(P),d.lcap=P,d.u1=e,d.u2=c,d.u4=titlecap,d.u3=$("<span class='df-title'></span>");var U,B=$("<div class='df-title-container'><div class='df-line-start' title='Click to start row'><span class='direction_up'></span><span class='direction_down'></span></div><div class='df-merge-left' title='Click to merge left'><span class='direction_left'></span><span class='direction_right'></span></div></div>").prepend(d.u3);return titlecap.prepend(B),d._tbar=B,d.isnecessary?d.u3.addClass("df-title-necessary"):d.u3.removeClass("df-title-necessary"),B.hover(function(e){p._editmode&&0==h&&($(".df-merge-left",B).show(),_.merge_left?$(".df-merge-left",B).addClass("turn_right"):$(".df-merge-left",B).removeClass("turn_right"),$(".df-line-start",B).show(),_.start_row?$(".df-line-start",B).addClass("turn_up"):$(".df-line-start",B).removeClass("turn_up"),clearTimeout(d._tbar._timer),$.each(p.filter_items,function(e,t){t._tbar&&t!=d&&(clearTimeout(t._tbar._timer),$(".df-merge-left",t._tbar).hide(),$(".df-line-start",t._tbar).hide())}))},function(e){d._tbar._timer=setTimeout(function(){$(".df-merge-left",B).hide(),$(".df-line-start",B).hide()},3e3)}),d.u3.click(function(){var e;p._editmode&&(e=new IG$.dynFilterConfig({filter_options:p.sheetoption.model.filter_options,pitem:d,dzone:p.dzone,callback:new IG$.callBackObj(p,function(){var e=d.u1;e.empty(),p.createFilterUI(d,e),p.validateItems(null,!1,!1,!0)},d)}),IG$.showDlg(p,e))}),$(".df-line-start",B).click(function(){_.start_row=!_.start_row,_.start_row?e.addClass("df-filter-startrow"):e.removeClass("df-filter-startrow")}),$(".df-merge-left",B).click(function(){_.merge_left=!_.merge_left,_.merge_left?(e.addClass("df-filter-mergeleft"),t&&t.u1&&t.u1.addClass("df-filter-mergeright")):(e.removeClass("df-filter-mergeleft"),t&&t.u1&&t.u1.removeClass("df-filter-mergeright"),p._do_layout())}),_.compcss&&e.addClass(_.compcss),U=_.ltitle||_.title||_.lname||_.name||"&nbsp;",U=IG$._rrcs(p,U,d.u3),d.u3.html(U),p.updateDisplay(),c}},rs_checkPopup:function(e,t,a){var l,i=this,o=i.sheetoption.model.filter_options,n=o.showbutton,s=(o.f_bx_enable,!n&&o.f_b_evt?1:0),d="",r=t.selection=[];if(e&&0<e.length)for(l=0;l<e.length;l++)e.items?r.push({code:e.items[l].get("code"),value:e.items[l].get("value")}):r.push({code:e[l].code,value:e[l].value});0<r.length&&(d=(r[0].value||r[0].code)+(1<r.length?"("+(r.length-1)+" more)":"")),t.isnecessary&&t.u3[r&&r.length?"removeClass":"addClass"]("df-title-error"),$("input[type=text]",t.u2).val(d),!1!==a&&(i.updateHierarchy.call(i,t),n||s||i.updateFilterValues.call(i))},clearFilter:function(e){var t,a,l=this,i=(l.parentUI,e.u2),o=l.sheetoption.model.filter_options,n=o.showbutton,s=!n&&o.f_b_evt?1:0,d=e.showpopup,r=e.dateseltype;if(1!=l.__dx){switch(e.objtype){case"slider":var c=i.slider("option","min"),p=i.slider("option","max");i.slider("values",0,c),i.slider("values",1,p);break;case"combobox":1==d?$("input[type=text]",i).val(""):$("option:selected",i).removeAttr("selected");break;case"radiobox":$("option:selected",i).removeAttr("selected");break;case"checkbox":1==d?$("input[type=text]",i).val(""):$("option:selected",i).removeAttr("selected");break;case"fileupload":$("input[type=text]",i).val("");break;case"text":var u=[$("[name=c_m1]",i)];item.rangevalue&&u.push($("[name=c_m2]",i)),$.each(u,function(e,t){t.val("")}),n||s||l.updateFilterValues.call(l);break;case"checkbuttons":if((a=e.data)&&0<a.length)for(t=0;t<a.length;t++)a[t].u2&&$("input[type='checkbox']",a[t].u2).prop("checked",!1);n||s||l.updateFilterValues.call(l);break;case"radiobuttons":if((a=e.data)&&0<a.length)for(t=0;t<a.length;t++)a[t].u2&&a[t].u2.removeAttr("selected");n||s||l.updateFilterValues.call(l);break;case"calendar":"year"==r?e.dt.val(""):"month"==r?e.dt.monthpicker("setDate",null):e.dt.datepicker("setDate",null);break;case"calendarperiod":"year"==r?(e.dt1.val(""),e.dt2.val("")):"month"==r?(e.dt1.monthpicker("setDate",null),e.dt2.monthpicker("setDate",null)):(e.dt1.datepicker("setDate",null),e.dt2.datepicker("setDate",null))}n||s||l.updateFilterValues.call(l)}},appendFiltering:function(e){var t=this.filter_items;if(/(metric|measure|custommetric|formulameasure|multimetric|multimeasure|groupfield)/.test(e.type.toLowerCase())){var a={},l=e.memo?e.memo.toLowerCase():e.memo;switch(IG$.CopyObject(e,a,"uid;name;nodepath;type"),a.uid=IG$.formatUID(a.uid),a.title=a.name,a.objtype="text",a.fuid="uid_"+ ++this._fmax,a.type.toLowerCase()){case"metric":case"custommetric":"date"==l||"datetime"==l||"timestamp"==l?(a.operator="EQ",a.objtype="text"):(a.operator="LIKE",a.objtype="text",a.showallvalue=!0);break;case"measure":case"formulameasure":case"measuregroup":a.operator="GT",a.objtype="text"}t.push({model:a}),this.sheetoption.model.filter_items.push(a),this.validateItems()}},getPvalue:function(e){var t,a,l,i=[];if(e.pvalues)for(a=e.pvalues.split("\n"),t=0;t<a.length;t++)l=a[t].split(";"),i.push({code:l[0],disp:l[1]});return i},validateItems:function(n,s,d,r){for(var e,c,t,a,l,i=this,p=n||i.filter_items,o=[],u={items:[]},f=i._req_values=i._req_values||{},h=0;h<p.length;h++)if(e=p[h],a=(c=e.model).objtype,l=c.type,r&&(e.validated=!1),!e.validated&&"viewselector"!=l&&/combobox|checkbox|radiobox|slider|checkbuttons|radiobuttons/.test(a)){if(c.showpopup)continue;!1===(t=i.checkHFilter(e))||("prompt"==l?(e.validate=!0,e.data=[],c.codemapping&&c.codemapping.uid?(o.push({uid:c.codemapping.uid,type:c.type,rptid:c.codemapping.uid}),f[c.codemapping.uid]||(f[c.codemapping.uid]=1),u.items.push({uid:c.codemapping.uid,cmap:c.codemapping,hfilter:t})):e.pvalues&&(e.data=i.getPvalue(e),i.updateFilterValue(p[h]))):(o.push({name:c.name,uid:c.uid,objtype:c.objtype,nodepath:c.nodepath,rptid:c.uid}),f[c.uid]||(f[c.uid]=1),u.items.push({uid:c.uid,cmap:c.codemapping,hfilter:t})))}i.updateValues=!0,i.isloaded=!1;var m=new IG$._rpc$;u.option="ValueInfo",m.init(i,{ack:"olapservice",payload:o,mbody:u,meta_type:"valueinfo"},i,function(e){var a=this,t=d?0:1;if(e.erroritems&&e.erroritems.length&&$.each(e.erroritems,function(e,t){IG$.ShowErrorMessage(t,a,null)}),a.rs_validateItems(e,n,s,d,r,t),s||r)for(var l,i,o=0;o<p.length;o++)l=p[o],(c=l.model).objtype,i=c.type,l.validated||"viewselector"!=i||a.updateViewSelector(l)},function(e){},[n,s]),m.send()},updateViewSelector:function(){var e,t,a,l,i,o,n,s,d,r,c=this,p=c.filter_items,u=0,f=0;if(c.dzone&&p)for(e=0;e<p.length;e++)if(s=(o=(i=p[e]).model).objtype,"viewselector"==o.type){if(a={data:[]},i.data&&"radiobuttons"==s)for(t=0;t<i.data.length;t++)if(i.data[t].u2&&$("input[type='radio']",i.data[t].u2).is(":checked")){u=t;break}if(d=(l=c.dzone.docitems[o.tabid])?l.children:null)for(t=0;t<d.length;t++)n={code:(r=l.children[t]).docid,disp:r.lt.ubody.title||r.lt.ubody.name},f==u&&(n.selected=!0),a.data.push(n),f++;i.validated=!0,i.data=a.data,c.loadFilterStore(i),c.updateFilterValue(i)}},rs_validateItems:function(e,t,a,l,i,o){var n,s,d,r,c,p,u=this,f=u.sheetoption.model.filter_options,h=t||u.filter_items;if(1!=u.__dx){if(c=IG$.parseValueList(e.value_results),u._parameters={},$.each(e.parameters,function(e,t){u._parameters[t.name]=t}),u.updateValues=!1,t||l||(u._sinit(),h=u.filter_items,u.drawControls(a,i)),c){for(s=0;s<c.length;s++)for(r=c[s],n=0;n<h.length;n++){if(h[n].model.uid==r.uid){(d=h[n]).validated=!0,d.data=r.data,u.loadFilterStore(d);break}h[n].model.codemapping&&h[n].model.codemapping.uid==r.uid&&((d=h[n]).validated=!0,d.data=r.data,u.loadFilterStore(d))}for(n=0;n<h.length;n++)h[n].validated||((d=h[n]).validate=!0,d.data=[],u.loadFilterStore(h[n]))}f&&f.f_valueset_enable&&u._vsbtn&&((p=$("select",u._vsbtn.u2)).val()&&setTimeout(function(){u._upd_vs_value(p.val())},100))}},checkHFilter:function(e){var t,a,l,i,o,n=null,s=this.filter_items,d=e.model;if(d.hfilter&&0<d.hfilter.length)for(t=d.hfilter.split(";"),a=0;a<t.length;a++){for(o=null,l=0;l<s.length;l++)if(s[l].model.name==t[a]){o=s[l];break}if(!o){n=!1;break}if(o.value=[],i=this.updateFilterValue(o))o.u3.removeClass("df-title-error"),(n=n||[]).push(i);else if(1==o.model.isnecessary||0===i){1==o.model.isnecessary&&o.u3.addClass("df-title-error"),n=!1;break}}return n},drop_item:function(e,t){for(var a,l,i,o,n,s=this.p,d=this.filter_items,r=(this.sheetoption.model.filter_options,s.offset()),c=t.pageX-r.left,p=(t.pageY,r.top,0);p<d.length;p++)if((n=d[p]).model,l=(a=n.u1.offset()).left-r.left,a.top,r.top,i=n.u1.width(),n.u1.height(),l<c&&c<l+i){o=c<l+i/2?p:p+1;break}if(-1<o)for(p=0;p<d.length;p++)if(d[p]==e){d.splice(p,1),p<o&&o--,0==o?e.u1.prependTo(s):e.u1.insertAfter(d[o-1].u1),d.splice(o,0,e);break}e.u1.css({top:"initial",left:"initial"})},_do_layout:function(){var e,p,u,f,h,m,t,a,l=this,v=l.filter_items,i=l.sheetoption.model.filter_options,o=i.f_viewtype||"",_=i.f_c_size?i.f_c_size:1,b=(IG$.j$ext._w(l.container),[]),g=[],y={},k={},x=0,w=0,I=0,n=l.p,s=0;switch(n&&(n.removeClass("df-layout-row"),n.removeClass("df-layout-table"),n.removeClass("df-layout-normal")),o){case"row":I=1,n&&n.addClass("df-layout-row");break;case"table":I=2,n&&n.addClass("df-layout-table");break;default:n&&n.addClass("df-layout-normal")}if("top"!=i.f_t_dir)for(e=0;e<v.length;e++)t=v[e],w=Math.max(w,IG$.j$ext._w(t.u3)+10);if(l._vsbtn&&l._vsbtn.u4&&(IG$.j$ext._w(l._vsbtn.u4,w),s=IG$.j$ext._w(l._vsbtn.u1)),0<I&&($.each(v,function(e,t){var a,l,i,o=t.u1,n=t.u4,s=0;0<w&&IG$.j$ext._w(n,w),l=IG$.j$ext._h(o),a=IG$.j$ext._w(o),2==I?(s=1<_?(i=Math.floor(x/_),x%_):(i=x,0),x++):i=t.model.crowindex||0,k[i]=Math.max(k[i]||0,l+4),y[s]=Math.max(y[s]||0,a+10)}),1==I))for(e=0;e<i.f_r_size;e++)b.push(0==e?s:0),g.push(0);if(x=0,$.each(v,function(e,t){var a,l,i,o,n=t.model,s=t.u4,d=t.u1,r=t.lcap,c=n.colspan||1;v.length>e+1&&v[e+1];if(0<I&&("checkbuttons"==n.objtype?((l=$(".idv-checkbuttons",d)).removeClass("checkbutton-horizontal"),n.checkbuttonhor&&l.addClass("checkbutton-horizontal")):"radiobuttons"==n.objtype?((l=$(".mec-radiobuttons",d)).removeClass("checkbutton-horizontal"),n.checkbuttonhor&&l.addClass("checkbutton-horizontal")):l=$(".idv-sel-combo",d)),0==I)r&&(t._owidth=r.width(),t._dgap=d.outerWidth(!0)-d.width()),r&&(n.auto_width?(r.css({width:"initial"}),"checkbuttons"==n.objtype?((l=$(".idv-checkbuttons",r)).css({width:"initial"}),$("ul",l).css({width:"initial"})):"radiobuttons"==n.objtype?((l=$(".mec-radiobuttons",r)).css({width:"initial"}),$("ul",l).css({width:"initial"})):(l=$(".idv-sel-combo",r)).css({width:"initial"})):(a=120*c+(w+t._dgap)*(c-1),r.width(a),"checkbuttons"==n.objtype?((l=$(".idv-checkbuttons",d)).width(a),$("ul",l).width(a),l.removeClass("checkbutton-horizontal"),n.checkbuttonhor&&l.addClass("checkbutton-horizontal")):"radiobuttons"==n.objtype?((l=$(".mec-radiobuttons",d)).width(a),$("ul",l).width(a),l.removeClass("checkbutton-horizontal"),n.checkbuttonhor&&l.addClass("checkbutton-horizontal")):(l=$(".idv-sel-combo",d)).width(a))),0<w&&!n.merge_left&&IG$.j$ext._w(s,w);else if(1==I){for(h=IG$.j$ext._h(d),f=IG$.j$ext._w(d),i=t.model.crowindex||0,p=b[i],u=4,o=0;o<i;o++)u+=g[o];b[i]+=f+10,g[i]=Math.max(g[i],h+4)}else if(2==I){for(h=IG$.j$ext._h(d),f=IG$.j$ext._w(d),u=p=0,i=1<_?(m=Math.floor(x/_),x%_):(m=0,x),o=0;o<m;o++)p+=y[o];for(o=0;o<i;o++)u+=k[o];x++}0<I?d&&d.css({top:u,left:p,position:"absolute"}):d&&d.css({position:"relative"})}),l._mbox={rx:b,rh:g,mh:k,mw:y},l._vsbtn&&l._vsbtn.u4&&(0<I?l._vsbtn.u1.css({top:4,left:0,position:"absolute"}):l._vsbtn.u1.css({position:"relative"})),i.f_bx_enable&&l._sxbtn)if(u=4,0<I){for(a=0;a<i.f_b_row;a++)u+=g[a];l._sxbtn.css({top:u,right:4+(l._sbtn?IG$.j$ext._w(l._sbtn)||104:0),position:"absolute"})}else l._sxbtn.css({position:"relative"});if(i.showbutton&&l._sbtn)if(u=4,0<I){for(a=0;a<i.f_b_row;a++)u+=g[a];l._sbtn.css({top:u,right:4,position:"absolute"})}else l._sbtn.css({position:"relative"})},_upd_vs_list:function(){var e,t=this._vsbtn.u2,a=$("select",t);this.sheetoption.docid;a.empty(),this.prompt_valueset&&(e=this.prompt_valueset,a.append("<option></option>"),$.each(e,function(e,t){a.append("<option>"+t.name+"</option>")}))},_upd_vs_value:function(e){var t,l,a,i=this,o=i.filter_items,n=i.sheetoption.model.filter_options,s=n.showbutton,d=(n.f_bx_enable,!s&&n.f_b_evt?1:0),r=i.prompt_valueset;if(r){for(a=0;a<r.length;a++)if(r[a].name==e){t=r[a];break}t&&t.filter_values&&(l=t.filter_values,$.each(o,function(e,t){var a;l[t.model.fuid]&&(a=l[t.model.fuid],i._sel_filter_value(t,a))}),s||d||i.updateFilterValues.call(i))}},_sel_filter_value:function(e,t){for(var a,l,i=this,o=e.model,n=o.objtype,s=e.u2,d=t.values,r=(e.data,o.dateseltype),c={},p=[],u=0;u<d.length;u++)c[d[u]]=1,p.push({code:d[u],value:d[u]});switch(n){case"slider":s.slider("values",0,d[0]?Number(d[0]):0),s.slider("values",1,d[1]?Number(d[1]):1);break;case"calendar":"year"==r?e.dt.val(d[0]):"month"==r?e.dt.monthpicker("setDate",i.getDefaultDate(d[0])):e.dt.datepicker("setDate",i.getDefaultDate(d[0]));break;case"calendarperiod":"year"==r?(e.dt1.val(d[0]),e.dt2.val(d[1])):"month"==r?(e.dt1.monthpicker("setDate",i.getDefaultDate(d[0])),e.dt2.monthpicker("setDate",i.getDefaultDate(d[1]))):(e.dt1.datepicker("setDate",i.getDefaultDate(d[0])),e.dt2.datepicker("setDate",i.getDefaultDate(d[1])));break;case"text":(a=$("[name=c_m1]",s)).val(d[0]),o.rangevalue&&(l=$("[name=c_m2]",s)).val(d[1]);break;case"fileupload":break;case"combobox":a=$("[name=c_m1]",s),o.rangevalue&&(l=$("[name=c_m2]",s)),o.showpopup?i.rs_checkPopup(p,e,!1):(a.val(d[0]||""),l&&l.val(d[1]||""));break;case"checkbox":o.showpopup?i.rs_checkPopup(p,e,!1):s.val(d);break;case"checkbuttons":if(e.data)for(u=0;u<e.data.length;u++)a=$("input[type='checkbox']",e.data[u].u2),c[e.data[u].code]?a.attr("checked","checked"):a.removeAttr("checked");break;case"radiobuttons":if(e.data)for(u=0;u<e.data.length;u++)a=$("input[type='radio']",e.data[u].u2),c[e.data[u].code]?a.attr("checked","checked"):a.removeAttr("checked");break;case"radiobox":s.val(d)}},_save_vs:function(){var e=this.reportoption._mc,t=e.prompt_default_valueset,a=new IG$._rpc$;t.meta_type="valueset",a.init(this,{ack:"writecontent",payload:{address:t.uid?t.uid:e.nodepath+"/valuset",name:"valueset",type:"ValueSet",pid:t.uid?null:e.uid},mbody:t,meta_type:"valueset"},this,function(e){}),a.send()},drawControls:function(e,t){var a,l,i,o,n,s,d,r,c,p,u,f=this,h=f.contentarea,m=f.filter_items,v=f.sheetoption.model.filter_options;if(f.p?f.p.empty():f.p=$("<div class='df-list'></div>").appendTo(h),v.f_valueset_enable&&(i=$("<div class='df-filter-cont'></div>").appendTo(f.p),p=v.f_valueset_title||"{L_BTN_VALUESET}",o=f._vsbtn={},p&&1<p.length&&"{"==p.charAt(0)&&"}"==p.charAt(p.length-1)&&(p=IRm$.r1(p.substring(1,p.length-1))),l=$("<div class='df-filter-valuset'><select></select></div>"),$("tr",l),n=$("select",l),titlecap=$("<div class='df-titlecap-row'></div>"),i.append(titlecap),(s=$("<div class='df-item-row'></div>")).appendTo(i),l.appendTo(s),o.lcap=s,o.u1=i,o.u2=l,o.u4=titlecap,o.u3=$("<span class='df-title'></span>"),d=$(["<div class='df-title-container'>","<div class='df-filter-vssel'>","<div class='df-filter-valueset-add'></div>","<div class='df-filter-valueset-remove'></div>","</div>","<div class='df-line-start' title='Click to start row'>","<span class='direction_up'></span>","<span class='direction_down'></span>","</div>","<div class='df-merge-left' title='Click to merge left'>","<span class='direction_left'></span>","<span class='direction_right'></span>","</div>","</div>"].join("")).prepend(o.u3),titlecap.prepend(d),o._tbar=d,o.u3.html(p),o.u3.bind("click",function(e){e.stopPropagation(),e.preventDefault();var t=new IG$.rptValSet({ptr_dyn:f,callback:new IG$.callBackObj(f,function(e){f._save_vs(),f._upd_vs_list()})});IG$.checkLogin(f,t)}),n.bind("change",function(){var e=n.val();return setTimeout(function(){f._upd_vs_value.call(f,e)},10),!1}),$(".df-filter-valueset-add",d).bind("click",function(e){var t=new IG$.rptValSetEd({ptr_dyn:f,callback:new IG$.callBackObj(f,function(e){var t=e.pitem;f.prompt_valueset.push({name:t.name,override_default:t.override_default,description:t.description,filter_values:t.filter_values}),f._save_vs(),f._upd_vs_list()})});IG$.checkLogin(f,t)}),$(".df-filter-valueset-remove",d).bind("click",function(e){for(var t,a=n.val(),l=f.prompt_valueset,i=0;i<l.length;i++)if(l[i].name==a){t=l[i],l.splice(i,1);break}t&&(f._save_vs(),f._upd_vs_list())}),d.hover(function(e){$(".df-filter-vssel",d).show()},function(e){o._tbar._timer=setTimeout(function(){$(".df-filter-vssel",d).hide()},3e3)}),f._upd_vs_list()),0<m.length)for(ntable=v.f_c_size?v.f_c_size:1,$.each(m,function(e,t){var a=t.model,l=$("<div class='df-filter-cont'></div>").appendTo(f.p);f.createFilterUI.call(f,t,l,u),a.start_row?l.addClass("df-filter-startrow"):l.removeClass("df-filter-startrow"),a.merge_left?(l.addClass("df-filter-mergeleft"),u&&u.u1&&u.u1.addClass("df-filter-mergeright")):(l.removeClass("df-filter-mergeleft"),u&&u.u1&&u.u1.removeClass("df-filter-mergeright")),u=t}),a=0;a<m.length;a++)f.updateFilterValue(m[a],e);v.showbutton&&(r=$("<div class='df-filter-cont df-filter-sbutton'></div>").appendTo(f.p),(p=v.buttonname||"{L_BTN_SEARCH}")&&1<p.length&&"{"==p.charAt(0)&&"}"==p.charAt(p.length-1)&&(p=IRm$.r1(p.substring(1,p.length-1))),c=$("<button class='dt-btn-search'><span>"+IG$._rrcsv(p)+"</span></button>").appendTo(r).bind("click",function(){f.updateFilterValues.call(f,0,null,0,1)}),IG$._rrcs(f,p,$("span",c)),f._sbtn=r),v.f_bx_enable&&(r=$("<div class='df-filter-cont df-filter-sbutton'></div>").appendTo(f.p),(p=v.f_bx_name||"{L_D_EXCEL}")&&1<p.length&&"{"==p.charAt(0)&&"}"==p.charAt(p.length-1)&&(p=IRm$.r1(p.substring(1,p.length-1))),c=$("<button class='dt-btn-download'><span>"+IG$._rrcsv(p)+"</span></button>").appendTo(r).bind("click",function(){f.downloadExcel.call(f,1,null,1,v.f_bx_sheets)}),IG$._rrcs(f,p,$("span",c)),f._sxbtn=r,f._sxbtn.hide()),f._do_layout(),f.isloaded=!0,f.updateValues=!1,f.firstRun(),setTimeout(function(){f.updateFilterValues.call(f,e,null,t)},500)},downloadExcel:function(e,t,a,l){var i,o,n=this.report,s=1;if(l&&l.length){if($.each(l,function(e,t){for(var a,l=0;l<n.sheets.length;l++)if(t=="sheet_"+n.sheets[l].sheetindex){a=n.sheets[l];break}if(a&&!a.jobid)return s=0,!1}),!s)return void IG$.ShowError(IRm$.r1("L_RUN_RPT_FIRST"),this);for(i={},o=0;o<l.length;o++)i[l[o]]=1}this.report.downloadExcel.call(this.report,e,t,a,i)},updateDisplay:function(){var e=this;-1<e.utimer&&clearTimeout(e.utimer),e.utimer=setTimeout(function(){e.rs_updateDisplay.call(e)},200)},rs_updateDisplay:function(){IG$.j$ext._w(this.container);this.utimer=-1,this._do_layout()},changeActiveTab:function(e,t,a,l){var i,o,n,s=this.dzone.docitems[e.tabid],d=0<e.value.length?e.value[0].code:null,r=s?s.lt.ubody:null;if(s&&r&&r.view&&d)for(n=s.children,i=0;i<n.length;i++)if(o=n[i],t&&(o.lt.ubody.visible=!1),o.docid==d&&r.view.buttons.length>i){if(!t){a?r.view.setActiveDoc.call(r.view,d,!0):r.view.buttons[i].trigger("click");break}o.lt.ubody.visible=!0}},firstRun:function(){this.afterInit&&this.afterInit.f.call(this.afterInit.p,this)},checkFilterValues:function(e,t,a){for(var l,i,o=this.filter_items,n=!0,s=[],d=0;d<o.length;d++)l=o[d],n=0==(i=this.checkFilterValuesItem(l,s,e,t))?i:n;return 0!=n||(0<s.length&&!e&&IG$.alertmsg(ig$.appname,IRm$.r1("M_SEL_ERR",s.join(",")),null,null,1,"error"),!1)},checkFilterValuesItem:function(e,t,a,l){var i,o=e.model,n=!0;return e.value=[],e.u3&&e.u3.removeClass("df-title-error"),e.u2&&(e.value=[],0!==(i=this.updateFilterValue(e))&&(i||1!=o.isnecessary)||(n=!1,e.u3&&(e.u3.addClass("df-title-error"),t.push(o.title||o.name)))),"viewselector"==o.type&&e.u2&&(e.value=[],this.updateFilterValue(e),e.value&&0<e.value.length&&l.push(e)),n},updateFilterValues:function(e,t,a,l){var i=this,o=[],n=i.sheetoption.model,s=i.filter_items,d=n.filter_options,r=!!d&&d.showbutton&&d.f_b_trg?1:0,c=r&&d.f_b_trg_all?1:0,p=i.checkFilterValues(e?1:0,o),u=d?d.f_b_scr:null,f=(!d||d.caseinsensitive,1);if(p&&i.callback&&0==i.updateValues){for(h=0;h<o.length;h++)i.changeActiveTab(o[h],!0);if(i._fr=e,p&&r&&i.report&&(i.report.updateAllFilters.call(i.report,i,c)||(f=0)),a||e&&!t)e&&i.container.trigger("i_ready");else{if(f&&u&&window[u])try{var h,m={};for(h=0;h<s.length;h++)m[s[h].model.name]=s[h].value;if((f=window[u].call(this,m))&&f.err)return void IG$.alertmsg(ig$.appname,f.errmsg,null,null,1,"error")}catch(e){return}f&&(l?(i.callback.execute(i),d.f_bx_enable&&i._sxbtn&&i._show_excel_btn(0)):i.callback.execute(i))}for(h=0;h<o.length;h++)i.changeActiveTab(o[h],void 0,e,t)}},_show_excel_btn:function(e){var t=this,i=t.report,a=t.sheetoption.model.filter_options.f_bx_sheets,o=1;if(t.dzone.docitems&&i&&(!i||i.sheets)&&!t._excel_btn_visible)if(a&&a.length&&$.each(a,function(e,t){for(var a,l=0;l<i.sheets.length;l++)if(t=="sheet_"+i.sheets[l].sheetindex){a=i.sheets[l];break}if(a&&!a.jobid)return o=0,!1}),o)t._excel_btn_visible=1,setTimeout(function(){t._sxbtn.fadeIn()},100);else{if(30<e)return;setTimeout(function(){t._show_excel_btn(e++)},1e3)}},isVisibleItem:function(e,t){var a,l,i,o=0,n=t.split("="),s=e.value;if(n[0]==e.name&&s&&n[1])for(i=n[1].split(","),a=0;a<s.length;a++){if(s[a].code==n[1]){o=1;break}if(1<i.length)for(l=0;l<i.length;l++)if(s[a].code==i[l]){o=1;break}if(o)break}return o},updateHierarchy:function(e){var t,a,l,i,o,n,s=this,d=[],r=[],c=e.model,p=s.filter_items,u=null;if(c.invokejs&&window[c.invokejs]&&(u=window[c.invokejs].call(s,e)),0!=u){for(t=0;t<p.length;t++){if((o=(i=p[t]).model).name!=c.name&&o.hfilter&&0<o.hfilter.length)for(l=o.hfilter.split(";"),a=0;a<l.length;a++)l[a]==c.name&&(i.validated=!1,d.push(i));o.name!=c.name&&o.showcondition&&-1<o.showcondition.indexOf(c.name)&&r.push(i)}if(0<r.length)for(e.value=[],s.updateFilterValue(e),t=0;t<r.length;t++)n=s.isVisibleItem(e,r[t].model.showcondition),s.controlVisible(r[t],n);0<d.length&&(s.initFilter(d),s.validateItems(d,void 0,!0))}return u},controlVisible:function(e,t){var a=t?"show":"hide";e.u1[a]()},loadFilterStore:function(o){var e="",t=o.model;if(o.data=o.data||[],o.updateValues=!0,o.u2){var a,l,i,n,s,d,r,c,p,u,f,h,m,v,_,b=this,g=o.u2,y=o.data,k=!0;switch(t.objtype){case"slider":if(0<y.length){for(n=i=parseFloat(y[0].code),l=0;l<y.length;l++){if(a=parseFloat(y[l].code),0!=isNaN(a)){k=!1;break}i=Math.min(a,i),n=Math.max(a,n)}h=1==(t.allnumeric=k)?(s=(n-i)/Math.max(y.length,20),u=t.s1a?Number(t.s1a):i,f=t.s1b?Number(t.s1b):n,t.s1c?Number(t.s1c):s):(u=t.s1a?Number(t.s1a):0,f=t.s1b?Number(t.s1b):y.length,t.s1c?Number(t.s1c):1),g.slider("option","min",u),g.slider("option","max",f),g.slider("option","step",h),g.slider("values",0,u),g.slider("values",1,f),b.updateSlideValue.call(b,g)}break;case"fileupload":o.selection=[];break;case"combobox":if(1==t.showpopup)o.selection=[],t.initial_values&&b.rs_checkPopup(t.initial_values,o,!1);else{for(d=$("[name=c_m1]",g),r=$("[name=c_m2]",g),c=[],1==t.showallvalue&&(e=1==t.isnecessary?t.aname||IRm$.r1("L_SELECT_VALUE"):t.aname||IRm$.r1("L_ALL_VALUE"),d.attr("placeholder",e),r.attr("placeholder",e),IG$.placeHolder(d),IG$.placeHolder(r),c.push({label:e,value:""})),p=b.sheetoption.getDefaultValue.call(b.sheetoption,o,0),o._svalues=[],l=0;l<y.length;l++)c.push({label:y[l].disp||y[l].code,value:y[l].code}),p&&p==y[l].code&&(t.rangevalue?o._svalues.push({code:y[l].code,text:y[l].disp||y[l].code}):o._svalues=[{code:y[l].code,text:y[l].disp||y[l].code}]);!t.showallvalue&&(!o._svalues||o._svalues&&0==o._svalues.length)&&c.length&&(o._svalues=[{code:c[0].value,text:c[0].label}],t.rangevalue&&o._svalues.push({code:c[c.length-1].value,text:c[c.length-1].label})),o._svalues&&o._svalues.length&&(d.val(o._svalues[0].text),t.rangevalue&&o._svalues[1]&&r.val(o._svalues[1].text)),o.sdp=c,d.trigger("change")}break;case"radiobox":case"checkbox":if("checkbox"==t.objtype&&1==t.showpopup)o.selection=[],t.initial_values&&b.rs_checkPopup(t.initial_values,o,!1);else{for(g.empty(),g.attr("options"),t.showallvalue&&(e=t.isnecessary?t.aname||IRm$.r1("L_SELECT_VALUE"):t.aname||IRm$.r1("L_ALL_VALUE"),$("<option value=''>"+e+"</option>").appendTo(g)),l=0;l<y.length;l++)$("<option value='"+y[l].code+"'>"+(y[l].disp||y[l].code)+"</option>").appendTo(g);o.u2.trigger("change")}break;case"checkbuttons":(m=$("ul",g)).empty(),p=b.sheetoption.getDefaultValue.call(b.sheetoption,o,0),t.showallvalue&&(e=t.aname||IRm$.r1("L_SELECT_VALUE"),_=$("<li class='igc-chk-sel-all'></li>").appendTo(m),(v=$("<label><input type='checkbox' value=''/><span>"+e+"</span></label>").appendTo(_)).bind("click",function(){m.trigger("checkbox_sel_all"),o.___prv_event=1;var l=0;$("input[type='checkbox']",v).is(":checked")&&(l=1),$.each(y,function(e,t){var a;t.u2&&(a=$("input[type='checkbox']",t.u2),l?a.prop("checked",!0):a.prop("checked",!1))}),o.___prv_event=0,m.trigger("checkboxchanged",null)}),"ALL"==p&&$("input[type='checkbox']",v).prop("checked",!0),o._c_a1=v),$.each(y,function(e,t){var a=$("<li></li>").appendTo(m),l=$("<label><input type='checkbox' value='"+t.code+"'/><span>"+(t.disp||t.code)+"</span></label>").appendTo(a),i=$("input[type='checkbox']",l);t.u2=l,t.u2b=i,t.code!=p&&!t.selected&&"ALL"!=p||i.prop("checked",!0),i.bind("change",function(){o.___prv_event||m.trigger("checkboxchanged",t)})}),m.trigger("checkboxchanged",null);break;case"radiobuttons":(m=$("ul",g)).empty(),window.rdo_id=window.rdo_id||0,window.rdo_id++,p=b.sheetoption.getDefaultValue.call(b.sheetoption,o,0),$.each(y,function(e,t){_=$("<li></li>").appendTo(m),v=$("<label><input type='radio' name='radio_"+window.rdo_id+"' value='"+t.code+"'/><span>"+(t.disp||t.code)+"</span></label>").appendTo(_),t.u2=v,(p&&t.code==p||t.selected)&&$("input[type=radio]",v).prop("checked",!0),v.bind("change",function(){setTimeout(function(){m.trigger("radioboxchanged")},100)})}),m.trigger("radioboxchanged")}}o.updateValues=!1},updateFilterPrompt:function(e){for(var t,a,l,i,o=this.filter_items,n=(this.sheetoption.model.filter_options,0);n<o.length;n++)if((t=o[n]).value&&0<t.value.length){for(a=0;a<t.value.length;a++)i=t.value[a].value||t.value[a].code,l=0==a?i:l+", "+i;e[t.name]=l}},getExportData:function(e,t,a,l,i){for(var o,n,s,d,r,c,p=this.filter_items,u=this.sheetoption.model.filter_options,f=u.f_c_size?u.f_c_size:1,h=0,m=e,v=t,_=0;_<p.length;_++){if(0<h&&h%f==0&&(v+=30,m=e),(n=p[_]).value&&0<n.value.length){for(s=0;s<n.value.length;s++)r=n.value[s].value||n.value[s].code,d=0==s?r:d+", "+r;(c=n.ltitle||n.title||n.lname||n.name)&&"$"==c.charAt(0)&&(c=IRm$.r1(c)),o={type:"label",x:m,y:v,d_width:l,d_height:i,docid:a,text:c+=" ("+d+")"}}m+=100,h+=n.objmerge||1}return o},getFilter:function(){for(var e,t,a={ftype:"group",children:[]},l=this.filter_items,i=0;i<l.length;i++)(e=l[i]).value=[],(t=this.updateFilterValue(e))&&a.children.push(t);return a},getCacheItems:function(e){var t;if(this._req_values)for(t in this._req_values)e.push({uid:t})},updateFilterValue:function(o,e){var t,a,l,n,i,s,d,r=o.model,c=null,p=r.dateseltype,u=r.caseinsensitive;if(o.u2){switch(l=o.u2,o.value=o.value||[],r.objtype){case"slider":var f=l.slider("values",0),h=l.slider("values",1),m=l.slider("option","min"),v=l.slider("option","max");if(0==r.allnumeric){if(0<f||h<o.data.length)for(a=f;a<h;a++)o.value.push({code:o.data[a].code,value:o.data[a].disp,operator:"EQ"})}else(m<f||h<v)&&(o.value.push({code:""+f,value:""+f,operator:"GTE"}),o.value.push({code:""+h,value:""+h,operator:"LTE"}));break;case"calendar":(n="year"==p?$("option:selected",o.dt).val():"month"==p?o.dt.monthpicker("getDate"):o.dt.datepicker("getDate"))&&("year"==p||(n=n.format("Ymd")),o.value.push({code:n,value:n,valuetype:"date"}));break;case"calendarperiod":s="year"==p?(i=$("option:selected",o.dt1).val(),$("option:selected",o.dt2).val()):"month"==p?(i=o.dt1.monthpicker("getDate"),s=o.dt2.monthpicker("getDate"),new Date(s.getFullYear(),s.getMonth()+1,0)):(i=o.dt1.datepicker("getDate"),o.dt2.datepicker("getDate")),i&&s&&("year"==p||(i=i.format("Ymd")+"000000",s=s.format("Ymd")+"235959"),Number(i)<Number(s)?(o.value.push({code:i,value:i,operator:"GTE",valuetype:"date"}),o.value.push({code:s,value:s,operator:"LTE",valuetype:"date"})):c=0);break;case"text":var _=[$("[name=c_m1]",l)];r.rangevalue&&_.push($("[name=c_m2]",l)),$.each(_,function(e,t){var a=t.val();a&&o.value.push({code:a,value:a})});break;case"fileupload":o.selection=o.selection||[],o.selection.length&&o.value.push({code:o.selection[0].code,value:o.selection[0].value});break;case"combobox":if(r.showpopup)o.selection=o.selection||[],o.selection.length&&o.value.push({code:o.selection[0].code,value:o.selection[0].value});else{_=[$("[name=c_m1]",l)];if(r.rangevalue&&_.push($("[name=c_m2]",l)),n=[],$.each(_,function(e,t){var a,l=t.val(),i=t.attr("placeholder");if(!r.rangevalue&&l&&o._svalues&&o._svalues.length&&o._svalues[0].text==l)(!i||i&&l!=i)&&(n=o._svalues);else if(l&&o.sdp&&o.sdp.length)for(a=0;a<o.sdp.length;a++)if(!(i&&l==i||o.sdp[a].value!=l&&o.sdp[a].label!=l)){n.push({code:o.sdp[a].value,text:o.sdp[a].text||o.sdp[a].label});break}}),n&&!r.rangevalue&&0<n.length||r.rangevalue&&1<n.length)for(t=0;t<n.length;t++)o.value.push({code:n[t].code,value:n[t].text})}break;case"checkbox":if(r.showpopup)for(o.selection=o.selection||[],a=0;a<o.selection.length;a++)o.value.push({code:o.selection[a].code,value:o.selection[a].value});else for(n=l.val()||[],a=0;a<n.length;a++)""!=n[a]&&o.value.push({code:n[a],value:n[a]});break;case"checkbuttons":if(o.data)for(a=0;a<o.data.length;a++)o.data[a].u2&&$("input[type='checkbox']",o.data[a].u2).is(":checked")&&o.value.push({code:o.data[a].code,value:o.data[a].value});break;case"radiobuttons":if(o.data)for(a=0;a<o.data.length;a++)o.data[a].u2&&$("input[type='radio']",o.data[a].u2).is(":checked")&&o.value.push({code:o.data[a].code,value:o.data[a].value});break;case"radiobox":for(n=l.val()||[],a=0;a<n.length;a++)""!=n[a]&&o.value.push({code:n[a],value:n[a]})}if(o.value&&0<o.value.length||e)for(c={ftype:"condition",fields:[{name:r.objectid||r.name,uid:r.uid,type:r.type}],operator:r.operator,useprompt:r.useprompt,values:[]},u&&(c.left_expression="UPPER(["+r.name+"])"),a=0;a<o.value.length;a++)d=r.valueformat||"",u?c.values.push({code:o.value[a].code?o.value[a].code.toUpperCase():null,value:o.value[a].value,valueformat:d,valuetype:o.value[a].valuetype}):c.values.push({code:o.value[a].code,value:o.value[a].value,valueformat:d,valuetype:o.value[a].valuetype})}return c},updateSlideValue:function(e){var t,a,l,i,o=$(e),n=this.filter_items,s=o.children("a");if(s&&2==s.length){for(t=0;t<n.length;t++)if(n[t].u2&&n[t].u2[0]==o[0]){a=n[t];break}for(t=0;t<s.length;t++)i=o.slider("values",t),i=a&&a.data&&0==a.allnumeric?a.data.length>i?""+a.data[i].code:"":""+i,(l=$(s[t])).tooltip({track:!0,delay:0,fade:250,showURL:!1}),l[0].tooltipText=i}},slideValueHandler:function(e,t,a){var l,i,o,n=$(e),s=this.filter_items,d=n.children("a");if(d&&2==d.length){for(l=0;l<s.length;l++)if(s[l].u2&&s[l].u2[0]==e){i=s[l];break}for(l=0;l<d.length;l++)t.handle==d[l]&&(o=n.slider("values",l),o=i&&i.data&&0==i.allnumeric?i.data.length>o?""+i.data[o].code:"":""+o,n.children(".guide").css({left:a}).html(o))}},setLoading:function(e){this.splash[1==e?"show":"fadeOut"]()},getValueSetFilterValues:function(){for(var e,t,a,l=this.filter_items,i=[],o=0;o<l.length;o++){if((e=l[o]).value=[],this.updateFilterValue(e,1),a={fuid:e.model.fuid,name:e.model.objectid||e.model.name,values:[]},e.value)for(t=0;t<e.value.length;t++)a.values.push(e.value[t].code||e.value[t].value);i.push(a)}return i},initFilter:function(e,t){for(var a,l,i,o=e||this.filter_items,n=this.isloaded,s=0;s<o.length;s++)if(i=(a=o[s]).model,a.u2)switch(l=a.u2,i.objtype){case"slider":case"calendar":break;case"text":var d=[$("[name=c_m1]",l)];i.rangevalue&&d.push($("[name=c_m2]",l)),$.each(d,function(e,t){t.val("")});break;case"combobox":1==i.showpopup?($("input[type=text]",l).val(""),a.selection=[]):$("input[type=text]",l).val("");break;case"checkbox":1==i.showpopup?($("input[type=text]",l).val(""),a.selection=[]):l.val([]);break;case"radiobox":l.val([])}t&&n&&this.firstRun()}},IG$.rptValSet=$s.extend($s.window,{xtype:"window",modal:!0,region:"center",layout:"fit",closable:!0,resizable:!0,maximizable:!0,width:400,height:500,_init:function(){var e=this.ptr_dyn,t=(e.sheetoption,this.down("[name=grd]")),a=[],l=e.prompt_valueset;l&&$.each(l,function(e,t){a.push({name:t.name,override_default:t.override_default,description:t.description,filter_values:t.filter_values})}),t.store.loadData(a)},_confirm:function(){var e,t,a=this,l=a.down("[name=grd]"),i=a.ptr_dyn,o=l.store,n=i.prompt_valueset;for(n.splice(0,n.length),t=0;t<o.data.items.length;t++)e=o.data.items[t],n.push({name:e.data.name,override_default:e.data.override_default,description:e.data.description,filter_values:e.data.filter_values});a.callback&&a.callback.execute(a),a.close()},initComponent:function(){$s.apply(this,{title:"Filter ValueSet",padding:10,items:[{xtype:"container",padding:10,layout:{type:"vbox",align:"stretch"},items:[{xtype:"gridpanel",name:"grd",flex:1,border:0,padding:10,store:{},columns:[{text:IRm$.r1("B_NAME"),required:!0,dataIndex:"name"},{text:IRm$.r1("B_DESC"),dataIndex:"description"},{xtype:"actioncolumn",width:60,items:[{iconCls:"icon-grid-config",tooltip:IRm$.r1("L_CONFIG"),handler:function(e,t,a){var l=e.store.getAt(t),i=new IG$.rptValSetEd({ptr_dyn:this.ptr_dyn,pitem:l.data,callback:new IG$.callBackObj(this,function(e){l.set("name",l.data.name),l.set("description",l.data.description)})});IG$.checkLogin(this,i)},scope:this},{iconCls:"icon-grid-delete",tooltip:IRm$.r1("L_REMOVE"),handler:function(e,t,a){var l=e.store;l.getAt(t);l.removeAt(t)},scope:this}]}],tbar:["->",{text:"Add Current Selection",handler:function(){var e=new IG$.rptValSetEd({ptr_dyn:this.ptr_dyn,callback:new IG$.callBackObj(this,function(e){var t=e.pitem;this.down("[name=grd]").store.add(t)})});IG$.checkLogin(this,e)},scope:this}]}]}],buttons:[{text:IRm$.r1("B_CONFIRM"),handler:function(){this._confirm()},scope:this},{text:IRm$.r1("B_CLOSE"),handler:function(){this.close()},scope:this}],listeners:{afterrender:function(e){this._init()}}}),IG$.rptValSet.superclass.initComponent.apply(this,arguments)}}),IG$.rptValSetEd=$s.extend($s.window,{xtype:"window",modal:!0,region:"center",layout:"fit",closable:!0,resizable:!0,maximizable:!0,width:400,height:350,_init:function(){var e,t=this,a=t.ptr_dyn,l=t.down("[name=grd]"),o={},n=[],s=t.pitem=t.pitem||{};for(s.filter_values=s.filter_values||{},t.setAllValues(s),e=a.getValueSetFilterValues(),i=0;i<e.length;i++)o[e[i].fuid]=e[i];for($.each(s.filter_values,function(e,t){o[t.fuid]||delete s.filter_values[e]}),i=0;i<e.length;i++)s.filter_values[e[i].fuid]||(s.filter_values[e[i].fuid]=e[i]);$.each(s.filter_values,function(e,t){n.push({fuid:t.fuid,name:t.name,values:t.values})}),l.store.loadData(n)},_confirm:function(){var e,t,a=this,l=a.down("[name=grd]").store,i=a.pitem;if(!a.getAllValues(i)){for(i.filter_values={},t=0;t<l.data.items.length;t++)e=l.data.items[t],i.filter_values[e.get("fuid")]={fuid:e.get("fuid"),name:e.get("name"),values:e.get("values")};a.callback&&a.callback.execute(a),a.close()}},initComponent:function(){$s.apply(this,{title:"Filter ValueSet",padding:10,items:[{xtype:"container",padding:10,layout:{type:"vbox",align:"stretch"},items:[{xtype:"textfield",name:"name",required:!0,fieldLabel:IRm$.r1("B_NAME")},{xtype:"checkbox",name:"b_ovr",fieldLabel:"Override Default",boxLabel:IRm$.r1("B_ENABLED")},{xtype:"textarea",flex:1,name:"description",fieldLabel:IRm$.r1("B_DESC"),height:60},{xtype:"gridpanel",name:"grd",flex:1,border:0,store:{},columns:[{text:IRm$.r1("B_NAME"),dataIndex:"name"},{text:"Value",dataIndex:"value_desc"},{xtype:"actioncolumn",width:60,items:[{iconCls:"icon-grid-delete",tooltip:IRm$.r1("L_REMOVE"),handler:function(e,t,a){var l=e.store;l.getAt(t);l.removeAt(t)},scope:this}]}]}]}],buttons:[{text:IRm$.r1("B_CONFIRM"),handler:function(){this._confirm()},scope:this},{text:IRm$.r1("B_CLOSE"),handler:function(){this.close()},scope:this}],listeners:{afterrender:function(e){this._init()}}}),IG$.rptValSetEd.superclass.initComponent.apply(this,arguments)}});
IG$.aboutApp=$s.extend($s.window,{modal:!0,region:"center",layout:"fit",closable:!1,resizable:!1,width:500,height:400,initComponent:function(){this.title=IRm$.r1("I_ABOUT",ig$.appname),$s.apply(this,{defaults:{bodyStyle:"padding:0px"},items:[{html:'<div class="igc-about-bg"></div><table width="479" border="0" cellpadding="0" cellspacing="0"><tr><td width="69" align="left">&nbsp;</td><td width="410"><div align="right"><span class="about_style6">Build Id: '+(ig$.appInfo.apprelease||"---")+", web : "+(ig$.appInfo.web_revision||"---")+'</span></div></td></tr></table><table width="494" border="0" cellpadding="0" cellspacing="0"><tr><td width="78">&nbsp;</td><td width="416" valign="top"><div align="left"><p class="about_style2"> '+IRm$.r1("L_CONTACT_CRED")+"<br/>ALL RIGHTS RESERVED. <br />"+ig$.companyname+'. Confidential Information</p><p class="about_style1"><span class="about_style4">'+IRm$.r1("L_CONTACT_HELP")+'</span>&nbsp;&nbsp;<a href="'+ig$.companydomain+'" target="_new">'+ig$.companydomain+'/</a></p></div></td></tr></table><p>&nbsp;</p><p align="left" class="about_style1">&nbsp;</p>'}],buttons:[{text:IRm$.r1("B_CLOSE"),handler:function(){var t=this;t.callback&&t.callback.execute(),t.close()},scope:this}]}),IG$.aboutApp.superclass.initComponent.apply(this,arguments)}});
IG$.makeStyle=$s.extend($s.window,{modal:!0,region:"center",layout:"fit",closable:!1,resizable:!1,width:320,autoHeight:!0,parentnodepath:null,callback:null,processMakeStyleItem:function(){var e,t=this,l=t.m_theme,a=t.down("[name=fitemname]"),n=a.getValue(),i=t.down("[name=basetypeselect]"),s=i.getValue();if(a.clearInvalid(),i.clearInvalid(),n){if(l||s)if(l&&t.themes[n])a.setInvalid("Duplicated");else{if(!l)for(e=0;e<t.styleinfo.length;e++)if(t.styleinfo[e].name==n)return i.setInvalid("Duplicated"),!1;t.callback.execute([n,s]),t.close()}}else a.setInvalid("Required Field")},_init:function(){var e,t=this,l=[],a=t.m_theme,n=t.down("[name=basetypeselect]");if(!a){for(e=0;e<t.styleinfo.length;e++)t.styleinfo[e].basestylename||l.push({name:t.styleinfo[e].name});n.store.loadData(l)}},initComponent:function(){this.title=IRm$.r1("L_MAKESTYLE"),$s.apply(this,{defaults:{bodyStyle:"padding:10px"},items:[{html:IRm$.r1("L_MAKESTYLE"),flex:1,border:0},{xtype:"panel",region:"center",flex:3,border:!0,height:120,defaultType:"textfield",layout:"anchor",defaults:{anchor:"100%"},items:[{fieldLabel:IRm$.r1("L_STYLENAME"),labelWidth:130,name:"fitemname",value:"",allowBlank:!1,blankText:"Style name is required!",enableKeyEvents:!0,listeners:{keyup:function(e,t){13==t.keyCode&&this.processMakeStyleItem.call(this)},scope:this}},{xtype:"combobox",name:"basetypeselect",hidden:!!this.m_theme,fieldLabel:"Inherit Style from",labelWidth:130,store:{fields:[{name:"name"}]},displayField:"name",valueField:"name",editable:!1,queryMode:"local",selectOnTab:!1}],listeners:{afterrender:function(){this._init()},scope:this}}],buttons:[{text:IRm$.r1("B_CONFIRM"),handler:function(){this.processMakeStyleItem()},scope:this},{text:IRm$.r1("B_CANCEL"),handler:function(){this.close()},scope:this}]}),IG$.makeStyle.superclass.initComponent.apply(this,arguments)}});
IG$.styleEditor=$s.extend($s.formpanel,{cstyle:null,layout:"anchor",autoHeight:!0,autoScroll:!0,htype:null,bodyPadding:10,defaults:{anchor:"100%"},dfields:"fontsize;nullvalue;formatstring;dateformat;cssname;template;forecolor;backcolor;bordercolor;borderleft;borderright;bordertop;borderbottom;borderoutcolor;borderoutleft;borderoutright;borderouttop;borderoutbottom;paddingtop;paddingleft;paddingbottom;paddingright;columnwidth".split(";"),init_f:function(e){var l,t,a,o,i,r,n,d;e&&e._mc&&(l=this,a=e._mc,o=Number(a.fontstyle),i=[],r="left",a.borderright=void 0===a.borderright?1:a.borderright,a.borderbottom=void 0===a.borderbottom?1:a.borderbottom,$.each(l.dfields,function(e,t){l.down("[name="+t+"]").setValue(a[t])}),l.down("[name=autowidthmode]").setValue("T"==a.autowidthmode),o&IG$.fontStyle.P_BOLD&&i.push("bold"),o&IG$.fontStyle.P_ITALIC&&i.push("italic"),o&IG$.fontStyle.P_UNDERLINE&&i.push("underline"),(t=l.down("[name=fontstyle]")).setValue({cb_layout:i}),t=l.down("[name="+l.htype+"textalign]"),2==(n=a.textalign)||5==n||8==n?r="center":3!=n&&6!=n&&9!=n||(r="right"),(d={})["cb_"+l.htype+"textalign"]=[r],t.setValue(d))},loadStyleData:function(e,t){t&&e.applyBaseStyle(t),this.cstyle=e,this.init_f(e)},updateStyleData:function(){var l=this;if(l.cstyle&&l.cstyle._mc){var e,t,a=0,o=l.cstyle._mc;if($.each(l.dfields,function(e,t){o[t]=l.down("[name="+t+"]").getValue()}),o.autowidthmode=l.down("[name=autowidthmode]").getValue()?"T":"F",(e=l.down("[name=fontstyle]").getValue())&&e.cb_layout)for(e="string"==typeof e.cb_layout?[e.cb_layout]:e.cb_layout,t=0;t<e.length;t++)switch(e[t]){case"bold":a|=IG$.fontStyle.P_BOLD;break;case"italic":a|=IG$.fontStyle.P_ITALIC;break;case"underline":a|=IG$.fontStyle.P_UNDERLINE}switch(o.fontstyle=a,e=(e=l.down("[name="+l.htype+"textalign]").getValue())&&e["cb_"+l.htype+"textalign"]?e["cb_"+l.htype+"textalign"]:"left"){case"right":e=6;break;case"center":e=5;break;default:e=4}o.textalign=e}},fieldDefaults:{labelWidth:90},initComponent:function(){var e=this;$s.apply(e,{items:[{xtype:"checkboxgroup",name:"fontstyle",vertical:!0,fieldLabel:IRm$.r1("L_FONT_FACE"),plain:!0,items:[{boxLabel:IRm$.r1("L_FONT_BOLD"),name:"cb_layout",inputValue:"bold",checked:!1},{boxLabel:IRm$.r1("L_FONT_ITALIC"),name:"cb_layout",inputValue:"italic",checked:!1},{boxLabel:IRm$.r1("L_FONT_UNDERLINE"),name:"cb_layout",inputValue:"underline",checked:!1}]},{xtype:"radiogroup",name:e.htype+"textalign",vertical:!0,fieldLabel:IRm$.r1("L_FONT_ALIGNMENT"),items:[{boxLabel:IRm$.r1("L_ALIGN_LEFT"),name:"cb_"+e.htype+"textalign",inputValue:"left",checked:!1},{boxLabel:IRm$.r1("L_ALIGN_CENTER"),name:"cb_"+e.htype+"textalign",inputValue:"center",checked:!1},{boxLabel:IRm$.r1("L_ALIGN_RIGHT"),name:"cb_"+e.htype+"textalign",inputValue:"right",checked:!1}]},{fieldLabel:IRm$.r1("L_FONTSIZE"),name:"fontsize",flex:1,xtype:"textfield"},{fieldLabel:IRm$.r1("L_NULL_VALUE"),xtype:"textfield",name:"nullvalue"},{xtype:"textfield",name:"formatstring",fieldLabel:"Format String"},{xtype:"textfield",name:"dateformat",fieldLabel:"Data Format"},{xtype:"textfield",name:"cssname",fieldLabel:"CSS Class"},{xtype:"textarea",height:60,name:"template",fieldLabel:"Template"},{xtype:"displayfield",value:"Ex: &lt;span style='font-family: fontawesome; color:#ff0000'&gt;"},{xtype:"displayfield",value:"&amp;#xf001;&lt;/span&gt;&lt;span&gt;TEXT&lt;/span&gt;"},{xtype:"fieldset",title:"Color Setting",collapsible:!0,layout:"anchor",items:[{xtype:"fieldcontainer",anchor:"100%",fieldLabel:IRm$.r1("L_FORE_COLOR"),layout:{type:"hbox",align:"stretch"},items:[{xtype:"textfield",name:"forecolor",width:120},{xtype:"splitter"},{xtype:"splitbutton",width:30,menu:{showSeparator:!1,items:[{xtype:"colorpicker",listeners:{select:function(e,t){this.down("[name=forecolor]").setValue("#"+t)},scope:e}},"-"]}},{xtype:"container",flex:1}]},{xtype:"fieldcontainer",anchor:"100%",fieldLabel:IRm$.r1("L_BACK_COLOR"),layout:{type:"hbox",align:"stretch"},items:[{xtype:"textfield",name:"backcolor",width:120},{xtype:"splitter"},{fieldLabel:IRm$.r1("L_BACK_COLOR"),xtype:"splitbutton",menu:{showSeparator:!1,items:[{xtype:"colorpicker",listeners:{select:function(e,t){this.down("[name=backcolor]").setValue("#"+t)},scope:e}},"-"]}},{xtype:"container",flex:1}]},{xtype:"fieldset",title:IRm$.r1("L_BORDER_INNER"),layout:{type:"vbox",align:"stretch"},items:[{xtype:"fieldcontainer",anchor:"100%",fieldLabel:IRm$.r1("L_BORDER_COLOR"),layout:{type:"hbox",align:"stretch"},items:[{xtype:"textfield",name:"bordercolor",width:120},{xtype:"splitter"},{xtype:"splitbutton",menu:{showSeparator:!1,items:[{xtype:"colorpicker",listeners:{select:function(e,t){this.down("[name=bordercolor]").setValue("#"+t)},scope:e}},"-"]}},{xtype:"container",flex:1}]},{fieldLabel:IRm$.r1("L_BORDER_LEFT"),name:"borderleft",xtype:"numberfield",value:1},{fieldLabel:IRm$.r1("L_BORDER_RIGHT"),name:"borderright",xtype:"numberfield",value:1},{fieldLabel:IRm$.r1("L_BORDER_TOP"),name:"bordertop",xtype:"numberfield",value:1},{fieldLabel:IRm$.r1("L_BORDER_BOTTOM"),name:"borderbottom",xtype:"numberfield",value:1}]},{xtype:"fieldset",title:IRm$.r1("L_BORDER_OUTER"),layout:{type:"vbox",align:"stretch"},items:[{xtype:"fieldcontainer",anchor:"100%",fieldLabel:IRm$.r1("L_BORDER_COLOR"),layout:{type:"hbox",align:"stretch"},items:[{xtype:"textfield",name:"borderoutcolor",width:120},{xtype:"splitter"},{xtype:"splitbutton",menu:{showSeparator:!1,items:[{xtype:"colorpicker",listeners:{select:function(e,t){this.down("[name=borderoutcolor]").setValue("#"+t)},scope:e}},"-"]}},{xtype:"container",flex:1}]},{fieldLabel:IRm$.r1("L_BORDER_LEFT"),name:"borderoutleft",xtype:"numberfield",value:1},{fieldLabel:IRm$.r1("L_BORDER_RIGHT"),name:"borderoutright",xtype:"numberfield",value:1},{fieldLabel:IRm$.r1("L_BORDER_TOP"),name:"borderouttop",xtype:"numberfield",value:1},{fieldLabel:IRm$.r1("L_BORDER_BOTTOM"),name:"borderoutbottom",xtype:"numberfield",value:1}]}]},{xtype:"fieldset",title:IRm$.r1("L_PADDING"),collapsible:!0,layout:"anchor",items:[{fieldLabel:IRm$.r1("L_PAD_TOP"),name:"paddingtop",xtype:"numberfield"},{fieldLabel:IRm$.r1("L_PAD_LEFT"),name:"paddingleft",xtype:"numberfield"},{fieldLabel:IRm$.r1("L_PAD_BOTTOM"),name:"paddingbottom",xtype:"numberfield"},{fieldLabel:IRm$.r1("L_PAD_RIGHT"),name:"paddingright",xtype:"numberfield"}]},{xtype:"fieldcontainer",layout:"hbox",fieldLabel:IRm$.r1("L_COLUMN_WIDTH"),items:[{xtype:"checkbox",boxLabel:IRm$.r1("L_AUTO_WIDTH"),name:"autowidthmode"},{xtype:"numberfield",name:"columnwidth",minValue:30,maxValue:400}]}]}),IG$.styleEditor.superclass.initComponent.apply(this,arguments)}});
IG$.globalReportStyle=$s.extend($s.window,{modal:!0,region:"center",layout:"fit",closable:!1,resizable:!0,width:650,height:500,callback:null,ignoreBase:!1,_init:function(){var e=this,t=new IG$._rpc$,a={},s=e.reportoption,l=s?s.getCurrentPivot():{};s&&(a={uid:s._mc.uid,option:"styleinfo",active:""+e.activeSheet,theme_id:ig$.theme_id}),t.init(e,{ack:"olapservice",payload:a,mbody:l,meta_type:"report"},e,e.rs_getStylInfo,null),t.send()},rs_getStylInfo:function(e){var t,a,s,l,n,i,o,y=this,r=[],d=[],m={},p=y.targetitem,c=p?p.name+"_"+(p.sequence||"0"):null;if(y.cbaseselect=y.down("[name=basestyle]"),i=y.stylelist=y.down("[name=stylelist]"),y.styles={app:[]},null!=(t=e.app_styles.default_styles))for(s=0;s<t.length;s++)l=new IG$.clStyleObject(t[s],"appstyle",!1),y.styles[l.name]=l,d.push({name:l.name});function u(e){if(e)for(var t,a=0;a<e.length;a++)t=new IG$.clStyleObject(e[a],"appstyle",!0),y.styles[t.name]=t,d.push({name:t.name}),null!=t.basestylename&&y.styles[t.basestylename]&&t.applyBaseStyle(y.styles[t.basestylename])}if(u(e.app_styles.custom_styles),e.cube_styles&&u(e.cube_styles.default_styels),e.cube_styles&&u(e.cube_styles.custom_styles),e.style_map)for(s=0;s<e.style_map.length;s++)m[(n=e.style_map).name+"_"+(n.rptseq||"0")]=n.basename;if(e.report_style)for(a=e.report_style,s=0;s<a.length;s++)l=new IG$.clStyleObject(a[s],"reportstyle",!0),y.styles[l.name+"_"+l.rptseq]=l,r.push({name:l.name,groupname:"Unit_"+l.rptseq,rptseq:l.rptseq}),m[l.name+"_"+l.rptseq]&&(l.basestylename=m[l.name+"_"+l.rptseq]),null!=l.basestylename&&y.styles[l.basestylename]&&l.applyBaseStyle(y.styles[l.basestylename]);if(y.cbaseselect.store.loadData(d),i.store.loadData(r),c)for(s=0;s<i.store.data.items.length;s++)if((o=i.store.data.items[s]).get("name")+"_"+o.get("rptseq")==c){i.getSelectionModel().select(o),y.updateStyleData(),y.loadStyleData(c);break}},loadStyleData:function(e){var t,a,s,l,n=this,i=n.styles;i&&i[e]&&(t=i[e],a=n.down("[name=seheader]"),s=n.down("[name=sedata]"),l=n.down("[name=basestyle]"),n.editingstyle=t,n.ignoreBase=!0,l.setValue(t.basestylename||""),n.ignoreBase=!1,a.loadStyleData.call(a,t.header),s.loadStyleData.call(s,t.data))},updateStyleData:function(){var e,t,a,s=this;s.editingstyle&&(e=s.down("[name=seheader]"),t=s.down("[name=sedata]"),a=s.down("[name=basestyle]"),s.editingstyle.basestylename=a.getValue(),e.updateStyleData.call(e),t.updateStyleData.call(t))},confirmChanges:function(e){var t,a,s,l=this,n=l.sheetoption,i=l.styles;if(l.updateStyleData(),n)for(t in n.model.styles=[],i)"reportstyle"==i[t].itemtype&&(s=(a=i[t]).getData(),a.basestylename&&i[a.basestylename]&&(s=a.getData(i[a.basestylename])),n.model.styles.push(s));l.callback&&l.callback.execute(),e||l.close()},updateBaseStyle:function(){var e,t,a=this,s=a.editingstyle,l=a.down("[name=basestyle]"),n=a.styles[l.getValue()];n&&s&&(e=a.down("[name=seheader]"),t=a.down("[name=sedata]"),s.forceBsStyl(n),e.loadStyleData.call(e,s.header),t.loadStyleData.call(t,s.data))},initComponent:function(){this.title=IRm$.r1("T_REPORT_STYLE"),$s.apply(this,{defaults:{bodyStyle:"padding:5px"},items:[{xtype:"panel",layout:{type:"hbox",align:"stretch"},items:[{title:"Style Items",layout:"fit",flex:1,items:[{xtype:"grid",name:"stylelist",features:[{ftype:"grouping",groupHeaderTpl:"Folder: {groupname} ({rows.length} items)"}],store:{sorters:["name"],groupField:"groupname",fields:["name","groupname","rptseq"],data:[]},hideHeaders:!0,columns:[{text:IRm$.r1("B_NAME"),dataIndex:"name",tdCls:"igc-td-link",flex:1}],listeners:{itemclick:function(e,t,a,s,l){var n=t.data;this.updateStyleData(),this.loadStyleData(n.name+"_"+n.rptseq)},scope:this}}]},{xtype:"panel",layout:{type:"vbox",align:"stretch"},flex:2,items:[{xtype:"combobox",name:"basestyle",fieldLabel:"Base Style",queryMode:"local",displayField:"name",valueField:"name",editable:!1,autoSelect:!0,store:{fields:[{name:"name"}]},listeners:{change:function(){0==this.ignoreBase&&this.updateBaseStyle()},scope:this}},{xtype:"tabpanel",layout:"fit",plain:!0,flex:1,items:[new IG$.styleEditor({title:"Data Style",name:"sedata",htype:"dt",flex:1}),new IG$.styleEditor({title:"Header Style",name:"seheader",htype:"hd",flex:1})]}]}]}],buttons:[{text:IRm$.r1("B_APPLY"),hidden:!this.targetitem,handler:function(){this.confirmChanges(1)},scope:this},"->",{text:IRm$.r1("B_CONFIRM"),handler:function(){this.confirmChanges()},scope:this},{text:IRm$.r1("B_CANCEL"),handler:function(){this.close()},scope:this}],listeners:{afterrender:function(e){this._init()}}}),IG$.passwordMgr.superclass.initComponent.apply(this,arguments)}});
IG$.n$navTreeCom=$s.extend($s.treepanel,{xtype:"treepanel",customMenu:null,enabledrag:!0,ntritem:null,ntrnode:null,ntrseq:0,border:0,tooltip:!1,region:"west",split:!0,header:!1,collapsible:!0,rootVisible:!0,lines:!1,animCollapse:!1,animate:!0,collapseMode:"mini",collapseFirst:!1,singleExpand:!1,selectedNode:[],navigateTree:function(e){var t=this,i=t.getRootNode(),n=i.get("nodepath");t.ntritem=e,t.ntrnode=i,t.ntrseq=1,n&&-1<e.nodepath.indexOf(n)&&(t.ntrseq=n.split("/").length),t.navigateTreeOpen()},navigateTreeOpen:function(){var e,t,i,n=this.ntritem.nodepath||this.ntritem,d=n.split("/"),o=this.ntrseq,a=this.ntrnode;if(a&&d.length>o)for(e=d[o],t=0;t<a.childNodes.length;t++)if((i=a.childNodes[t]).data.name==e){0==i.isLeaf()?(this.ntrnode=i,this.ntrseq++,i.expand(!1,this.navigateTreeOpen,this),i.get("nodepath")==n&&this.getSelectionModel().select(i)):(this.ntrnode=null,this.ntrseq=0,this.getSelectionModel().select(i));break}},setFilter:function(e){var t=this,i=t.getRootNode();t._fitem=e,t._updateFilter(i,t._fitem)},_updateFilter:function(e,t,i){var n,d;if(e.childNodes&&e.childNodes.length)for(n=0;n<e.childNodes.length;n++)"folder"==(d=e.childNodes[n].data.ltype)?this._updateFilter(e.childNodes[n],t,i):"table"==d||"inlineview"==d?(!t||t&&t[e.childNodes[n].data.uid]?e.childNodes[n].set("disabled",!1):e.childNodes[n].set("disabled",!0),this._updateFilter(e.childNodes[n],t,e.childNodes[n].get("disabled"))):e.childNodes[n].set("disabled",i)},_createMetaObject:IG$._createMetaObject,r_createMetaObject:IG$.r_createMetaObject,_renameMetaObject:IG$._renameMetaObject,r_renameMetaObject:IG$.r_renameMetaObject,deleteMetaObject:IG$.deleteMetaObject,rdeleteMetaObject:IG$.rdeleteMetaObject,editMeta:IG$.editMeta,raiseCustomEvent:function(e,t,i){this.fireEvent(e,t,i)},moveSelItems:function(){var e,t=this,i={},n=0;if(0<t.selectedNode.length){for(var d,o=0;o<t.selectedNode.length;o++){if("help"==(e=t.selectedNode[o]).data.type.toLowerCase()&&(treeoptions.rootuid=t.rootuid),null!=e.data.nodepath.substring(0,e.data.nodepath.lastIndexOf("/"))){n=0,IG$.ShowError("One subfolder content is allowed to move.",t);break}if(!e.data.manage&&!e.data.writable){n=0,IG$.ShowError("Privilege error on content",t);break}i.push({uid:e.data.uid}),n++}0<n&&(d=new IG$.metaSelectDlg({mode:"select",targetobj:"folder",visibleItems:"folder",tree_options:{},callback:new IG$.callBackObj(t,t.rmoveSelItems,[i,void 0])}),IG$.checkLogin(t,d))}},rmoveSelItems:function(e,t){var i=t[0],n=t[1],d=this,o=new IG$._rpc$;o.init(d,{ack:"helpcontent",payload:i,mbody:{option:"move",target:e.uid}},d,d.r_moveSelItems,null,n),o.send()},r_moveSelItems:function(e,t){var i=this;i.refreshNode(t),i.selectedNode=[],IG$.alertmsg(ig$.appname,"Moved items successfully",null,i,0,"success")},removeSelItems:function(){var e,t,i,n=this,d={},o=0;if(0<n.selectedNode.length){for(e=0;e<n.selectedNode.length;e++){if(!(t=n.selectedNode[e]).data.manage&&!t.data.writable){o=0,IG$.ShowError("Privilege error on content",n);break}d.push({uid:t.data.uid}),o++}0<o&&((i=new IG$._rpc$).init(n,{ack:"batchcontent",payload:d,mbody:{option:"delete"}},n,n.rdeleteMetaObject,null),i.send())}},filterTree:function(e,t){},refreshTree:function(e){var t,n=this,d=e||n.getRootNode();for(n._expandedNodes={},d.dirty=!0,d.data.loaded=!1,d.data.expanded=!1;d.firstChild;)d.childNodes&&d.firstChild.isExpanded()&&(n._expandedNodes[d.firstChild.get("uid")]=1,n._updateExpanded(d.firstChild,n._expandedNodes)),d.removeChild(d.firstChild);if(n._rootitems)for(t=n._rootitems,i=0;i<t.length;i++)delete t[i].id,delete t[i].open,t[i].leaf=!1,t[i].children=[{type:"load",name:"Loading..."}],d.appendChild(t[i]);else d.appendChild({open:!1,type:"load",name:"Loading..."}),d.collapse();d.expand()},_updateExpanded:function(e,t){var i,n;if(e.childNodes)for(i=0;i<e.childNodes.length;i++)(n=e.childNodes[i]).childNodes&&n.childNodes.length&&n.isExpanded()&&(t[n.get("uid")]=1,this._updateExpanded(n,t))},refreshNode:function(e){var t=e;1==e.isLeaf()&&(t=e.parentNode),this.refreshTree(t)},refTopNode:function(){this.selectedNode=[];var e=this.getRootNode();for(this.setPosition(0,0),this.getSelectionModel().select(e),e.dirty=!0,e.data.loaded=!1,e.data.expanded=!1;e.firstChild;)e.removeChild(e.firstChild);e.expand(!1)},appendRootWS:function(e){for(var t,i=this.getRootNode(),n=this.store.model,d=!1,o=0;o<i.childNodes.length;o++)if(i.childNodes[o].data.uid==e.uid){d=!0;break}0==d&&((t=new n(e)).raw=e,i.appendChild(t))},pasteMetaObject:function(e){var t=new IG$._rpc$;t.init(this,{ack:"writecontent",payload:{pid:e.get("uid"),address:IG$.clipboard.uid},mbody:{option:"copy"}},this,this.rpasteMetaObject,null,e),t.send()},rpasteMetaObject:function(e,t){this.refreshNode(t)},prepareCustomMenu:IG$.prepareCustomMenu,manageFolder:function(e){var t=new IG$.dlgFolderMgr({root:{uid:e.get("uid"),name:e.get("name"),type:e.get("type")}});IG$.checkLogin(this,t)},exportMeta:function(e){var t=new IG$.metaExpDlg({meta:e});IG$.checkLogin(this,t)},initComponent:function(){var e,a=this;a.tree_options&&$s.apply(this,a.tree_options),1==a._meta_move&&(a.beforedrop_exec=new IG$.callBackObj(a,function(e,t,a,l,i,n){var s=this,r=(s.getRootNode(),!1);return a&&a.view&&a.view==s&&a.records&&a.records.length&&IG$.confirmMessages(ig$.appname,"Would you move content to dropped folder?",function(e){var n,d,t,o,i;"yes"!=e||!l||1!=l.get("writable")&&"Root"!=l.get("type")||(n=l.get("type"),d=1,o=[],i={option:"move",target:"Root"==n?"/":l.get("uid")},!n||"Folder"!=n&&"Bobject"!=n&&"Root"!=n||($.each(a.records,function(e,t){var i=t.get("type");if("folder"==(i=i?i.toLowerCase():null)||"report"==i||"bobject"==i){if("Root"!=n&&t.get("pid")==l.get("uid"))return d=0,!1}else if("table"!=i&&"inlineview"!=i&&"cubemodel"!=i||"Bobject"!=n&&"Folder"!=n)return d=("root"==i||t.get("is_priv")||t.get("is_dept"),0),!1;d&&o.push({uid:t.get("uid")})}),0==d?r=!1:o.length&&(r=!0,(t=new IG$._rpc$).init(s,{ack:"helpcontent",payload:o,mbody:i},s,function(e){$.each(a.records,function(e,t){t.parentNode.removeChild(t)}),s.refreshNode(l)},null,null),t.send())))}),r})),e=[{xtype:"treecolumn",text:IRm$.r1("B_NAME"),flex:2,sortable:!1,dataIndex:"name",renderer:function(e,t,i){var n="",d=i.get("locale_name")||i.get("name"),o=d+(i.get("locale_name")?" ("+i.get("name")+")":"")+"\n ===> "+(i.get("nodepath")||"unknown");return i.get("scid")&&(n="igc-subscribed"),i.data.disabled&&(n+=" igc-disabled"),"<span class='"+n+"' title='"+IG$.hEE(o)+"'>"+IG$.hEE(d)+"</span>"}}],IRm$.r1("L_REFRESH"),$s.apply(this,{enableDragDrop:!0,enableDD:!0,useArrows:!0,ddGroup:"_I$RD_G_",hideHeaders:!0,hiddenPkgs:[],columns:e,store:{xtype:"treestore",fields:["uid","nodepath","address","description","manage","memo","name","type","writable","lname","locale","is_sub"]},customMenu:new $s.menu({items:[]}),selModel:{selection:"treemodel",mode:"MULTI"},viewConfig:a.enabledrag?{plugins:{ptype:"gridviewdragdrop",dragGroup:"_I$RD_G_"},listeners:{beforedrop:function(e,t,i,n,d){t.view,t.records;var o=!1;return this.panel&&this.panel.beforedrop_exec&&(o=this.panel.beforedrop_exec.execute(this,e,t,i,n,d)),o},drop:function(e,t,i,n){i&&i.get("name")}}}:null,listeners:{afterrender:function(e){var t={name:e.rootname||IRm$.r1("B_WORKSPACE"),expanded:!0,address:"/",type:"Root",uid:e.rootuid||"",children:[{type:"load",name:"Loading..."}]};a.__loaded=1,"none"!=a.rootuid&&setTimeout(function(){e.setRootNode(t).expand(),a.initpath&&a.navigateTree.call(a,a.initpath)},20)},beforeitemcontextmenu:function(e,t,i,n,d){d.stopEvent();d.pageX,d.pageY;var o=d.getTarget();return 1==this.prepareCustomMenu(t,a.btype)&&this.customMenu.showBy(o),!1},itemclick:function(e,t,i,n,d){var o,a,l,s,r,c,p=!1,u=t.data,h=this.mainPanel;"INPUT"!=d.target.nodeName&&(this.custom_click_func&&(p=this.custom_click_func.execute(t,u)),0==p&&(o=u.type.toLowerCase(),a=u.name,l=u.nodepath,s=u.uid,r=!(!u.writable&&!u.manage),u.manage,u.issubcube,"igccustom"==o?(c=window.igc_custom_menus.menuitems[s])&&c.handler&&c.handler.call(window,c):1==t.isLeaf()&&(d&&d.stopEvent&&d.stopEvent(),h&&h.navigateApp.call(h,s,o,a,l,!0,r))))},itemdblclick:function(e,t,i,n,d,o){d.stopPropagation(),this.custDblClickFunc&&(bproc=this.custDblClickFunc.execute(t))},beforeitemexpand:function(l,e){var s=this,r=(l.get("type"),l.get("uid"));if(!s.custom_expand_func||!s.custom_expand_func.execute(l)){if(l.isRoot()){if(!(0<l.childNodes.length&&"load"==l.childNodes[0].get("type")))return;addr=s.rootuid&&"none"!=s.rootuid?{uid:s.rootuid}:r&&0<r.length?{uid:r}:{uid:"/",type:"Folder"}}else if(addr={uid:r},!(0<l.childNodes.length&&"load"==l.childNodes[0].get("type")))return;var t,i=new IG$._rpc$,c=s._visibleItems,n=!c&&s.visibleItems?s.visibleItems.split(";"):null;if(!c&&n&&n.length){for(t=0;t<n.length;t++)n[t]&&((c=c||{})[n[t]]=1);s._visibleItems=c}s.__loaded&&s.setLoading(!0),l.removeAll(),i.init(s,{ack:"content",payload:addr,mbody:{subfolder:"T"}},s,function(e){var t,i,n,d,o=e?e.children:null,a=[];if(l.isRoot()&&"/"!=e.nodepath&&(l.set("name",e.name),l.set("type",e.type),l.set("nodepath",e.nodepath),l.set("writable",e.writable)),"~/"!=r&&"!/"!=r||(l.set("uid",e.uid),l.set("type",e.type),l.set("nodepath",e.nodepath),l.set("writable",e.writable)),o)for(t=0;t<o.length;t++)(i=o[t]).text=i.name,i.address=i.uid,n=i.type.toLowerCase(),i.memo&&i.memo.toLowerCase(),(d=!c||c&&c[n]?0:1)&&s.cubebrowse&&i.is_sub&&("metric"==n||"datemetric"==n)&&(d=!1),!d&&s.hiddenItems&&s.hiddenItems[n]&&(d=!0),d||(1==/(metrics|table|inlineview|folder|rfolder|datemetric|javapackage|dataset|userdb)/.test(n)?(/(table|inlineview)/.test(n)&&s._fitem&&!s._fitem[i.uid]&&(i.disabled=!0),i.leaf=!1):(i.leaf=!0,i.allowDrag=!0,i.disabled=l.data.disabled),i.leaf&&i.is_sub&&1==/(metric)/.test(n)&&(i.leaf=!1),i.children&&IG$.sortMeta(i.children),i.leaf||i.children||(i.loaded=!1,i.expanded=!1,i.children=[{type:"load",name:"Wait while get data"}]),i.iconCls=IG$.get_metatype_icon(n,i),a.push(i));IG$.sortMeta(a),l.isRoot()&&"/"==e.nodepath&&(ig$.features.ig_m_prv_ws||a.push({name:IRm$.r1("B_PRIV_FLD"),expanded:!1,address:"~/",type:"Folder",is_priv:!0,writable:!0,uid:"~/",children:[{type:"load",name:"Loading..."}]}),ig$.features.ig_m_team_ws||a.push({name:IRm$.r1("B_PUB_FLD"),expanded:!1,address:"!/",type:"Folder",writable:!0,is_dept:!0,uid:"!/",children:[{type:"load",name:"Loading..."}]})),a.length&&l.appendChild(a),s._expandedNodes&&l.childNodes&&$.each(l.childNodes,function(e,t){var i=t.get("uid");s._expandedNodes[i]&&(t.expand(),delete s._expandedNodes[i])}),s.custom_expanded_func&&s.custom_expanded_func.execute(l)}),i.send()}}}}),IG$.n$navTreeCom.superclass.initComponent.call(this)}}),IG$.metaExpDlg=$s.extend($s.window,{width:400,autoHeight:!0,layout:"fit",_confirm:function(){var t=this,i=t.meta,n=new IG$._rpc$,d={output:"file"};t.getAllValues(d,!0),IG$.confirmMessages(IRm$.r1("T_EXP_MC"),IRm$.r1("T_EXP_MC_Q"),function(e){i&&"yes"==e&&(n.init(t,{ack:"content",payload:{uid:i.uid,nodepath:i.nodepath,name:i.name,type:i.type},mbody:d},t,function(e){var t,i;e&&(t=e.luid,i=e.filename,IG$.alertmsg(ig$.appname,IRm$.r1("M_SAVED"),null,null,0,"success"),t&&i&&$.download(ig$.servlet,[{name:"ack",value:"download"},{name:"_mts_",value:IG$._g$a||""},{name:"payload",value:t},{name:"mbody",value:i}],"POST"))},null),n.send()),t.close()},t,t)},initComponent:function(){$s.apply(this,{title:IRm$.r1("T_META_EXP"),padding:8,items:[{xtype:"container",padding:8,layout:{type:"vbox",align:"stretch"},items:[{xtype:"fieldset",title:IRm$.r1("L_META_EXP_OPT"),padding:8,layout:{type:"vbox",align:"stretch"},items:[{xtype:"checkbox",name:"opt_dependants",fieldLabel:"Include Dependants",boxLabel:IRm$.r1("B_ENABLED")},{xtype:"checkbox",name:"opt_security",fieldLabel:"Include Security",boxLabel:IRm$.r1("B_ENABLED")},{xtype:"checkbox",name:"opt_owner_info",fieldLabel:"Include Onwer Info",boxLabel:IRm$.r1("B_ENABLED"),checked:!0}]}]}],buttons:[{text:IRm$.r1("B_CONFIRM"),handler:function(){this._confirm()},scope:this},{text:IRm$.r1("B_CLOSE"),handler:function(){this.close()},scope:this}]}),IG$.metaExpDlg.superclass.initComponent.apply(this,arguments)}});
IG$.naviTree=$s.extend($s.panel,{setRootNode:function(e){var t=this;return t.down("[name=sinp]").setValue(""),t.m_c.getLayout().setActiveItem(0),t.m_0.setRootNode(e)},getRootNode:function(){return this.m_0.getRootNode()},doSearch:function(){var e,t,n=this,o=n.down("[name=sinp]").getValue(),a=n.m_1,i=n.m_0.getRootNode();o?(a.store.loadData([]),n.m_c.getLayout().setActiveItem(1),t=i.get("uid"),(e=new IG$._rpc$).init(n,{ack:"helpcontent",payload:{uid:t},mbody:{option:"search",name:o,pid:t,metatypes:n.metatypes||"Table;Metric;CustomMetric;Measure;MeasureFormula;Report;Datemetric;Folder"}},n,function(e){var t,n,o=e&&e.children&&e.children.length?e.children:null,i=[];if(o)for(t=0;t<o.length;t++)(n=o[t]).ltype=n.type.toLowerCase(),n.iconcls=IG$.get_metatype_icon(n.ltype,n),i.push(n);a.store.loadData(i)},null),e.send()):n.m_c.getLayout().setActiveItem(0)},refreshTree:function(){this.down("[name=m_0]").refreshTree()},getSelectionModel:function(){return this.down("[name=m_0]").getSelectionModel()},setFilter:function(e){var t=this.down("[name=m_0]");this._fitem=e,t.setFilter(e)},initComponent:function(){var e,t=this;if($s.apply(this,{border:0,layout:{type:"vbox",align:"stretch"},items:[{xtype:"container",layout:{type:"hbox",pack:"center"},height:30,hidden:1!=t._search,items:[{xtype:"container",name:"m_search",layout:{type:"hbox",align:"stretch"},flex:1,items:[{xtype:"textfield",name:"sinp",flex:1,placeholder:IRm$.r1("L_SEARCH_KWD"),enableKeyEvents:!0,listeners:{keyup:function(e,t){var n=this,o=n.down("[name=sinp]"),i=n.down("[name=sclose]");13==t.keyCode&&(o.getValue()&&i.show(),n.doSearch.call(n))},scope:this}},{xtype:"button",text:"..",handler:function(){var e=this,t=e.down("[name=sinp]"),n=e.down("[name=sclose]");t.getValue()&&n.show(),e.doSearch.call(e)},scope:this},{xtype:"button",text:"X",name:"sclose",hidden:!0,handler:function(){var e=this,t=e.down("[name=sinp]"),n=e.down("[name=sclose]");t.setValue(""),e.m_c.getLayout().setActiveItem(0),n.hide()},scope:this}]},{xtype:"button",type:"refresh",margin:"4 2 0",iconCls:"icon-refresh",tooltip:"Refresh",handler:function(e,t,n){this.refreshTree()},scope:this}]},{xtype:"panel",flex:1,layout:"card",name:"m_c",defaults:{deferredRender:!1},items:[new IG$.n$navTreeCom({name:"m_0",border:0,rootuid:t.rootuid,initpath:t.initpath,mainPanel:t.mainPanel,showtoolbar:t.showtoolbar,showcheckselect:t.showcheckselect,ddGroup:t.ddGroup,enabledrag:t.enabledrag,custom_click_func:t.custom_click_func,custom_expand_func:t.custom_expand_func,custom_expanded_func:t.custom_expanded_func,custDblClickFunc:t.custDblClickFunc,checkStateChanged:t.checkStateChanged,visibleItems:t.visibleItems,hiddenItems:t.hiddenItems,isdatasource:t.isdatasource,tree_options:t.tree_options}),{xtype:"gridpanel",name:"m_1",emptyText:IRm$.r1("L_EMPTY"),viewConfig:{plugins:{ptype:"gridviewdragdrop",ddGroup:t.ddGroup,enabledrag:t.enabledrag}},store:{fields:["uid","name","type","nodepath","iconcls","lname"]},selModel:{mode:"MULTI"},columns:[{width:25,renderer:function(e,t,n){return"<div class='ig-navi-itemicon "+(n.get("iconcls")||"")+"'></div>"}},{text:IRm$.r1("B_NAME"),flex:1,tdCls:"ig-navi-namecol",renderer:function(e,t,n){var o=n.get("locale_name")||n.get("name");return n.get("locale_name")&&(o+="("+n.get("locale_name")+")"),o+="\n==>"+(n.get("nodepath")||""),"<span title='"+IG$.hEE(o)+"'>"+IG$.hEE(n.get("locale_name")||n.get("name"))+"</span>"}},{xtype:"actioncolumn",width:30,items:[{iconCls:"icon-grid-dbicon",handler:function(e,t,n){var o=this,i=e.store.data.items[t];itemtype=i.get("type").toLowerCase(),"folder"!=itemtype&&"table"!=itemtype||1!=c||(o.m_c.getLayout().setActiveItem(0),o.m_0.navigateTree.call(o.m_0,{uid:i.get("uid"),nodepath:i.get("nodepath"),type:i.get("type")}))},scope:this}]}],listeners:{cellclick:function(e,t,n,o,i,a,s){var c=o.data;this.custom_click_func&&this.custom_click_func.execute(o,c)},itemdblclick:function(e,t,n,o,i,a){i.stopPropagation(),this.custDblClickFunc&&(bproc=this.custDblClickFunc.execute(t))},scope:this}}]}]}),t.tools&&t.tools.length)for(e=0;e<t.tools.length;e++)t.items[0].items.push(t.tools[e]);t.on("afterrender",function(e){var n=e;n.down("[name=m_search]");n.m_0=n.down("[name=m_0]"),n.m_1=n.down("[name=m_1]"),n.m_c=n.down("[name=m_c]"),n.m_0.on("refreshTree",function(e,t){return n.refreshTree(),1})}),IG$.naviTree.superclass.initComponent.call(this)}});
IG$.n$brwSch=$s.extend($s.panel,{layout:"border",owner:null,reqSearch:function(){for(var e,t=this.down("[name=keyword]").getValue(),a=this.down("[name=fltsetdate]").getValue(),l=this.down("[name=fltfromdate]").getRawValue().split("-"),n=this.down("[name=flttodate]").getRawValue().split("-"),i=this.down("[name=fltypegrid]"),o=[],d=this,s=new IG$._rpc$,r=!1,c=0;c<i.store.data.items.length;c++)1==i.store.data.items[c].get("selected")&&o.push(i.store.data.items[c].get("type"));(t&&0<t.length||1==a)&&(r=!0),1==r&&(e={option:"search",name:t},1==a&&(e.fromdate=l.join("")+"000000",e.todate=n.join("")+"240000"),o&&0<o.length&&(e.typelist=o.join(";")),s.init(d,{ack:"helpcontent",payload:{},mbody:e},d,d.rs_reqSearch,null),s.send())},rs_reqSearch:function(e){var t,a,l,n=IG$.XGetNode(e,"/smsg/result"),i=this.down("[name=mgrid]"),o=[];if(n)for(a=IG$.XGetChildNodes(n),t=0;t<a.length;t++)(l=IG$.XGetAttrProp(a[t])).iconCls=IG$.get_metatype_icon(l.type.toLowerCase(),l),o.push(l);i.store.loadData(o)},initComponent:function(){var e=Ext.create("Ext.XTemplate",'<tpl for=".">','<div class="idv-sch-item">','<div class="idv-sch-icon {iconCls}"> </div><h3><span>{name}</span>&nbsp;</h3>',"<p>{nodepath}</p>","</div></tpl>",{formatDate:function(e){return Ext.Date.format(e,"M j, Y")}}),t=[{xtype:"panel",bodyStyle:"padding:5px",layout:"anchor",autoHeight:!0,defaults:{anchor:"100%"},region:"north",items:[{xtype:"textfield",fieldLabel:"Keyword",labelWidth:50,border:!1,flex:1,height:20,hideLabel:!1,name:"keyword",value:"",allowBlank:!0,blankText:"Keyword is required!",enableKeyEvents:!0,listeners:{keyup:function(e,t){13==t.keyCode&&this.reqSearch.call(this)},scope:this}},{xtype:"fieldset",title:"Advanced Option",collapsible:!0,autoHeight:!0,collapsed:!0,defaults:{labelWidth:80,anchor:"100%",layout:"anchor",defaults:{anchor:"100%"}},items:[{xtype:"combobox",name:"fltypegroup",labelField:"Type",queryMode:"local",displayField:"name",valueField:"gcode",editable:!1,store:{fields:["name","gcode"],data:[{name:"----- Quick Select -----",gcode:""},{name:"All",gcode:"all"},{name:"Folder and Workspace",gcode:"folder"},{name:1==IG$.level?"Report or dashboard":"Report",gcode:"report"},{name:"Analysis item",gcode:"dimensions"}]},listeners:{select:function(e,t,a){var l,n,i=e.getValue(),o=this.down("[name=fltypegrid]").store,d=null,s=null;switch(i){case"all":d=null;break;case"report":d="Report|Dashboard";break;case"folder":d="Folder";break;case"dimensions":d="Dimension|Measure"}for(null!=d&&(s=new RegExp(d)),l=0;l<o.data.items.length;l++)n=o.data.items[l].get("type"),null==d||null!=s&&1==s.test(n)?o.data.items[l].set("selected",!0):o.data.items[l].set("selected",!1)},afterrender:function(e){e.setValue("")},scope:this}},{xtype:"gridpanel",name:"fltypegrid",region:"center",layout:"fit",hideHeaders:!0,flex:1,height:100,scroll:"vertical",stateful:!1,store:{fields:["selected","name","type","nodepath","uid","iconimg"],data:[{name:"Folder",type:"Folder"},{name:"Cube",type:"Cube"},{name:"Report",type:"Report"},{name:"Dimension",type:"Dimension"},{name:"Measure",type:"Measure"}]},columns:[{xtype:"checkcolumn",dataIndex:"selected",width:30,editor:{xtype:"checkbox",cls:"x-grid-checkheader-editor"}},{header:"",dataIndex:"iconimg",sortable:!1,hideable:!1,width:20},{header:"Name",dataIndex:"name",sortable:!1,hideable:!1,flex:1}],listeners:{afterrender:function(e){}}},{xtype:"checkbox",name:"fltsetdate",fieldLabel:"",boxLabel:"Set date",listeners:{change:function(e,t,a,l){var n=e.getValue(),i=this.down("[name=fltfromdate]"),o=this.down("[name=flttodate]");i.setVisible(n),o.setVisible(n)},scope:this}},{xtype:"datefield",name:"fltfromdate",hidden:!0,labelWidth:70,fieldLabel:"From",maxValue:new Date,format:"Y-m-d",value:new Date},{xtype:"datefield",name:"flttodate",hidden:!0,labelWidth:70,fieldLabel:"To",maxValue:new Date,format:"Y-m-d",value:new Date}],listeners:{}},{xtype:"button",text:IRm$.r1("B_SEARCH"),border:!1,handler:function(){this.reqSearch()},scope:this}]},{xtype:"dataview",name:"mgrid",region:"center",flex:1,store:{fields:[{name:"name"},{name:"type"},{name:"nodepath"},{name:"uid"},{name:"iconimg"}]},stateful:!0,loadMask:!1,autoScroll:!0,tpl:e,itemSelector:"div.idv-sch-item",listeners:{itemdblclick:function(e,t,a,l,n){var i=t.data;i&&this.owner.navigateTree.call(this.owner,i)},scope:this}}];$s.apply(this,{items:t}),IG$.n$brwSch.superclass.initComponent.call(this)}});
IG$.n$brwser=$s.extend($s.panel,{layout:"card",bodyPadding:0,cmode:0,navigateTree:function(e){var t,o=this,a=o.getLayout(),n=o.down("[name=btnsearchitem]");o.cmode=0,t=IRm$.r1("B_SEARCH"),n.setText(t),a.setActiveItem(o.cmode),this.api.navigateTree.call(o.api,e)},initComponent:function(){var e=this;e.api=new IG$.naviTree({owner:e,mainPanel:e.mainPanel,showtoolbar:!1,layout:"fit"}),e.search=new IG$.n$brwSch({owner:e}),$s.apply(e,{layout:"card",region:e.region||"west",split:!0,header:!1,collapsible:!0,margins:"0 0 0 0",cmargins:"0 0 0 0",lines:!1,autoScroll:!1,animate:!0,items:[e.api,e.search]}),e.tbarobj=[" ",{xtype:"button",name:"btnsearchitem",text:IRm$.r1("B_SEARCH"),handler:function(){var e,t=this,o=t.getLayout(),a=t.down("[name=btnsearchitem]");t.cmode=1==t.cmode?0:1,e=0==t.cmode?IRm$.r1("B_SEARCH"):IRm$.r1("B_TREEVIEW"),a.setText(e),o.setActiveItem(t.cmode)},scope:e},{iconCls:"icon-refresh",tooltip:IRm$.r1("L_REFRESH"),handler:function(){var e=this.api;e.refTopNode.call(e)},scope:e}],1==e.showallcheckselect&&(e.tbarobj.push({iconCls:"icon-toolbar-remove",tooltip:IRm$.r1("L_DELETE_CHECKED"),handler:function(){this.api.removeSelItems()},scope:e}),e.tbarobj.push({iconCls:"icon-toolbar-move",tooltip:"Move Selection",handler:function(){this.api.moveSelItems()},scope:e})),e.tbarobj.push("->"),e.toolbar=Ext.create("Ext.toolbar.Toolbar",{items:e.tbarobj}),Ext.apply(e,{tbar:e.toolbar}),IG$.n$brwser.superclass.initComponent.call(e)}});
IG$.c$TblTree=$s.extend($s.treepanel,{columns:[{xtype:"treecolumn",header:"Name",dataIndex:"disp",flex:1}],appendNodeElement:function(e,n){null==e.numNodeNames?e.numNodeNames=1:e.numNodeNames++;var a=new this.store.model(n);return a.leaf=n.leaf,a.raw=n,e.data.leaf=!1,e.appendChild(a),a},viewConfig:{plugins:{ptype:"gridviewdragdrop",dragGroup:"cubeDDGroup",dropGroup:"cubeEDDGroup",enableDrag:!0,enableDrop:!1,listeners:{drop:function(e,n,a,d){a&&a.get("name")}}}},reqTable:function(t){var l=this,e=t.get("nodepath"),n=t.get("uid"),a=(t.get("type"),new IG$._rpc$),d={address:n||e,option:"StoredContent"},i={option:"folder",readcontent:"T"};a.init(l,{ack:"25",payload:d,mbody:i},l,function(e){var n,a,d,i=e&&e.length?e[0]:null;if(i&&i.children)for(n=i.children,a=0;a<n.length;a++)(d=n[a].content).checked=!1,d.leaf=!0,d.allowDrag=!0,1==l.cmode?d.disp=d.alias&&d.alias!=d.name?d.alias+"("+d.name+")":d.name:d.disp=d.name,t.appendChild(d)},!1),a.send()},initComponent:function(){$s.apply(this,{store:{store:"treestore",fieldSort:!1,fields:["name","alias","nodepath","datasize","selected","tablename","type","uid","disp","seq","datatype","fieldname","mapto","sqlfield","fieldid","sequence","uniquekey","mcuid"],root:{name:"CubeModel Tables",disp:"CubeModel Tables",address:"/"}},collapseFirst:!1,singleExpand:!1,nodekey:{},listeners:{checkchange:function(e,n){if(1==e.hasChildNodes()){for(i=0;i<e.childNodes.length;i++)e.childNodes[i].set("checked",n);e.expand()}},beforeitemexpand:function(e,n){var a=e.get("type");"Table"!=a&&"InlineView"!=a||!e.hasChildNodes()||"ml_tb"==e.childNodes[0].get("type")&&(e.removeChild(e.childNodes[0]),this.reqTable(e))},scope:this}}),IG$.c$TblTree.superclass.initComponent.apply(this,arguments)}});
IG$.dyn_base=function(){},IG$.dyn_base.prototype={$getctrl:function(e){return this.controls[e]}},IG$.clControlItem=function(e,t,o,r){var l=this;l.owner=r,l.parentcontrol=null,l.subcontrols=[],l.applicationItem=null,l.position={top:10,left:10,right:null,bottom:null,width:100,height:100,percentwidth:null,percentheight:null},l.dsmode=o,l.property={visible:"true",border:"1",bordercolor:"#e5e5e5",backgroundcolor:"#ffffff",padding:"2"},l.uctrl=t,l.actionlist={},l.uctrl&&"panel"==l.uctrl.ctrltype&&"border"==l.uctrl.property.layout&&(l.property.title=l.property.title||" "),e&&(l.uid=e.uid,l.ctrltype=e.type,l.ctrlname=e.name,l.actionlist=e.actionlist,l.position=e.position||null,l.property=e.properties,l.control=l.getControl(l.ctrltype.toLowerCase()),l.applicationItem=e.item,e.item&&l.control.applyApplication(l.applicationItem)),l.measuredRect={x:0,y:0,w:20,h:20}},IG$.clControlItem.prototype={getSelectionData:function(e){var t=this,o=null;return t.control&&t.control.getSelectionData&&(o=t.control.getSelectionData.call(t.control,e)),o},disposeContent:function(e){e.control&&void 0!==e.control&&(e.control.disposeContent(e.control),e.control=null)},measurePosition:function(e,t,o,r,l){var n=this.position;m=this.measuredRect,null!=n.top&&null!=n.bottom?(m.y=n.top,m.h=l-(n.bottom+n.top)):null!=n.height?(m.h=n.height,null!=n.top?m.y=n.top:null!=n.bottom&&(m.y=l-n.height-n.bottom)):null!=n.percentheight&&(null!=n.top?(m.y=n.top,m.h=.01*(l-n.top)*n.percentheight):null!=n.bottom&&(m.h=.01*(l-n.bottom)*n.percentheight,m.y=l-m.h-n.bottom)),null!=n.left&&null!=n.right?(m.x=n.left,m.w=r-(n.right+n.left)):null!=n.width?(m.w=n.width,null!=n.left?m.x=n.left:null!=n.right&&(m.x=r-n.width-n.right)):null!=n.percentwidth&&(null!=n.left?(m.x=n.left,m.w=.01*(r-n.left)*n.percentwidth):null!=n.right&&(m.w=r-.01*n.percentwidth-n.right,m.x=r-m.w-n.right)),m._px=t,m._py=o},getControl:function(e){return IG$.getControl.call(this,e,this.dsmode)},initDesignerMode:function(e){var t,o=this.control;return o&&(t=o.createControl.call(o,e)),e.dummy=o,t},need_invalidate:function(){var e,t=this;return!(!t.uctrl||"panel"!=t.uctrl.ctrltype||"vbox"!=(e=t.uctrl.property.layout)&&"hbox"!=e)}},IG$.getControl=function(e,t,o){var r=null,l=this;if(o)r={width:100,height:100},/(titlelabel|label|button|textbox|datechooser|monthchooser|combobox)/.test(e)&&(r.height=25);else{switch(e){case"titlelabel":r=new IG$.ctrlTitleLabel(l.property,l,t);break;case"olapreport":case"compositereport":r=new IG$.ctrlPivotReport(l.property,l,t);break;case"label":r=new IG$.ctrlLabel(l.property,l,t);break;case"textarea":r=new IG$.ctrlTextArea(l.property,l,t);break;case"picture":case"image":r=new IG$.ctrlPicture(l.property,l,t);break;case"button":r=new IG$.ctrlButton(l.property,l,t);break;case"textbox":r=new IG$.ctrlTextInput(l.property,l,t);break;case"datechooser":r=new IG$.ctrlDateField(l.property,l,t);break;case"monthchooser":r=new IG$.ctrlMonthField(l.property,l,t);break;case"combobox":r=new IG$.ctrlComboBox(l.property,l,t);break;case"panel":r=new IG$.ctrlPanel(l.property,l,t);break;case"treefilter":r=new IG$.ctrlTreeFilter(l.property,l,t);break;case"grid":r=new IG$.interactiveGrid(l.property,l,t);break;case"browser":r=new IG$.ctrlBrowserPanel(l.property,l,t);break;case"sheetfilter":r=new IG$.sheetFilter(l.property,l,t);break;case"tabpanel":r=new IG$.ctrlTabPanel(l.property,l,t);break;case"dashboard":r=new IG$.ctrlDashboardPanel(l.property,l,t);break;case"promptfilter":r=new IG$.ctrlPromptFilter(l.property,l,t);break;case"checkbox":r=new IG$.ctrlCheckbox(l.property,l,t);break;case"pivotfilter":r=new IG$.pivotFilter(l.property,l,t);break;case"pivotdesign":r=new IG$.pivotDesign(l.property,l,t);break;case"fileupload":r=new IG$.ctrlFileUpload(l.property,l,t);break;default:r=new IG$.ctrlNullControl(l.property,l,t)}r.type=e}return r},IG$.clEvents=function(e){var t,o,r,l,n=this;if(n._raw=e||{},n.controlId=null,n.enableoffline=null,n.filters=null,n.params={iparams:{},oparams:{}},e){if(n.uid=e.uid,n.name=e.name,n.condition_script=e.condition_script,n.description=e.description,n.purpose=e.purpose?e.purpose.toLowerCase():null,t=e.params){if(o=t.iparams)for(l in o)r=o[l],n.params.iparams[r.uid]=r;if(o=t.oparams)for(l in o)r=o[l],n.params.oparams[r.uid]=r}switch(n.purpose){case"onlinereport":t=e.item,(n.item=t)&&(n.controlId=t.controlid);break;case"valuelist":t=e.options,n.item=e.item;break;case"execute_script":e.options&&(n.script=e.options.script);break;case"servercall":e.options&&$s.apply(n,{jmodule:e.options.jmodule,jmodule_name:e.options.jmodule_name,jmethod:e.options.jmethod});break;case"open_dlg":e.options&&(n.btntype=e.options.btntype,n.btnclose=e.options.btnclose,n.dlgmsg=e.options.dlgmsg,n.dlgtitle=e.options.dlgtitle);break;case"open_win":n.item=e.item,e.options&&(n.ispopup="T"==e.options.ispopup);break;case"export":e.options&&(n.exp_tmpl=e.options.exp_tmpl,n.exp_out=e.options.exp_out);break;case"close":e.options&&(n.dlgresult=e.options.dlgresult)}}},IG$.clEvents.prototype={parseFilter:function(e,t){if(e){var o,r=e.subGroups;if(r&&0<r.length)for(o=0;o<r.length;o++){var l=new IG$.clFilterGroup;l.name=r[o].name,t.subGroups.push(l),this.parseSubFilter(r[o],l)}}},updateParamValue:function(e){var t=this.params,o=e.page_param_map;$.each([t.iparams,t.oparams],function(e,t){$.each(t,function(e,t){t.value?t.valuename=o[t.value]?o[t.value].name||"ERR":"N/A":t.values})})},parseSubFilter:function(e,t){var o,r,l=e.subGroups,n=e.subConditions;if(l&&0<l.length)for(o=0;o<l.length;o++){(r=new IG$.clFilterGroup).name=IG$.XGetAttr(l[o],"name"),this.parseSubFilter(l[o],r),t.subGroups.push(r)}else if(n&&n.length)for(o=0;o<n.length;o++)t.subConditions.push(new IG$.clFilter(n[o]))},getXML:function(){var e=this,t={purpose:e.purpose,type:e.type,uid:e.uid,name:e.name,condition_script:e.condition_script,description:e.description,options:{},params:{iparams:e.params.iparams,oparams:e.params.oparams}},o=e.purpose,r=t.options;switch(o){case"onlinereport":t.item=e.item;break;case"valuelist":r.controlid=e.controlId,r.enableoffline=e.enableoffline?"T":"F",t.item=e.item;break;case"execute_script":r.script=e.script;break;case"servercall":r.jmodule_name=e.jmodule_name,r.jmodule=e.jmodule,r.jmethod=e.jmethod;break;case"open_dlg":r.btntype=e.btntype,r.btnclose=e.btnclose,r.dlgtitle=e.dlgtitle,r.dlgmsg=e.dlgmsg;break;case"export":r.exp_tmpl=e.exp_tmpl,r.exp_out=e.exp_out;break;case"open_win":r.ispopup=e.ispopup?"T":"F",t.item=e.item;break;case"close":r.dlgresult=e.dlgresult||"OK"}return t}};
IG$.__util={},IG$.__util.msgbox=function(t){IG$.alertmsg(ig$.appname,t,null,null,1,"error")},IG$.__util._rcs=function(t,e){return e},IG$.__util.v_date=function(t,e){var r=t;return t&&(r=[t.substring(0,4),t.substring(4,6),t.substring(6,8)].join(e)),r},IG$.__util.v_field=function(t,e,r){var i=!0;return t||(i=!1,e&&IG$.alertmsg(r||ig$.appname,e,null,null,1,"error")),i},IG$.controls={},IG$.ctrlBase=function(t,e,r){var i=this;i.ctrl=e,i.p=[{name:"visible",type:"property",datatype:"boolean",value:!0},{name:"border",type:"property",datatype:"number",value:1},{name:"bordercolor",type:"property",datatype:"color",value:"#e5e5e5"},{name:"backgroundcolor",type:"property",datatype:"color"},{name:"padding",type:"property",datatype:"number",value:2},{name:"flex",type:"property",datatype:"number",value:1},{name:"basecls",type:"property",datatype:"string"}],i.property=t,i.applicationItem=null,i.getter={},i.setter={},i.dsmode=r,i.html=$("<div id='"+(null!=e?e.ctrlname:"")+"' class='ig-db-ctrls'><div class='ig-db-el'></div><div class='ig-db-bg'></div></div>"),i.el$=$(".ig-db-el",i.html),i.bg$=$(".ig-db-bg",i.html),i.superclass=IG$.ctrlBase,i.initComponent.call(i)},IG$.ctrlBase.prototype={__pcinit:function(){var t,e=this;for(t in e.__pcinit_=1,e.property)e.set.call(e,t,e.property[t]);e.__pcinit_=0},get:function(t){var e=this;return e.getter[t]?e.getter[t].call(e):null},set:function(t,e){var r=this;r.setter[t]&&r.setter[t].call(r,e)},val:function(t){return this[void 0!==t?"set":"get"]("text",t)},doGet:function(t){var e=this;return e.getter[t]?e.getter[t].call(e):null},doSet:function(t,e){var r=this;r.setter[t]&&r.setter[t].call(r,e)},invalidate:function(){},updateBorder:function(){var t=this,e=(t.dsmode?1:t.property.border)+"px solid "+t.property.bordercolor;t.html.css({border:e})},createControl:function(t){var a=this;return a.layout=t,a.html.bind("click",function(t){return t.stopPropagation(),t.preventDefault(),t.stopImmediatePropagation(),a.raiseEvent.call(a,"click"),!1}),a.html.resizable({resize:function(t,e){e.position;var r=e.size,i=a.layout,n=a.ctrl;i.position.width=r.width,i.position.height=r.height,a.raiseEvent.call(a,"resize"),a.invalidate.call(a),n&&n.need_invalidate()&&n.owner.changeLayout(n.uctrl)}}),a.html.draggable({snap:!0,snapTolerance:10,grid:[5,5],revert:function(){var t=a.ctrl;return!(!t||!t.need_invalidate())},stop:function(t,e){var r=e.position,i=a.layout;i.position.top=r.top,i.position.left=r.left,a.raiseEvent.call(a,"resize"),a.invalidate.call(a)}}),a.html},enabled:function(t){},raiseEvent:function(t){this.html.trigger("e_"+t)},baseUpdateProp:function(t,e){var r=this;switch(r.property[t]=e,t){case"visible":0!=e||r.dsmode?r.html.show():r.html.hide();break;case"border":case"bordercolor":r.updateBorder();break;case"basecls":e&&r.html&&r.html.addClass(e)}},initComponent:function(){var r=this;$.each(r.p,function(t,e){"property"==e.type&&(void 0!==e.value&&void 0===r.property[e.name]&&(r.property[e.name]=e.value),r.getter[e.name]=function(){return this.property[e.name]},r.setter[e.name]=function(t){this.property[e.name];this.property[e.name]=t,this.baseUpdateProp(e.name,t),this.updateProperty&&this.updateProperty(e.name,t)})})},triggerEvent:function(t,e){var r=this.ctrl,i=r?r.owner:null,n=r?r.actionlist:null;e=e||{ctrl:this.ctrl,ptr:this,event:t},n&&n[t]&&i.executeAction(n[t],e)},applyApplication:function(t){this.applicationItem=t},initDrawing:function(){this.__pcinit()}};
IG$.gridConfig=function(){this.sfields=["fieldname","name","flex","minw","hidden","formatstring","align"],this.columns=[]},IG$.gridConfig.prototype={loadData:function(e){var t,n,i,l,o,a=this,r=a.columns;if(r.splice(0,r.length),e)for(t=0;t<e.length;t++){for(n={},i=0;i<a.sfields.length;i++)l=a.sfields[i],o=e[t][l],"minw"==l?o&&(n.minWidth=Number(o)):"flex"==l?o&&(n.flex=Number(o)):n[l]=o;r.push(n)}},getXML:function(){for(var e,t,n,i=[],l=this.columns,o=this.sfields,a=0;a<l.length;a++){for(e={},j=0;j<o.length;j++)n=o[j],t=l[a][n],"minw"!=n&&"flex"!=n||(t=""+(t||"")),e[n]=t;i.push(e)}return i}},IG$.interactiveGrid=IG$.extend(IG$.ctrlBase,{initComponent:function(){var e=this;e.activeIndex=0,e.p.push({name:"cell_click",type:"event"},{name:"text",type:"property",datatype:"string"},{name:"selectionmode",type:"property",datatype:"string",value:"none",enum:[{name:"none",value:"none"},{name:"single",value:"single"},{name:"multi",value:"multi"}]},{name:"selheader",type:"property",datatype:"string",value:""}),e._cinfo=new IG$.gridConfig,e.superclass.prototype.initComponent.call(e)},processEvent:function(e,t){},invalidate:function(){var e=this,t=IG$.j$ext._w(e.html),n=IG$.j$ext._h(e.html);e.viewer&&e.viewer.setSize(t,n)},initDrawing:function(){var e,c=this,s=(IG$.j$ext._w(c.html),IG$.j$ext._h(c.html),c.ctrl.actionlist);c.ctrl.parentcontrol;c._cinfo.loadData(c.layout._xparam),c.viewer||(c.viewer=new $s.gridpanel({renderTo:c.el$,disabled:c.dsmode,columns:[],listeners:{cellclick:function(e,t,n,i,l,o,a,r){s.cell_click&&c.triggerEvent("cell_click",{ctrl:c.ctrl,ptr:c,event:"cell_click"})}}})),c.validateColumns(),c.dsmode&&(e=$("<div class='igc-p-config' style='z-index: 10'><div class='igc-p-config-bg'></div><button>Config</button></div>").appendTo(c.html),$("button",e).bind("click",function(){c.configComponent.call(c)})),c.__pcinit()},configComponent:function(){var n=this,e=new IG$.interactiveGridConfig({_cinfo:n._cinfo,callback:new IG$.callBackObj(n,function(e,t){n.layout._xparam=n._cinfo.getXML(),n.validateColumns()},n.viewer)});IG$.checkLogin(this,e)},updateProperty:function(e,t){var n=this,i=(n.viewer,n._cinfo);if(!n.dsmode)switch(e){case"report_control":case"text":break;case"selectionmode":t&&i.selmodel!=t&&(i.selmodel=t,n.validateColumns(!0))}},applyDataSet:function(e){var t,n,i,l,o=[],a=this._cinfo.columns||[];if(e.data)for(t=0;t<e.data.length;t++){for(i=e.data[t],l={},n=0;n<a.length;n++)l[a[n].fieldname||"field_"+n]=i[n];o.push(l)}this.viewer.store.loadData(o)},updateLayout:function(){this.ctrl.dashboard},validateColumns:function(e){var t,n,i,l,o,a,c=this,r=c.viewer,s=[],d=c._cinfo,f=d.columns,h=[],m=c.ctrl.actionlist;c.ctrl.parentcontrol;if(e&&(r.close(),"single"!=d.selmodel&&"multi"!=d.selmodel||(o={selection:a="checkboxmodel",checkSelector:".x-grid-cell",mode:"single"==d.selmodel?"SINGLE":"MULTI"}),r=c.viewer=new $s.gridpanel({renderTo:c.el$,selType:a,selModel:o,disabled:c.dsmode,columns:[],listeners:{cellclick:function(e,t,n,i,l,o,a,r){m.cell_click&&c.triggerEvent("cell_click",{ctrl:c.ctrl,ptr:c,event:"cell_click"})}}})),r){for(i=0;i<f.length;i++)(n=f[i]).fieldname=n.fieldname||"field_"+i,l={xtype:"gridcolumn",text:n.name||n.fieldname,dataIndex:n.fieldname,minWidth:n.minw||50,hidden:!(c.dsmode||!n.hidden),align:n.align||"left"},n.flex&&(l.flex=n.flex),h.push(l.dataIndex),s.push(l);t={fields:h},r.reconfigure(t,s)}},getSelectionData:function(e){var t,n,i=this.viewer,l=[];return e&&e.name&&i&&(n=i.getSelectionModel().selected)&&n.length&&(t=n.items[0].get(e.name))&&l.push({code:t,value:t}),l},selRow:function(){return this.viewer.getSelectionModel().selected},selRowCnt:function(){return this.selRow().length},selColInfo:function(e){var t,n,i=this.selRow(),l=e,o=this.viewer.columns;return i&&i.length&&(n=i.items[0],"string"==typeof e?l=e:o&&o.length>e&&(l=o[e].dataIndex),t=n.get(l)),t},cell:function(e,t){var n,i=this.viewer.store,l=this.viewer.columnManager.columns[t],o=i.data.items[e];return o&&l&&(n=o.get(l.dataIndex)),n}}),IG$.controls.grid=new IG$.interactiveGrid({},null),IG$.interactiveGridConfig=$s.extend($s.window,{modal:!1,isWindow:!0,region:"center",layout:"fit",closable:!1,resizable:!1,width:500,height:450,reportoption:null,callback:null,init_f:function(){var e=this.grd;this._cinfo&&e.store.loadData(this._cinfo.columns)},toolbarHandler:function(e){var t,n,i=this.grd;switch(e){case"c_add":i.store.add({minw:100});break;case"c_del":for(n=(t=i.getSelectionModel().selected).length-1;0<=n;n--)i.store.remove(t.items[n])}},moveGrid:function(e,t){var n=e.getSelectionModel().getSelection(),i=n.length?n[0]:null;if(i){var l=e.getStore().indexOf(i);if(t<0){if(--l<0)return}else if(++l>=e.getStore().getCount())return;e.getStore().remove(i),i=e.getStore().insert(l,i),e.getSelectionModel().select(i,!0)}},_confirm:function(){var e,n,i,t=this,l=(t._cinfo,t._cinfo.columns),o=t.grd,a=t.sfields;for(l.splice(0,l.length),e=0;e<o.store.data.length;e++)n=o.store.data.items[e],i={},$.each(a,function(e,t){i[t]=n.get(t)}),l.push(i);t.callback&&t.callback.execute(),t.close()},initComponent:function(){var e=this._cinfo.sfields;this.sfields=e,$s.apply(this,{title:IRm$.r1("T_GRD_CFG"),items:[{xtype:"panel",layout:{type:"vbox",align:"stretch"},bodyPadding:5,tbar:[{text:"Add",handler:function(){this.toolbarHandler("c_add")},scope:this},{text:"Delete",handler:function(){this.toolbarHandler("c_del")},scope:this},{text:"Move Up",handler:function(){this.moveGrid(this.grd,-1)},scope:this},{text:"Move Down",handler:function(){this.moveGrid(this.grd,1)},scope:this}],items:[{xtype:"gridpanel",flex:1,name:"grd",selType:"checkboxmodel",selModel:{checkSelector:".x-grid-cell",mode:"MULTI"},sortableColumns:!1,plugins:[{ptype:"cellediting",clicksToEdit:!0}],store:{fields:e},columns:[{text:"Field name",dataIndex:"fieldname",flex:1,editor:{allowBlank:!1}},{text:"Header",dataIndex:"name",flex:1,editor:{allowBlank:!1}},{text:"Min Width",dataIndex:"minw",width:80,editor:{xtype:"numberfield",allowBlank:!1}},{text:"Width Flex",dataIndex:"flex",width:80,editor:{xtype:"numberfield",allowBlank:!0}},{xtype:"checkcolumn",text:"Hidden",dataIndex:"hidden",width:80},{text:"Align",dataIndex:"align",width:80,editor:{allowBlank:!0}}]}]}],buttons:["->",{text:IRm$.r1("B_CONFIRM"),handler:function(){this._confirm()},scope:this},{text:IRm$.r1("B_CANCEL"),handler:function(){this.close()},scope:this}],listeners:{afterrender:function(e){this.grd=this.down("[name=grd]"),this.init_f()}}}),IG$.interactiveGridConfig.superclass.initComponent.apply(this,arguments)}});
IG$.pivotDesignBase=$s.extend(IG$.v$pnl,{layout:{type:"vbox",align:"stretch"},updateProperty:function(e,t){var o=this,n=o.down("[name=pivotbrowser]"),i=o.down("[name=pivoteditor]");o._cinfo;switch(e){case"report_control":case"text":case"selectionmode":break;case"show_custom_forumula":n.down("[name=custom_formula]").setVisible(t);break;case"show_viewmode":i.down("[name=dataquerymode_bar]").setVisible(t);break;case"show_filter":i.down("[name=btn_filter]").setVisible(t);break;case"show_advaned_options":i.down("[name=btn_adv]").setVisible(t)}},_init:function(){var e=this,t=e.down("[name=pivoteditor]");t.down("[name=btn_pagefilter]").setVisible(!1),t.down("[name=btn_grid_style]").setVisible(!1),t.down("[name=sync_view]").setVisible(!1),t.on("join_tables",function(e){this.down("[name=pivotbrowser]").setFilter(e)},e),e.applyApplication(e.applicationItem)},applyApplication:function(e){var t,o,n=this,i=n.down("[name=pivoteditor]"),a=n.down("[name=pivotbrowser]"),p=n.sindex||0,r=n.reportoption;n.applicationItem=e,r||(t={type:"Report",writable:!0,manage:!0,content:{cube_objects:[],type:"Report",meta_type:"report",writable:!0,manage:!0,objinfo:{reportversion:"1.2"},ctrls:{dock_0:{objtype:"_dc",layoutinfo:{},docid:"dock_0"}},sheets:[{objtype:"SHEET",layoutinfo:{docid:"dock_1"}}],layout:{type:"mondrian",children:[{docid:"dock_0",objtype:"_dc",width:400,height:300,r:null,p:null,d:0,children:[{docid:"dock_1",objtype:"SHEET",width:400,height:300,r:"dock_0",p:null,d:0}]}]}}},r=n.reportoption=new IG$.clReports(t),o=new IG$.clReport({},r.itemtype,!1),r.sheets.push(o)),o=r.sheets[p],e&&"Bobject"==e.type&&r.cube_objects.push(e),i.activeSheet=p,i.reportoption=n.reportoption,i.sheetoption=o,setTimeout(function(){a.loadSheetOption.call(a,n.reportoption.sheets[n.activeSheet],n.reportoption),i.applCurPivotInfo.call(i),i._c=1},20)},confirm:function(){var e=this.down("[name=pivoteditor]");e._confirm&&e._confirm.call(e)},initComponent:function(){var e=this;$s.apply(this,{items:[{xtype:"panel",layout:"card",name:"mcard",flex:1,items:[{xtype:"panel",layout:"border",items:[new IG$.p$PivotBrws({name:"pivotbrowser",region:"center",flex:1,border:0,resizable:!0,rptptr:e.rptptr,callback:new IG$.callBackObj(e,e.updatePivotContent),listeners:{cube_changed:function(e,t){},scope:this}}),new IG$.c$pivotPnl({name:"pivoteditor",layoutmode:"panel",hidden:!1,region:"east",flex:3,split:!0,resizable:!0,_pivotEdtMd:!0,border:0})]}],bbar:["->",{xtype:"button",text:"Execute",handler:function(){var e=this.pctrl;this.confirm(),e._execRptReq()},scope:this}]}]}),e.on("afterrender",e._init),IG$.pivotDesignBase.superclass.initComponent.apply(this,arguments)}}),IG$.pivotDesign=IG$.extend(IG$.ctrlBase,{initComponent:function(){var e=this;e.activeIndex=0,e.p.push({name:"request_run",type:"event"},{name:"show_custom_forumula",type:"property",datatype:"boolean"},{name:"show_cluster",type:"property",datatype:"boolean"},{name:"show_viewmode",type:"property",datatype:"boolean"},{name:"show_filter",type:"property",datatype:"boolean",value:!0},{name:"show_custom_field",type:"property",datatype:"boolean",value:!0},{name:"show_advaned_options",type:"property",datatype:"boolean",value:!1}),e.superclass.prototype.initComponent.call(e)},processEvent:function(e,t){},invalidate:function(){var e=this,t=IG$.j$ext._w(e.html),o=IG$.j$ext._h(e.html);e.viewer&&e.viewer.setSize(t,o)},initDrawing:function(){var e=this;IG$.j$ext._w(e.html),IG$.j$ext._h(e.html),e.ctrl.actionlist;e.viewer||(e.viewer=new IG$.pivotDesignBase({renderTo:e.el$,ctrl:e.ctrl,pctrl:e,applicationItem:e.applicationItem})),e.__pcinit()},updateProperty:function(e,t){var o=this.viewer;this._cinfo;o.updateProperty(e,t)},applyApplication:function(e){var t=this.viewer;this.applicationItem=e,t&&t.applyApplication(e)},updateLayout:function(){this.ctrl.dashboard},_execRptReq:function(){this.triggerEvent("request_run")},getSelectionData:function(e){var t,o,n=this.viewer,i=[];return e&&e.name&&n&&(o=n.getSelectionModel().selected)&&o.length&&(t=o.items[0].get(e.name))&&i.push({code:t,value:t}),i}}),IG$.controls.pivotdesign=new IG$.pivotDesign({},null);
IG$.sheetFilter=IG$.extend(IG$.ctrlBase,{initComponent:function(){var t=this;t.p.push({name:"report_control",type:"property",datatype:"string",vmode:1},{name:"filter_id",type:"property",datatype:"string",vmode:1},{name:"itemclick",type:"event"}),t.superclass.prototype.initComponent.call(t)},processEvent:function(t,e){},invalidate:function(){IG$.j$ext._w(this.html),IG$.j$ext._h(this.html)},applyApplication:function(t){this.applicationItem=t},initDrawing:function(){var t=this;IG$.j$ext._w(t.html),IG$.j$ext._h(t.html),t.ctrl.actionlist;t.viewer=t.dsmode?null:new IG$.dynFilterView(t.html,null,t),t.__pcinit()},updateProperty:function(t,e){if(!this.dsmode)switch(t){case"report_control":this.__ivp()}},__ivp:function(){var i=this,t=i.property,n=t.report_control,o=t.filter_id,r=i.ctrl.dashboard;i.dsmode||i.__pcinit_||n&&r&&r.ControlDict&&setTimeout(function(){var t,e=r.ControlDict[n];e&&o&&(t=e.control).negoFilter&&t.negoFilter.call(t,i,o)},20)}}),IG$.controls.sheetfilter=new IG$.sheetFilter({},null);
IG$.pivotFilterEditor=$s.extend(IG$.v$pnl,{layout:"fit",activeSheet:0,loadReport:function(t){var e,l=this;l.uid=t.uid,(e=new IG$._rpc$).init(l,{ack:"content",payload:{uid:l.uid,revision:l.revision},mbody:{}},l,function(t){l.reportoption=new IG$.clReports(t);var e,o,i=l.down("[name=browser]"),n=l.down("[name=feditor]"),r=l.down("[name=p_opeditor]");0<l.reportoption.sheets.length&&(l.sheetoption=l.reportoption.sheets[0],l.cubeuid=l.sheetoption.cubeuid||l.reportoption.cubeuid,e=l.sheetoption.reportmode||l.reportoption.reportmode,(o={}).type="rolap"==e?"Cube":"Metric",o.name=o.type,o.nodepath=o.type,o.uid=l.cubeuid||null,o.leaf=!1,i.setRootNode.call(i,o),i.show(),n.reportoption=l.reportoption,n.sheetoption=l.sheetoption,n.in$t.call(n),n.show(),r.reportoption=l.reportoption,r.sheetoption=l.sheetoption,r.show())},!1),e.send()},requestSQLResult:function(i,n){var t,e,r=this,o=r.down("[name=feditor]");r._lsql=[],r._ldb=[],null!=r.sheetoption&&null!=r.reportoption&&(o.confirmFilterSetting.call(o),t=r.reportoption.getCurrentPivot.call(r.reportoption),(e=new IG$._rpc$).init(r,{ack:"olapservice",payload:{uid:r.uid,option:"sql",active:""+r.activeSheet},mbody:t},r,function(t){var e,o=IG$.XGetNode(t,"/smsg/item/ExecuteQuery");o&&(e=IG$.XGetTextVal(o),r._lsql.push(e)),i&&n&&n.call(i,1)},function(t){i&&n&&n.call(i,!1)}),e.send())},set_count:function(t){var e=this.down("[name=feditor]");e.set_count.call(e,t)},initComponent:function(){$s.apply(this,{items:[{xtype:"panel",layout:"border",items:[{xtype:"panel",title:IRm$.r1("L_pf_navitree"),layout:"fit",split:!0,region:"west",flex:1,border:0,items:[new IG$.naviTree({showtoolbar:!1,name:"browser",hidden:!0,cubebrowse:!0,collapsible:!1,floatable:!1,floating:!1,ddGroup:"_I$RD_G_",layout:"fit",enabledrag:!0,_search:!0,custDblClickFunc:new IG$.callBackObj(this,function(t){p_opeditor=this.down("[name=p_opeditor]"),filter=new IG$.clFilter(null),filter.operator=6,p_opeditor.filteritem=filter,p_opeditor.init_f.call(p_opeditor),p_opeditor.itemSelectedHandler.call(p_opeditor,t.data)})})]},{xtype:"panel",layout:"border",region:"center",split:!0,flex:2,items:[{xtype:"panel",title:IRm$.r1("L_pf_fedit"),split:!0,bodyPadding:5,layout:"fit",flex:1,region:"north",items:[new IG$.filterEditorPanel({name:"p_opeditor",hidden:!0,autoScroll:!1,_cmode:1,flex:1})]},{xtype:"panel",split:!0,region:"center",title:IRm$.r1("L_pf_filter"),flex:1,layout:"fit",items:[new IG$.filterMainEditor({name:"feditor",hidden:!0,deferredRender:!1,bodyPadding:10})]}]}]}]}),IG$.pivotFilterEditor.superclass.initComponent.call(this)},listeners:{afterrender:function(t){var e=t,o=e.down("[name=p_opeditor]"),i=e.down("[name=feditor]");o.on("add_filter",function(t){t._confirm.call(t);var e=t.filteritem,o=i.rootnode_w.children[0];i.rs_appendCondition.call(i,[o,e])}),o.init_f.call(o)}}}),IG$.pivotFilter=IG$.extend(IG$.ctrlBase,{initComponent:function(){var t=this;t.p.push({name:"report_control",type:"property",datatype:"string",vmode:1},{name:"filter_id",type:"property",datatype:"string",vmode:1},{name:"itemclick",type:"event"}),t.superclass.prototype.initComponent.call(t)},processEvent:function(t,e){},invalidate:function(){var t=this,e=IG$.j$ext._w(t.html),o=IG$.j$ext._h(t.html);t.viewer&&(t.renderto.width(e).height(o),t.viewer.setSize(e,o))},valid:function(){return 0},confirmFilter:function(t,o,i){var e=this,n=e.ctrl.dashboard;e.viewer.requestSQLResult.call(e.viewer,e,function(t){var e;if(0!=t)try{e=i.call(o,t)}catch(t){e=!1,IG$.ShowError("filter processing script error")}0!=t&&0!=e?n.contEventProc.call(n,n):n.stopEventProc.call(n,n)})},applyApplication:function(t){this.applicationItem=t},initDrawing:function(){var t=this,e=IG$.j$ext._w(t.html),o=IG$.j$ext._h(t.html),i=$("<div></div>").appendTo(t.html);t.ctrl.actionlist;IG$.j$ext._w(i,e),IG$.j$ext._h(i,o),t.viewer=t.dsmode?null:new IG$.pivotFilterEditor({width:IG$.j$ext._w(i),height:IG$.j$ext._h(i),renderTo:i[0]}),t.renderto=i,t.__pcinit()},updateProperty:function(t,e){if(!this.dsmode)switch(t){case"report_control":this.__ivp()}},__ivp:function(){var o=this,t=o.property,i=t.report_control,n=t.filter_id,r=o.ctrl.dashboard;o.dsmode||o.__pcinit_||i&&r&&r.ControlDict&&setTimeout(function(){var t,e=r.ControlDict[i];e&&n&&(t=e.control).negoFilter&&t.negoFilter.call(t,o,n)},20)},set_base_report:function(t,e,o){var i=this,n=new IG$._rpc$;n.init(i,{ack:"helpcontent",payload:{uid:t},mbody:{option:"translate"}},i,function(t){var e=IG$.XGetNode(t,"/smsg/item"),o=e?IG$.XGetAttrProp(e):null;o&&o.uid&&i.viewer.loadReport.call(i.viewer,o)},!1),n.send()},get_sql:function(t){return this.viewer._lsql.join(t||";")},get_db:function(t){return this.viewer._ldb.join(t||";")},set_count:function(t){this.viewer.set_count.call(this.viewer,t)}}),IG$.controls.pivotfilter=new IG$.pivotFilter({},null);
IG$.ctrlNullControl=IG$.extend(IG$.ctrlBase,{initComponent:function(){var t=this,e=t.ctrl,a=$("<div>unknown control: "+e.ctrlname+"</div>");t.el$.append(a),t.superclass.prototype.initComponent.call(t)},initDrawing:function(){this.html.css({border:"1px solid #a5a5a5"}),this.__pcinit()}}),IG$.ctrlTitleLabel=IG$.extend(IG$.ctrlBase,{initComponent:function(){var t=this;t.p.push({name:"text",type:"property",datatype:"string"},{name:"fontsize",type:"property",datatype:"number"},{name:"fontbold",type:"property",datatype:"boolean"},{name:"color",type:"property",datatype:"string"}),t.superclass.prototype.initComponent.call(t)},updateProperty:function(t,e){var a=this,i=a.cmp$;switch(t){case"text":i&&i.html(e);break;case"fontsize":e&&a.html.css({fontSize:e+"px"});break;case"fontbold":"true"==e?a.html.css({fontWeight:"bold"}):"false"==e&&a.html.css({fontWeight:"normal"});break;case"color":e&&a.html.css({color:e})}},initDrawing:function(){var t=this;t.cmp$=$("<div class='igc-ds-label'></div>").appendTo(t.el$),t.superclass.prototype.initDrawing.call(t),t.html.addClass("ig_title_label")}}),IG$.controls.titlelabel=new IG$.ctrlTitleLabel({},null),IG$.ctrlLabel=IG$.extend(IG$.ctrlBase,{initComponent:function(){var t=this;t.p.push({name:"text",type:"property",datatype:"string"},{name:"fontsize",type:"property",datatype:"number",value:12},{name:"fontbold",type:"property",datatype:"boolean"},{name:"color",type:"property",datatype:"string"}),t.superclass.prototype.initComponent.call(t)},updateProperty:function(t,e){var a=this,i=a.cmp$;switch(t){case"text":i&&i.html(e);break;case"fontsize":e&&a.html.css({fontSize:e+"px"});break;case"fontbold":"true"==e?a.html.css({fontWeight:"bold"}):"false"==e&&a.html.css({fontWeight:"normal"});break;case"color":e&&a.html.css({color:e})}},initDrawing:function(){var t=this;t.cmp$=$("<div class='igc-ds-label'></div>").appendTo(t.el$),t.superclass.prototype.initDrawing.call(t)}}),IG$.controls.label=new IG$.ctrlLabel({},null),IG$.ctrlPicture=IG$.extend(IG$.ctrlBase,{initComponent:function(){var t=this;t.image=null,t.p.push({name:"imagepath",type:"property",datatype:"string",enum:"resources"}),t.superclass.prototype.initComponent.call(t)},initDrawing:function(){var t=this;t.image=$("<img/>"),t.image.appendTo(t.el$),t.superclass.prototype.initDrawing.call(t)},updateProperty:function(t,e){var a=this;switch(t){case"imagepath":e?(a.image.show(),a.image.attr("src",ig$.servlet+"?sreq=resource&_rcs_="+e+"&_mts_="+IG$._g$a)):a.image.hide()}},invalidate:function(){var t=this,e=IG$.j$ext._w(t.html),a=IG$.j$ext._h(t.html);t.image&&t.image.css({width:e+"px",height:a+"px"})}}),IG$.controls.image=new IG$.ctrlPicture({},null),IG$.ctrlTextInput=IG$.extend(IG$.ctrlBase,{initComponent:function(){var t=this;t.dsmode;t.p.push({name:"text",type:"property",datatype:"string"},{name:"fieldlabel",type:"property",datatype:"string"},{name:"labelwidth",type:"property",datatype:"number",value:80},{name:"labelposition",type:"property",datatype:"string",value:"left",enum:[{name:"top",value:"top"},{name:"left",value:"left"}]},{name:"labelalign",type:"property",datatype:"string",value:"left",enum:[{name:"right",value:"right"},{name:"left",value:"left"},{name:"center",value:"center"}]},{name:"inputtype",type:"property",datatype:"string",value:"text",enum:[{name:"text",value:"text"},{name:"password",value:"password"},{name:"number",value:"number"},{name:"email",value:"email"},{name:"tel",value:"tel"},{name:"url",value:"url"}]},{name:"disabled",type:"property",datatype:"boolean",value:!1},{name:"placeholder",type:"property",datatype:"string"},{name:"enterkey",type:"event"}),t.superclass.prototype.initComponent.call(t)},updateProperty:function(t,e){var a=this.cmp$;switch(t){case"text":a.setValue(e);break;case"labelwidth":a.setWidth(e);break;case"fieldlabel":a.setFieldLabel(e);break;case"labelposition":a.$define("labelPosition",e);break;case"inputtype":a.$define("type",e);break;case"labelalign":a.$define("labelAlign",e);break;case"placeholder":a.$define("placeholder",e);break;case"disabled":a.setDisabled(e)}},initDrawing:function(){var e=this,a=e.ctrl.actionlist;e.ctrl.owner;e.cmp$=new $s.textfield({renderTo:e.el$,listeners:{keyup:function(t){13==t.keyCode&&a.enterkey&&e.triggerEvent("enterkey",{ctrl:e.ctrl,ptr:e,event:"enterkey"})}}}),e.superclass.prototype.initDrawing.call(e)},commit:function(){var t=this.cmp$;this.property.text=t.getValue()},invalidate:function(){var t=this,e=t.cmp$,a=t.html.width(),i=t.html.height();e&&e.setSize(a,i)},getSelectionData:function(t){var e=this.cmp$.getValue()||"";return[{code:e,value:e}]}}),IG$.controls.textbox=new IG$.ctrlTextInput({},null),IG$.ctrlTextArea=IG$.extend(IG$.ctrlBase,{initComponent:function(){var t=this;t.dsmode;t.p.push({name:"htmltext",type:"property",datatype:"string"},{name:"text",type:"property",datatype:"string"},{name:"fieldlabel",type:"property",datatype:"string"}),t.cmp$=new $s.textarea({renderTo:t.el$}),t.superclass.prototype.initComponent.call(t)},updateProperty:function(t,e){var a=this.cmp$;switch(t){case"htmltext":case"text":a.setValue(e);break;case"fieldlabel":a.setFieldLabel(e)}},invalidate:function(){var t=this,e=IG$.j$ext._w(t.html),a=IG$.j$ext._h(t.html);t.cmp$&&t.cmp$.setSize(e,a)},commit:function(){this.property.text=this.cmp$.getValue()}}),IG$.controls.textarea=new IG$.ctrlTextArea({},null),IG$.ctrlButton=IG$.extend(IG$.ctrlBase,{initComponent:function(){var e=this,a=(e.ctrl&&e.ctrl.owner,e.ctrl?e.ctrl.actionlist:null);e.dsmode;e.p.push({name:"label",type:"property",datatype:"string"},{name:"click",type:"event"}),e.cmp$=new $s.button({renderTo:e.el$,handler:function(t){a&&a.click&&e.triggerEvent("click",{ctrl:e.ctrl,ptr:e,event:"click"})},scope:e}),e.superclass.prototype.initComponent.call(e)},updateProperty:function(t,e){var a=this.cmp$;switch(t){case"label":a.setText(e)}},initDrawing:function(){var t=this;t.dsmode,t.ctrl.actionlist,t.ctrl.parentcontrol;t.__pcinit(),t.superclass.prototype.initDrawing.call(t)},invalidate:function(){var t=this,e=IG$.j$ext._w(t.html),a=IG$.j$ext._h(t.html);t.cmp$&&(t.cmp$.$define("autowidth",!1),t.cmp$.setSize(e,a))}}),IG$.controls.button=new IG$.ctrlButton({},null),IG$.ctrlComboBox=IG$.extend(IG$.ctrlBase,{initComponent:function(){var t=this;t.p.push({name:"fieldlabel",type:"property",datatype:"string"},{name:"labelwidth",type:"property",datatype:"number",value:80},{name:"text",type:"property",datatype:"string"},{name:"change",type:"event"}),t.combobox=null,t.items=[],t.superclass.prototype.initComponent.call(t)},initDrawing:function(){var a=this;a.dsmode;a.cmp$=new $s.combobox({renderTo:a.el$,valueField:"code",displayField:"disp",store:{},listeners:{change:function(t){var e=t.getValue();e&&(a.ctrl.owner,a.ctrl.actionlist,a.property.text=e,a.triggerEvent("change",{ctrl:a.ctrl,ptr:a,event:"change"}))}}}),a.superclass.prototype.initDrawing.call(a)},invalidate:function(){var t=IG$.j$ext._w(this.html),e=IG$.j$ext._h(this.html),a=this.property;a.labelwidth,a.fieldlabel;this.cmp$.setSize(t,e)},commit:function(){},applyDataSet:function(t){for(var e,a=t.v.cols,i=t.v.data,n=[],l=this.cmp$,o=0;o<i.length;o++)e={code:i[o][a[0].name],text:i[o][a[1<a.length?1:0].name]},n.push(e);l.store.loadData(n)},updateProperty:function(t,e){var a=this,i=a.cmp$;switch(t){case"text":i.setValue(e);break;case"labelwidth":e&&e.length&&i.setLabelWidth&&i.setLabelWidth(Number(e));break;case"fieldlabel":i.setFieldLabel(e);break;case"label_names":case"value_names":case"name_delimiter":clearTimeout(a._vtimer),a._vtimer=setTimeout(function(){a._setData.call(a)},20)}},getSelectionData:function(t){var e,a,i=this.cmp$,n=i.getValue();if(this.dsmode)return null;for(e=0;e<i.store.data.items.length;e++)if(i.store.data.items[e].get("code")==n){a={code:i.store.data.items[e].get("code"),text:i.store.data.items[e].get("text")};break}return a?[a]:[]},_setData:function(){var t,e,a={data:[]},i=this.property,n=a.data,l=i.label_names||"",o=i.value_names||"",r=i.name_delimiter||";";for(l=l.split(r),o=o.split(r),e=Math.max(l.length,o.length),t=0;t<e;t++)n.push({code:o[t]||l[t],text:l[t]||o[t]});this.loadData(a)},loadData:function(t){for(var e,a=[],i=0;i<t.data.length;i++)e=t.data[i],a.push({code:e.code,disp:e.disp||e.code});this.cmp$.store.loadData(a)},sel:function(t){var e,a,i=this.cmp$,n=i.store;if(void 0===t)e=i.getValue();else if(n.data.items[t])i.setValue(n.data.items[t].get("code"));else for(a=0;a<n.data.items.length;a++)if(n.data.items[a].get("code")==t){i.setValue(t);break}return e}}),IG$.controls.combobox=new IG$.ctrlComboBox({},null),IG$.ctrlCheckbox=IG$.extend(IG$.ctrlBase,{initComponent:function(){this.p.push({name:"fieldlabel",type:"property",datatype:"string"},{name:"labelwidth",type:"property",datatype:"number",value:80},{name:"label_names",type:"property",datatype:"string"},{name:"value_names",type:"property",datatype:"string"},{name:"name_delimiter",type:"property",datatype:"string",value:";"},{name:"change",type:"event"}),this.viewer=null,this.superclass.prototype.initComponent.call(this)},initDrawing:function(){var t=this;t.dsmode;t.cmp$=new $s.checkbox({renderTo:t.el$}),t.superclass.prototype.initDrawing.call(t)},invalidate:function(){var t=IG$.j$ext._w(this.html),e=IG$.j$ext._h(this.html),a=this.property,i=a.labelwidth||0;(a.fieldlabel||"")&&i&&(t-=i),this.viewer.width(t).height(e)},commit:function(){},updateProperty:function(t,e){var a=this;a.$cmp;switch(t){case"text":break;case"labelwidth":jdom=$("#_1",a.el$),IG$.j$ext._w(jdom,el$);break;case"fieldlabel":e?(lbl.show(),lbl.text(e)):lbl.hide();break;case"label_names":case"value_names":case"name_delimiter":clearTimeout(a._vtimer),a._vtimer=setTimeout(function(){a._setData.call(a)},20)}},getSelectionData:function(t){return this.dsmode?null:value},applyDataSet:function(t){t.data;var e={data:[]};me.loadData(e)},_setData:function(){var t,e,a={data:[]},i=this.property,n=a.data,l=i.label_names||"",o=i.value_names||"",r=i.name_delimiter||";";for(l=l.split(r),o=o.split(r),e=Math.max(l.length,o.length),t=0;t<e;t++)n.push({code:o[t]||l[t],text:l[t]||o[t]});this.loadData(a)},loadData:function(t){var a=this;a.viewer.empty(),$.each(t.data,function(t,e){(e.code||e.tet)&&a.viewer.append("<label><input type='checkbox' value='"+e.code+"'>"+e.text+"</label>")})}}),IG$.controls.checkbox=new IG$.ctrlCheckbox({},null),IG$.ctrlDateField=IG$.extend(IG$.ctrlBase,{initComponent:function(){this.p.push({name:"text",type:"property",datatype:"string"}),this.superclass.prototype.initComponent.call(this)},initDrawing:function(){var t=this,e=new Date;t.superclass.prototype.initDrawing.call(t),t.datefield=$("<input class='mec-dateperiod-input' type='text' placeholder='"+IG$.calendar_locale.c1disp+"'></input>").datepicker({monthNames:$.datepicker._defaults.monthNamesShort,buttonImage:"./images/calendar.gif",buttonImageOnly:!0,dateFormat:IG$.calendar_locale.c1format,defaultDate:0,onSelect:function(t,e){}}).appendTo(t.el$),t.datefield.datepicker("setDate",e),$("<div class='mec-dateperiod-button'></div>").appendTo(t.el$).bind("click",function(){t.datefield.datepicker("show")}),t.property.text=t.getValue()},invalidate:function(){var t=IG$.j$ext._w(this.html),e=IG$.j$ext._h(this.html);this.datefield.width(t-34).height(e-5)},commit:function(){this.property.text=this.getValue()},getValue:function(t){var e,a=this.datefield.datepicker("getDate");return a&&(e=a.format("Ymd"),t&&t.push({code:e,value:e})),e}}),IG$.controls.datechooser=new IG$.ctrlDateField({},null),IG$.ctrlMonthField=IG$.extend(IG$.ctrlBase,{initComponent:function(){this.superclass.prototype.initComponent.call(this)},initDrawing:function(){new Date;this.superclass.prototype.initDrawing.call(this),this.datefield=$("<input class='mec-dateperiod-input' type='text'></input>").monthpicker({buttonImage:"./images/calendar.gif",buttonImageOnly:!0,pattern:"yyyy-mm",onSelect:function(t,e){}}).appendTo(this.el$)},invalidate:function(){var t=IG$.j$ext._w(this.html),e=IG$.j$ext._h(this.html);IG$.j$ext._w(this.datefield,t),IG$.j$ext._h(this.datefield,e)},getValue:function(t){var e,a=this.datefield.getValue();a&&(e=a.format("Ymd"),t.push({code:e,value:e}))}}),IG$.controls.monthchooser=new IG$.ctrlMonthField({},null),IG$.ctrlFileUpload=IG$.extend(IG$.ctrlBase,{doUpload:function(){var t,n=this,e=n.cmp$,a=e.down("[name=mform]"),i=e.down("[name=orig_filename]"),l=e.down("[name=photo]");a.getForm().isValid()&&(a.getForm(),document.charset="UTF-8",-1<(t=l.getRawValue()).indexOf("\\")&&(t=t.substring(t.lastIndexOf("\\")+1)),i.setValue(t),a.submit({url:ig$.servlet,waitMsg:"Uploading your data file",success:function(t,e){var a=t.errorReader.jsonData,i=a&&a.result?a.result.uid:null;n._result_uid=i}}))},initComponent:function(){this.p.push({name:"text",type:"property",datatype:"string"},{name:"fileuploaded",type:"event"}),this.superclass.prototype.initComponent.call(this)},initDrawing:function(){var t=this;new Date;t.superclass.prototype.initDrawing.call(t),t.cmp$=t.cmp$=new $s.container({renderTo:t.el$,layout:{type:"vbox",align:"stretch"},items:[{xtype:"form",name:"mform",layout:"anchor",items:[{xtype:"hiddenfield",name:"_mts_",value:IG$._g$a},{xtype:"textfield",name:"orig_filename",hidden:!0,fieldLabel:"Original name"},{xtype:"fileuploadfield",name:"photo",msgTarget:"side",allowBlank:!1,anchor:"100%",buttonText:IRm$.r1("L_SELECT_FILE"),buttonConfig:{margin:"0 2 0"}}]}],listeners:{afterrender:function(t){t.down("[name=mform]").getForm().errorReader=new IG$.m2ER}}})},invalidate:function(){var t=IG$.j$ext._w(this.html),e=IG$.j$ext._h(this.html);this.cmp$.setSize(t,e)},commit:function(){},getValue:function(t){return null}}),IG$.controls.fileupload=new IG$.ctrlFileUpload({},null),IG$.ctrlPanel=IG$.extend(IG$.ctrlBase,{initComponent:function(){var t=this;t.titleheight=0,t.p.push({name:"layout",type:"property",datatype:"string",value:"absolute",enum:[{name:"absolute",value:"absolute"},{name:"vertical",value:"vbox"},{name:"horizontal",value:"hbox"},{name:"table",value:"table"}]},{name:"gap",type:"property",datatype:"number"},{name:"align",type:"property",datatype:"string",value:"",enum:[{name:"none",value:""},{name:"stretch",value:"stretch"},{name:"center",value:"center"}]},{name:"region",type:"property",datatype:"string"},{name:"title",type:"property",datatype:"string"},{name:"collapsible",type:"property",datatype:"boolean"},{name:"scroll",type:"property",datatype:"string",enum:[{name:"none",value:"none"},{name:"auto",value:"auto"},{name:"show",value:"show"}]}),ptemplate=['<div class="ig-ds-panel">','<div class="ig-ds-title"><span id="ig-ds-title-text"></span></div>','<div class="ig-ds-body">',"</div>","</div>"],t.pdiv$=$(ptemplate.join("")).appendTo(t.el$),t.p_region=$(".ig-ds-body",t.pdiv$),t.superclass.prototype.initComponent.call(t)},move_html:function(t){this.pdiv$;this.p_region.append(t)},updateProperty:function(t,e){var a=this,i=a.ctrl,n=(a.pdiv$,0);switch(t){case"title":break;case"layout":n=1;break;case"gap":case"padding":case"align":n=1}n&&(a._val_timer&&clearTimeout(a._val_timer),i&&i.layouts&&("vbox"==i.property.layout||"hbox"==i.property.layout)&&(a._val_timer=setTimeout(function(){i.owner.changeLayout(i)},10))),this.updateLayout()},initDrawing:function(){this.pdiv$.mCustomScrollbar({axis:"y",theme:"minimal-dark",autoHideScrollbar:!0,scrollbarPosition:"outside",autoDraggerLength:!0,advanced:{updateOnContentResize:!0,autoUpdateTimeout:60}}),this.superclass.prototype.initDrawing.call(this)},invalidate:function(){var t=this,e=IG$.j$ext._w(t.html),a=IG$.j$ext._h(t.html),i=t.pdiv$,n=t.ctrl,l=0,o=0;i.width(e).height(a),n.layouts&&$.each(n.layouts,function(t,e){var a=e.measuredRect;l=Math.max(l,a.y+a.h+10),o=Math.max(o,a.x+a.w+10)}),t.p_region.css({minHeight:a-10}),t.p_region.width(o).height(l)},updateLayout:function(){this.ctrl.dashboard,this.pdiv$}}),IG$.controls.panel=new IG$.ctrlPanel({},null),IG$.ctrlPivotReport=IG$.extend(IG$.ctrlBase,{initComponent:function(){var t=this;t.canvas=null,t.viewer=null,t.options=null,t.loading=null,t.zoom=!1,t.sheetindex=0,t.hidetoolbar=!1,t.hidestatusbar=!1,t.p.push({name:"draw",type:"property",datatype:"string"},{name:"hidetoolbar",type:"property",datatype:"boolean",vmode:1},{name:"hidestatusbar",type:"property",datatype:"boolean",vmode:1},{name:"execute_completed",type:"event"}),t.superclass.prototype.initComponent.call(t)},onClickMagHandler:function(t){var e=t.data.sender;e.processEvent("magnifire",e)},initDrawing:function(){var e=this;IG$.j$ext._w(e.html),IG$.j$ext._h(e.html);e.viewer||(e.viewer=new IG$.ReportView({renderTo:e.el$,uid:e.uid,$init_block_run:!0,region:"center",collapsible:!1,minSize:100,floatable:!1,vmode:1,title:0,closeAction:"destroy",header:!1,$openmode:"dashboard"}),e.viewer.on("afterrender",function(t){e.updateProperty("hidetoolbar"),e.updateProperty("hidestatusbar")},e)),e.__pcinit()},clear:function(){var t=this.viewer;t&&t.clearResult.call(t)},updateProperty:function(t){var e=this.viewer,a=this.property[t];if(e)switch(t){case"hidetoolbar":e.hiddentoolbar=a,e&&e._tbar&&e._tbar.setVisible(!a);break;case"hidestatusbar":e.hiddenstatusbar=a,e&&e.down("[name=_1]")&&e.down("[name=_1]").setVisible(!a)}},invalidate:function(){var t=IG$.j$ext._w(this.html),e=IG$.j$ext._h(this.html);this.viewer&&this.viewer.setSize(t,e)},getSelectionData:function(t){return null},eRun:function(t,e){var a=this,i=a.viewer;a.ctrl.parentcontrol;i.execallback=new IG$.callBackObj(a,function(t,e){1!=e&&this.ctrl.actionlist&&this.triggerEvent("execute_completed",{ctrl:this.ctrl,ptr:this,event:"execute_completed"})}),i.uid!=a.uid&&(i.uid=a.uid,i.__loaded=!1,i.init_f.call(i,!0)),i._dboardCallback=null,i.__loaded?i.toolbarHandler.call(i,"cmd_run",null,null,e):i._dboardCallback=new IG$.callBackObj(a,function(){i.toolbarHandler.call(i,"cmd_run",null,null,e)})},parseFilter:function(t,e){if(t){var a,i=IG$.XGetChildNodes(t,"FilterGroup");if(i&&0<i.length)for(a=0;a<i.length;a++){var n=new IG$.clFilterGroup;n.name=IG$.XGetAttr(i[a],"name"),e.subGroups.push(n),this.parseSubFilter(i[a],n)}}},parseSubFilter:function(t,e){var a,i,n=IG$.XGetChildNodes(t);if(n&&0<n.length)for(a=0;a<n.length;a++){"FilterGroup"==IG$.XGetNodeName(n[a])?((i=new IG$.clFilterGroup).name=IG$.XGetAttr(n[a],"name"),this.parseSubFilter(n[a],i),e.subGroups.push(i)):e.subConditions.push(new IG$.clFilter(n[a]))}},runReport:function(t){this.viewer.$init_block_run=!1,this.viewer.rs_loadContent(t)},applyApplication:function(t){var e=this;e.applicationItem=t,null!=e.applicationItem&&(e.uid=e.applicationItem.uid,!e.dsmode&&e.viewer&&(e.viewer.uid=e.uid,e.viewer.init_f.call(e.viewer,!0)))},negoFilter:function(t,e){var a,i,n=this;n.viewer&&(a=t.viewer,(i=n.viewer.dzone?n.viewer.dzone.getBox.call(n.viewer.dzone,e):null)?(t.html.empty(),t.viewer=i.viewer,i.view.contentarea.appendTo(t.html),i.view.splash.appendTo(t.html),i.hidden=!0):n.viewer.regbody.call(n.viewer,e,a))},destroy:function(){this.viewer&&this.viewer.close&&this.viewer.close()}}),IG$.controls.olapreport=new IG$.ctrlPivotReport({},null),IG$.ctrlBrowserPanel=IG$.extend(IG$.ctrlBase,{initComponent:function(){this.p.push({name:"rootpath",type:"property",datatype:"string"},{name:"visibleitems",type:"property",datatype:"string"},{name:"folder_templates",type:"property",datatype:"string"},{name:"templates",type:"property",datatype:"string"},{name:"collapsible",type:"property",datatype:"boolean"},{name:"foldercollapse",type:"property",datatype:"boolean"},{name:"name_exclude",type:"property",datatype:"string"},{name:"batchload",type:"property",datatype:"boolean"},{name:"itemclick",type:"event"}),this.superclass.prototype.initComponent.call(this)},processEvent:function(t,e){},invalidate:function(){var t=IG$.j$ext._w(this.html),e=IG$.j$ext._h(this.html);this.cmp$&&this.cmp$.setSize(t,e)},applyApplication:function(t){this.applicationItem=t},initDrawing:function(){var t=this;IG$.j$ext._w(this.html),IG$.j$ext._h(this.html),t.ctrl.actionlist,t.ctrl.owner;t.cmp$=new IG$.naviTree({renderTo:t.el$,header:!1}),t.dsmode,this.__pcinit(),t.superclass.prototype.initDrawing.call(t)},updateProperty:function(t,e){switch(t){case"rootpath":this.setRootPath()}},setRootPath:function(){var t,n=this,e=n.property.rootpath,a={},i={},l=5;e&&(a.uid=e,1==n.property.batchload&&(l="helpcontent",i.typelist="Dashboard;Report",i.pid=e,i.option="search"),(t=new IG$._rpc$).init(n,{ack:l,payload:a,mbody:i},n,function(t){var e,a=IG$.XGetNode(t,"helpcontent"==l?"/smsg/result":"/smsg/item"),i=a?IG$.XGetChildNodes(a):null;a&&("Folder"!=IG$.XGetAttrProp(a).type&&"helpcontent"!=l||(e=$("<ul></ul>").appendTo(n.el$),this.addNodes(i,e)))},!1),t.send())}}),IG$.controls.browser=new IG$.ctrlBrowserPanel({},null),IG$.ctrlTabPanel=IG$.extend(IG$.ctrlBase,{initComponent:function(){this.activeIndex=0,this.p.push(),this.superclass.prototype.initComponent.call(this)},processEvent:function(t,e){},invalidate:function(){IG$.j$ext._w(this.html),IG$.j$ext._h(this.html)},initDrawing:function(){var t=this,e=(IG$.j$ext._w(t.html),IG$.j$ext._h(t.html),t.ctrl.actionlist,$("<div></div>").appendTo(t.el$)),a=$("<ul class='igc-p-tap'></ul>").appendTo(e),i=$("<div></div>").appendTo(e);t.tabbuttons=a,t.mainarea=i,t.__pcinit()},updateProperty:function(t,e){this.dsmode},updateLayout:function(){var t=this,e=t.ctrl.dashboard;clearTimeout(t._timerL),t._timerL=setTimeout(function(){e&&e.changeLayout.call(e,t.ctrl)},50)},loadHeader:function(t){var i=this,n=i.tabbuttons;i.tabitems=t,n.empty(),$.each(t,function(t,e){var a=$("<li><span>"+(e.title||"Tab "+(t+1))+"</li>").appendTo(n);i.activeIndex==t&&a.addClass("active"),(e.__tab_btn=a).bind("click",function(){i.setActiveItem.call(i,t)})})},getTabHeight:function(){return this.tabbuttons?this.tabbuttons.height():0},setActiveItem:function(t){var e,a=this;if(a.tabitems&&a.tabitems.length>t&&-1<t&&(a.activeIndex=t),-1<a.activeIndex&&a.tabitems)for(e=0;e<a.tabitems.length;e++)t==e?a.tabitems[e].__tab_btn.addClass("active"):a.tabitems[e].__tab_btn.removeClass("active"),a.tabitems[e].controls.html[t==e?"show":"hide"]()}}),IG$.controls.tabpanel=new IG$.ctrlTabPanel({},null),IG$.ctrlPromptFilter=IG$.extend(IG$.ctrlBase,{initComponent:function(){this.activeIndex=0,this.p.push({name:"request_run",type:"event"}),this.superclass.prototype.initComponent.call(this)},processEvent:function(t,e){},invalidate:function(){IG$.j$ext._w(this.html),IG$.j$ext._h(this.html)},initDrawing:function(){var t,e=this,a=(IG$.j$ext._w(e.html),IG$.j$ext._h(e.html),e.ctrl.actionlist,$("<div></div>").appendTo(e.html));e.viewer||(e.sop=new IG$.sheetfiltercomp(e.layout._xparam),e.sop.objtype="FILTER",e.viewer=new IG$.dynFilterView(a,e.sop,null,!0),e.viewer.callback=new IG$.callBackObj(e,function(){e.html.trigger("e_request_run")})),e.dsmode&&(t=$("<div class='igc-p-config'><div class='igc-p-config-bg'></div><button>Config</button></div>").appendTo(e.html),$("button",t).bind("click",function(){e.configSheet.call(e)})),e.__pcinit()},configSheet:function(){var i=this,t=new IG$.sheetobj({sheetoption:i.viewer.sheetoption,reportoption:null,createMode:1,callback:new IG$.callBackObj(i,function(t,e){var a=i.sop.getXML.call(i.sop);i.layout._xparam=IG$.loadXML(a),i.viewer.validateItems.call(i.viewer)},i.viewer)});IG$.checkLogin(this,t)},updateProperty:function(t,e){this.dsmode},updateLayout:function(){this.ctrl.dashboard},getSelectionData:function(t){var e,a,i,n,l=this.viewer,o=[];if(t&&t.name&&l&&(e=l.sheetoption.model.filter_items)&&e.length){for(a=0;a<e.length;a++)if(e[a].name==t.name){n=e[a];break}if(n&&l.checkFilterValuesItem.call(l,n,[],!0))for(i=0;i<n.value.length;i++)o.push(n.value[i])}return o}}),IG$.controls.promptfilter=new IG$.ctrlPromptFilter({},null),IG$.ctrlDashboardPanel=IG$.extend(IG$.ctrlBase,{initComponent:function(){this._viewerRendered=!1,this.p.push(),this.superclass.prototype.initComponent.call(this)},processEvent:function(t,e){},invalidate:function(){var t=IG$.j$ext._w(this.html),e=IG$.j$ext._h(this.html);this.viewer&&this.viewer.setSize(t,e)},initDrawing:function(){var e=this,t=IG$.j$ext._w(e.html),a=IG$.j$ext._h(e.html),i=$("<div class='igc-db-embed'></div>").appendTo(e.el$),n=$("<div></div>").appendTo(e.el$);IG$.j$ext._w(i,t),IG$.j$ext._h(i,a),n.css({position:"absolute",top:0,left:0,bottom:0,right:0,width:"100%",height:"100%",overflow:"hidden"}).hide(),e.dsmode?(cbtn=$("<div class='igc-p-config'><div class='igc-p-config-bg'></div><button>Config</button></div>").appendTo(e.el$),$("button",cbtn).bind("click",function(){})):e.viewer||(e.viewer=new IG$.DashboardView({uid:null,width:IG$.j$ext._w(i),height:IG$.j$ext._h(i),renderTo:i[0],rendermask:n,floatable:!1,closeAction:"destroy",title:0,uid:e.uid,collapsible:!1,header:!1,dsmode:1,border:0,sm:0}),e.viewer.on("afterrender",function(t){e._viewerRendered=!0})),e.__pcinit()},updateProperty:function(t,e){this.dsmode},updateLayout:function(){this.ctrl.dashboard},destroy:function(){this.viewer&&this.viewer.close&&this.viewer.close()}}),IG$.controls.dashboard=new IG$.ctrlDashboardPanel({},null);
IG$.sheetfiltercomp=function(e){var t=this;e=t.model=e||{},t.docid=e.docid,$s.defaults(e,{objtype:e.objtype||"PANEL",layoutinfo:{},filter_items:[],filter_options:{}}),$s.defaults(e.filter_options,{showbutton:!1,viewtype:"row",brow:0,columnsize:1,rowsize:1,buttonname:null,f_b_desc:null,f_b_scr:null,showrefresh:!0,edrill:!0}),t.tab_option={}},IG$.sheetfiltercomp.prototype={getDefaultValue:function(e,t){var i,n=e.data.initial_values;return n&&n.length&&n[t]&&(i=n[t].code),i&&-1<i.indexOf("cyear")&&(i=this.getYearField(i)),i},getYearField:function(e){var t,i;return IG$.isNumber(e)?Number(e):(t=(new Date).getFullYear(),i=0,-1<e.indexOf("-")?(i=e.substring(e.indexOf("-")+1),i=Number(i),i*=-1):-1<e.indexOf("+")&&(i=e.substring(e.indexOf("+")+1),i=Number(i)),t+i)}},IG$.rfText=function(e,t){var i=this;i.container=e,i.sheetoption=t,i.updateValues=!0,i.$init()},IG$.rfText.prototype={$init:function(){var e=this,t=$("<div class='idv-pnl-html-cnt'></div>").appendTo(e.container);e.c1=t,e.contentarea=$("<div class='idv-pnl-html'></div>").appendTo(t),e.setText()},removeObj:function(){},validateItems:function(){this.setText()},setSize:function(e,t){var i=this.c1;IG$.j$ext._w(i,e),IG$.j$ext._h(i,t)},setText:function(){for(var e,t,i,n,o,a,r,l=this,d=l.finfo,c=[],s=[],p=0,u=0,h=l.sheetoption,v=Base64.decode(h.model.htmlcontent||h.model.content||""),f=v.indexOf("{",p);-1<f&&u<v.length;)-1<(u=v.indexOf("}",f))?(c.push({t:v.substring(p,f),m:0}),c.push({t:v.substring(f+1,u),m:1})):(u=p,c.push({t:v.substring(p,u),m:0})),p=u+1,f=v.indexOf("{",p);for(c.push({t:v.substring(p,v.length),m:0}),o=0;o<c.length;o++)if(1==(e=c[o]).m)if((i=e.t.match(/\[(.*?)\]/g))&&0<i.length){if(r=!!d,d)for(a=0;a<i.length;a++){if(!d[n=i[a].replace(/[\[\]]/g,"")]){r=!1;break}e.t=e.t.replace(new RegExp("\\["+n+"\\]","g"),d[n].data.join(", ")||"")}1==r&&s.push(e.t)}else s.push("{"+e.t+"}");else s.push(e.t);t=s.join(""),l.contentarea.html(t)},updateFilterContent:function(e){this.finfo=e,this.setText()}},IG$.rfNavi=function(e,t,i,n){var o=this;o.container=e,o.sheetoption=t,o.reportoption=i,o.rpt=n,o.updateValues=!0,o.$init()},IG$.rfNavi.prototype={$init:function(){var e,t=this,i={};t.reportoption;t.contentarea=$("<div></div>").appendTo(t.container),this.browser=e=new IG$.naviTree({renderTo:t.contentarea[0],showtoolbar:!1,cubebrowse:!0,showcheckselect:!1,collapsible:!1,floatable:!1,floating:!1,flex:5,layout:"fit",enabledrag:!0,checkStateChanged:t.checkStateChangedHandler}),i.type="rolap"==t.reportoption.reportmode?"Cube":"Metric",i.name=i.type,i.nodepath=i.type,i.uid=t.reportoption.cubeuid||null,i.leaf=!1,e.store.setRootNode(i)},removeObj:function(){this.browser=null},validateItems:function(){},setSize:function(e,t){var i=this.contentarea;IG$.j$ext._w(i,e),IG$.j$ext._h(i,t),this.browser.setWidth(e),this.browser.setHeight(t)},updateFilterContent:function(e){}},IG$.rfBlankPanel=function(e,t){this.container=e,this.sheetoption=t,this.updateValues=!0,this.$init()},IG$.rfBlankPanel.prototype={$init:function(){var e=this;e.contentarea=$("<div></div>").appendTo(e.container),e.owner&&e.owner.box&&e.owner.box.bind("updatecomplete",function(){e.validateItems.call(e)})},removeObj:function(){},validateItems:function(){var i=this.owner,e=i&&i.docitems&&this.sheetoption?i.docitems[this.sheetoption.docid]:null;e&&e.children&&$.each(e.children,function(e,t){t.docid&&(i.bodylist[t.docid],0)})},setSize:function(e,t){var i=this.contentarea;IG$.j$ext._w(i,e),IG$.j$ext._h(i,t)},updateFilterContent:function(e){}},IG$.rfTabPanel=function(e,t,i){var n=this;n.container=e,n.sheetoption=t,n.owner=i,n.owner&&n.owner.box&&n.owner.box.bind("updatecomplete",function(){n.validateItems.call(n)}),n.updateValues=!0,n.active=null,n.$init()},IG$.rfTabPanel.prototype={$init:function(){var e=this;e.owner,e.owner&&e.owner.ctrls;e.buttons=[],e.contentarea=$("<div></div>").appendTo(e.container),e.tabarea=$("<div class='idv-dtab-area'></div>").appendTo(e.contentarea).hide(),e.tabul=$("<ul></ul>").appendTo(e.tabarea),e.validateItems()},removeObj:function(){},validateItems:function(){var e,t,o=this,a=o.owner,r=a&&a.docitems&&o.sheetoption?a.docitems[o.sheetoption.docid]:null,l=0,i=!1,n=!o.sheetoption||!o.sheetoption.tab_option||"F"!=o.sheetoption.tab_option.showtab;if(o.tabarea[n||o.editmode?"show":"hide"](),o.tabul.empty(),o.buttons=[],r&&r.children&&0<r.children.length){if(t=r.active,r.active){for(e=0;e<r.children.length;e++)if(r.children[e].docid==r.active){i=!0;break}r.active=0==i?null:r.active}$.each(r.children,function(e,t){var i,n;t.docid&&(i=a.bodylist[t.docid],n=$("<li><span class='ig-tab-tt'>"+(i.title||"Tab "+e)+"</span></li>").appendTo(o.tabul),(r.active&&r.active==t.docid||!r.active&&0==l)&&(n.addClass("selected"),r.active=t.docid),n.docid=t.docid,n.bind("click",function(){o.setActiveDoc.call(o,t.docid)}),o.buttons.push(n),l++)}),t!=r.active&&r.active&&o.setActiveDoc(r.active,!0)}},setActiveDoc:function(e,t){for(var i,n,o=this,a=o.buttons,r=o.owner,l=r&&r.docitems&&o.sheetoption?r.docitems[o.sheetoption.docid]:null,d=(o.sheetoption.docid,0);d<a.length;d++)(i=a[d]).docid==e?i.addClass("selected"):i.removeClass("selected");if(l)for(l.active=e,d=0;d<l.children.length;d++)n=r.docitems[l.children[d].docid],o.setVisible(n,n.docid==e,t)},setVisible:function(e,t,i){var n,o=e.lt.ubody;if(o){if(e._SP&&e._SP.length)for(n=0;n<e._SP.length;n++)e._SP[n].setV(t);if(t?(o.visible=!0,o.show(),o.view&&"RPT_VIEW"==o.objtype&&!o.view.validated&&o.view.validateItems.call(o.view),"RPT_VIEW"==o.objtype&&o.view&&o.view.executeItem.call(o.view),o.box_title.trigger("click"),o.resizeH.call(o),o.view&&1==o.view.btabrun&&(i||!o.view.sheetoption||(o.view.f_run=!1,delete o.view.btabrun,o.view.procRunReport.call(o.view,null)))):(o.visible=!1,o.hide()),e.children)for(n=0;n<e.children.length;n++)this.setVisible(e.children[n],t,i)}},setSize:function(e,t){var i=this.contentarea;IG$.j$ext._w(i,e),IG$.j$ext._h(i,t)},updateFilterContent:function(e){}},IG$.rfReportViewer=function(e,t,i){var n=this;n.container=e,n.sheetoption=t,n.owner=i,n.updateValues=!0,n.active=null,n.validated=!1,n.validateFilter=!0,n.f_run=!0,n.$init()},IG$.rfReportViewer.prototype={$init:function(){var e=this;e.owner,e.owner&&e.owner.ctrls;e.contentarea=$("<div class='igc-rpt-view'></div>").appendTo(e.container)},executeItem:function(){var e=this;(e.validateFilter||e.f_run)&&(e.f_run=!1,clearTimeout(e._validateCall),e._validateCall=setTimeout(function(){e.executeValidate.call(e)},50))},executeValidate:function(){var e,t,i,n=this;if(n.irpt)for(e=0;e<n.irpt.sheets.length;e++){if(i=(t=n.irpt.sheets[e]).sheetoption,n._directFilter)for(fname in auxfilter=i.model.aux_filter,n._directFilter)auxfilter[fname]=n._directFilter[fname];t.olapset?(pivotxml=t.olapset.reportoption.getCurrentPivot.call(t.olapset.reportoption),t.olapset.requestUpdateReport(pivotxml,"mode",e,t)):i&&t.procRunReport.call(t)}else n.validateItems();n._directFilter=null,n.validateFilter=!1},removeObj:function(){},validateItems:function(e,t){var i,n,o,a=this,r=(a.owner,a.sheetoption.model),l=!t&&(a.btabrun||e);r&&r.docid&&r.rptoption&&r.rptoption.uid&&(a.irpt?a.container.trigger("i_ready"):(a.validated=!0,i=a.contentarea,n=a.owner.dockdiv?$("<div class='report_container'></div>").appendTo(i):null,o=a.owner.dockdiv?$("<div style='display:none;'></div>").appendTo(n):[],1!=a.__dx&&(a.irpt=new IG$.ReportView({uid:r.rptoption.uid,header:!1,hiddenstatusbar:!0,hiddentoolbar:!0,border:0,vmode:1,frameHeader:!1,cmode:1,dockdiv_container:n,cvmode:a.cvmode,auxfilter:a._directFilter,width:a._cw,height:a._ch,renderTo:o[0]||a.contentarea[0],_par:a.owner}),(l||t)&&a.irpt.on("_lc0",function(){a.irpt.un("_lc0"),t&&a.container.trigger("i_ready"),l&&(a.validateFilter=!0,a.executeItem.call(a))}),a._directFilter=null,a.validateFilter=!1)),a.irpt&&(a.irpt.uid!=r.rptoption.uid?(a.irpt.uid=r.rptoption.uid,a.irpt.init_f.call(a.irpt)):!t&&a.irpt.__loaded&&a.irpt.init_f.call(a.irpt),a.validateFilter=!1))},setSize:function(e,t,i){var n=this,o=n.contentarea;n.pw=n.pw||0,n.ph=n.ph||0,n._cw=e,n._ch=t,n.irpt&&n.irpt.dzone&&(i||5<Math.abs(n.pw-e)||5<Math.abs(n.ph-t))&&(n.pw=e,n.ph=t,IG$.j$ext._w(o,e),IG$.j$ext._h(o,t),n.irpt&&(n.irpt.setSize(e,t),i&&!n.irpt.dzone.sizeapplied&&n.irpt.dzone.updateDisplay.call(n.irpt.dzone,!0)))},updateFilterContent:function(e){}};
IG$.filteropcodes={EQ:{locale:IRm$.r1("L_F_EQ"),lcode:"L_F_EQ",name:"EQ",symbol:"="},GTE:{locale:IRm$.r1("L_F_GE"),lcode:"L_F_GE",name:"GTE",symbol:">="},GT:{locale:IRm$.r1("L_F_GT"),lcode:"L_F_GT",name:"GT",symbol:">"},LTE:{locale:IRm$.r1("L_F_LE"),lcode:"L_F_LE",name:"LTE",symbol:"<="},LT:{locale:IRm$.r1("L_F_LT"),lcode:"L_F_LT",name:"LT",symbol:"<"},IN:{locale:IRm$.r1("L_F_IN"),lcode:"L_F_IN",name:"IN",symbol:"IN"},LIKE:{locale:IRm$.r1("L_F_LIKE"),lcode:"L_F_LIKE",name:"LIKE",symbol:"LIKE"},BETWEEN:{locale:IRm$.r1("L_F_BETWEEN"),lcode:"L_F_BETWEEN",name:"BETWEEN",symbol:"BETWEEN"},IS:{locale:IRm$.r1("L_F_SQL_IS"),lcode:"L_F_SQL_IS",name:"IS",symbol:"IS"}},IG$.drilltarget=function(e){var t,i,l,s,r,o,n,a,d=this;if(d.tsheets={},d._e=0,e)for(t=0;t<e.length;t++)if(l=e[t]){if(n={enabled:!(o={enabled:!1,items:[],item_map:{}}),items:[],item_map:{}},r=l.sid,a=l.usedrill,s=l.item)for(o.items=s.split("_"),i=0;i<o.items.length;i++)o.items[i]&&(o.enabled=!0,o.item_map[o.items[i]]=1);if(s=l.params||null)for(n.items=s.split("_"),i=0;i<n.items.length;i++)n.items[i]&&(n.enabled=!0,n.item_map[n.items[i]]=1);a&&(d._e=1),d.tsheets[r]={name:r,isdrill:a,tparams:n,titem:o}}},IG$.drilltarget.prototype={isDrillTarget:function(e){var t=this.tsheets[e];return this._e?t&&t.isdrill?t:null:{name:e,isdrill:!!t&&t.isdrill,titem:{enabled:!1,items:[],item_map:{}},tparams:{enabled:!1,items:[],item_map:{}}}}},IG$.filterpromptenum={P_TEXTBOX:1,P_COMBOBOX:2,P_DATE:3,P_SELECT_WIN:4},IG$.fontStyle={P_NONE:0,P_BOLD:1,P_ITALIC:2,P_UNDERLINE:4},IG$._IE5=function(e,t,i){return e.styledata.length>t&&e.styledata[t].length>i&&""!=e.styledata[t][i]?" class='"+e.styledata[t][i]+"'":""},IG$.clFilter=function(e){this.model=e||{},$s.defaults(this.model,{fields:[],right_fields:[],delimiter:";",values:[]})},IG$.clFilter.prototype={getDesc:function(){var e,t=this,i="",l=t.model,s=l.fields;if(l.left_expression)i=l.left_expression;else for(e=0;e<s.length;e++)i=0==e?s[e].name:i+", "+s[e].name;return i+="\n"+t._d1(l.operator,l.opisnot,1)+"\n(","field"==l.valuetype?l.expression?i+=l.expression:(i+=l.right_fields&&l.right_fields.length?l.right_fields[0].name:"",8==l.operator&&(i+=" AND "+(l.right_fields&&1<l.right_fields.length?l.right_fields[1].name:""))):i+=t.getValueDesc(l.values),(i+=")").substring(0,50)},getValueDesc:function(e){var t,i="";if(e&&0<e.length)for(t=0;t<e.length;t++)i+=0<t?this.delimiter||",":"",i+=e[t].value||e[t].code||"";return i},_d1:function(e,t,i){var l=IG$.filteropcodes,s=l[e].locale;l[e].lcode;return s},loadData:function(e,t){var i=this,l=i.fields[0].uid,s=new IG$._rpc$;i.dataLoaded=!0,i.data=[],s.init(e,{ack:"olapservice",payload:{uid:l,option:"valuelist"},mbody:{}},i,i.rs_loadData,null,t),s.send()},rs_loadData:function(e,t){var i=this.fields[0].uid,l=new IG$._ICd(e,i);this.result=l,t&&t.execute()}},IG$.clFilterGroup=function(e){var t=this;e&&(t.name=e.name,t.authuid=e.authuid,t.authname=e.authname,t.active=e.active,t.ftype=e.ftype),t.subGroups=[],t.subConditions=[]},IG$.clFilterGroup.prototype={findItem:function(e){return this.T1a(e,this)},T1a:function(e,t){for(var i,l,s,r,o=t.subConditions,n=t.subGroups,a=0;a<o.length;a++){if((r=(s=o[a]).fields)&&0<r.length)for(i=0;i<r.length;i++)if(r[i].uid==e){l=s;break}if(l)break}if(!l)for(a=0;a<n.length&&!(l=this.T1a(e,n[a]));a++);return l},TX:function(){var e,t,i,l=this,s={ftype:l.ftype||"condition"},r=l.subConditions,o=l.subGroups;if(l.authuid&&l.authname&&(s={authuid:l.authuid,authname:l.authname,active:l.active,children:[]}),0<r.length||0<o.length){if(s.ftype="group",s.name=l.name,s.children=[],0<r.length)for(e=0;e<r.length;e++)(t=r[e]).ftype="condition",s.children.push(t.TX());if(0<o.length)for(e=0;e<o.length;e++)(i=o[e]).ftype="group",s.children.push(i.TX())}return s}},IG$.clReports=function(e){this._md=e,this.ctrls={},this._parse(e)},IG$.clReports.prototype={_parse:function(e){var t,i,l,s,r,o,n,a=this,d=e.content||{};if(a.sheets=[],a._mc=d,$s.defaults(d,{ctrls:{},sql_prompts:[],sheets:[],cube_objects:[],export_option:{}}),$s.defaults(d.export_option,{filterdesc:!0,u_excel:!0}),s=a.layoutinfo={type:"mondrian",draggable:!1,objtype:"_dc",_direction:0,width:null,height:null,children:[]},a.itemtype="Report",e){if($.apply(a,{type:e.type,nodepath:e.nodepath,uid:e.uid,name:e.name,itemtype:e.type,reportversion:d.objinfo.version,sql_prompts:d.sql_prompts}),a.cube_objects=d.cube_objects||[],t=d.sheets)for(i=0;i<t.length;i++){var c,h=(c=new IG$.clReport(t[i],a.itemtype,!1)).sql_prompts=[];if(a.sql_prompts)for(l=0;l<a.sql_prompts.length;l++)r=a.sql_prompts[l],h.push({name:r.name,values:[{code:r.value,text:r.value}]});a.sheets.push(c)}if((n=d.layout)&&(o=n&&n.children&&n.children.length?n.children[0]:null,s.items=[],o&&(s.docid=o.docid,s._direction=o._direction||0,s.width=o.width,s.height=o.height,s.children=[],s.items.push(s),a.updateLayoutNode(s,o,s))),n=d.ctrls)for(i in n)n[i].docid=i,(u=new IG$.sheetfiltercomp(n[i])).docid&&(a.ctrls[u.docid]=u);for(i=0;i<d.sheets.length;i++){var u,m=(c=d.sheets[i]).layoutinfo.docid;(u=d.ctrls[m])&&(c.fixedwidth=u.fixedwidth,c.fixedheight=u.fixedheight,c.hidetitle=u.hidetitle)}}},updateLayoutNode:function(e,t,i){var l,s,r={};if(t.children)for(l=0;l<t.children.length;l++)(s=t.children[l]).objtype=s.objtype||"PANEL",r={},$s.defaults(r,{objtype:s.objtype,d:s.d,r:s.r,_direction:s.d,_r:s.r,docid:s.docid,width:s.width,height:s.height,p:s.p,children:[],parent:i}),e.items.push(r),i.children.push(r),this.updateLayoutNode(e,s,r)},getCurrentPivot:function(){var e,t,i=this._mc;for(i.objinfo.reportversion="1.2",i.sheets=[],t=0;t<this.sheets.length;t++){sheet=this.sheets[t],e=sheet.getCurrentPivot(),i.sheets.push(e);var l=e.layoutinfo.docid,s=i.ctrls[l];s&&(s.fixedwidth=e.fixedwidth,s.fixedheight=e.fixedheight,s.hidetitle=e.hidetitle)}for(t in i.dfilter=this._dfilter,i.ctrls)i.ctrls[t].objtype;return i}},IG$.clReport=function(e,t){var i=this;e=e||{},i.itemtype=t,i.objtype="SHEET",i.model=e;(i=this).objtype=i.objtype||"SHEET",$s.defaults(e,{objtype:"SHEET",enablepivot:!0,customfix:!1,customfixcols:0,rowperpage:20,usepaging:!1,pagestyle:"normal",dataquerymode:"M_PIVOT",viewchange:!0,toolbutton:!1,openload:!0,edrill:!1,syncrows:!0,columnfill:!1,measurelocation:"column",measureposition:0,isdistinct:!1,fetchall:!1,showlnum:!1,hidemenu:!1,measuretitle:!1,ext_title:null,tb_prt_i:"excel",tb_prt_grd:!0,tb_prt:!0,rows:[],cols:[],measures:[],clusters:[],queryitems:[],report_items:[],chart_option:{},anal_options:[],layoutinfo:{},detailview:[],sheet_formula:[],visual_stories:[]}),$s.defaults(e.chart_option,{showlegend:!0,xlabel:!0,legendposition:"BOTTOM_CENTER",rel_range1:0,rel_range2:1,comp_range0:0,comp_range1:1}),e.aux_filter={},e.viewmode=e.viewmode||"grid",e.pagestyle=e.pagestyle||"normal",e.viewchange&&(i.tb_vch=e.viewchange),e.toolbutton&&(i.tb_prt=e.toolbutton),e.gridprint&&(i.tb_prt_grd=e.gridprint),e.exportbutton&&(i.tb_prt_i=e.exportbutton.toLowerCase()),i.objtype=i.objtype||"SHEET",i.name=e.name,i.si=0,i.sortoption={}},IG$.clReport.prototype={needPrompt:function(){return this.model.page_filters},getItem:function(e,t){var i,l;switch(t){case 1:l=this.model.rows;break;case 2:l=this.model.cols;break;case 3:l=this.model.measures}return l&&l[e]&&(i=l[e]),i},getCurrentPivot:function(){return this.model},mL:function(e,t){var i,l=1,s=t.cl;if(e.titem&&s){switch(l=0,s.position){case 1:i=this.rows;break;case 2:i=this.cols;break;case 3:i=this.measures}i&&i[s.index]&&-1<e.titem.indexOf(i[s.index].uid)&&(l=1)}return l},Uc:function(e){var t=1,i=this.model;return 0<i.rows.length+i.cols.length+i.measures.length+i.clusters.length&&(t=i.cubeuid==e),t}},IG$._IF1=function(e,t){var i,l,s,r,o=this;o.rows=e.total_records,o.cols=e.cols,o.srow=e.startrow||0,o.colfix=0,o.rowfix=0,o.delim=e.delimiter,o.merge=[],o.styles={},o.data=[],o.header=e.headers||[],r=e.inline_data;var n,a=[],d=0,c=0;if(0==o.header.length&&r.length)for(n=r[0].split(o.delim),l=0;l<n.length;l++)s={fieldid:"column_"+l,name:n[l].text,type:"string"},o.header.push(s);for(i=0;i<r.length;i++){for(n=r[i].split(o.delim),a=[],l=0;l<n.length;l++){var h={text:n[l],mrow:d,mcol:c,merged:0,stylename:null,chart:null};a.push(h),c++}if(d++,t&&t<d)break;o.data.push(a)}},IG$.clResults=function(e,t){var i,l,s=t||e.results;for(this.results=[],this.jobid=e.jobid,l=0;l<s.length;l++)(i=s[l])?this.updateResult(i):i={_hasNoData:!0},this.results.push(i)},IG$.clResults.prototype={_update_measure_seq:function(o){var e=this.results;$.each(e,function(e,t){var i,l,s,r;if(t.hidden_columns=t.hidden_columns||[],!t._orig_hidden_columns)for(t._orig_hidden_columns=[],i=0;i<t.hidden_columns.length;i++)t._orig_hidden_columns.push(t.hidden_columns[i]);for(t.hidden_columns=[],i=0;i<t._orig_hidden_columns.length;i++)t.hidden_columns.push(t._orig_hidden_columns[i]);for(i=0;i<t.rowfix;i++)for(s=t._tabledata[i],l=0;l<t.colcnt;l++)3==(r=s[l]).position&&r.index!=o&&t.hidden_columns.push(l)})},updateResult:function(e){var t,i,l,s,r,o,n,a,d,c,h=e,u={},m=[],p=h.tabledata,_=h.treeinfo,f=h._params={};h.delimiter;for(h._hasNoData=!(h.rowcnt>h.rowfix),h.clustercode=h.clustercode||[],h.clustervalue=h.clustervalue||[],h.clusterdesc="",r=0;r<h.clustercode.length;r++)h.clusterdesc+=(0<r?" ":"")+(h.clustervalue[r]||h.clustercode[r]);if(h.params)for(r=0;r<h.params.length;r++)f[h.params[r].name]=h.params[r].value;if(h._styles={},h.styles&&(h.c_cset=h.styles.c_cset,h.styles.cell_styles))for(i=h.styles.cell_styles,r=0;r<i.length;r++)t=i[r],h._styles[t.name]=t;if(_)for(h.hastree=!0,r=0;r<_.length;r++)u[(l=_[r])[0]+"_"+l[1]]=l;if(h.microcharts=h.microcharts||[],h.hidden_columns=h.hidden_columns||[],c=h._tabledata=new Array(p.length),p){for(r=0;r<p.length;r++)for(d=new Array(h.colcnt),c[r]=d,(s=p[r]).b=s.b||[],s.k=s.k||[],s.r=s.r||[],s.lat&&s.lng&&m.push({row:r,lat:s.lat,lng:s.lng,c:s.c,cc:s.c?parseInt(s.cc):-1}),o=0;o<h.colcnt;o++)if(a={_n_:s.i,merged:0,mrow:0,mcol:0,code:s.c[o],value:s.v[o],text:s.v[o]||s.t[o]||s.c[o],stylename:h.style_map[s.s[o]],position:s.p[o],title:s.x[o],index:s.m[o],pindex:s.y[o],cc:s.b[o],si:s.r[o],cm:s.k[o]},d[o]=a,n=r+"_"+o,_&&u[n]&&(a.celltree={depth:u[n][2],ptext:u[n][3],haschild:u[n][5],parent:null,opened:1==u[n][4],h:u[n][6],hm:u[n][7]},a.celltree.ptext))for(L=r-1;0<=L;L--)if(c[L][o].code==a.celltree.ptext&&c[L][o].celltree&&c[L][o].celltree.depth==a.celltree.depth-1){c[L][o].celltree.haschild=!0,a.celltree.parent=c[L][o];break}for(var g,y,b,v,I,E,w,$,x=h.merge_range||[],L=0;L<x.length;L++)for(g=x[L].r1,y=x[L].r2,b=x[L].c1,v=x[L].c2,y>p.length-1&&(y=p.length-1),r=g;r<y+1;r++)for(o=b;o<v+1;o++)I=y-g,E=v-b,w=c[r][o].merged,r==g&&o==b?(0<v-b&&(w|=2),0<y-g&&(w|=1)):(0<v-b&&(w|=4),0<y-g&&(w|=8)),cr=c[r][o].mrow,cc=c[r][o].mcol,c[r][o].merged=w,c[r][o].mrow=Math.max(I,cr),c[r][o].mcol=Math.max(E,cc);for(delete h.merge_range,r=0;r<h.microcharts.length;r++)$=h.microcharts[r],p.length>$.row&&h.colcnt>$.column&&(c[$.row][$.column].charts=$);delete h.microcharts}delete h.tabledata}},IG$.clStyleObject=function(e,t,i){var l=this;l.itemtype=t,l.custom=i,l.rptseq="0",e&&(l.basestylename=e.basestylename,l.name=e.name,l.rptseq=e.rptseq||0,l.uid=e.uid,l.fid=e.fid,l.header=new IG$.clStyleItem(e.header),l.data=new IG$.clStyleItem(e.data))},IG$.clStyleObject.prototype={applyBaseStyle:function(e,t){this.header.applyBaseStyle(e.header),this.data.applyBaseStyle(e.data)},forceBsStyl:function(e,t){this.header.forceBsStyl(e.header,t),this.data.forceBsStyl(e.data,t)},getData:function(e){var t=this;return{basestylename:t.basestylename,name:t.name,rptseq:t.rptseq,uid:t.uid,fid:t.fid,header:t.header.getData(e?e.header:null),data:t.data.getData(e?e.data:null)}}},IG$.clStyleItem=function(e,t){this.itemtype=t,this._mc=e||{}},IG$.clStyleItem.prototype={applyBaseStyle:function(e){var t;for(t in e._mc)void 0!==this._mc[t]&&null!==this._mc[t]&&-1!==this._mc[t]||(this._mc[t]=e._mc[t])},forceBsStyl:function(e,t){var i,l=this._mc,s=e._mc;if(s&&l)for(i in s)t?l[i]!=s[i]&&""!=l[i]||delete l[i]:l[i]=s[i]},getData:function(e){var t,i,l=this._mc,s=e?e._mc:null,r={};for(t in l)"name"!=t?(i=l[t],s&&s[t]===i?i=null:r[t]=i):r[t]=l[t];return r}},IG$.iff=function(e){var t=this;t.dtype="static",t.coldelim="\t",t.rowdim="\n",t.dvalues=[],t.i_cdata=[],e&&t.p1(e)};
IG$.dlg_share=$s.extend($s.window,{width:650,height:500,layout:"fit",modal:!0,_init:function(){var e=this,t=ig$.applink||"",n="{objid}",i=document.location.href,a=e.down("[name=m_lnk]"),l=t.indexOf(n);if(-1<l&&(t=t.substr(0,l)+e.uid+t.substr(l+n.length)),"http"!=t.substring(0,4)&&0<i.indexOf("launcher")){for(var s=i.split("/"),o="",d=0;d<s.length&&"launcher"!=s[d];d++)o&&(o+="/"),o+=s[d];t=o+"/"+t}a.setValue(t),e._get_links()},_share_me:function(){var t,n,i=this,e=i.down("[name=m_em]"),a=i.down("[name=m_msg]"),l=e.getValue(),s=a.getValue(),o=i.down("[name=b_need_login]"),d=i.down("[name=p_lnk]").getValue();e.clearInvalid(),l?(t=new IG$._rpc$,n={recipient:l,message:s,uid:i.uid,linkurl:d,is_public:o.getValue()?"F":"T"},IG$.confirmMessages(ig$.appname,"Confirm to create shared url?",function(e){"yes"==e&&(t.init(i,{ack:"sendmail",payload:{uid:i.uid,mtype:"share_item"},mbody:n},i,function(e){IG$.alertmsg(ig$.appname,IRm$.r1("M_SAVED"),null,null,0,"success"),i.down("[name=p_lnk]").setValue(e.lurl),i._get_links()}),t.send())},i,i)):e.markInvalid("Required!")},_gen_link:function(){var t=this,n=t.down("[name=b_need_login]"),i=new IG$._rpc$;IG$.confirmMessages(ig$.appname,"Confirm to create shared url?",function(e){"yes"==e&&(i.init(t,{ack:"sendmail",payload:{uid:t.uid,mtype:"share_link"},mbody:{is_public:n.getValue()?"F":"T"}},t,function(e){e&&(t.down("[name=p_lnk]").setValue(e.lurl),t._get_links())}),i.send())},t,t)},_get_links:function(){var n=this,e=new IG$._rpc$;e.init(n,{ack:"sendmail",payload:{uid:n.uid,mtype:"get_share_link"},mbody:{}},n,function(e){var t=n.down("[name=grd_shared]");e&&t.store.loadData(e)}),e.send()},initComponent:function(){$s.apply(this,{title:"Sharing Setting",items:[{xtype:"container",layout:"anchor",autoScroll:!0,padding:10,defaults:{anchor:"100%",labelPosition:"top"},items:[{xtype:"fieldset",title:"Embeddable link",layout:{type:"vbox",align:"stretch"},items:[{xtype:"textarea",name:"m_lnk",fieldLabel:"Link to share",readOnly:!0,labelPosition:"top"},{html:"<span>Use above link url to embed on html pages.</span>",autoHeight:!0}]},{xtype:"fieldset",title:"Share with public link",layout:{type:"vbox",align:"stretch"},defaults:{labelPosition:"top"},items:[{xtype:"textfield",name:"m_em",fieldLabel:"People",emptyText:"Enter email or email addresses..."},{xtype:"textarea",name:"m_msg",fieldLabel:"Messages",emptyText:"Messages..."},{html:"<span>This sends email with public link of this report who don't have access to system</span>",autoHeight:!0},{xtype:"checkbox",name:"b_need_login",fieldLabel:"Login",labelPosition:"left",boxLabel:"Need login",value:!0},{xtype:"container",layout:{type:"hbox",align:"stretch"},items:[{xtype:"textarea",name:"p_lnk",readOnly:!0,height:120,flex:1,labelPosition:"top",fieldLabel:"Public link"},{xtype:"container",layout:{type:"vbox",align:"stretch"},items:[{xtype:"container",height:20},{xtype:"button",text:"Generate",handler:function(){this._gen_link()},scope:this}]}]},{xtype:"fieldcontainer",layout:{type:"hbox",align:"stretch"},items:[{xtype:"container",flex:1},{xtype:"button",text:"Share",handler:function(){this._share_me()},scope:this}]},{html:"<span><b>Shared History</b></span>",autoHeight:!0},{xtype:"textarea",fieldLabel:"URL of shared object",labelPosition:"top",name:"h_url",height:100},{xtype:"gridpanel",name:"grd_shared",height:300,store:{fields:[]},columns:[{text:"Date",tdCls:"igc-td-link",dataIndex:"cdate"},{text:"Public",xtype:"checkcolumn",dataIndex:"is_public",readOnly:!0},{text:"Visited Counts",dataIndex:"acc_count"},{text:"Last Viewed",dataIndex:"ldate"},{xtype:"actioncolumn",width:40,items:[{iconCls:"icon-grid-delete",handler:function(n,e,t,i){var a;i.get("uid")&&(a=this,IG$.confirmMessages(ig$.appname,"Confirm to disable sharing?",function(e){var t;"yes"==e&&((t=new IG$._rpc$).init(a,{ack:"sendmail",payload:{suid:i.get("suid"),uid:a.uid,mtype:"remove_share_link"},mbody:{}},a,function(e){n.store.remove(i)}),t.send())},a,a))},scope:this}]}],listeners:{cellclick:function(e,t,n,i,t,a,l){0==n&&this.down("[name=h_url]").setValue(i.get("url"))},scope:this}}]}]}],buttons:[{xtype:"button",text:IRm$.r1("B_CANCEL"),handler:function(){this.close()},scope:this}],listeners:{afterrender:function(e){e._init()}}}),IG$.dlg_share.superclass.initComponent.call(this)}});
IG$.SVGLoader=function(e){this.container=e,this.mindex=0},IG$.SVGLoader.prototype={load:function(r){var d=this;if(d.loaded==r)return d.resizeTo.call(d),void $(d.container).trigger("svgloaded");d.container.empty(),$.ajax({url:r,dataType:"text",type:"GET",cache:!0,complete:function(e,a){},success:function(e,a,t){var i=IG$.loadXML(e);d.loaded=r,d.loadSVG.call(d,i),$(d.container).trigger("svgloaded")},error:function(e,a,t){}})},loadSVG:function(e){var a,t,i,r,d=this,n=d.container;if(d.mapid={},d.gparam={cx:0,cy:0,cwidth:IG$.j$ext._w(n),cheight:IG$.j$ext._h(n),sx:0,sy:0,swidth:IG$.j$ext._w(n),sheight:IG$.j$ext._h(n)},a=IG$.XGetNode(e,"/svg"),d.paper=Raphael(n[0],0,0,d.gparam.cwidth,d.gparam.cheight),d.legend=$("<ul class='map-legend'></ul>").appendTo(n).hide(),a){if(t=IG$.XGetAttrProp(a),d.gparam.sx=t.x?d.getVal(t.x):d.gparam.sx,d.gparam.sy=t.y?d.getVal(t.y):d.gparam.sy,d.gparam.swidth=t.width?d.getVal(t.width):d.gparam.swidth,d.gparam.sheight=t.height?d.getVal(t.height):d.gparam.sheight,r=(r=t.viewBox)?r.split(" "):null){for(i=0;i<r.length;i++)r[i]=d.getVal(r[i]);r=r[0]==d.gparam.sx&&r[1]==d.gparam.sy&&r[2]==d.gparam.swidth&&r[3]==d.gparam.sheight?null:r}d.gparam.vbox=r,d.paper.setSize(d.gparam.cwidth,d.gparam.cheight);var p={isroot:!0,id:null,children:[],childmap:{},d:[],set:d.paper.set()};d.recurseNode(a,p,void 0),d.mainpage=p,d.resizeTo.call(d)}},prepareLegend:function(){var t=this,i=t.legend,e=t.mapdata.measures;i.empty(),t.legidx=0,e&&0<e.length?(i.show(),$.each(e,function(e,a){$("<li class='map-legend-item'>"+(a.name||a.text)+"</li>").appendTo(i).bind("click",function(){t.legidx=e,t.applyColor.call(t,e)})})):i.hide()},recurseNode:function(e,a,t){for(var i,r,d,n,p=this,l=IG$.XGetChildNodes(e),s=p.paper,o=0;o<l.length;o++)i=IG$.XGetNodeName(l[o]),n=IG$.XGetAttrProp(l[o]),"g"==i?(r={isroot:!0,id:n.id,name:n.name||n.id,children:[],childmap:{},d:[],set:s.set()},a.set.push(r.set),a.children.push(r),a.childmap[r.id||"noid"]=r,p.mapid[r.id||"noid"]=r,p.recurseNode(l[o],r,t)):"path"==i&&(d=s.path(n.d),a.d.push(d),delete n.d,d.attr(d),a.set.push(d))},getVal:function(e){return e=e.replace(/px/,""),Number(e)},resizeTo:function(){var e,a,t,i,r,d,n,p,l,s=this,o=s.container,h=1,g=1,m=1,c=(s.paper,s.mainpage);s.gparam.cwidth=IG$.j$ext._w(o),s.gparam.cheight=IG$.j$ext._h(o),r=s.gparam.vbox,d=s.gparam.cwidth,n=s.gparam.cheight,p=s.gparam.swidth,l=s.gparam.sheight,r&&(g=r[2]/p,m=r[3]/l,h=Math.min(g,m)),a=d/p,t=n/l,e=Math.min(a,t)*h,s.paper.setSize(d,n),i="s"+e+","+e+",0,0t"+(d-p*e)/2+","+(n-l*e)/2,c.set.transform(i)},loadData:function(e){this.mapdata=e,this.prepareLegend(),this.applyColor(0)},applyColor:function(e){var a,t,i,r,d,n,p=this,l=p.mapdata,s=p.mapdata.mincolor||"#ff0000",o=p.mapdata.maxcolor||"#0000ff",h=p.legend;if(p.legidx=e,r=(r=e)<l.measures.length?r:0,legenditems=h.children("li"),legenditems&&0<legenditems.length)for(a=0;a<legenditems.length;a++)$(legenditems[a]).removeClass("map-legend-selected"),a==r&&$(legenditems[a]).addClass("map-legend-selected");t=l.measures[r].min,i=l.measures[r].max,$.each(l.point,function(e,a){a=a.data[r];0==isNaN(a)&&(n=155*(i-a)/(i-t),d=IG$.interpolateColor(s,o,155,n),p.mapid[e]&&p.mapid[e].set.attr({fill:d}))})}};
IG$.olapReportView=function(e,l,t,r){var i=this;i.mresult=null,i.reportoption=null,i.sheetoption=null,i.uid=e,i.jobid=null,i.container=l,i.owner=t,i.width=0,i.height=0,i.ctrl=null,i.fsize=r,i.sheetobj=null,i._mgrid=new IG$.V$grid,i._mgrid.sheetoption=i.sheetoption,i._mgrid.size=i.fsize,i._mgrid.initialize(i.owner),i._mgrid.sheetobj=i.sheetobj,i._mgrid.ctx&&i._mgrid.ctx.bind({itemclick:function(e){},doubleclick:function(e){},selectionchanged:function(e){},menu:function(e){}}),i.applyOptions()},IG$.olapReportView.prototype={_selectedCells:function(){return this._mgrid.selectedItems},drawOlapResult:function(e,l,t,r){var i,n,o,d,c,h,s,u,m,a,p,g,f=this,x=f.sheetoption?f.sheetoption.model:null,_=!!x&&x.treeview,w=!!x&&x.columntree,v=!!x&&x.showlnum,b=!!x&&x.hidemenu,y=x?x.mdf:null,C=-1,N=0,V=0<f.width?f.width:f._mgrid._dwidth,T=0<f.height?f.height:f._mgrid._cheight;if(0<V&&0<T&&(f._mgrid._dwidth=V,f._mgrid._cheight=T),f._mgrid._treerow=-1,f._mgrid._treecol=-1,f._mgrid.rowfix=0,f._mgrid.colfix=0,x&&1==x.customfix&&-1<x.customfixcols&&(C=x.customfixcols),null!=f.mresult&&null!=f.mresult._tabledata&&0<f.mresult._tabledata.length){if(t&&r)for(d=t.c,c=t.r,p=t.celltree.hm,h=f.mresult._tabledata[c],t.celltree.h=0,t.celltree.haschild=!0,t.celltree.depth=t.celltree.depth||0,n=r.rowfix;n<r._tabledata.length;n++){if(a=r._tabledata[n],2==p){for(o=0;o<f.mresult.colfix-r.colfix;o++)0==(u=h[d-o]).merged&&(u.merged=1),(s={_n_:u._n_,c:u.c,cc:u.cc,cm:u.cm,code:u.code,h:u.h,index:u.index,mcol:u.mcol,menus:null,merged:0,mrow:u.mrow,pindex:u.pindex,position:u.position,r:u.r,selected:!1,si:u.si,stylename:u.stylename,text:u.text,title:u.title,value:u.value,celltree:{}}).merged|=8,s.celltree.parent=t,s.celltree.depth=t.celltree.depth+1,a.splice(d-t.celltree.depth+o,0,s);(m=a[d+1]).celltree=m.celltree||{},m.celltree.depth=t.celltree.depth+1,m.celltree.parent=t,m.celltree.nd=1,a[0].mcelltree=a[0].mcelltree||[],a[0].mcelltree.push(d+1)}else 1==p&&((s=a[d]).celltree=s.celltree||{},s.celltree.parent=t,s.celltree.depth=t.celltree.depth+1,a[0].mcelltree=a[0].mcelltree||[],a[0].mcelltree.push(d));if(n==r.rowfix&&0<d)for(o=0;o<d;o++)0==h[o].merged&&(h[o].merged|=1);for(o=0;o<d;o++)a[o].merged=0,a[o].merged|=8;f.mresult._tabledata.splice(c+ ++N,0,a)}else f._mgrid.styles=f.mresult._styles,f._mgrid.showlnum=v,f._mgrid.hidemenu=b;if(1==_&&0<f.mresult.colfix)f._mgrid.colfix=0<f.mresult.colfix?1:0,f._mgrid.rowfix=f.mresult.rowfix,f._mgrid._treecol=0<f.mresult.colfix?0:-1,i=f.genTreeData(f.mresult._tabledata,f.mresult.colfix,f.mresult.rowfix,f.mresult.styles);else{if(i=f.mresult._tabledata,v)for(n=0;n<i.length;n++)g=i[n].length?Number(i[n][0]._n_)-f.mresult.rowfix:0,i[n].splice(0,0,{_n_:g,chart:null,code:"",index:0,mcol:0,merged:0,mrow:0,pindex:0,position:9,stylename:"LineNumber_"+(n<f.mresult.rowfix?"header":"data"),text:n<f.mresult.rowfix?"":""+(1+g),title:0,value:null});f._mgrid.colfix=f.mresult.colfix,f._mgrid.rowfix=f.mresult.rowfix}-1<C&&(f._mgrid.colfix=C),1==w&&(f._mgrid.rowfix=f.mresult.rowfix,f._mgrid._treerow=f.mresult.rowfix,0<f.sheetoption.model.cols.length&&"column"==f.sheetoption.model.measurelocation&&(f.sheetoption.model.cols.length,f.sheetoption.model.measureposition,i=f.genTreeCol(i,f._mgrid.colfix,f.mresult.rowfix,f.mresult.styles)))}f.applyOptions(),f._mgrid.__trow=i?i.length:0,f._mgrid.__tpstart=0,f._mgrid.__tpend=0,f._mgrid.__gflt=y,0==e&&(0<f.mresult.pagestart||f.mresult.pageend<f.mresult.rowcnt)&&(f._mgrid.__tpstart=f.mresult.pagestart,f._mgrid.__tpend=f.mresult.pageend,f._mgrid.__trow=f.mresult.rowcnt),f._mgrid.setDataProvider(i||[],void 0,f.mresult.hidden_columns,f.mresult.hidden_rows||[])},moveMeasureRow:function(e,l,t,r){for(var i,n,o,d=[],c=[],h=[],s=l;s<e[r].length;s++)mcell=e[r][s],c.push({cindex:s,mindex:mcell.index,cname:mcell.code}),mcell.code;for(c.sort(function(e,l){var t=0;return e.mindex==l.mindex?e.cindex>l.cindex?t=1:e.cindex<l.cindex&&(t=-1):t=e.mindex>l.mindex?1:-1,t}),s=0;s<c.length;s++)h.push(c[s].cindex);for(s=0;s<e.length;s++){for(n=[],i=0;i<e[s].length;i++)i<l?n.push(e[s][i]):n.push(e[s][h[i-l]]);n[0].children&&0<n[0].children.length&&(o=this.moveMeasureRowChild(n[0].children,h,l),n[0].children=o),s==r?d.splice(0,0,n):d.push(n)}return d},moveMeasureRowChild:function(e,l,t){for(var r,i,n,o=[],d=0;d<e.length;d++){for(i=[],r=0;r<e[d].length;r++)r<t?i.push(e[d][r]):i.push(e[d][l[r-t]]);i[0].children&&0<i[0].children.length&&(n=this.moveMeasureRowChild(i[0].children,l,t),i[0].children=n),o.push(i)}return o},genTreeCol:function(e,l,t,r){for(var i,n,o,d,c,h,s,u,m,a,p,g,f=[],x=[],_=0;_<t;_++){for(o=e[_],d=[],i=0;i<o.length;i++)c=this.getCellVal(o[i],i),d.push(c);f.push(d)}for(_=0;_<t;_++){if(o=f[_],s=null,_<t-1)for(i=o.length-1;l<=i;i--)if((null!=(s=l<i?o[i-1]:null)&&o[i].text!=s.text||i==l)&&(m=_,!0===o[i].haschild&&(m=o[i].depth),0==_||0<_&&m==_))for(n=0;n<t;n++)n<_?(h=this.getCellVal(f[n][i],_)).haschild=!0:(h=this.getCellVal(o[i],_)).haschild=!0,h.depth=m,f[n].splice(i,0,h);for(s=null,u=[],i=0;i<t;i++)u[i]=null;for(n=-1,i=l;i<o.length;i++)!0===o[i].haschild?0<o[n=u[o[i].depth]=i].depth&&null!=u[o[i].depth-1]&&(o[i].parent=o[u[o[i].depth-1]]):-1<n&&(o[i].parent=o[n])}for(_=(o=f[t-1]).length-1;0<=_;_--)1==o[_].haschild&&x.push(_);for(_=0;_<t;_++)for(o=f[_],i=l;i<o.length;i++)a=i==l?null:o[i-1].code,(p=o[i].code)==a==(g=i+1<o.length?o[i+1].code:null)||p==a?o[i].merged=4:p==g&&(o[i].merged=2);for(_=t;_<e.length;_++){for(d=[],o=e[_],i=0;i<o.length;i++)c=o[i],d.push(c);this.updateColTreeData(d,x,_,0,f[t-1],t,l,r),f.push(d)}return f},updateColTreeData:function(e,l,t,r,i,n,o,d){for(var c,h,s,u,m,a,p,g=[],f=l.length-1;0<=f;f--)u=l[f],(h=this.getCellVal(e[u],t)).code=null,h.value=null,h.text=null,e.splice(l[f],0,h);for(f=0;f<n;f++)g.push(0);for(f=e.length-1;o<=f;f--)1==(s=i[f]).haschild?(p=e[f],e[f].code=g[s.depth+1],e[f].value=e[f].code,e[f].text=e[f].code,d&&d[p.stylename]&&(m=d[p.stylename],a=Number(p.code),m.formatstring&&0==isNaN(a)&&(p.text=a.format(m.formatstring),p.value=p.text)),g[s.depth+1]=0,g[s.depth]+=Number(e[f].code)):g[g.length-1]+=Number(e[f].code);if(e[0].children&&0<e[0].children.length)for(c=0;c<e[0].children.length;c++)this.updateColTreeData(e[0].children[c],l,t,1,i,n,o,d)},dupFinalTree:function(e,l){var t,r,i,n,o=[];if(e&&e.children&&0<e.children.length)for(t=0;t<e.children.length;t++)if(n=this.getCellVal(null,-1),l.children.push(n),(i=this.dupFinalTree(e.children[t],n))&&0<i.length)for(r=0;r<i.length;r++)o.push(i[r]);else o.push(n);else l&&o.push(l);return o},getCellVal:function(e,l){var t=e?{code:e.code,chart:e.chart,index:e.index,mcol:e.mcol,merged:0,pindex:e.pindex,position:e.position,stylename:e.stylename,text:e.text,title:e.title,value:e.value,treeinfo:e.treeinfo||{},children:e.children||[],ccol:l,parent:e.parent}:{code:"",chart:null,index:null,mcol:null,merged:0,pindex:null,position:null,stylename:null,text:null,title:null,value:null,treeinfo:{},children:[],ccol:l,parent:null};return t},cloneCellVal:function(e,l){e.code=l.code,e.chart=l.chart,e.index=l.index,e.mcol=l.mcol,e.pindex=l.pindex,e.position=l.position,e.stylename=l.stylename,e.text=l.text,e.title=l.title,e.value=l.value},genTreeData:function(e,l,t,r){for(var i,n,o,d,c,h,s=[],u=[],m=e[0].length-l,a=0;a<l;a++)u.push({row:null,depth:0});for(a=0;a<e.length;a++)if(o=e[a],a<t){for(d=[],i=0;i<o.length;i++)c=this.getCellVal(o[i],i),i<l&&0!=i||d.push(c);s.push(d)}else for(i=0;i<o.length;i++)if(d=null,c=this.getCellVal(o[i],i),i<l)if(null==u[i].row||u[i].row&&u[i].row[0].code!=o[i].code){for(h=u[i].row,(d=[]).push(c),0==(c.treeinfo.depth=i)?(u[i].row=d,s.push(d)):(4==(h=u[i-1].row)[0].position?u[i].row=h:(u[i].row=d,h[0].children.push(d)),c.parent=h[0]),n=i+1;n<l;n++)u[n].row=null;u[i].depth=i}else u[i];else u[u.length-1].row.push(c);for(a=t;a<s.length;a++)d=s[a],svalues=this.getSubtotal(d,m,r);return s},getSubtotal:function(e,l,t){for(var r,i,n,o,d,c,h=[],s=0;s<l;s++)h.push({v:null,c:null});if(1<e.length){if(4==e[0].position)return h;for(s=0;s<l;s++)c=Number(e[s+1].code),c=isNaN(c)?0:c,h[s].v=null==h[s].v?c:h[s].v+c,h[s].c=e[s+1]}else if(e[0].children&&0<e[0].children.length){for(s=0;s<e[0].children.length;s++)for(i=this.getSubtotal(e[0].children[s],l,t),r=0;r<i.length;r++)i[r].c&&(h[r].v=null==h[r].v?Number(i[r].v):h[r].v+Number(i[r].v),h[r].c=i[r].c);for(s=0;s<h.length;s++)d={code:h[s].v,chart:null,index:h[s].c?h[s].c.index:null,mcol:h[s].c?h[s].c.mcol:null,merged:0,pindex:h[s].c?h[s].c.pindex:null,position:h[s].c?h[s].c.position:null,stylename:h[s].c?h[s].c.stylename:null,text:""+h[s].v,title:h[s].c?h[s].c.title:null,value:h[s].v},t&&t[d.stylename]&&(n=t[d.stylename],o=Number(d.code),n.formatstring&&0==isNaN(o)&&(d.text=o.format(n.formatstring),d.value=d.text)),e.push(d)}return h},applyOptions:function(e,l){var t=this;e&&l&&(t.reportoption=e,t.sheetoption=l,t._mgrid.sheetoption=l),t.sheetoption&&(t._mgrid.columnfill=t.sheetoption.model.columnfill)},invalidateSize:function(){this.drawOlapResult()}};
IG$.v$olapChartView=function(t,e,a,i,r){var s,n,l,o=this;o.rpc=t,o.mresult=null,o.reportoption=null,o.sheetoption=null,o.uid=e,o.jobid=null,o.maincontainer=$(a),o.ctrl=null,o._masterCharts=[],o.detailChart=null,o.isHighChart=!1,o.selectedData=null,o.drilldepth=0,o.onClickHandler=null,o.onClickOwner=null,o.drawmode=null,o.rfctimer=-1,o.pw=-1,o.ph=-1,o.ti=0,o.scrollsize=13,o.scrollX=0,o._sep=IG$._separator,o.jcontainer=$("<div name='jcl'></div>").appendTo(o.maincontainer),o.jcontainer.css({position:"absolute",top:0,bottom:0,left:0,right:0}),i=i||IG$.j$ext._w(o.maincontainer),r=r||IG$.j$ext._h(o.maincontainer),IG$.j$ext._w(o.jcontainer,i),IG$.j$ext._h(o.jcontainer,r),o.container=o.jcontainer[0],o.fcontainer=$("<div class='idv-filter-desc'></div>").appendTo(o.maincontainer).hide(),o.fcontainer.bind("click",function(){$(this).fadeOut()}),o.scontainer=$("<div class='m-chart-selection'></div>").appendTo(o.maincontainer).hide(),$("<div class='m-chart-selection-bg'></div>").appendTo(o.scontainer),o._bandFormula=$("<div class='igc-cfit-formula'></div>").appendTo(o.maincontainer).hide(),s=$("<div class='m-chart-selection-boxtop'></div>").appendTo(o.scontainer),o.sbox=$("<div class='m-chart-selection-box'></div>").appendTo(s),ig$.chartlogo&&ig$.chartlogo.enabled&&(n=$("<div class='"+ig$.chartlogo.clsname+"'></div>").appendTo(o.maincontainer).hide(),setTimeout(function(){n.fadeIn(2e3)},500)),IG$.drawLicenseTag(o.maincontainer),o.reghscroll=$('<div class="m-datagrid-scroll m-datagrid-hscroll"></div>').css({height:o.scrollsize}).hide().appendTo(o.maincontainer),o.hscroll=l=$('<div class="m-datagrid-track m-datagrid-track-h"></div>').appendTo(o.reghscroll),o.reghscrollthumb=$('<div class="m-datagrid-scrollthumb m-datagrid-scrollthumb-h"></div>').css({height:o.scrollsize,width:20}).appendTo(l),$('<div class="m-datagrid-end m-datagrid-end-h">').css({height:o.scrollsize,width:5}).appendTo(o.reghscrollthumb),o.reghscroll.bind({click:function(t){return 0==o.mv&&o.onscrollmouseclick.call(o,o,t,"h"),!1}}),o.reghscrollthumb[0].eventtarget="horizontal",o.reghscrollthumb.bind({mousedown:function(t){var e=o;e.mv=!0,e.onthumbmousedown.call(e,this,t,"h")},mouseup:function(t){o.onthumbmouseup.call(o,this,t,"h")}}),o._unitcontainer=$("<div class='chart-unit-content'></div>").appendTo(o.maincontainer).hide()},IG$.v$olapChartView.prototype={onthumbmousedown:function(t,e,a){var i=this;return e&&(e.preventDefault(),e.stopImmediatePropagation(),i.dt1=(new Date).getTime(),i.thumbbuttondown=!0,i.thumbMouseStartX=e.pageX,i.thumbMouseStartY=e.pageY,i.sx=i.scrollX,i.sy=i.scrollY,i.isScrolling=!0,i.scrolltarget=t.eventtarget,i.registerGlobalEvent(a)),!1},onthumbmouseup:function(t,e,a){var i=this,r=i,s=(new Date).getTime();if(e&&i.dt1&&-1<i.dt1&&s-i.dt1<200){var n,l=$(t),o=l.offset(),c=e.pageX-o.left,h=e.pageY-o.top,d=IG$.j$ext._w(l),u=IG$.j$ext._h(l),p=i.scrollX,m=i.scrollY;if(i.dt1=-1,event.stopPropagation(),i.ge&&($(document).unbind(i.ge),i.ge=null),i.globalMouseUp.call(i,e,a),r.thumbbuttondown=!1,r.thumbMouseStartX=-1,r.thumbMouseStartY=-1,"v"==a){if(n=u/2<h?.1:-.1,m=(m+=Math.min(r.theight-r.cheight,.1*(r.cheight-r.fixedRowHeight))*n)<0?0:Math.min(m,r.theight-r.cheight),isNaN(m))return}else if("h"==a&&(n=d/2<c?.1:-.1,p=(p+=Math.min(r.twidth-r.cwidth,.1*(r.cwidth-r.fixedColWidth))*n)<0?0:Math.min(p,r.twidth-r.cwidth),isNaN(p)))return;r.scrollX==p&&r.scrollY==m||(r.scrollX=p,r.scrollY=m,r.updateThumbPosition.call(r),-1<r.thumbTimer&&clearTimeout(r.thumbTimer),r.onthumbtimer.call(r))}},registerGlobalEvent:function(e){function a(t){return r.globalMouseDown.call(r,t,e),!1}function i(t){return t.stopPropagation(),r.mv=!0,r.globalMouseMove.call(r,t,e),!1}var r=this,s=function(t){return t.stopPropagation(),r.mv=!0,r.globalMouseUp.call(r,t,e),$(document).unbind({mousedown:a,mousemove:i,mouseup:s}),!1};this.ge={mousedown:a,mousemove:i,mouseup:s},$(document).bind({mousedown:a,mousemove:i,mouseup:s})},globalMouseDown:function(t,e){},globalMouseMove:function(t,e){t.preventDefault(),t.stopImmediatePropagation(),this&&this.scrollHandler.call(this,{x:t.pageX,y:t.pageY},e)},globalMouseUp:function(t,e){var a=this;a.isScrolling=!1,a.isDragging=!1,a.ge=null,setTimeout(function(){a.mv=!1},50)},scrollHandler:function(t,e){var a=this,i=(this.reghscroll,this.reghscrollthumb,t.x-a.thumbMouseStartX),r=a.scrollX,r=Math.min(IG$.j$ext._w(this.hscroll),Math.max(0,a.sx+i));a.scrollX!=r&&(a.scrollX=r,a.updateThumbPosition.call(a),-1<a.thumbTimer&&clearTimeout(a.thumbTimer),a.thumbTimer=setTimeout(function(){a.onthumbtimer.call(a)},100))},onthumbtimer:function(){var t=this,e=0;t._scrollhandler&&t._scrollhandler.f&&(e=Math.floor(t.scrollX*t.mresult.rowcnt/t.thumbhwidth),t._scrollhandler.f.call(t._scrollhandler.o,t,e))},updateThumbPosition:function(){this.scrollX,this.sh;this.reghscrollthumb.css({left:Math.min(this.scrollX,IG$.j$ext._w(this.hscroll)-IG$.j$ext._w(this.reghscrollthumb))})},onscrollmouseclick:function(t,e,a){var i=this;e.stopPropagation();var r=i.scrollX,s=i.reghscrollthumb.offset().left>e.pageX?-1:1;r+=i.thumbhwidth*i.sh*s,r=Math.floor(r),r=Math.min(IG$.j$ext._w(i.hscroll)-i.thumbcalc,Math.max(0,r)),i.scrollX!=r&&(i.scrollX=r,i.updateThumbPosition.call(i),clearTimeout(i.thumbTimer),i.thumbTimer=setTimeout(function(){i.onthumbtimer.call(i)},50))},setFltInfo:function(t){var e,a,i,r,s=this.fcontainer;if(t&&""!=t){for(this.drilldepth,e=t.split("\n"),i="",a=0;a<e.length;a++)""!=e[a]&&(r=e[a].substring(0,40),i=""==i?r:i+"<br>"+r);""!=i&&s.html(i).show(),clearTimeout(this.__fc),this.__fc=setTimeout(function(){s.fadeOut()},2e3)}else s.empty(),s.hide()},showHideSel:function(t){var e=this.scontainer;1==t?e.show():!1===t?e.hide():e.toggle()},invalidateSize:function(t,e){var a=this,i=(a.maincontainer,a.jcontainer);e-=10,IG$.j$ext._w(i,t),IG$.j$ext._h(i,e),this.cwidth=t,this.cheight=e,-1<a.rfctimer&&clearTimeout(a.rfctimer),a.rfctimer=setTimeout(function(){a.updateDispList.call(a,t,e)},200)},updateDispList:function(t,e){var a,i,r=this,s=r.treemap,n=r.bindc,l=(r.scontainer,r.sheetoption?r.sheetoption.model.chart_option.pielayout:null);if(r.rfctimer=-1,!(Math.abs(r.pw-t)<5&&Math.abs(r.ph-e)<5||(r.pw=t,r.ph=e,r.pw<5||r.ph<5)))switch(r.drawmode){case"highchart":r._masterCharts&&0<r._masterCharts.length&&("h"==l?(a=t/r._masterCharts.length,i=e):"h"==l?(i=e/r._masterCharts.length,a=t):(a=t,i=e),$.each(r._masterCharts,function(t,e){$(e.renderTo).css({position:"absolute",left:"h"==l?a*t:0,top:"v"==l?i*t:0,width:a,height:i}),e.setSize.call(e,a,i,doAnimation=!0),e.renderTo&&$(e.renderTo).hide().show(0)}));break;case"echart":r._masterCharts&&0<r._masterCharts.length&&("h"==l?(a=t/r._masterCharts.length,i=e):"h"==l?(i=e/r._masterCharts.length,a=t):(a=t,i=e),$.each(r._masterCharts,function(t,e){$(e.renderTo).css({position:"absolute",left:"h"==l?a*t:0,top:"v"==l?i*t:0,width:a,height:i}),e.resize.call(e,{width:a,height:i})}));break;case"treemap":s&&s.map&&(s.box.css({top:s.ty,left:0,width:t,height:e-s.ty}),s.map.setSize(t,e-s.ty),s.map.renderTo&&$(s.map.renderTo).hide().show(0));break;case"bindc":n&&n.container&&(IG$.j$ext._w(n.container,t),IG$.j$ext._h(n.container,e));break;case"qavis":r.qavis&&r.qavis.updateDispList.call(r.qavis);break;case"dcust":r.dcust&&r.drawChartResult(t,e);break;case"protovis":r.vis&&($(r.container).empty(),r.vis=null,r.drawChartResult(t,e));break;case"bubblemap":r.bmap&&r.drawChartResult(t,e);break;case"custom":r.customchart&&r.customchart.updatedisplay.call(r.customchart,r,t,e)}},updateSel:function(t,e,a){var i=this,r=t,s=e,n=a;i._timerUpdSel&&clearTimeout(i._timerUpdSel),i._timerUpdSel=setTimeout(function(){i.aupdateSel.call(i,r,s,n)},800)},aupdateSel:function(t,e,a){var i,r,s,n,l,o,c,h,d,u=this.mresult,p=u._tabledata,m=u.colfix,g=u.rowfix,f=0<p.length?p[0].length:0,b=[];this.scontainer;if(t)for(i=g;i<p.length;i++){for(l=!0,r=0;r<e.length;r++)if((n=t[e[r]])&&0==isNaN(n.min)&&0==isNaN(n.max)&&(o=r+m,(c=""!=(c=p[i][o].code)?Number(c):0)<n.min||c>n.max)){l=!1;break}l&&b.push(i)}else if(a&&e){for(i=0;i<e.length;i++)e[i]==a.px?px=i+m:e[i]==a.py&&(py=i+m);for(i=g;i<p.length;i++)l=!0,h=p[i][px].code,d=p[i][py].code,h=""!=h?Number(h):0,d=""!=d?Number(d):0,h=isNaN(h)?0:h,d=isNaN(d)?0:d,(h<a.x1||h>a.x2||d<a.y1||d>a.y2)&&(l=!1),l&&b.push(i)}var x,v=this.sbox,_=$("<table></table>");for(v.empty(),$("<span>"+b.length+" / "+p.length+" Items selected</span>&nbsp;&nbsp;&nbsp;&nbsp;<br><br>").appendTo(v),$("<div class='clipbutton'>Select All</div>").appendTo(v).bind("click",function(){IG$.selectAll(_)}),_.appendTo(v),i=0;i<g;i++)for(x=$("<tr></tr>").appendTo(_),r=0;r<f;r++)x.append($("<th>"+p[i][r].text+"</th>"));for(i=0;i<b.length;i++)for(x=$("<tr></tr>").appendTo(_),s=b[i],r=0;r<f;r++)x.append($("<td>"+p[s][r].text+"</td>"));_.bind("selectstart",function(){return!0})},drBubbleMap:function(t){var e,a,i,r,s=t._tabledata,n=t.colfix,l=t.rowfix,o=0,c=this,h=[],d=[],u=[],p={},m={},g=[],f=[],b=0,x=0,v=(c.cop.bmaprow,c.cop.bmapyaxis);if(c.drawmode="bubblemap",0==v&&2==n){for(w=!1,y=l;y<s.length;y++)if(s[y].length>n&&(o=(o=Number(s[y][n].code)||0)<0?0:o),0<o)for(u.push(o),e=0;e<n;e++)a=(i=s[y][e]).text||i.code,0==e?(p[a]||(p[a]={inc:b++},g.push(a)),h.push(p[a].inc)):1==e&&(m[a]||(m[a]={inc:x++},f.push(a)),d.push(m[a].inc))}else{for(var _,w=!0,y=0;y<l;y++)for(e=n;e<s[y].length;e++)a=(i=s[y][e]).text||i.code,0==y?f.push(a):f[e-n]+=c._sep+a;for(y=l;y<s.length;y++)for(_="",e=0;e<s[y].length;e++)a=(i=s[y][e]).text||i.code,e<n?_=0==e?a:_+c._sep+a:(e==n&&g.push(_),h.push(y-l),d.push(e-n),o=(o=Number(a)||0)<0?0:o,u.push(o))}r=c.bmap=Raphael(c.container);var k=$(c.container),T=IG$.j$ext._w(k),I=IG$.j$ext._h(k);u.length&&r.dotchart(0,0,T,I,h,d,u,{symbol:"o",max:c.cop.bmapsize,heat:!0,axis:"0 0 1 1",axisxstep:Math.min(g.length-1,20),axisystep:Math.min(f.length-1,20),axisxlabels:g,axisxtype:" ",axisytype:" ",axisylabels:f}).hover(function(){this.marker=this.marker||r.tag(this.x,this.y,g[this.X]+"\n"+f[this.Y]+"\n"+this.value,0,this.r+2).insertBefore(this),this.marker.show()},function(){this.marker&&this.marker.hide()}).click(function(){var t=null,e=null,e=0==w?(t={name:g[this.X]+IG$._separator+f[this.Y]},{point:{category:this.value}}):(t={name:g[this.X]},{point:{category:f[this.Y]}});t&&e&&c.procClickEvent.call(c,t,e)})},disposeContent:function(t){for(var e,a=t._masterCharts.length-1;0<=a;a--){try{(e=t._masterCharts[a])&&e.destroy&&e.destroy(),e&&e.dispose&&e.dispose()}catch(t){}t._masterCharts[a]=null}t._masterCharts=[],$(".i-sschart-cnt",t.container).empty(),t.customchart&&t.customchart.destroy&&(t.customchart.destroy(),t.customchart=null),t.vis&&($(t.container).empty(),t.vis=null)},drawChartResult:function(t,e,a,i){var r,s,n,l,o,c,h=null,d=this,u=d.mresult,p=!1;if(d.pw=0<t?t:d.pw,d.ph=0<e?e:d.ph,d._unitcontainer.hide(),u){if(0==i&&0<u.pagestart&&0==d.scrollX&&(p=a=!0,l=d.sheetoption.model.chart_option.maxchartresult,o=u._tabledata,c=Math.min(o.length,0<l?l:o.length),d.sh=c/u.rowcnt,d.scrollX=(u.pagestart+20)*t/u.rowcnt),a||(d.sh=1,d.scrollX=0),d.cop=d.sheetoption.model.chart_option,r=d.cop,d.rct=r.charttype,d.rcs=r.subtype,r.useformula,r.timeseriesfield,r.cunittext&&(d._unitcontainer.empty(),d._unitcontainer.append("<span>"+r.cunittext+"</span>"),d._unitcontainer.show()),d.setFltInfo(u.filterdesc||""),0<d.drilldepth&&r.drillcharttype&&r.drillcharttype.length>d.drilldepth&&r.drillcharttype[d.drilldepth]){for(n=0;n<IG$.chartTypeMenu.length;n++)if(IG$.chartTypeMenu[n].subtype==r.drillcharttype[d.drilldepth]){s=IG$.chartTypeMenu[n];break}s&&(d.rct=s.charttype,d.rcs=s.subtype)}if("map"==d.rct)d.isHighChart=!1,d.drMapChart(u);else if("treemap"==d.rct)d.isHighChart=!1,d.ti=0,d.drTreeMap(u);else if("bindc"==d.rct)d.isHighChart=!1,d.drIndicator(u,d.rct);else if("matrix"==d.rct)d.isHighChart=!1,d.drMatrixChart(u);else if("bubblemap"==d.rct)d.isHighChart=!1,d.drBubbleMap(u);else if(!window.d3||"parallel"!=d.rct&&"performancemap"!=d.rct&&"boxplot"!=d.rct&&"networkdiagram_pos"!=d.rct&&"networkdiagram_neg"!=d.rct&&"matrixdiagram"!=d.rct&&"anderson"!=d.rct&&"forcelayout"!=d.rct&&"chord"!=d.rct&&"sunburst"!=d.rct)if(!window.d3||"bullet"!=d.rct&&"nation"!=d.rct)if(IG$.__chartoption&&IG$.__chartoption.chartext&&IG$.__chartoption.chartext[d.rct]){d.drawmode="custom",d.isHighChart=!1,d.customchart||(d.customchart=new IG$.__chartoption.chartext[d.rct](d));try{d.customchart.drawChart.call(d.customchart,d,u)}catch(t){setTimeout(function(){IG$.ShowError("Error on chart drawing : "+t.message)},100)}}else d.isHighChart=!0,h=d.drawCartesian(u,t,e,!p&&a);else d.isHighChart=!1,d.drD3Cust(d.rct,u);else d.isHighChart=!1,d.drawProtovisChart(d.rct,u);a&&1!=p||(d.sh<1?(tstyle={left:0},tstyle.width=t,d.reghscroll.show(),d.thumbhwidth=IG$.j$ext._w(d.hscroll),thumbcalc=Math.max(30,d.thumbhwidth*d.sh),d.thumbcalc=thumbcalc,d.reghscrollthumb.css({left:Math.min(d.scrollX,d.thumbhwidth-thumbcalc),width:thumbcalc}),d.reghscroll.css(tstyle),d.regh=!0):(d.regh=!1,d.reghscroll.hide()))}return h},entrLoginMap:function(t){this.drMapChart(this.mresult)},ldMapData:function(t,e,a,i,r){var s=new IG$._rpc$;s.init(this,{ack:"helpcontent",payload:{code:t,pcode:e},mbody:{option:"geomap"}},this,this.rs_ldMapData,null,[a,i,r]),s.send()},rs_ldMapData:function(t,e){var a,i=IG$.XGetNode(t,"/smsg/MapData"),r=e[0],s=e[1],n=e[2];null!=i&&((a=new IG$._IFa(r)).keyname=s,a.parseMapData(i),IG$.geoDatas[r]=a,n.drMapChart(n.mresult))},area:function(t){for(var e,a,i=0,r=t.length,s=r-1,n=0;n<r;s=n++)e=t[n],a=t[s],i+=e.lng*a.lat,i-=e.lat*a.lng;return i/=2},drIndicator:function(t,e){for(var a,i,r,s=null,n=[],l=[],o=[],c=0<t._tabledata.length?t._tabledata[0].length:0,h=t.rowfix;h<t._tabledata.length;h++){for(i=[],a=0;a<t._tabledata[h].length;a++)r=t._tabledata[h][a].code||t._tabledata[h][a].text,i.push(r);n.push(i)}for(h=0;h<t.colfix;h++)l.push({i:h});for(h=t.colfix;h<c;h++)o.push({i:h});switch(e){case"bindc":(s=new m$Bl($(this.container))).ea=l,s.ma=o,s.mv=null}s&&s.loadData.call(s,n),this.drawmode=e,this.bindc=s},selectPtsByDrag:function(t,e){Highcharts.each(t.series,function(t){Highcharts.each(t.points,function(t){t.x>=e.xAxis[0].min&&t.x<=e.xAxis[0].max&&t.y>=e.yAxis[0].min&&t.y<=e.yAxis[0].max&&t.select(!0,!0)})});var a=t.getSelectedPoints.call(t);this.procClickEvent(t,a)},unSelByClick:function(t,e,a){var i=this,r=t.getSelectedPoints(),s=(new Date).getTime();"syncchart"==i.rcs?0<r.length&&Highcharts.each(r,function(t){t.select(!1)}):(i._st&&s-i._st<500&&(0<r.length&&Highcharts.each(r,function(t){t.select(!1)}),i.procClickEvent.call(i,t,null)),i._st=s)},measureTextSize:function(t,e){var a=this,i={fontSize:t},r={};return a.measurediv||(a.measurediv=$('<div class="m-datagrid-cell-measure"></div>').appendTo($("body"))),a.measurediv.show(),a.measurediv.css(i),a.measurediv.html(e||"&nbsp;"),r.height=IG$.j$ext._h(a.measurediv),r.width=IG$.j$ext._w(a.measurediv),r},getPieLbl:function(t,e){var a,i=t||"<b>{name}</b>: {percent} %",r=i.indexOf("{name}");return-1<r&&(a=(a=e.point.name)&&(a=a.split("|")).join("<br/>"),i=i.substring(0,r)+a+i.substring(r+"{name}".length)),-1<(r=i.indexOf("{percent}"))&&(i=i.substring(0,r)+Highcharts.numberFormat(e.percentage,1)+i.substring(r+"{percent}".length)),-1<(r=i.indexOf("{value}"))&&(i=i.substring(0,r)+(e.point.fval||Highcharts.numberFormat(e.y,0))+i.substring(r+"{value}".length)),i},getBandValue:function(mresult,v,isxaxis){var me=this,r,fs,n1,n2,ms,seq,i,j,c,ncol,mdata,fval;if(mresult){if(isxaxis){if(fval=Number(v),isNaN(fval))for(mdata=mresult._tabledata,ncol=mresult.colfix,i=0;i<mdata.length;i++){for(j=0;j<ncol;j++)c=0==j?mdata[i][j].text:c+" "+mdata[i][j].text;if(v==c){fval=i-1;break}}return fval}for(fs=mresult.statistics,n1=v.indexOf("{"),n2=v.indexOf("}");-1<n1&&n1<n2;){if(ms=v.substring(n1+1,n2),seq=-1,-1<ms.indexOf(":")&&(seq=parseInt(ms.substring(ms.indexOf(":")+1)),ms=ms.substring(0,ms.indexOf(":"))),-1<seq)ms=fs[seq][ms.toLowerCase()];else{for(ms=ms.toLowerCase(),fval=null,i=0;i<fs.length;i++)switch(ms){case"average":fval=0==i?Number(fs[i].average):fval+Number(fs[i].average);break;case"min":fval=0==i?Number(fs[i].min):Math.min(fval,Number(fs[i].min));break;case"max":fval=0==i?Number(fs[i].max):Math.max(fval,Number(fs[i].max))}"average"==ms&&0<fs.length&&(fval/=fs.length),ms=fval}v=ms+v.substring(n2+1),n1=v.indexOf("{"),n2=v.indexOf("}")}}return(-1<v.indexOf("/")||-1<v.indexOf("*")||-1<v.indexOf("-")||-1<v.indexOf("+"))&&(v=eval(v)),r=Number(v),r},drawCartesian:function(t,e,a,i){var r,s,n,l,o,c,h,d,u,p,m,g,f,b,x=t._tabledata,v=t.colfix,_=t.rowfix,w=t.hidden_columns||{},y=this,k=[],T=[],I=0,C=0,G=0,M=0,O=0,j=-1,S=y.sheetoption.model.chart_option,A=S.swapaxis,N=S.useformula,L=S.maxchartresult,D=(S.timeseriesfield,S.useformatvalue),H=y.sheetoption.model.measures,X={},P=[],B=x&&0<x.length?x[0].length:0,E=x?x.length:0,z=y.rcs,F=[];y.drawmode="highchart","radar"==z?C=1:"fixedplacement"==z?M=1:"syncchart"==z&&(O=1<(j=H&&1<H.length?H.length:-1)?1:0),o=Math.min(x.length,0<L?L:x.length),y._dlen=o,c=_,i?(c+=h=Math.floor(y.scrollX*t.rowcnt/y.thumbhwidth),o=Math.min(x.length,o+h)):0<t.pagestart||t.rowcnt>t.pageend?y.sh=o/t.rowcnt:0<L&&L<x.length&&(y.sh=L/x.length);var R,V=[],Y={},q=S.titleposition||"",U=S.colorset||t.c_cset;if(IG$.__chartoption&&IG$.__chartoption.chartcolors&&IG$.__chartoption.chartcolors[U]&&(Y.colors=IG$.__chartoption.chartcolors[U]),v+1<B&&("scatter"==z||"bubble"==z)){var W,J,I=1;if("bubble"==z&&(G=1),A)for(vt=v;vt<Math.min(B,0<L?L:B);vt++){var K={x:y.mvalue(x[_][vt],D),y:y.value(x[_+1][vt],D)};for(G&&_+2<E&&(zvalue=y.mvalue(x[_+2][vt],D),K.z=zvalue),r=0;r<_;r++)Q=0==r?x[r][vt].text:Q+y._sep+x[r][vt].text;K.name=Q,K.datarow=r,cvalue=x[0][r].text,cvalue!=J?((W=new Object).name=cvalue,W.data=[K],T.push(W)):W&&W.data.push(K),J=cvalue}else for(vt=_;vt<Math.min(x.length,0<L?L:x.length);vt++){var Q,K={x:y.mvalue(x[vt][v],D),y:y.mvalue(x[vt][v+1],D)};for(G&&v+2<B&&(zvalue=y.mvalue(x[vt][v+2],D),K.z=zvalue),r=0;r<v;r++)Q=0==r?x[vt][r].text:Q+y._sep+x[vt][r].text;K.name=Q,K.datarow=vt,cvalue=x[vt][0].text,cvalue!=J?((W=new Object).name=cvalue,W.data=[K],T.push(W)):W&&W.data.push(K),J=cvalue}}else{if(1==A)for(vt=_;vt<E;vt++){for(r=0;r<v;r++)g=x[vt][r].text||" ",m=0==r?g:m+g;(W=new Object).name=m,W.data=[],T.push(W),F.push(0)}else for(vt=v;vt<B;vt++){if(b=-1,m="",O)for(r=0;r<_;r++)3!=(f=x[r][vt]).position?(g=f.text,m=0==r?g:m+y._sep+g):X[b=f.pindex]=f.text;else for(r=0;r<_;r++)3==(f=x[r][vt]).position&&(b=f.index),g=f.text||" ",m=0==r?g:m+y._sep+g;(W=new Object).name=m||X[b],W.meas_k=b,W.data=[],T.push(W),F.push(0)}Math.max(1==A?B:x.length,20);var Z,tt,et,at=!1,it="waterfall"==y.rcs&&0==S.stack;if(1==A)for(vt=v;vt<Math.min(B,0<L?L:B);vt++){for(at=!1,r=0;r<_;r++)if(n=0==r?x[r][vt].text:n+IG$._separator+x[r][vt].text,4==x[r][vt].position){at=!0;break}if(0==at||1==N){for(l=0,r=_;r<E;r++){var rt=y.mvalue(x[r][vt],D);1==isNaN(rt)?T[l].data.push(null):C?T[l].data.push(rt):(tt=T[l].data.length,T[l].data.push({name:n,x:vt-v,y:it&&0<tt?rt-F[l]:rt,fval:x[r][vt].text}),F[l]=rt),l++}k.push(n),0}}else for(u=B==v+1?1:0,vt=c;vt<o;vt++){for(at=!1,d=null,n="",r=0;r<v;r++)if(void 0===w[r]){if(n+=(n?IG$._separator:"")+x[vt][r].text,4==x[vt][r].position){at=!0;break}d=u&&x[vt][r].cc?x[vt][r].cc:d}if(0==at||1==N){for(l=0,r=v;r<B;r++){rt=y.mvalue(x[vt][r],D),1==isNaN(rt)?T[l].data.push({name:n,x:vt-c,y:null,fval:null}):C?T[l].data.push(rt):(tt=T[l].data.length,et={name:n,x:vt-c,y:it&&0<tt?rt-F[l]:rt,fval:x[vt][r].text},!d&&-1<x[vt][r].cm&&((Z=Y.colors||(Highcharts.theme?Highcharts.theme.colors:null)||Highcharts.getOptions().colors)&&(p=y.interpolate(x[vt][r].cm,Z[l%Z.length]))),(d||p)&&(et.color=d||p),p=0,T[l].data.push(et),F[l]=rt),l++}k.push(n),0}}}Y.chart={animation:!1,renderTo:y.container,defaultSeriesType:M?null:"area",reflow:!1,alignTicks:!0,borderWidth:0,spacingBottom:1},C&&(Y.chart.polar=!0,Y.pane={size:"80%"}),1==S.showtitle?(Y.title={text:S.title},-1<q.indexOf("BOTTOM_")&&(Y.title.floating=!0,Y.chart.marginBottom=50,Y.title.y=a-30),-1<q.indexOf("_LEFT")?Y.title.align="left":-1<q.indexOf("_RIGHT")&&(Y.title.align="right")):Y.title={text:""},M||(Y.chart.defaultSeriesType=IG$.getSeriesType(z)),S.enabledragselect?(Y.chart.zoomType="xy",Y.chart.events={selection:function(t){return y.selectPtsByDrag.call(y,this,t),!1},click:function(t){y.unSelByClick.call(y,this,t,1)}}):Y.chart.events={click:function(t){y.unSelByClick.call(y,this,t,0)}},I?(Y.chart.zoomType="xy",Y.xAxis={startOnTick:!0,endOnTick:!0,showLastLabel:!0}):(S.enablezoom&&!S.enabledragselect&&(Y.chart.zoomType="xy"),R={labels:{maxStaggerLines:2,formatter:function(){return this.value}}},0==S.xlabel?R.labels.enabled=!1:0==S.xaxisrot&&(R.labels.autoRotation=!1,0<S.xstagl&&(R.labels.staggerLines=S.xstagl,R.labels.maxStaggerLines=S.xstagl),1<S.xstep&&(R.labels.step=S.xstep)),Y.xAxis={categories:k,labels:R.labels,showLastTickLabel:!0,align:"left",events:{setExtremes:function(t){var e,a,i,r,s;90==Math.abs(this.options.labels.rotation)&&(e=parseInt(this.options.labels.style.lineHeight)+2,a=parseInt(this.chart.plotBox.width),i=Math.floor(a/e),r=null!==t.max&&void 0!==t.max?Math.round(t.max-t.min):Math.round(this.dataMax-this.dataMin),s=Math.ceil(r/(i*(null==this.tickInterval?1:this.tickInterval))),this.update({labels:{step:s}},!0))}}}),!0===S.e3d_en&&(Y.chart.options3d={enabled:!0,alpha:Number(S.e3d_al),beta:Number(S.e3d_be),depth:Number(S.e3d_de),viewDistance:Number(S.e3d_vd)});var st,nt=this,lt=0,ot={formatter:function(){var t,e,a,i=S.yaxisformat,r=0,s=this.value,n="";if(i){if(-1<(t=i.indexOf(".")))for(e=t+1;e<i.length;e++)"#"!=(a=i.charAt(e))&&"0"!=a||r++;-1<(t=i.indexOf("%"))&&("'"==(0<t-1?i.charAt(t-1):null)||(s*=100),n=" %")}return Highcharts.numberFormat(s,r)+n}},ct={text:S.yaxistitle||null};Y.yAxis={title:ct,labels:ot},""!=S.yaxismax&&1==IG$.isNumber(S.yaxismax)&&(Y.yAxis.max=Number(S.yaxismax)),""!=S.yaxismin&&1==IG$.isNumber(S.yaxismin)&&(Y.yAxis.min=Number(S.yaxismin)),0<S.ytickint&&(Y.yAxis.tickInterval=S.ytickint),C&&(Y.yAxis.gridLineInterpolation="polygon",Y.yAxis.lineWidth=0),Y.legend={margin:2},1==S.showlegend?(Y.legend.enabled=!0,S.legendposition=S.legendposition||"BOTTOM_CENTER",Y.legend.verticalAlign=-1<S.legendposition.indexOf("BOTTOM_")?"bottom":-1<S.legendposition.indexOf("TOP_")?"top":"middle",Y.legend.align=-1<S.legendposition.indexOf("LEFT_")?"left":-1<S.legendposition.indexOf("RIGHT_")?"right":"center","center"==Y.legend.align?(-1<S.legendposition.indexOf("_RIGHT")?Y.legend.x=200:-1<S.legendposition.indexOf("_LEFT")&&(Y.legend.x=-e/2+200),Y.legend.layout="horizontal"):(-1<S.legendposition.indexOf("_TOP")?Y.legend.verticalAlign="top":-1<S.legendposition.indexOf("_BOTTOM")&&(Y.legend.verticalAlign="bottom"),Y.legend.layout="vertical")):Y.legend.enabled=!1,S.lgndfloating&&(Y.legend.floating=!0,Y.legend.borderWidth=1,Y.legend.backgroundColor=Highcharts.theme&&Highcharts.theme.legendBackgroundColor||"#FFFFFF");var ht,dt={enabled:!!S.dl_marker,states:{hover:{enabled:!0}}},ut=Y.chart?Y.chart.options3d:null;if(/(pie|doughnut|funnel|pyramid)/.test(y.rcs))Y.tooltip={formatter:function(){return this.point.name+"<br>"+Highcharts.numberFormat(this.y,S.precision||0)+" ("+Highcharts.numberFormat(this.percentage,1)+" %)"}},Y.plotOptions={pie:{allowPointSelect:!0,cursor:"pointer",innerSize:("doughnut"==y.rcs?20<S.pieinnerradius?S.pieinnerradius:40:S.pieinnerradius||0)+"%",dataLabels:{enabled:!0,distance:S.pielabeldist,formatter:function(){return y.getPieLbl(S.piedatalabel,this)}},events:{click:function(t){nt.procClickEvent.call(nt,this,t)}}}},ut&&ut.enabled&&delete ut.viewDistance,Y.chart.renderTo=null,S.pielayout||T.splice(1,T.length-1),$.each(T,function(t,e){var a,i,r,s=$("<div class='i-sschart-cnt'></div>").appendTo(y.container),n=$(y.container),l=IG$.j$ext._w(n),o=IG$.j$ext._h(n),c=l/T.length,h=o/T.length,d=$.extend(!0,{},Y),u=0;if(d.title&&d.title.text&&(r=d.title.text,r=IG$.replaceAll(r,"{SERIES}",e.name),d.title.text=r),"h"==S.pielayout?(IG$.j$ext._w(s,c),IG$.j$ext._h(s,o),s.css({left:lt}),lt+=c):"v"==S.pielayout&&(IG$.j$ext._h(s,h),IG$.j$ext._w(s,l),s.css({top:lt}),lt+=h),d.chart={renderTo:s[0],type:y.rcs,spacingBottom:1},Y.chart.options3d&&(d.chart.options3d=Y.chart.options3d),d.plotOptions={pie:{allowPointSelect:!0,cursor:"pointer",innerSize:Y.plotOptions.pie.innerSize,dataLabels:{enabled:!0,distance:S.pielabeldist,formatter:function(){return y.getPieLbl(S.piedatalabel,this)}},events:{click:function(t){nt.procClickEvent.call(nt,this,t)}}}},ut&&(d.plotOptions.pie.depth=ut.depth),/(funnel|pyramid)/.test(y.rcs)){for(d.plotOptions=d.plotOptions||{},d.plotOptions[y.rcs]={dataLabels:{enabled:!0,softConnector:!0,inside:!0,distance:S.pielabeldist,color:Highcharts.theme&&Highcharts.theme.contrastTextColor||"black",formatter:function(){return y.getPieLbl(S.piedatalabel,this)}}},a=0;a<e.data.length;a++)i=y.getPieLbl(S.piedatalabel,{point:{name:e.data[a].name,fval:e.data[a].fval},percentage:99.9}),cs=y.measureTextSize(10,i),u=Math.max(cs.width+10,u);.5*l<(u+=S.pielabeldist)&&(u=.5*l),d.chart.marginRight=u,"funnel"==y.rcs&&(d.plotOptions.funnel.neckWidth="30%",d.plotOptions.funnel.neckHeight="25%")}e.type="doughnut"==y.rcs?"pie":y.rcs,d.series=[e],V.push(d)});else{for(vt=0;vt<T.length;vt++)st=S.renderbymeasures?T[vt].meas_k:vt,M||-1<st&&S.renderas&&S.renderas.length>st&&S.renderas[st]&&(T[vt].type=IG$.getSeriesType(S.renderas[st])),-1<st&&S.dl_enable_l&&S.dl_enable_l.length>st&&("F"==S.dl_enable_l[st]?T[vt].dataLabels&&(T[vt].dataLabels={enabled:!1}):"T"==S.dl_enable_l[st]&&(T[vt].dataLabels||(T[vt].dataLabels={enabled:!0,align:S.dl_align||"center",inside:S.dl_inside,formatter:function(){return this.point.fval||Highcharts.numberFormat(this.y,0)}}))),S.dl_marker_l&&S.dl_marker_l.length>st&&("F"==S.dl_marker_l[st]?T[vt].marker&&(T[vt].marker={enabled:!1}):"T"==S.dl_marker_l[st]&&(T[vt].marker||(T[vt].marker={enabled:!0,states:{hover:{enabled:!0}}}))),S.dl_linetype_l&&S.dl_linetype_l.length>st&&S.dl_linetype_l[st]&&(T[vt].dashStyle=y.getDashStyle(S.dl_linetype_l[st])),"waterfall"==y.rcs&&(T[vt].upColor=Highcharts.getOptions().colors[2],T[vt].color=Highcharts.getOptions().colors[3]);if(1==S.usedualaxis&&S.dualaxisitem&&-1<S.dualaxisitem.length&&1<T.length){for(vt=0;vt<T.length;vt++)if(st=S.renderbymeasures?T[vt].meas_k:vt,S.dualaxisitem.length>st&&"T"==S.dualaxisitem[st]){s=!0;break}if(1==s){var pt={title:{text:S.yaxistitle2||null,enabled:!!S.yaxistitle},opposite:!0,labels:{formatter:function(){var t=S.yaxisformat2,e=0;return t&&-1<t.indexOf(".")&&(e=t.length-t.lastIndexOf(".")-1),Highcharts.numberFormat(this.value,e)}}};for(""!=S.yaxismax2&&1==IG$.isNumber(S.yaxismax2)&&(pt.max=Number(S.yaxismax2)),""!=S.yaxismin2&&1==IG$.isNumber(S.yaxismin2)&&(pt.min=Number(S.yaxismin)),Y.yAxis=[Y.yAxis],Y.yAxis.push(pt),vt=0;vt<T.length;vt++)st=S.renderbymeasures?T[vt].meas_k:vt,S.dualaxisitem.length>st&&"T"==S.dualaxisitem[st]&&(T[vt].yAxis=1)}}if(Y.tooltip={formatter:function(){var t,e;if(M){if(this.points&&this.points.length)for(t=this.points[0].x+"<br>",e=0;e<this.points.length;e++)t+=(0<e?"<br>":"")+"<b>"+this.points[e].series.name+"</b> "+(this.points[e].fval||Highcharts.numberFormat(this.points[e].y,0))}else t=I?this.series.name+"<br>"+(this.point&&this.point.name||"")+"<br>X: "+this.x+"<br>Y: "+(this.point.fval||Highcharts.numberFormat(this.y,0)):this.series.name+"<br>"+this.x+"<br>"+(this.point.fval||Highcharts.numberFormat(this.y,0));return t}},Y.plotOptions={},Y.plotOptions.column={turboThreshold:S.maxchartresult||1e3,allowPointSelect:!0,events:{click:function(t){return nt.procClickEvent.call(nt,this,t),!1}}},Y.plotOptions.area={turboThreshold:S.maxchartresult||1e3,allowPointSelect:!0,marker:dt,events:{click:function(t){nt.procClickEvent.call(nt,this,t)}}},Y.plotOptions.areaspline={turboThreshold:S.maxchartresult||1e3,allowPointSelect:!0,marker:dt,events:{click:function(t){nt.procClickEvent.call(nt,this,t)}}},Y.plotOptions.line={turboThreshold:S.maxchartresult||1e3,allowPointSelect:!0,marker:dt,events:{click:function(t){nt.procClickEvent.call(nt,this,t)}}},Y.plotOptions.spline={turboThreshold:S.maxchartresult||1e3,allowPointSelect:!0,marker:dt,events:{click:function(t){nt.procClickEvent.call(nt,this,t)}}},Y.plotOptions.bar={turboThreshold:S.maxchartresult||1e3,allowPointSelect:!0,events:{click:function(t){nt.procClickEvent.call(nt,this,t)}}},Y.plotOptions.bubble={turboThreshold:S.maxchartresult||1e3,maxSize:120,minSize:8},S.dl_enable&&$.each(["column","area","areaspline","line","spline","bar"],function(t,e){Y.plotOptions[e].dataLabels={enabled:!0,align:S.dl_align||"center",inside:S.dl_inside,formatter:function(){return this.point.fval||Highcharts.numberFormat(this.y,0)}}}),I&&(Y.plotOptions.scatter={allowPointSelect:!0,turboThreshold:S.maxchartresult||1e3,marker:{symbol:"circle",radius:5,states:{hover:{enabled:!0}}},states:{hover:{marker:{enabled:!1}}}}),S.bands&&0<S.bands.length){var mt,gt=Y.yAxis.length?Y.yAxis[0]:Y.yAxis,ft=Y.xAxis.length?Y.xAxis[0]:Y.xAxis;for(gt.plotBands=[],gt.plotLines=[],ft.plotBands=[],ft.plotLines=[],vt=0;vt<S.bands.length;vt++)bp=S.bands[vt],bp.mresult=t,bp.enabled&&(mt={label:{text:bp.name,formatter:function(){return bp.name}},color:bp.color},"curvefit"==bp.type?P.push(bp):bp.isxaxis?"band"==bp.type?(mt.from=y.getBandValue(t,bp.value_1,!0),mt.to=y.getBandValue(t,bp.value_2,!0),ft.plotBands.push(mt)):(mt.value=y.getBandValue(t,bp.value_1),mt.width=Number(bp.borderwidth)||2,ft.plotLines.push(mt)):"band"==bp.type?(mt.from=y.getBandValue(t,bp.value_1),mt.to=y.getBandValue(t,bp.value_2),gt.plotBands.push(mt)):(mt.value=y.getBandValue(t,bp.value_1),mt.width=Number(bp.borderwidth)||2,gt.plotLines.push(mt)))}if(1==S.stack&&"waterfall"!=y.rcs)switch(this.rcs){case"area":Y.plotOptions.area.stacking=S.stackperc?"percent":"normal";break;default:null!=Y.plotOptions.series&&void 0!==Y.plotOptions.series||(Y.plotOptions.series={}),Y.plotOptions.series.stacking=S.stackperc?"percent":"normal"}if(!M&&Y.renderas&&0<Y.renderas.length)for(vt=0;vt<Y.renderas.length;vt++){""!=Y.renderas[vt]&&T.length>vt&&(ht=IG$.getSeriesType(Y.renderas[vt]),T[vt].type=ht)}O?($(y.container).bind("mousemove touchmove",function(t){var e,a,i;if(y._masterCharts)for(i=0;i<y._masterCharts.length;i+=1)(e=y._masterCharts[i])&&(t=e.pointer.normalize(t),(a=e.series[0].searchPoint(t,!0))&&(a.onMouseOver(),e.tooltip.refresh(a),e.xAxis[0].drawCrosshair(t,a)))}),(ft=Y.xAxis=Y.xAxis||{}).crosshair=!0,ft.events=ft.events||{},ft.events.setExtremes=function(e){var a=this.chart;"syncExtremes"!==e.trigger&&Highcharts.each(y._masterCharts,function(t){t!==a&&t.xAxis[0].setExtremes&&t.xAxis[0].setExtremes(e.min,e.max,void 0,!1,{trigger:"syncExtremes"})})},Y.chart.renderTo=null,Y.chart.marginLeft=60,Y.chart.zoomType="x",$.each(X,function(t,e){var a,i=$("<div class='i-sschart-cnt'></div>").appendTo(y.container),r=$(y.container),s=IG$.j$ext._w(r),n=IG$.j$ext._h(r),l=n/j,o=$.extend(!0,{},Y),c=[];for(IG$.j$ext._h(i,l),IG$.j$ext._w(i,s),i.css({top:lt}),lt+=l,o.chart.renderTo=i[0],a=0;a<T.length;a++)T[a].meas_k==t&&c.push(T[a]);o.series=c,V.push(o)})):(Y.series=T,V.push(Y))}if(M){Y.chart.type="column",Y.plotOptions.column.grouping=!1,Y.plotOptions.column.shadow=!1,Y.plotOptions.column.borderWidth=0,Y.tooltip=Y.tooltip||{},Y.tooltip.shared=!0;for(var bt=0,xt=0,vt=0;vt<Y.series.length;vt++)Y.series[vt].pointPadding=(2<Y.series.length?.3:.2)+(Y.series[vt].yAxis?xt:bt)/10,Y.series[vt].pointPlacement=2<Y.series.length?Y.series[vt].yAxis?.2:-.2:0,Y.series[vt].yAxis||0!=bt?Y.series[vt].yAxis||1!=bt?Y.series[vt].yAxis&&0==xt||!Y.series[vt].yAxis&&2==bt?Y.series[vt].color="rgba(248,161,63,1)":(Y.series[vt].yAxis&&1==xt||!Y.series[vt].yAxis&&3==bt)&&(Y.series[vt].color="rgba(186,60,61,.9)"):Y.series[vt].color="rgba(126,86,134,.9)":Y.series[vt].color="rgba(165,170,217,1)",Y.series[vt].yAxis?xt++:bt++}if(P.length)for(vt=0;vt<V.length;vt++)V[vt].__cf=P;return V},getDashStyle:function(t){return"dashed"==t?"Dash":"dotted"==t?"ShortDot":null},interpolate:function(t,e){var a,i,r,s=null;return e&&"#"==e.charAt(0)&&(a=e.substring(1,3),i=e.substring(3,5),r=e.substring(5,7),s="rgba("+(a=parseInt(a,16))+","+(i=parseInt(i,16))+","+(r=parseInt(r,16))+","+(t/255*.75+.25)+")"),s},procClickEvent:function(t,e){var a=this;a._p1a&&clearTimeout(a._p1a),a._p1a=setTimeout(function(){a.procClickHandler.call(a,t,e)},250)},procClickHandler:function(t,e){if(t){var a,r,s,n,l,o,c,h=this,d=[],u=[],p=[],m=IG$._separator,g=this.mresult,f=h.sheetoption.model.chart_option.swapaxis,b=-1,x=-1;if(!e&&(!h.selectedData||h.selectedData&&!h.selectedData.length))return;if(h.selectedData=[],"scatter"==h.cop.charttype||"bubble"==h.cop.charttype)if(e&&e.length)for(n=0;n<e.length;n++)-1<(l=e[n]).datarow&&p.push(l.datarow);else e&&-1<e.datarow&&p.push(e.datarow);else if(e&&e.length)for(n=0;n<e.length;n++)l=e[n],d.push(l.series?l.series.name:l.name),u.push(l.category||l.name||"");else e&&(d.push(t.series?t.series.name:t.name),u.push(e.point?e.point.category||e.point.name:""));if(e&&e.point&&e.point.select&&e.point.select(!0,!1),p.length)for(n=0;n<p.length;n++)x=p[n],b=g.colfix-1,-1<x&&-1<b&&(g._tabledata[x][b].r=x,g._tabledata[x][b].c=b,this.selectedData.push(g._tabledata[x][b]));else for(n=0;n<d.length;n++){if(a=d[n],r=u[n],1==f){for(i=g.colfix;i<g._tabledata[0].length;i++){for(s="",j=0;j<g.rowfix;j++)s+=(g._tabledata[j][i].text||" ")+m;if(s==r+m){b=i;break}}if(a)for(i=g.rowfix;i<g._tabledata.length;i++){for(s="",j=0;j<g.colfix;j++)s+=(g._tabledata[i][j].text||" ")+m;if(s==a+m){x=i;break}}}else{for(i=g.rowfix;i<g._tabledata.length;i++){for(s="",j=0;j<g.colfix;j++)s+=(g._tabledata[i][j].text||" ")+m;if(s==r+m){x=i;break}}if(a)for(i=g.colfix;i<g.colcnt;i++){for(s="",j=0;j<g.rowfix;j++)s+=(g._tabledata[j][i].text||" ")+m;if(s==a+m){b=i;break}}}-1<b&&-1<x&&(g._tabledata[x][b].r=x,g._tabledata[x][b].c=b,this.selectedData.push(g._tabledata[x][b]))}h.onClickHandler&&h.onClickOwner&&h.onClickHandler.call(h.onClickOwner,h,t,e),h.ctrl&&h.ctrl.events&&h.ctrl.events.itemclick&&(o=(void 0).ctrl.dashboard,c=(void 0).ctrl.actionlist,o.executeAction.call(o,c.itemclick,{ctrl:h.ctrl,ptr:h,event:"itemclick"}))}},_reqData:function(t){var e=this.rpc;e._reqData.call(e,this,t)},getEchartData:function(t,e){var a,i=IG$.getFstChld(t.getDom());"DIV"==IG$.XGetNodeName(i).toUpperCase()&&(i=IG$.getFstChld(i),"SVG"==IG$.XGetNodeName(i).toUpperCase()?(IG$.XSetAttr(i,"xmlns:xlink","http://www.w3.org/1999/xlink"),IG$.XSetAttr(i,"xmlns","http://www.w3.org/2000/svg"),IG$.XSetAttr(i,"version","1.1"),a=IG$.toXMLString(i),e.image_type="svg",e.image_data=Base64.encode(a)):(a=t.getDataURL({pixelRatio:2,backgroundColor:"#fff"}),e.image_type="png",e.image_data=a))},getExportData:function(t){var e,a,i,r=this;switch(r.drawmode){case"highchart":r._masterCharts&&0<r._masterCharts.length&&(a=(e=r._masterCharts[0]).getSVG(),t.image_type="svg",t.image_data=Base64.encode(a));break;case"echart":r._masterCharts&&0<r._masterCharts.length&&(e=r._masterCharts[0],r.getEchartData(e,t));break;case"qavis":break;case"protovis":r.vis&&(i=IG$.getFstChld(r.container),IG$.XSetAttr(i,"xmlns:xlink","http://www.w3.org/1999/xlink"),IG$.XSetAttr(i,"xmlns","http://www.w3.org/2000/svg"),IG$.XSetAttr(i,"version","1.1"),a=IG$.toXMLString(i),t.image_type="svg",t.image_data=Base64.encode(a));break;case"dcust":r.dcust&&(i=IG$.getFstChld(r.container),IG$.XSetAttr(i,"xmlns:xlink","http://www.w3.org/1999/xlink"),IG$.XSetAttr(i,"xmlns","http://www.w3.org/2000/svg"),IG$.XSetAttr(i,"version","1.1"),a=IG$.toXMLString(i),t.image_type="svg",t.image_data=Base64.encode(a));case"treemap":r.treemap&&r.treemap.map&&(r.treemap.map.getSVG?(a=r.treemap.map.getSVG.call(r.treemap.map),t.image_type="svg",t.image_data=Base64.encode(a)):r.getEchartData(r.treemap.map,t));break;case"bubblemap":r.bmap&&(a=r.bmap.toSVG.call(r.bmap),t.image_type="svg",t.image_data=Base64.encode(a));break;case"custom":r.customchart&&r.customchart.getSVG&&(a=r.customchart.getSVG.call(r.customchart))&&(t.image_type="svg",t.image_data=Base64.encode(a))}},mvalue:function(t,e){var a,i,r=e?((a=t.text)&&-1<a.indexOf(",")&&(a=(a=a.split(",")).join("")),-1<(i=a?a.indexOf("%"):-1)&&(a=a.substring(0,i)+a.substring(i+1)),Number(a)):Number(t.code);return r},dynLoad:function(t){var e=ig$.bootconfig.scmap,i=[],a=window.bowser,r=!!(a.msie&&a.version<9);$.each([[r?"./js/excanvas.js":null,window.pv?null:"./js/protovis-d3.3.js",r||window.d3?null:"./js/d3.js",!window.d3||window.d3&&!window.d3.tip?"./js/d3.tip.js":null,!window.d3||window.d3&&!window.d3.geo?"./js/d3.geo.js":null,!window.Raphael||window.Raphael&&!window.Raphael.g?"./js/g.raphael.js":null,!window.Raphael||window.Raphael&&!window.Raphael.fn.dotchart?"./js/g.dot.js":null],e.igc6,e.igco,e.igcb],function(t,e){for(var a=0;a<e.length;a++)e[a]&&i.push(e[a])}),IG$.getScriptCache(i,new IG$.callBackObj(this,function(){t.call(this)}))},drawProtovisChart:function(t,e){this.dynLoad(function(){this.drawProtovisChart.call(this,t,e)})},drTreeMap:function(t){this.dynLoad(function(){this.drTreeMap.call(this,t)})},drD3Cust:function(t,e){this.dynLoad(function(){this.drD3Cust.call(this,t,e)})},drMatrixChart:function(t){this.dynLoad(function(){this.drMatrixChart.call(this,t)})},drMapChart:function(t){this.dynLoad(function(){this.drMapChart.call(this,t)})},drProtovisMapChart:function(t){this.dynLoad(function(){this.drProtovisMapChart.call(this,t)})},drD3Map:function(t){this.dynLoad(function(){this.drD3Map.call(this,t)})},drD3ExtMap:function(){this.dynLoad(function(){this.drD3ExtMap.call(this)})},drGSAPIMap:function(){this.dynLoad(function(){this.drGSAPIMap.call(this)})}};
IG$.echart={drawCartesian:function(e,t,a,l){var i,r,n,s,o,d,b,p,h,m,c,u,x,g=e._tabledata,y=e.colfix,f=e.rowfix,_={},v=this,w=[],k=[],S=0,T=0,I=0,A=0,G=0,N=-1,L=v.sheetoption.model.chart_option,z=L.swapaxis,M=L.useformula,O=L.maxchartresult,C=(L.timeseriesfield,L.useformatvalue),F=v.sheetoption.model.measures,B={},j=[];if(e.hidden_columns)for(me=0;me<e.hidden_columns.length;me++)_[e.hidden_columns[me]]=1;var W=g&&0<g.length?g[0].length:0,E=g?g.length:0,P=v.rcs,R=[];v.drawmode="echart","radar"==P?T=1:"fixedplacement"==P?A=1:"syncchart"==P&&(G=1<(N=F&&1<F.length?F.length:-1)?1:0),s=Math.min(g.length,0<O?O:g.length),v._dlen=s,o=f,l?(o+=d=Math.floor(v.scrollX*e.rows/v.thumbhwidth),s=Math.min(g.length,s+d)):0<e.pagestart||e.rows>e.pageend?v.sh=s/e.rows:0<O&&O<g.length&&(v.sh=O/g.length);var V,H=[],X={},q=L.titleposition||"",D=L.colorset||e.c_cset;if(IG$.__chartoption&&IG$.__chartoption.chartcolors&&IG$.__chartoption.chartcolors[D]&&(X.color=IG$.__chartoption.chartcolors[D]),y+1<W&&("scatter"==P||"bubble"==P)){var Y,S=1;if("bubble"==P&&(I=1,v.__bubblemax=NaN,v.__bubblemin=NaN),z)for(me=y;me<Math.min(W,0<O?O:W);me++){var Z=[v.mvalue(g[f][me],C),v.value(g[f+1][me],C)];for(I&&f+2<E&&(zvalue=v.mvalue(g[f+2][me],C),isNaN(v.__bubblemax)?(v.__bubblemax=zvalue,v.__bubblemin=zvalue):(v.__bubblemax=Math.max(zvalue,v.__bubblemax),v.__bubblemin=Math.min(zvalue,v.__bubblemin)),Z.push(zvalue)),ue=0;ue<f;ue++)J=0==ue?g[ue][me].text:J+v._sep+g[ue][me].text;Z.push(J),Z.push(ue),cvalue=g[0][ue].text,cvalue!=Y?(K={name:cvalue,data:[Z],meas_k:-1},k.push(K)):K&&K.data.push(Z),Y=cvalue}else for(me=f;me<Math.min(g.length,0<O?O:g.length);me++){var J,Z=[v.mvalue(g[me][y],C),v.mvalue(g[me][y+1],C)];for(I&&y+2<W&&(zvalue=v.mvalue(g[me][y+2],C),isNaN(v.__bubblemax)?(v.__bubblemax=zvalue,v.__bubblemin=zvalue):(v.__bubblemax=Math.max(zvalue,v.__bubblemax),v.__bubblemin=Math.min(zvalue,v.__bubblemin)),Z.push(zvalue)),ue=0;ue<y;ue++)J=0==ue?g[me][ue].text:J+v._sep+g[me][ue].text;Z.push(J),Z.push(me),cvalue=g[me][0].text,cvalue!=Y?(K={name:cvalue,data:[Z],meas_k:-1},k.push(K)):K&&K.data.push(Z),Y=cvalue}}else{if(1==z)for(me=f;me<E;me++){for(ue=0;ue<y;ue++)c=g[me][ue].text,m=0==ue?c:m+c;var K={name:m,data:[]};k.push(K),R.push(0)}else for(me=y;me<W;me++)if(x=-1,m="",void 0===_[me]){if(G)for(ue=0;ue<f;ue++)3!=(u=g[ue][me]).position?(c=u.text,m=0==ue?c:m+v._sep+c):B[x=u.pindex]=u.text;else for(ue=0;ue<f;ue++)c=(u=g[ue][me]).text,3==u.position&&(x=u.index),m=0==ue?c:m+v._sep+c;K={name:m||B[x],meas_k:x,data:[]};k.push(K),R.push(0)}Math.max(1==z?W:g.length,20);var Q,U,ee,te,ae=!1,le="waterfall"==v.rcs&&0==L.stack;if(1==z)for(me=y;me<Math.min(W,0<O?O:W);me++){for(ae=!1,ue=0;ue<f;ue++)if(r=0==ue?g[ue][me].text:r+IG$._separator+g[ue][me].text,4==g[ue][me].position){ae=!0;break}if(0==ae||1==M){for(n=0,ue=f;ue<E;ue++){var ie=v.mvalue(g[ue][me],C);1==isNaN(ie)?k[n].data.push(null):T?k[n].data.push(ie):(U=k[n].data.length,ee=le&&0<U?ie-R[n]:ie,k[n].data.push({name:r,x:me-y,value:ee,fval:g[ue][me].text}),R[n]=ie),n++}w.push(r),0}}else for(p=W==y+1?1:0,me=o;me<s;me++){for(ae=!1,b=null,ue=0;ue<y;ue++)if(void 0===_[ue]){if(r=0==ue?g[me][ue].text:r+IG$._separator+g[me][ue].text,4==g[me][ue].position){ae=!0;break}b=p&&g[me][ue].cc?g[me][ue].cc:b}if(0==ae||1==M){for(n=0,ue=y;ue<W;ue++){void 0===_[ue]&&(ie=v.mvalue(g[me][ue],C),1==isNaN(ie)?k[n].data.push({name:r,x:me-o,y:null,fval:null}):T?k[n].data.push(ie):(U=k[n].data.length,te={name:r,x:me-o,value:ee=le&&0<U?ie-R[n]:ie,fval:g[me][ue].text},!b&&-1<g[me][ue].cm&&((Q=X.colors)&&(h=v.interpolate(g[me][ue].cm,Q[n%Q.length]))),(b||h)&&(te.color=b||h),h=0,k[n].data.push(te),R[n]=ie),n++)}w.push(r),0}}}X.chart={renderTo:v.container,reflow:!1,alignTicks:!0,borderWidth:0,spacingBottom:1},X.grid={left:20,top:20,bottom:20,right:20,containLabel:!0},L.showtitle&&L.title?(X.title={text:L.title,show:!0,textStyle:{align:"center"}},-1<q.indexOf("BOTTOM_")?(X.title.bottom=10,X.grid.bottom+=10):X.grid.top+=20,-1<q.indexOf("_LEFT")?(X.title.textAlign="left",X.title.textStyle.align="left",X.title.left=20):-1<q.indexOf("_RIGHT")?(X.title.textAlign="left",X.title.right=120,X.title.textStyle.align="right"):(X.title.textAlign="center",X.title.right="50%",X.title.left="50%")):X.title={show:!1},L.enabledragselect&&(X.brush={toolbox:["rect","keep","clear"],brushMode:"multiple"}),S?(X.chart.zoomType="xy",X.xAxis={startOnTick:!0,endOnTick:!0,showLastLabel:!0}):(L.enablezoom&&!L.enabledragselect&&(X.chart.zoomType="xy"),V={axisLabel:{maxStaggerLines:2,formatter:function(e,t){return e}}},0==L.xlabel?V.axisLabel.enabled=!1:0==L.xaxisrot&&(V.axisLabel.autoRotation=!1,0<L.xstagl&&(V.axisLabel.staggerLines=L.xstagl,V.axisLabel.maxStaggerLines=L.xstagl),1<L.xstep&&(V.axisLabel.step=L.xstep)),X.xAxis={data:w,axisLabel:V.axisLabel,showLastTickLabel:!0,align:"left",events:{setExtremes:function(e){var t,a,l,i,r;90==Math.abs(this.options.labels.rotation)&&(t=parseInt(this.options.labels.style.lineHeight)+2,a=parseInt(this.chart.plotBox.width),l=Math.floor(a/t),i=null!==e.max&&void 0!==e.max?Math.round(e.max-e.min):Math.round(this.dataMax-this.dataMin),r=Math.ceil(i/(l*(null==this.tickInterval?1:this.tickInterval))),this.update({labels:{step:r}},!0))}}}),!0===L.e3d_en&&(X.chart.options3d={enabled:!0,alpha:Number(L.e3d_al),beta:Number(L.e3d_be),depth:Number(L.e3d_de),viewDistance:Number(L.e3d_vd)});var re,ne=0,se={formatter:L.yaxisformat?function(e,t){var a=L.yaxisformat;return IG$.NumberFormat(a,e)}:null};X.yAxis={name:L.yaxistitle||null,axisLabel:{formatter:se.formatter}},""!=L.yaxismax&&1==IG$.isNumber(L.yaxismax)&&(X.yAxis.max=Number(L.yaxismax)),""!=L.yaxismin&&1==IG$.isNumber(L.yaxismin)&&(X.yAxis.min=Number(L.yaxismin)),0<L.ytickint&&(X.yAxis.interval=L.ytickint),L.yaxislog&&(X.yAxis.type="log",X.yAxis.minorTick={show:!0},0<L.yaxislogbase&&(X.yAxis.logBase=L.yaxislogbase)),T&&(X.yAxis.gridLineInterpolation="polygon",X.yAxis.lineWidth=0),X.legend={type:"scroll"},1==L.showlegend?(X.legend.show=!0,L.legendposition=L.legendposition||"BOTTOM_CENTER",-1<L.legendposition.indexOf("BOTTOM_")?(X.legend.orient="horizontal",X.title.show&&0<X.title.bottom?X.legend.bottom=X.title.bottom+30:X.legend.bottom=10,X.grid.bottom+=40,L.datazoom&&(X.grid.bottom+=40,X.legend.bottom+=40)):-1<L.legendposition.indexOf("TOP_")?(X.legend.orient="horizontal",X.legend.top=X.grid.top+10,X.grid.top+=40):X.legend.orient="vertical","horizontal"==X.legend.orient&&(-1<L.legendposition.indexOf("_RIGHT")?X.legend.left=200:-1<L.legendposition.indexOf("_LEFT")&&(X.legend.left=-t/2+200))):(X.legend.show=!1,L.datazoom&&(X.grid.bottom+=40)),L.lgndfloating&&(X.legend.floating=!0,X.legend.borderWidth=1,X.legend.backgroundColor="#FFFFFF");var oe,de,be=X.chart?X.chart.options3d:null;if(/(pie|doughnut|funnel|pyramid)/.test(v.rcs))X.tooltip={formatter:function(e,t,a){return e.name+"<br>"+e.data.fval+" ("+e.percent+" %)"}},be&&be.enabled&&delete be.viewDistance,X.chart.renderTo=null,L.pielayout||k.splice(1,k.length-1),$.each(k,function(e,t){var a,l,i,r=$("<div class='i-sschart-cnt'></div>").appendTo(v.container),n=$(v.container),s=IG$.j$ext._w(n),o=IG$.j$ext._h(n),d=s/k.length,b=o/k.length,p=$.extend(!0,{},X),h=0;if(p.title&&p.title.text&&(i=p.title.text,i=IG$.replaceAll(i,"{SERIES}",t.name),p.title.text=i),"h"==L.pielayout?(IG$.j$ext._w(r,d),IG$.j$ext._h(r,o),r.css({left:ne}),ne+=d):"v"==L.pielayout&&(IG$.j$ext._h(r,b),IG$.j$ext._w(r,s),r.css({top:ne}),ne+=b),p.chart={renderTo:r[0],type:IG$.getSeriesType(v.rcs,t),spacingBottom:1},X.chart.options3d&&(p.chart.options3d=X.chart.options3d),/(funnel|pyramid)/.test(v.rcs)){for(t.type="funnel",t.gap=2,a=0;a<t.data.length;a++)l=v.getPieLbl(L.piedatalabel,{point:{name:t.data[a].name,fval:t.data[a].fval},percentage:99.9}),cs=v.measureTextSize(10,l),h=Math.max(cs.width+10,h);.5*s<(h+=L.pielabeldist)&&(h=.5*s),p.chart.marginRight=h,"funnel"==v.rcs&&(t.neckWidth="30%",t.neckHeight="25%")}t.type=IG$.getSeriesType(v.rcs,t),p.series=[t],v.updateSeries(t,L),delete p.xAxis,delete p.yAxis,p.legend.show=!1,H.push(p)});else{for(X.legend.data=[],me=0;me<k.length;me++)A||T||-1<(re=L.renderbymeasures?k[me].meas_k:me)&&L.renderas&&L.renderas.length>re&&L.renderas[re]&&(k[me].type=IG$.getSeriesType(L.renderas[re],k[me]),L.dl_linetype_l&&L.dl_linetype_l[re]&&(k[me].lineStyle=k[me].lineStyle||{},k[me].lineStyle.type=L.dl_linetype_l[re]),L.dl_linewidth_l&&L.dl_linewidth_l[re]&&(k[me].lineStyle=k[me].lineStyle||{},k[me].lineStyle.width=Number(L.dl_linewidth_l[re]||"1")||1)),L.dl_enable_l&&L.dl_enable_l.length>re&&("F"==L.dl_enable_l[re]?k[me].label&&(k[me].label={show:!1}):"T"==L.dl_enable_l[re]&&(k[me].label||(k[me].label={show:!0,align:L.dl_align||"center",verticalAlign:L.dl_inside?"bottom":"top",formatter:function(e){return e.data.fval}}))),L.dl_marker_l&&L.dl_marker_l.length>re&&("F"==L.dl_marker_l[re]?k[me].symbolSize=2:"T"==L.dl_marker_l[re]&&(k[me].symbol="circle",k[me].symbolSize=6,k[me].showSymbol=!0)),X.legend.data.push({name:k[me].name}),v.rcs;if(1==L.usedualaxis&&L.dualaxisitem&&-1<L.dualaxisitem.length&&1<k.length){for(me=0;me<k.length;me++)if(re=L.renderbymeasures?k[me].meas_k:me,L.dualaxisitem.length>re&&"T"==L.dualaxisitem[re]){i=!0;break}if(1==i){var pe={name:L.yaxistitle&&L.yaxistitle2?L.yaxistitle2:null,position:"right",axisLabel:{formatter:L.yaxisformat2?function(e,t){var a=L.yaxisformat2;return IG$.NumberFormat(a,e)}:null}};for(L.yaxismax2&&1==IG$.isNumber(L.yaxismax2)&&(pe.max=Number(L.yaxismax2)),L.yaxismin2&&1==IG$.isNumber(L.yaxismin2)&&(pe.min=Number(L.yaxismin)),L.yaxislog2&&(pe.type="log",0<L.yaxislogbase2&&(pe.logBase=L.yaxislogbase2)),X.yAxis=[X.yAxis],X.yAxis.push(pe),me=0;me<k.length;me++)re=L.renderbymeasures?k[me].meas_k:me,L.dualaxisitem.length>re&&"T"==L.dualaxisitem[re]&&(k[me].yAxisIndex=1)}}if(X.tooltip={formatter:function(e,t,a){var l,i,r,n=e.value;if(A){if(this.points&&this.points.length)for(l=this.points[0].x+"<br>",i=0;i<this.points.length;i++)l+=(0<i?"<br>":"")+"<b>"+this.points[i].series.name+"</b> "+(this.points[i].fval||IG$.NumberFormat("#,###",this.points[i].y))}else S?4==n.length?(r=g[n[3]],l=e.seriesName+"<br>"+(e.name||n[2])+"<br>X: "+(r[y].text||"")+(r[y+1]?"<br>Y: "+(r[y+1].text||""):"")):5==n.length&&(r=g[n[4]],l=e.seriesName+"<br>"+(e.name||n[3])+"<br>X: "+(r[y].text||"")+(r[y+1]?"<br>Y: "+(r[y+1].text||""):"")+(r[y+2]?"<br>Z: "+(r[y+2].text||""):"")):l=(e.seriesName?e.seriesName+"<br>":"")+e.name+"<br>"+(e.data.fval||e.value);return l}},L.bands&&0<L.bands.length)for(var he=k[0],me=0;me<L.bands.length;me++)bp=L.bands[me],bp.enabled&&("curvefit"==bp.type?j.push(bp):"band"==bp.type?(bp.from=v.getBandValue(e,bp.value_1),bp.to=v.getBandValue(e,bp.value_2),he.markArea=he.markArea||{data:[]},bp.isxaxis?he.markArea.data.push([{name:bp.name,xAxis:bp.from,itemStyle:{color:bp.color,borderWidth:Number(bp.borderwidth),borderType:"solid",opacity:.4}},{name:bp.name,xAxis:bp.to,itemStyle:{color:bp.color,borderWidth:Number(bp.borderwidth),borderType:"solid",opacity:.4}}]):he.markArea.data.push([{name:bp.name,yAxis:bp.from,itemStyle:{color:bp.color,borderWidth:Number(bp.borderwidth),borderType:v.getLineType(bp.cf_lc),opacity:.4}},{name:bp.name,yAxis:bp.to,itemStyle:{color:bp.color,borderWidth:Number(bp.borderwidth),borderType:v.getLineType(bp.cf_lc),opacity:.4}}])):"line"==bp.type&&(bp.value=v.getBandValue(e,bp.value_1),he.markLine=he.markLine||{symbol:"none",data:[]},bp.isxaxis?he.markLine.data.push({name:bp.name,xAxis:bp.value,symbol:"none",label:{position:"end",formatter:"{b}"},lineStyle:{type:v.getLineType(bp.cf_lc),color:bp.color,width:Number(bp.borderwidth)||2,opacity:.4}}):he.markLine.data.push({name:bp.name,yAxis:bp.value,symbol:"none",label:{position:"end",formatter:"{b}"},lineStyle:{type:v.getLineType(bp.cf_lc),color:bp.color,width:Number(bp.borderwidth)||2,opacity:.4}})));if(1==L.stack&&"waterfall"!=v.rcs){for(me=0;me<k.length;me++)k[me].stack="stack001";if(L.stackperc&&k.length)for(me=0;me<k[0].data.length;me++){for(var ce,ue=0;ue<k.length;ue++)dval=k[ue].data[me].value||0,ce=0==ue?dval:dval+ce;if(ce)for(ue=0;ue<k.length;ue++)dval=k[ue].data[me].value||0,k[ue].data[me].value=dval/ce*100}}if("bar"==v.rcs){var xe=X.xAxis;X.xAxis=X.yAxis,delete X.yAxis,X.yAxis=xe}else if("radar"==v.rcs){xe=X.xAxis;for(X.radar={name:{textStyle:{color:"#fff",backgroundColor:"#999",borderRadius:3,padding:[3,5]}},indicator:[]},X.yAxis.gridLineInterpolation="polygon",me=X.yAxis.lineWidth=0;me<xe.data.length;me++)X.radar.indicator.push({name:xe.data[me]});delete X.xAxis,delete X.yAxis}if(!A&&X.renderas&&0<X.renderas.length)for(me=0;me<X.renderas.length;me++)X.renderas[me]&&k.length>me&&(k[me].type=IG$.getSeriesType(X.renderas[me],k[me]),X.dl_linetype_l&&X.dl_linetype_l[me]&&(k[me].lineStyle=k[me].lineStyle||{},k[me].lineStyle.type=X.dl_linetype_l[me]),X.dl_linewidth_l&&X.dl_linewidth_l[me]&&(k[me].lineStyle=k[me].lineStyle||{},k[me].lineStyle.width=Number(X.dl_linewidth_l[me]||"1")||1));if(G){$(v.container).bind("mousemove touchmove",function(e){var t,a,l;if(v._masterCharts)for(l=0;l<v._masterCharts.length;l++)(t=v._masterCharts[l])&&(e=t.pointer.normalize(e),(a=t.series[0].searchPoint(e,!0))&&(a.onMouseOver(),t.tooltip.refresh(a),t.xAxis[0].drawCrosshair(e,a)))}),(X.xAxis=X.xAxis||{}).crosshair=!0,X.axisPointer={xAxisIndex:"all"},X.chart.renderTo=null,X.chart.marginLeft=60,X.chart.zoomType="x",$.each(B,function(e,t){var a,l=$("<div class='i-sschart-cnt'></div>").appendTo(v.container),i=$(v.container),r=IG$.j$ext._w(i),n=IG$.j$ext._h(i),s=n/N,o=$.extend(!0,{},X),d=[];for(IG$.j$ext._h(l,s),IG$.j$ext._w(l,r),l.css({top:ne}),ne+=s,o.chart.renderTo=l[0],a=0;a<k.length;a++)k[a].meas_k==e&&(d.push(k[a]),k[a].type||(k[a].type=IG$.getSeriesType(P,k[a])));v.updateSeries(d,L),o.series=d,H.push(o)})}else{if("radar"==P){var ge=[{name:"",type:"radar",data:[]}];for(me=0;me<k.length;me++)ge[0].data.push({name:k[me].name,value:k[me].data});v.updateSeries(ge[0],L),k=ge}else for(me=0;me<k.length;me++)k[me].type||(k[me].type=IG$.getSeriesType(P,k[me])),v.updateSeries(k[me],L);X.series=k,L.datazoom&&/(line|column|area)/.test(P)&&(X.dataZoom=[{show:!0,realtime:!1}]),H.push(X)}}if(A&&(oe=0,de=["rgba(165,170,217,1)","rgba(126,86,134,.9)","rgba(248,161,63,1)","rgba(186,60,61,.9)"],$.each(X.series,function(e,t){t.type="bar",t.barGap="-100%",t.barWidth=(2<X.series.length?.3:.2)+oe/10+"%",t.itemStyle=t.itemStyle||{},t.itemStyle.color=de[e],oe++})),j.length)for(me=0;me<H.length;me++)H[me].__cf=j;return H}},IG$.v$olapChartView.prototype.getLineType=function(e){var t="solid";switch(e?e.toLowerCase():""){case"shortdash":case"shortdot":case"shortdashdot":case"shortdashdotdot":t="dotted";break;case"shortdashdot":case"longdash":case"dashdot":case"longdashdot":case"longdashdotdot":t="dashed"}return t},IG$.v$olapChartView.prototype.updateSeries=function(e,t){var a=this;"scatter"==e.type?(e.symbol="circle","bubble"==t.charttype?e.symbolSize=function(e){return 0<a.__bubblemax-a.__bubblemin?80*Math.sqrt((e[2]-a.__bubblemin)/(a.__bubblemax-a.__bubblemin))+10:Math.sqrt(e[2])}:e.symbolSize=10):/(line|bar|radar)/.test(e.type)?(e.symbol="circle",e.symbolSize||(e.symbolSize=t.dl_marker?6:2),e.showSymbol=!0):/(area)/.test(e.type)?(e.symbol=t.dl_marker?"circle":"none",e.showSymbol=!0):/(funnel|pyramid)/.test(e.type)?e.label={show:!0,softConnector:!0,position:"inside",distance:t.pielabeldist,formatter:function(e){return a.getPieLbl(t.piedatalabel,e)}}:"pie"==e.type&&$s.apply(e,{allowPointSelect:!0,cursor:"pointer",radius:[("doughnut"==a.rcs?20<t.pieinnerradius?t.pieinnerradius:40:t.pieinnerradius||0)+"%","75%"],label:{show:t.dl_enable,distance:t.pielabeldist,position:t.dl_inside?"inside":"outside",formatter:function(e){return a.getPieLbl(t.piedatalabel,e)}},events:{click:function(e){eventowner.procClickEvent.call(eventowner,this,e)}}}),e.large=!0,e.largeThreshold=t.maxchartresult||1e3,e.events={click:function(e){return eventowner.procClickEvent.call(eventowner,this,e),!1}},t.dl_enable&&"pie"!=e.type&&(e.label={show:!0,align:t.dl_align||"center",verticalAlign:t.dl_inside?"bottom":"top",formatter:function(e){return e.data.fval}}),1==t.stack&&"waterfall"!=a.rcs&&(e.stack="stack_001",t.stackperc)},window.echarts&&(IG$.v$olapChartView.prototype.drawCartesian=IG$.echart.drawCartesian,IG$.v$olapChartView.prototype.getPieLbl=function(e,t){var a=e||"{name}: {percent} %",l=a.indexOf("{name}");for(-1<l&&(a=a.substring(0,l)+t.name+a.substring(l+"{name}".length)),-1<(l=a.indexOf("{percent}"))&&(a=a.substring(0,l)+(t.percentage||t.percent)+a.substring(l+"{percent}".length)),-1<(l=a.indexOf("{value}"))&&(a=t.data?a.substring(0,l)+(t.data.fval||t.data.value)+a.substring(l+"{value}".length):t.point?a.substring(0,l)+(t.point.fval||t.point.value)+a.substring(l+"{value}".length):a.substring(0,l)+a.substring(l+"{value}".length)),l=a.indexOf("<br>");-1<l;)l=(a=a.substring(0,l)+"\n"+a.substring(l+"<br>".length)).indexOf("<br>");return a},IG$.getSeriesType=function(e,t){var a="bar";switch(e){case"column":a="bar";break;case"line":a="line",t.smooth=!1,t.areaStyle={opacity:0};break;case"spline":a="line",t.smooth=!0,t.areaStyle={opacity:0};break;case"area":a="line",t.areaStyle={opacity:.6},t.smooth=!1;break;case"bar":a="bar";break;case"pie":case"doughnut":a="pie";break;case"bubble":case"scatter":a="scatter";break;case"parallel":a="parallel";break;case"waterfall":a="line",t.step=!0;break;case"areaspline":a="line",t.areaStyle={opacity:.6},t.smooth=!0;break;case"radar":a="radar";break;case"funnel":case"pyramid":a="funnel","pyramid"==e&&(t.sort="ascending")}return a});
IG$.m$ReqOlap=function(){this.jobid=null,this.panel=null,this.uid=null,this.sheet=null,this.chart=null,this.reportoption=null,this.ctrlsource=null},IG$.m$ReqOlap.prototype={requestPivotResult:function(e,t,o,r,i,s,l,a,n,p){var d,h=this,u=h.jobid,u=(h.uid,h.reportoption,h.panel.jobid);a&&(u=a.jobid),d=t||h.sheet||h.chart,h._requestPivotResult(null,[d,o,r,e,i,s,u,l,a,n,p])},_requestPivotResult:function(e,t){var o,r=this,i=r.jobid,s=r.uid,l=r.reportoption,a=t[0],n=t[1],p=t[2],d=t[3],h=t[4],u=t[5],i=t[6],c=t[7],m=t[8],$=t[9],v=t[10],w=void 0!==h?"T":"F",h=h||0;l&&l.poolname&&IG$.dbp[l.poolname]&&(o=IG$.dbp[l.poolname]);var _=new IG$._rpc$;_.init(r.panel,{ack:"olapservice",payload:{uid:s,option:"pivot",active:""+n,pivotresult:"T",pwd:o,jobid:i||"",startpage:""+h,endpage:""+(u||-1),ispagechange:w,theme_id:ig$.theme_id||""},mbody:d,meta_type:"report"},r,r.rrequestPivotResult,function(e){c&&c.execute({xdoc:e,iserror:!0})},[a,n,p,c,m,$,v]),_.send()},rrequestPivotResult:function(e,t){var o=new IG$.clResults(e),r=t[0],i=t[1],s=t[2],l=t[3],a=t[4],n=t[5],p=t[6],d=t[7];if(o._job=a,o._is_sc=n,o._hcell=d,window.m$dor)try{window.m$dor(this,o)}catch(e){IG$.alertmsg(ig$.appname,IRm$.r1("M_ERR_C_REP_PROC"),null,this.panel,1,"error")}p||this.refreshControls(void 0,i,o,r,s),this.panel&&this.panel.setLoading(!1),l&&l.execute({iserror:!1,mresults:o})},requestUpdateReport:function(l,a,n,e,p,d){var h=this;h.panel.customLoad?h.panel.customLoad.call(h.panel,!0):h.panel.setLoading(!0,!0);var t=new IG$._rpc$;t.init(h.panel,{ack:"olapservice",payload:{option:"getjobid",djobid:h.panel.jobid||"",theme_id:ig$.theme_id||""},mbody:{}},h,function(e){var t,o="rolap"!=h.reportoption.reportmode&&"sql"==h.reportoption.reportmode?"sqlrun":"run",r=new IG$._rpc$,i=h.reportoption,s=e.uid;i&&i.poolname&&IG$.dbp[i.poolname]&&(t=IG$.dbp[i.poolname]),h.panel.jobid=s,r.init(h.panel,{ack:"olapservice",payload:{uid:this.uid?this.uid:"",option:o,active:""+n,pivotresult:"T",pwd:t,jobid:s||"",theme_id:ig$.theme_id||""},mbody:l,meta_type:"report"},h,h.rrequestUpdateReport,function(e){p&&p.execute({xdoc:e,iserror:!0})},[a,n,p,d]),r.send()},null),t.stoploading=!1,t.send()},rrequestUpdateReport:function(e,t){var o=this,r=t[0],i=t[1],s=t[2],l=t[3];o.panel.setLoading(!1);var a=new IG$.clResults(e);if(window.m$dor)try{window.m$dor(this,a)}catch(e){IG$.alertmsg(ig$.appname,IRm$.r1("M_ERR_C_REP_PROC"),null,this.panel,1,"error")}o.jobid=a.jobid,o.panel.jobid=o.jobid,o.refreshControls(void 0,i,a,l,r),s&&s.execute()},refreshControls:function(e,t,o,r,i){var s,l,a=this;if(r&&r.drawChartResult){var n=$(r.container),p=IG$.j$ext._w(n),d=IG$.j$ext._h(n);r.mresult=o.results[0];var h=r.drawChartResult.call(r,p,d);if(r.drawchart=h,1==r.isHighChart)for(r.disposeContent.call(r,r),s=0;s<h.length;s++)l=new Highcharts.Chart(h[s]),r._masterCharts.push(l)}else if(r&&r.drawOlapResult)r.mresult=o.results[0],r.drawOlapResult.call(r);else if("report"==this.ctrlsource)e=a.reportoption.sheets[t].model.viewmode,a.reportoption.sheets[t].mresults=o,1!=a.panel.__dx&&a.panel.drawResults.call(a.panel,e,o);else if("dashboard"==this.ctrlsource)switch(a.sheet.reportoption=a.reportoption,a.sheet.sheetoption=a.reportoption.sheets[0],a.sheet.sheetoption.model.viewmode=i||a.sheet.sheetoption.model.viewmode,a.sheet.sheetoption.model.viewmode){case"grid":a.sheet.changeView.call(a.sheet,0),a.sheet.procLoadResult.call(a.sheet,o);break;case"chart":case"r":a.sheet.changeView.call(a.sheet,1),a.sheet.procLoadResult.call(a.sheet,o)}}};
IG$.dynFilterConfig=$s.extend($s.window,{modal:!0,region:"center",layout:{type:"fit",align:"stretch"},closable:!1,resizable:!1,width:500,height:450,callback:null,init_f:function(){var e,t,a,l,i,n=this,o=n.pitem.model,d=(n.down("[name=objtype]"),n.down("[name=tabid]")),s=n.down("[name=l_codemap]"),m=[],r={},u=n.down("[name=periodlist]"),c=(n.down("[name=checkbuttonhor]"),n.down("[name=fmode]")),p=n.dzone,b=[];if(IG$.defaults(o,{smode:"codevalue",dateseltype:"date",yearfrom:"cyear-5",yearto:"cyear",colspan:0}),n._selchange=1,n.setAllValues(o),n._selchange=0,n.down("[name=objname]").setValue(o.objectid||o.name),n.initial_values=o.initial_values,n.setFilterDesc(n.down("[name=defaultvalue_desc]")),d.setVisible("viewselector"==o.type),s.setVisible("viewselector"!=o.type),n.down("[name=btn_obj]")[o.uid?"show":"hide"](),p){for(e=0;e<p.items.length;e++)"TAB"==(l=p.items[e]).objtype&&b.push({label:l.title||l.docid,value:l.docid});d.store.loadData(b),d.setValue(o.tabid)}for(e=0;e<IG$.dynFilterDateConfig.data.length;e++)m.push({name:IG$.dynFilterDateConfig.data[e].name,value:IG$.dynFilterDateConfig.data[e].value,selected:!1,isdefault:!1}),r[IG$.dynFilterDateConfig.data[e].value]=e+1;if(u.store.loadData(m),n.down("[name=showperiodselector]").setValue(o.showperiodselector),o.periodlist)for(e=0;e<o.periodlist.length;e++)(a=r[(t=o.periodlist[e]).value])&&(u.store.data.items[a-1].set("selected",!0),1==t.isdefault&&u.store.data.items[a-1].set("isdefault",!0));n.down("[name=cmap_disp]").setValue(o.codemapping?o.codemapping.lname||o.codemapping.name:null),c.hide(),o.uid&&((i=new IG$._rpc$).init(n,{ack:"helpcontent",payload:{uid:o.uid},mbody:{option:"translate"}},n,function(e){e&&e.length&&$("input",n.down("[name=objname]").el.dom).attr("title",e[0].nodepath)}),i.send()),n.updateLayout()},_confirm:function(){var e,t,a=this,l=a.pitem,i=l.model,n=(a.down("[name=objtype]"),a.down("[name=periodlist]")),o=(a.down("[name=tabid]"),!1),d=a.down("[name=objname]").getValue();for(l.validated=!1,a.getAllValues(i),"prompt"==i.type.toLowerCase()?i.name=d:i.objectid=i.name==d?null:d,i.periodlist=[],i.initial_values=a.initial_values,e=0;e<n.store.data.items.length;e++)1!=(t=n.store.data.items[e]).get("selected")&&1!=t.get("isdefault")||(i.periodlist.push({name:t.get("name"),value:t.get("value"),isdefault:1==t.get("isdefault")&&0==o}),1==t.get("isdefault")&&(o=!0));0==o&&0<i.periodlist.length&&(i.periodlist[0].isdefault=!0),a.callback&&a.callback.execute(),a.close()},updateLayout:function(){var e=this,t=e.down("[name=objtype]").getValue();e.down("[name=showpopup]").setVisible("checkbox"==t||"combobox"==t),e.down("[name=rangevalue]").setVisible("text"==t||"combobox"==t),e.down("[name=smode]").setVisible("checkbox"==t||"combobox"==t),e.down("[name=checkbuttonhor]").setVisible("checkbuttons"==t||"radiobuttons"==t),e.down("[name=periodset]").setVisible("calendarperiod"==t),e.down("[name=s1]").setVisible("slider"==t)},showValueEditor:function(e){var t,a=this.pitem.model,l=a.codemapping,i={callback:new IG$.callBackObj(this,function(e,t){var a=this,l=a.down("[name="+t+"]");e&&0<e.length&&(a.initial_values=e),a.setFilterDesc(l)},e)};"prompt"==a.type&&!a.codemapping||(l?i.field={uid:l.uid,name:l.name,type:l.type}:a.uid&&(i.field={uid:a.uid,type:a.type,name:a.name})),t=new IG$.valueSelectWindow(i),IG$.checkLogin(this,t)},setFilterDesc:function(e){var t=this,a=[];if(t.initial_values&&t.initial_values.length)for(i=0;i<t.initial_values.length;i++)a.push(t.initial_values[i].text||t.initial_values[i].code);e.setValue(a.join(","))},initComponent:function(){var e=this,t=0;switch(e.filter_options.f_viewtype||""){case"row":t=1;break;case"table":t=2}e.title=IRm$.r1("T_DYNFILTER_CONFIG"),$s.apply(this,{defaults:{bodyStyle:"padding:10px"},items:[{xtype:"panel",layout:"anchor",autoScroll:!0,bodyBorder:!1,bodyPadding:10,items:[{xtype:"fieldset",title:"General Info",layout:"anchor",fieldDefaults:{labelWidth:130,anchor:"100%"},items:[{name:"fuid",fieldLabel:"FUID",xtype:"textfield",readOnly:!0},{xtype:"fieldcontainer",layout:{type:"hbox",align:"stretch"},items:[{name:"objname",fieldLabel:"Object ID",xtype:"textfield",required:!0},{xtype:"button",text:"..",name:"btn_obj",handler:function(){var e=new IG$._rpc$;e.init(this,{ack:"helpcontent",payload:{uid:this.pitem.model.uid,parenttype:"Bobject",read:"F"},mbody:{option:"parentcontent"}},this,function(e){var t,a=e&&e.length?e[0]:null;a?(t=new IG$.metaSelectDlg({visibleItems:"userdb;table;inlineview;folder;metric;custommetric;measure",tree_options:{cubebrowse:!0,rootuid:a.uid},callback:new IG$.callBackObj(this,function(e){var t=this;t.pitem.model.uid=e.uid,$("input",t.down("[name=objname]").el.dom).attr("title",e.nodepath),t.pitem.model.name==t.down("[name=objname]").getValue()&&t.down("[name=objname]").setValue(e.name),t.pitem.model.name==t.down("[name=title]").getValue()&&t.down("[name=title]").setValue(e.name)})}),IG$.checkLogin(this,t)):IG$.alertmsg(ig$.appname,"Target item not found",null,null,0,"error")},null),e.send()},scope:this}]},{name:"title",fieldLabel:IRm$.r1("B_TITLE"),xtype:"textfield"},{name:"operator",fieldLabel:IRm$.r1("B_OP"),xtype:"combobox",displayField:"name",valueField:"value",store:{fields:[],data:[{name:"Equal",value:"EQ"},{name:"Not Equal",value:"NE"},{name:"In",value:"IN"},{name:"Greater or Equal",value:"GTE"},{name:"Less or Equal",value:"LTE"},{name:"Greater",value:"GT"},{name:"Lesser",value:"LT"},{name:"Like",value:"LIKE"},{name:"Between",value:"BETWEEN"},{name:"Not In",value:"NOTIN"}]}}]},{xtype:"fieldset",title:"Value Controls",layout:"anchor",fieldDefaults:{labelWidth:130,anchor:"100%"},items:[{name:"objtype",fieldLabel:IRm$.r1("L_FLT_VAL_SEL"),xtype:"combobox",labelAlign:"left",valueField:"value",displayField:"label",editable:!1,queryMode:"local",autoSelect:!0,store:{fields:["label","value"],data:[{label:"TextInput",value:"text"},{label:"Single Selection",value:"combobox"},{label:"Multi Selection",value:"checkbox"},{label:"Radio buttons",value:"radiobuttons"},{label:"Check buttons",value:"checkbuttons"},{label:"Slider",value:"slider"},{label:"Calendar",value:"calendar"},{label:"Period",value:"calendarperiod"},{label:"File Upload",value:"fileupload"}]},listeners:{change:function(e,t,a,l){var i,n=this,o=n.down("[name=rangevalue]"),d=n.down("[name=brangelabel]"),s=n.down("[name=bfL]"),m=n.down("[name=bfM]"),r=n.down("[name=objtype]").getValue(),u=n.down("[name=operator]"),c=u.getValue();switch(t){case"text":"BETWEEN"!=c&&"IN"!=c&&"NOTIN"!=c||(i="LIKE");break;case"combobox":case"radiobuttons":"BETWEEN"!=c&&"LIKE"!=c||(i="EQ");break;case"checkbox":case"checkbuttons":"IN"!=c&&"NOTIN"!=c&&(i="IN");break;case"slider":case"calendarperiod":"BETWEEN"!=c&&(i="BETWEEN");break;case"fileupload":"IN"!=c&&"NOTIN"!=c&&(i="IN")}i&&!n._selchange&&u.setValue(i),s.setVisible("fileupload"==r),m.setVisible("calendar"==r||"calendarperiod"==r),d.setVisible(("text"==r||"combobox"==r)&&o.getValue()||"calendarperiod"==r),n.updateLayout()},scope:this}},{name:"caseinsensitive",xtype:"checkbox",fieldLabel:IRm$.r1("L_FLT_CASE_INS"),boxLabel:IRm$.r1("B_ENABLED")},{name:"fmode",xtype:"displayfield",value:"",hidden:!0},{name:"showpopup",fieldLabel:IRm$.r1("L_FLT_POP_DLG"),xtype:"checkbox",boxLabel:IRm$.r1("B_ENABLED"),hidden:!0,listeners:{change:function(e){var t=e.getValue();this.down("[name=rangevalue]").setDisabled(t),this.down("[name=smode]").setDisabled(!t)},scope:this}},{name:"smode",hidden:!0,fieldLabel:IRm$.r1("L_FLT_VMODE"),xtype:"combobox",valueField:"value",displayField:"label",editable:!1,queryMode:"local",autoSelect:!0,store:{fields:["label","value"],data:[{label:"Code Value",value:"codevalue"},{label:"Value",value:"value"},{label:"Code",value:"code"},{label:"Value Code",value:"valuecode"}]}},{name:"rangevalue",fieldLabel:IRm$.r1("L_FLT_RNG_VAL"),xtype:"checkbox",boxLabel:IRm$.r1("B_ENABLED")+"(From - To)",hidden:!0,listeners:{change:function(e){var t=this.down("[name=brangelabel]"),a=this.down("[name=objtype]").getValue();t.setVisible(e.getValue()||"calendarperiod"==a)},scope:this}},{xtype:"fieldcontainer",name:"brangelabel",hidden:!0,layout:{type:"vbox",align:"stretch"},items:[{xtype:"textfield",name:"rangelabel",fieldLabel:IRm$.r1("L_FLT_RNG_TXT")},{xtype:"displayfield",value:"(Ex: From^~^To to {From ---------- ~ To ----------}} : text is left"},{xtype:"displayfield",value:"(Ex: _From^~^_To to {---------- From ~ ---------- To}} : text is right"}]},{name:"isnecessary",fieldLabel:IRm$.r1("L_FLT_NEC"),xtype:"checkbox",boxLabel:IRm$.r1("B_ENABLED")},{name:"showallvalue",fieldLabel:IRm$.r1("L_FLT_SEL_ALL"),xtype:"checkbox",boxLabel:IRm$.r1("B_ENABLED")},{name:"aname",fieldLabel:IRm$.r1("L_FLT_SEL_TXT"),xtype:"textfield"},{name:"hfilter",fieldLabel:IRm$.r1("L_FLT_HIE_FLT"),xtype:"textfield"},{xtype:"fieldcontainer",layout:"hbox",fieldLabel:IRm$.r1("L_FLT_FMT_VAL"),items:[{name:"valueformat",xtype:"textfield"},{xtype:"button",text:"Example",menu:{items:[{text:"substring",handler:function(){e.down("[name=valueformat]").setValue("#helper.substring(value, 0, 4)")},scope:this},{text:"system date",handler:function(){e.down("[name=valueformat]").setValue("#helper.systemDate('yyyyMMdd')")},scope:this},{text:"value template",handler:function(){e.down("[name=valueformat]").setValue("${value}")},scope:this}]}}]},{name:"useprompt",fieldLabel:IRm$.r1("L_FLT_U_PROMPT"),xtype:"checkbox",boxLabel:IRm$.r1("B_ENABLED")},{xtype:"combobox",name:"tabid",hidden:!0,fieldLabel:IRm$.r1("L_FLT_TAB_PNL"),valueField:"value",displayField:"label",editable:!1,queryMode:"local",autoSelect:!0,store:{fields:["label","value"]}},{xtype:"fieldcontainer",fieldLabel:IRm$.r1("L_FLT_LOOKUP"),hidden:!0,name:"l_codemap",layout:"hbox",items:[{xtype:"textfield",readOnly:!0,name:"cmap_disp",flex:1},{xtype:"button",text:"..",handler:function(){var e=new IG$.metaSelectDlg({visibleItems:"folder;codemap",tree_options:{cubebrowse:!0,rootuid:"/SYS_Lookup"},callback:new IG$.callBackObj(this,function(e){this.pitem.model.codemapping={uid:e.uid,name:e.name,type:e.type},this.down("[name=cmap_disp]").setValue(e.name)})});IG$.checkLogin(this,e)},scope:this},{xtype:"button",text:IRm$.r1("B_CLEAR"),handler:function(){this.down("[name=cmap_disp]").setValue(""),this.pitem.model.codemapping=null},scope:this}]},{xtype:"fieldcontainer",fieldLabel:IRm$.r1("L_FLT_DEF_VAL"),layout:{type:"hbox",align:"stretch"},items:[{xtype:"textfield",readOnly:!0,name:"defaultvalue_desc"},{xtype:"button",name:"defaultvalue_btn",text:"..",width:20,handler:function(){this.showValueEditor("defaultvalue_desc")},scope:this}]}]},{xtype:"fieldset",title:"File Upload Settings",name:"bfL",hidden:!0,layout:"anchor",items:[{xtype:"checkbox",fieldLabel:"Upload File",boxLabel:"Eneabled"},{xtype:"checkbox",fieldLabel:"Show File History",boxLabel:"Enabled"},{xtype:"checkbox",fieldLabel:"Show All Files",boxLabel:"Enabled (Other user's upload file)"},{xtype:"checkbox",fieldLabel:"Multiple Files",boxLabel:"Allow multiple file upload"}]},{xtype:"fieldset",title:"Layout",items:[{name:"compcss",fieldLabel:"CSS Name",xtype:"textfield"},{name:"start_row",fieldLabel:IRm$.r1("L_FLT_START_ROW"),xtype:"checkbox",hidden:0!=t,boxLabel:IRm$.r1("B_ENABLED")},{name:"merge_left",fieldLabel:IRm$.r1("L_FLT_MERGE_LEFT"),xtype:"checkbox",hidden:0!=t,boxLabel:IRm$.r1("B_ENABLED")},{name:"auto_width",fieldLabel:IRm$.r1("L_FLT_AUTO_WIDTH"),xtype:"checkbox",hidden:0!=t,boxLabel:IRm$.r1("B_ENABLED")},{name:"colspan",fieldLabel:IRm$.r1("L_FLT_COLSPAN"),hidden:0!=t,xtype:"numberfield"},{name:"objmerge",fieldLabel:"Merge column",xtype:"numberfield",hidden:0==t,minValue:0,maxValue:10},{name:"crowindex",fieldLabel:"Row Location",xtype:"numberfield",hidden:0==t,minValue:0,maxValue:10},{xtype:"checkbox",name:"checkbuttonhor",fieldLabel:IRm$.r1("L_FLT_CHECK_LAYOUT"),boxLabel:"Horizontal"}]},{xtype:"fieldset",title:"Slider Options",name:"s1",hidden:!0,layout:"anchor",items:[{xtype:"textfield",name:"s1a",fieldLabel:"Minimum"},{xtype:"textfield",name:"s1b",fieldLabel:"Maximum"},{xtype:"textfield",name:"s1c",fieldLabel:"Step Increase"}]},{xtype:"fieldset",title:"Date Time setup",name:"bfM",hidden:!0,layout:"anchor",items:[{xtype:"combobox",queryMode:"local",fieldLabel:IRm$.r1("L_FLT_DT_SEL_TYP"),editable:!1,name:"dateseltype",store:{fields:["name","value"],data:[{name:"Select Date",value:"date"},{name:"Select Month",value:"month"},{name:"Select Year",value:"year"}]},displayField:"name",valueField:"value"},{xtype:"textfield",fieldLabel:IRm$.r1("L_FLT_YEAR_FR"),name:"yearfrom"},{xtype:"textfield",fieldLabel:IRm$.r1("L_FLT_YEAR_TO"),name:"yearto"}]},{xtype:"fieldset",name:"periodset",title:"Period setup",layout:"anchor",defaults:{anchor:"100%"},items:[{xtype:"checkbox",fieldLabel:IRm$.r1("L_FLT_SHOW_DT_SEL"),boxLabel:IRm$.r1("B_SHOW"),name:"showperiodselector"},{xtype:"textfield",fieldLabel:IRm$.r1("L_FLT_DT_START"),name:"startdate"},{xtype:"textfield",fieldLabel:IRm$.r1("L_FLT_DT_END"),name:"enddate"},{xtype:"gridpanel",name:"periodlist",height:120,store:{xtype:"store",fields:["name","value","selected","isdefault"]},columns:[{xtype:"checkcolumn",text:"Show",width:40,dataIndex:"selected"},{xtype:"checkcolumn",text:"Default",width:50,dataIndex:"isdefault"},{xtype:"gridcolumn",text:"Name",flex:1,dataIndex:"name"}],listeners:{headerclick:function(e,t,a,l,i){}}}]},{xtype:"fieldset",title:"Extra Options",layout:"anchor",defaults:{anchor:"100%"},items:[{xtype:"textfield",fieldLabel:IRm$.r1("L_FLT_INV_JS"),hidden:!0,name:"invokejs"},{xtype:"textfield",fieldLabel:IRm$.r1("L_FLT_SHOW_WHEN"),name:"showcondition"},{xtype:"textarea",fieldLabel:IRm$.r1("L_FLT_SHOW_WHEN_VALUES"),name:"pvalues"}]}]}],buttons:[{text:IRm$.r1("B_CONFIRM"),handler:function(){this._confirm()},scope:this},{text:IRm$.r1("B_CANCEL"),handler:function(){this.close()},scope:this}],listeners:{afterrender:function(e){this.init_f()}}}),IG$.dynFilterConfig.superclass.initComponent.apply(this,arguments)}}),IG$.drill_config=$s.extend($s.window,{modal:!0,region:"center",layout:"fit",closable:!1,resizable:!1,width:500,height:450,callback:null,init_f:function(){var e,t,a,l,i=this.sop.model,n=this.rec,o=this.down("[name=dp1]"),d=this.down("[name=dp2]"),s=[],m=[],r=n.get("titem"),u={},c=0,p=0,b=n.get("tparams"),h={};if(i){if(r)for(e=r.split("_"),l=0;l<e.length;l++)e[l]&&(u[e[l]]=1);if(b)for(e=b.split("_"),l=0;l<e.length;l++)e[l]&&(h[e[l]]=1);for(l=0;l<i.rows.length;l++)t={uid:i.rows[l].uid,name:i.rows[l].name,sel:!!u[i.rows[l].uid]},a={uid:i.rows[l].uid,name:i.rows[l].name,sel:!!h[i.rows[l].uid]},t.sel&&(c=1),a.sel&&(p=1),s.push(t),m.push(a);if("M_PIVOT"==i.dataquerymode){for(l=0;l<i.cols.length;l++)t={uid:i.cols[l].uid,name:i.cols[l].name,sel:!!u[i.cols[l].uid]},a={uid:i.cols[l].uid,name:i.cols[l].name,sel:!!h[i.cols[l].uid]},t.sel&&(c=1),a.sel&&(p=1),s.push(t),m.push(a);for(l=0;l<i.measures.length;l++)(t={uid:i.measures[l].uid,name:i.measures[l].name,sel:!!u[i.measures[l].uid]}).sel&&(c=1),s.push(t)}}if(!c)for(l=0;l<s.length;l++)s[l].sel=!0;if(!p)for(l=0;l<m.length;l++)m[l].sel=!0;o.store.loadData(s),d.store.loadData(m)},_confirm:function(){for(var e,t=this.rec,a=this.down("[name=dp1]"),l=this.down("[name=dp2]"),i=[],n=[],o=0,d=0,s=0;s<a.store.data.items.length;s++)(e=a.store.data.items[s]).get("sel")?i.push(e.get("uid")):o=1;for(s=0;s<l.store.data.items.length;s++)(e=l.store.data.items[s]).get("sel")?n.push(e.get("uid")):d=1;o||(i=[]),d||(n=[]),t.set("titem",i.length?i.join("_"):null),t.set("tparams",n.length?n.join("_"):null),this.close()},initComponent:function(){$s.apply(this,{title:IRm$.r1("T_DRILL_CONFIG"),defaults:{bodyStyle:"padding:10px"},items:[{xtype:"panel",layout:{type:"vbox",align:"stretch"},bodyBorder:!1,items:[{xtype:"fieldset",title:IRm$.r1("L_DRILL_ON"),flex:1,layout:{type:"vbox",align:"stretch"},items:[{xtype:"gridpanel",name:"dp1",flex:1,store:{fields:["name","uid","sel"]},columns:[{xtype:"checkcolumn",dataIndex:"sel",width:50},{text:IRm$.r1("B_NAME"),dataIndex:"name",flex:1}]},{xtype:"displayfield",value:IRm$.r1("L_DRILL_ON_DESC"),autowidth:!1}]},{xtype:"fieldset",title:IRm$.r1("L_DRILL_PARAM"),flex:1,layout:{type:"vbox",align:"stretch"},items:[{xtype:"gridpanel",name:"dp2",flex:1,store:{fields:["name","uid","sel"]},columns:[{xtype:"checkcolumn",dataIndex:"sel",width:50},{text:IRm$.r1("B_NAME"),dataIndex:"name",flex:1}]},{xtype:"displayfield",value:IRm$.r1("L_DRILL_PARAM_DESC"),autowidth:!1}]}]}],buttons:[{text:IRm$.r1("B_CONFIRM"),handler:function(){this._confirm()},scope:this},{text:IRm$.r1("B_CANCEL"),handler:function(){this.close()},scope:this}],listeners:{afterrender:function(e){this.init_f()}}}),IG$.drill_config.superclass.initComponent.apply(this,arguments)}});
IG$.burst_config=$s.extend($s.window,{modal:!0,region:"center",layout:"fit",closable:!1,resizable:!1,width:500,height:450,callback:null,init_f:function(){var e=this,l=(e.reportoption&&e.reportoption._mc,e.sheetoption.model),t="M_DATA"==l.dataquerymode?["rows"]:["rows","cols","measures"],o=e.down("[name=email_field]"),i=e.down("[name=link_field]"),s=[],a=[{name:"Select Item",value:null}];e.down("[name=_mviewer_]");l.formbuilder=l.formbuilder||IG$.formViewerDefault,$.each(t,function(e,t){var o,i,n=l[t];if(n)for(o=0;o<n.length;o++)(i=IG$.copyObject(n[o])).iconcls=IG$.get_metatype_icon(i.type.toLowerCase(),i),s.push(i),a.push(i)}),o.store.loadData(a),i.store.loadData(a),e.setAllValues(l.formbuilder)},_confirm:function(){for(var e,t=this,o=t.rec,i=t.down("[name=dp1]"),n=t.down("[name=dp2]"),l=[],s=[],a=0;a<i.store.data.items.length;a++)(e=i.store.data.items[a]).get("sel")&&l.push(e.get("uid"));for(a=0;a<n.store.data.items.length;a++)(e=n.store.data.items[a]).get("sel")&&s.push(e.get("uid"));o.set("titem",l.length?l.join("_"):null),o.set("tparams",s.length?s.join("_"):null),t.close()},initComponent:function(){$s.apply(this,{title:IRm$.r1("T_BURST_CONFIG"),defaults:{bodyStyle:"padding:10px"},items:[{xtype:"panel",layout:{type:"vbox",align:"stretch"},bodyBorder:!1,items:[{xtype:"fieldset",title:IRm$.r1("L_DRILL_ON"),flex:1,layout:{type:"vbox",align:"stretch"},items:[{xtype:"gridpanel",name:"dp1",flex:1,store:{fields:["name","uid","sel"]},columns:[{xtype:"checkcolumn",dataIndex:"sel",width:50},{text:IRm$.r1("B_NAME"),dataIndex:"name",flex:1}]},{xtype:"displayfield",value:IRm$.r1("L_DRILL_ON_DESC"),autowidth:!1}]}]}],buttons:[{text:IRm$.r1("B_CONFIRM"),handler:function(){this._confirm()},scope:this},{text:IRm$.r1("B_CANCEL"),handler:function(){this.close()},scope:this}],listeners:{afterrender:function(e){this.init_f()}}}),IG$.burst_config.superclass.initComponent.apply(this,arguments)}});
IG$.sheetobj=$s.extend($s.window,{modal:!0,layout:"fit",closable:!1,resizable:!0,width:600,height:570,sheetindex:-1,pffi_items:["operator","name","objectid","nodepath","uid","objtype","title","type","isnecessary","description","defaultvalue","initial_values","objmerge","useprompt","showallvalue","hfilter","valueformat","aname","showpopup","caseinsensitive","rangevalue","label","rangelabel","smode","crowindex","start_row","merge_left","compcss","dateseltype","yearfrom","yearto","startdate","invokejs","colspan","showcondition","pvalues","useprevcont","showperiodselector","tabid","s1a","s1b","s1c","codemapping","f_uid","periodlist","fuid"],init_f:function(){var e,t,a,l,i,o,n,d,s,r,m,p,_,c,b,h,u,f=this,x=f.dzone,y=[],g={},L=f.sheets,w=f.reportoption._mc,I=f.sheetoption,E=I?I.model:null,R=w?w.export_option:null,v=[],T=f.down("[name=cubeuid]"),B=f.down("[name=objtype]"),A=f.down("[name=tcontent]"),V=f.down("[name=tb_prt_i]"),N=f.down("[name=grd_detail_spec]"),S=ig$.sheet_toolbar;if(f.isnewobject&&!I&&("SHEET"!=f.objtype?f.sheetoption=I=new IG$.sheetfiltercomp(null):f.sheetoption=I=new IG$.clReport(null,w.itemtype,!1),(E=I.model).objtype=f.objtype),w&&w.cube_objects){for(H=0;H<w.cube_objects.length;H++)n=w.cube_objects[H],v.push({uid:n.uid,name:n.name,locale_name:n.locale_name,type:n.type,nodepath:n.nodepath});T.store.loadData(v),E.cube_object&&E.cube_object.uid?T.setValue(E.cube_object.uid):1==w.cube_objects.length&&T.setValue(w.cube_objects[0].uid)}if(f.down("[name=p_general]").setAllValues(E),f.down("[name=opt_tab]").setAllValues(E),f.down("[name=opt_report]").setAllValues(E),f.down("[name=opt_text]").setAllValues(E),f.down("[name=opt_viewer]").setAllValues(E),f.down("[name=opt_filter]").setAllValues(E.filter_options),f.down("[name=pnldetail]").setAllValues(E),f.down("[name=opt_panel]").setAllValues(E),f.down("[name=edrill]").setValue(E.edrill),f.down("[name=enablecache]").setValue(E.enablecache||""),1!=f.createMode&&(l="SHEET"==E.objtype?E.layoutinfo.docid:E.docid,(i=x.getBox.call(x,l))&&(f.down("[name=panelwidth]").setValue(i.width||100),f.down("[name=panelheight]").setValue(i.height||100)),0==f.sheetindex&&(E.name=E.name||"",B.setVisible(!1)),f.down("[name=docid]").setValue(l),B.setValue(E.objtype||f.objtype||"SHEET")),w&&f.down("[name=ploader]").setValue(!!w.ploader),"FILTER"==E.objtype&&V.store.loadData([]),R&&$.each(["excel","pdf","csv"],function(e,t){R["u_"+t]&&V.store.add({showitem:!1,name:"Builtin ("+t+")",key:t})}),R&&R.u_office&&R.otmpl&&$.each(R.otmpl,function(e,t){V.store.add({showitem:!1,name:"Office "+(t.export_type?"-"+t.export_type+" ":"")+"("+t.description+": "+t.name+")",key:"office_"+e})}),R&&R.u_jasper&&R.jasper&&R.jasper.jasper_template&&$.each(["pdf","rtf","ppt","excel","xlsx","docx","html","xml"],function(e,t){"T"==R.jasper[t+"_output"]&&V.store.add({showitem:!1,name:"JASPER ("+t.toUpperCase()+")",key:"jasper_"+t})}),S&&S.length)for(H=0;H<S.length;H++)V.store.add({showitem:!1,name:S[H].name,key:S[H].key});if(L){for(e=E.tb_prt_i?";"+E.tb_prt_i+";":"",t=(E.tb_prt_s?E.tb_prt_s:"").split(";"),H=a=0;H<V.store.data.items.length;H++)n=V.store.data.items[H],e&&-1<e.indexOf(";"+n.get("key")+";")?(n.set("style",t[a]),n.set("showitem",!0),a++):n.set("showitem",!1);if(o=E.filter_options?E.filter_options.drilltarget:E.drilltarget)for(H=0;H<o.length;H++)_=(c=o[H]).sid,u=c.usedrill,b=c.item,h=c.params,g[_]={isdrill:u,dtitem:b,dparams:h};for(H=0;H<L.length;H++)c=g["sheet_"+H]||null,E&&"SHEET"==E.objtype&&L[H].sheetoption==I||y.push({sid:"sheet_"+H,name:L[H].sheetoption.name||"sheet_"+H,sheetindex:L[H].sheetindex,reportname:w?w.name:"",usedrill:!!c&&c.isdrill,titem:c?c.dtitem:null,tparams:c?c.dparams:null});if(x)for(k in p=x.docitems)if(r=(d=p[k].lt.ubody).view,"RPT_VIEW"==d.objtype&&r&&r.irpt)for(H=0;H<r.irpt.sheets.length;H++)m=(s=r.irpt.sheets[H]).reportoption,s.sheetoption,c=g[m.uid+"_sheet_"+H]||null,y.push({sid:m.uid+"_sheet_"+H,name:m.name||"sheet_"+H,sheetindex:s.sheetindex,reportname:m?m.name:"",usedrill:!!c&&c.isdrill,titem:c?c.dtitem:null,tparams:c?c.dparams:null});N.store.loadData(y)}if(f.filter_items=[],E.objtype)if("FILTER"==E.objtype){E.filter_items&&$.each(E.filter_items,function(e,a){var l={};$.each(f.pffi_items,function(e,t){l[t]=a[t]}),l.title=l.title||l.name,l.operator=l.operator||"EQ",f.filter_items.push(l)});var D=f.down("[name=filteritems]"),O=f.filter_items,j=E.filter_options,F=[],P=f.down("[name=f_bx_sheets]"),M={};if(j){if(j.f_t_dir=j.f_t_dir||"left",j.buttonname=j.buttonname||"{L_BTN_SEARCH}",j.f_bx_name=j.f_bx_name||"{L_D_EXCEL}",j.f_valueset_title=j.f_valueset_title||"{L_BTN_VALUESET}",f.setAllValues(j),j.f_bx_sheets)for(H=0;H<j.f_bx_sheets.length;H++)M[j.f_bx_sheets[H]]=1}else f.down("[name=f_bx_name]").setValue("{L_D_EXCEL}");for(H=0;H<y.length;H++)M[y[H].sid]&&(y[H].sel_bx=!0);for(P.store.loadData(y),H=0;H<O.length;H++)C=O[H],F.push(C),C.f_uid=C.f_uid||"f_"+ ++f.f_uid;D.store.loadData(F)}else if("RPT_VIEW"==E.objtype)E.rptoption=E.rptoption||{},f.down("[name=rpt_name]").setValue(E.rptoption.name||"");else if("TEXT"==E.objtype)A.setValue(Base64.decode(E.content||"")),A.setHTMLValue&&A.setHTMLValue(Base64.decode(E.htmlcontent)||"");else if("SHEET"==E.objtype){for(var C,O=E.detailview,F=[],H=0;H<O.length;H++)C=O[H],F.push({name:C.name,uid:C.uid,type:C.type,nodepath:C.nodepath,showintab:C.showintab,titem:C.titem,tparams:C.tparams});f.down("[name=detailgrid]").store.loadData(F)}else if(("PANEL"==E.objtype||"TAB"==E.objtype)&&("PANEL"==E.objtype&&f.down("[name=playout]").setValue(E.playout||"V"),f.dzone)){l=E.docid;var G,U,F=[],W=(f.dzone.getBox.call(f.dzone,l),f.dzone.docitems[l]),z=E.tab_option?E.tab_option:E.tab_option={};if(f.down("[name=showtab]").setValue("F"!=z.showtab),W&&W.children.length){for(B.setReadOnly(!0),H=0;H<W.children.length;H++)G={name:(U=W.children[H].lt.ubody).title,docid:U.docid,width:U.width,height:U.height,position:U.position,fixed_width:U.fixed_width,fixed_height:U.fixed_height},F.push(G);f.down("[name=childoption]").store.loadData(F),f.down("[name=subtabs]").store.loadData(F)}}f.changeObjectType()},_confirm:function(e){var t,a,l,i,o,n,d,s,r,m,p,_=this,c=_.down("[name=tb_prt_i]"),b=_.down("[name=detailgrid]").store,h=_.dzone,u=_.down("[name=filteritems]"),f=_.down("[name=grd_detail_spec]"),x=[],y=_.reportoption._mc,g=_.sheetoption,L={},w=_.down("[name=cubeuid]");if(_.down("[name=p_general]").getAllValues(L),_.down("[name=opt_tab]").getAllValues(L),_.down("[name=opt_report]").getAllValues(L),_.down("[name=opt_text]").getAllValues(L),_.down("[name=opt_viewer]").getAllValues(L),_.down("[name=pnldetail]").getAllValues(L),_.down("[name=opt_panel]").getAllValues(L),L.edrill=_.down("[name=edrill]").getValue(),L.tcontent_h=_.down("[name=tcontent]").getHTMLValue(),y&&(y.ploader=_.down("[name=ploader]").getValue()?1:0),_.isnewobject&&("SHEET"!=L.objtype?_.sheetoption=g=new IG$.sheetfiltercomp(null):_.sheetoption=g=new IG$.clReport(null,y.itemtype,!1)),r=g.model=g.model||{},0<f.store.data.items.length)for(N=f.store.data.items,i=0;i<N.length;i++)s={sid:(l=N[i]).get("sid"),usedrill:l.get("usedrill"),item:l.get("titem"),params:l.get("tparams")},x.push(s);if(r.tab_option&&(r.tab_option.showtab=1==_.down("[name=showtab]").getValue()?"T":"F"),r.filter_items=r.filter_items||[],_.filter_items){for(r.filter_options={},_.down("[name=opt_filter]").getAllValues(r.filter_options),r.filter_options.drilltarget=x,r.filter_options.f_bx_sheets=[],p=r.filter_options.f_bx_sheets,N=_.down("[name=f_bx_sheets]").store.data.items,i=0;i<N.length;i++)N[i].get("sel_bx")&&p.push(N[i].get("sid"));for(r.filter_options.f_b_row=Math.min(r.filter_options.f_b_row,r.filter_options.f_r_size-1),r.filter_items=[],N=u.store.data.items,i=0;i<N.length;i++)n=N[i],o={},$.each(_.pffi_items,function(e,t){o[t]=n.get(t)}),r.filter_items.push(o)}if(B="SHEET"==r.objtype?r.layoutinfo.docid:g.docid,g.changetype=r.objtype!=L.objtype?r.objtype:null,r.objtype=L.objtype,"SHEET"==r.objtype){r.layoutinfo.docid=B;var I,E=w.getValue();for(i=0;i<w.store.data.items.length;i++)if(E==w.store.data.items[i].data.uid){I=w.store.data.items[i];break}r.cube_object=I?{uid:I.get("uid"),name:I.get("name"),type:I.get("type")}:null}else r.docid=B;for(g.name=_.name,r.name=L.name,r.hidetitle=L.hidetitle,r.isdistinct=L.isdistinct,r.openload=L.openload,r.enablecache=L.enablecache,r.columnfill=L.columnfill,r.hidemenu=L.hidemenu,r.tb_formview=L.tb_formview,r.tb_bursting=L.tb_bursting,r.tb_vch=L.tb_vch,r.tb_prt_grd=L.tb_prt_grd,r.tb_prt=L.tb_prt,r.drilltarget=x,r.edrill=L.edrill,r.enablecache=L.enablecache,r.viewchange=L.viewchange,r.toolbutton=L.toolbutton,r.content=Base64.encode(L.tcontent),r.htmlcontent=Base64.encode(L.tcontent_h||L.tcontent),r.fixed_width=L.fixed_width,r.fixed_height=L.fixed_height,r.panelwidth=L.panelwidth,r.panelheight=L.panelheight,r.tb_prt_i="",r.tb_prt_s="",m=0,N=c.store.data.items,i=0;i<N.length;i++)1==(l=N[i]).get("showitem")&&(r.tb_prt_i+=(r.tb_prt_i?";":"")+l.get("key"),r.tb_prt_s+=(0<m?";":"")+(l.get("style")||""),m++);if("SHEET"==r.objtype)for(r.detailview=[],i=0;i<b.data.items.length;i++)t=b.data.items[i],r.detailview.push({uid:t.get("uid"),name:t.get("name"),nodepath:t.get("nodepath"),sheetindex:t.get("sheetindex"),sheetname:t.get("sheetname"),showintab:t.get("showintab"),titem:t.get("titem"),tparams:t.get("tparams")});if(1!=_.createMode&&(d=h.getBox.call(h,B)),d){d.width=r.panelwidth,d.height=r.panelheight,d.fixed_width=r.fixed_width,d.fixed_height=r.fixed_height;var R,v,T=d.position;if(d.parent)for("TAB"==d.parent.objtype&&d.parent.view&&d.parent.view.validateItems.call(d.parent.view),i=0;i<d.parent.children.length;i++)(T==(R=(v=d.parent.children[i]).position)||"east"==T&&"west"==R||"west"==T&&"east"==R)&&(v.height=d.height);if("PANEL"==r.objtype){var B,A,V,N=_.down("[name=childoption]").store.data.items;for(i=0;i<N.length;i++)B=(l=N[i]).get("docid"),A=""==(A=l.get("width"))?null:Number(A),V=""==(V=l.get("height"))?null:Number(V),(a=h.getBox.call(h,B)).width=A,a.height=V,a.title=l.get("name");r.playout=_.down("[name=playout]").getValue(),d.playout=g.playout}else"TAB"==r.objtype&&d.view&&d.view.validateItems.call(d.view);h.updateDisplay.call(h)}_.callback&&_.callback.execute(_),e||_.close()},changeObjectType:function(){var e=this,t=(e.down("[name=__tab]"),e.down("[name=_ac_]")),a=e.down("[name=objtype]").getValue(),l=e.down("[name=detailview]");1==e.createMode?(e.setTabVisible(e.down("[name=opt_report]"),!1),e.setTabVisible(e.down("[name=opt_filter]"),!0),e.setTabVisible(e.down("[name=opt_text]"),!1),e.setTabVisible(e.down("[name=opt_viewer]"),!1),e.setTabVisible(l,!1),t.hide(),e.setTabVisible(e.down("[name=opt_panel]"),!1),e.setTabVisible(e.down("[name=opt_tab]"),!1),e.setTabVisible(e.down("[name=pnldetail]"),!1),e.down("[name=__tab]").getLayout().setActiveItem(e._tc.opt_filter)):(e.setTabVisible(e.down("[name=opt_report]"),"SHEET"==a),e.down("[name=opt_tbar]").setVisible("SHEET"==a||"FILTER"==a),e.down("[name=tb_vch]").setVisible("SHEET"==a),e.down("[name=tb_fviewcnt]").setVisible(ig$.features&&!ig$.features.ig_r_bursting&&"SHEET"==a),e.down("[name=tb_prt_grd]").setVisible("SHEET"==a),e.setTabVisible(e.down("[name=opt_filter]"),"FILTER"==a),e.setTabVisible(e.down("[name=opt_text]"),"TEXT"==a),e.setTabVisible(e.down("[name=opt_viewer]"),"RPT_VIEW"==a),e.setTabVisible(l,"SHEET"==a),"SHEET"==a&&t.show(),e.setTabVisible(e.down("[name=opt_panel]"),"PANEL"==a),e.setTabVisible(e.down("[name=opt_tab]"),"TAB"==a),e.setTabVisible(e.down("[name=pnldetail]"),"SHEET"==a||"FILTER"==a))},setTabVisible:function(e,t){e.tab&&e.tab[t?"show":"hide"](),e.tab||e.setVisible(t)},configFilterItem:function(e,t){var a=this,l=a.getFilterItem(e);new IG$.dynFilterConfig({filter_options:a.sheetoption.model.filter_options,pitem:{model:l},dzone:a.dzone,callback:new IG$.callBackObj(a,a.rconfigFilterItem,[l,e])}).show(a)},rconfigFilterItem:function(e){var t=e[0],a=e[1],l=this.down("[name=filteritems]").store.data.items[a];$.each(t.model,function(e,t){"id"!=e&&l.set(e,t)})},removeFilterItem:function(e,t){var a,l=this.filter_items,i=this.down("[name=filteritems]"),o=i.store.data.items[e],n=o.get("f_uid");for(i.store.remove(o),a=0;a<l.length;a++)if(l.f_uid==n){l.splice(a,1);break}},addDetailView:function(){var e=new IG$.metaSelectDlg({visibleItems:"folder;report",tree_options:{cubebrowse:!1},callback:new IG$.callBackObj(this,function(e){var t={uid:e.uid,name:e.name,nodepath:e.nodepath,type:e.type};this.down("[name=detailgrid]").store.add(t)})});IG$.checkLogin(this,e)},getFilterItem:function(e){for(var t=this.down("[name=filteritems]").getStore(),a=this.filter_items,l=t.data.items[e].get("f_uid"),i=0;i<a.length;i++)if(a[i].f_uid==l)return a[i];return null},gen_uid:function(){for(var e,t={},a=this.down("[name=filteritems]").getStore(),l=0;l<a.data.items.length;l++)t[a.data.items[l].get("f_uid")]=1;for(e="f_"+ ++this.f_uid;t[e];)e="f_"+ ++this.f_uid;return e},configureDrill:function(e){var t=this.sheetoption;new IG$.drill_config({sop:t,rec:e}).show(this)},showBurstingOption:function(){this.sheetoption;new IG$.burst_config({sheetoption:this.sheetoption,reportoption:this.reportoption}).show(this)},initComponent:function(){for(var i=this,e=[{name:"Equal",value:"EQ"},{name:"Not Equal",value:"NE"},{name:"In",value:"IN"},{name:"Greater or Equal",value:"GTE"},{name:"Less or Equal",value:"LTE"},{name:"Greater",value:"GT"},{name:"Lesser",value:"LT"},{name:"Like",value:"LIKE"},{name:"Between",value:"BETWEEN"},{name:"Not In",value:"NOTIN"}],l={},t=[],a=ig$.button_css,o=0;o<e.length;o++)l[e[o].value]=e[o].name;if(a&&a.length)for(t.push({name:"Select",value:""}),o=0;o<a.length;o++)t.push(a[o]);else t=[{name:"Select",value:""},{name:"pdf_1",value:"exp_pdf_1"},{name:"word_1",value:"exp_word_1"},{name:"word_2",value:"exp_word_2"},{name:"word_3",value:"exp_word_3"},{name:"word_4",value:"exp_word_4"},{name:"word_5",value:"exp_word_5"},{name:"word_6",value:"exp_word_6"},{name:"word_7",value:"exp_word_7"},{name:"ppt_1",value:"exp_ppt_1"},{name:"ppt_2",value:"exp_ppt_2"},{name:"ppt_3",value:"exp_ppt_3"},{name:"ppt_4",value:"exp_ppt_4"},{name:"excel_1",value:"exp_excel_1"},{name:"excel_2",value:"exp_excel_2"},{name:"csv",value:"idv-dk-btn-e-csv"},{name:"office",value:"idv-dk-btn-e-xls"}];i.f_uid=0,$s.apply(this,{title:IRm$.r1("T_SHEET_OPTION"),items:[{xtype:"tabpanel",deferredRender:!1,autoScroll:!1,name:"__tab",defaults:{bodyPadding:10},items:[{xtype:"panel",title:IRm$.r1("B_GENERAL"),autoScroll:!0,layout:"anchor",name:"p_general",bodyBorder:!1,hidden:1==i.createMode,defaults:{labelWidth:160,anchor:"100%"},items:[{name:"docid",fieldLabel:"Component ID",xtype:"textfield",readOnly:!0},{name:"name",fieldLabel:IRm$.r1("B_NAME"),xtype:"textfield"},{name:"objtype",fieldLabel:IRm$.r1("L_OBJECT_TYPE"),xtype:"combobox",labelAlign:"left",valueField:"value",displayField:"label",editable:!1,queryMode:"local",autoSelect:!0,store:{fields:["label","value"],data:[{label:"Sheet",value:"SHEET"},{label:"Filter",value:"FILTER"},{label:"Textblock",value:"TEXT"},{label:"Panel",value:"PANEL"},{label:"Tab",value:"TAB"},{label:"Report Viewer",value:"RPT_VIEW"}]},listeners:{change:function(e,t,a,l){this.changeObjectType()},scope:this}},{xtype:"fieldset",title:IRm$.r1("B_OPT_LAYOUT"),items:[{name:"ploader",fieldLabel:IRm$.r1("L_PG_LOADER"),xtype:"checkbox",boxLabel:IRm$.r1("B_ENABLED"),checked:!1},{name:"hidetitle",fieldLabel:IRm$.r1("L_HIDE_TITLE"),xtype:"checkbox",boxLabel:IRm$.r1("B_ENABLED"),checked:!1},{xtype:"fieldcontainer",layout:"hbox",items:[{fieldLabel:IRm$.r1("L_PANEL_W"),name:"panelwidth",xtype:"numberfield",min:50,max:3e3,value:200},{name:"fixed_width",xtype:"checkbox",boxLabel:IRm$.r1("L_FIXED_W"),checked:!1}]},{xtype:"fieldcontainer",layout:"hbox",items:[{fieldLabel:IRm$.r1("L_PANEL_H"),name:"panelheight",xtype:"numberfield",min:50,max:3e3,value:200},{name:"fixed_height",xtype:"checkbox",boxLabel:IRm$.r1("L_FIXED_H"),checked:!1}]}]},{xtype:"fieldset",title:IRm$.r1("L_OPT_TBAR"),name:"opt_tbar",hidden:!0,layout:{type:"vbox",align:"stretch"},items:[{xtype:"checkbox",name:"tb_formview",fieldLabel:IRm$.r1("L_TB_FORM_V"),boxLabel:IRm$.r1("B_ENABLED"),hidden:ig$.features&&ig$.features.ig_r_formb||!1},{xtype:"container",layout:{type:"hbox",align:"stretch"},name:"tb_fviewcnt",hidden:ig$.features&&ig$.features.ig_r_bursting||!1,items:[{xtype:"checkbox",name:"tb_bursting",fieldLabel:IRm$.r1("L_EMAIL_BURSTING"),boxLabel:IRm$.r1("B_ENABLED")},{xtype:"button",text:"Options",handler:function(){i.showBurstingOption()},scope:this},{xtype:"container",flex:1}]},{xtype:"checkbox",name:"tb_vch",fieldLabel:IRm$.r1("L_TB_VCH"),boxLabel:IRm$.r1("B_ENABLED")},{xtype:"checkbox",name:"tb_prt_grd",fieldLabel:IRm$.r1("L_TB_PRT_GRD"),boxLabel:IRm$.r1("B_ENABLED")},{xtype:"checkbox",name:"tb_prt",fieldLabel:IRm$.r1("L_TB_PRT"),boxLabel:IRm$.r1("B_ENABLED")},{xtype:"gridpanel",name:"tb_prt_i",title:IRm$.r1("L_TB_PRT_T"),height:200,store:{xtype:"store",fields:["name","showitem","key","style"],data:[]},plugins:{ptype:"cellediting",clicksToEdit:!0},columns:[{text:IRm$.r1("B_ENABLED"),xtype:"checkcolumn",dataIndex:"showitem",listeners:{checkchange:function(e,t,a,l){a&&this.down("[name=tb_prt]").setValue(!0)},scope:this}},{text:IRm$.r1("B_NAME"),flex:1,dataIndex:"name"},{text:"Style",flex:1,dataIndex:"style",editor:{xtype:"combobox",queryMode:"local",displayField:"name",valueField:"value",editable:!1,autoSelect:!0,store:{xtype:"store",fields:["name","value"],data:t}}}]}]}]},{xtype:"panel",title:IRm$.r1("B_PROPERTY"),name:"opt_tab",autoScroll:!0,layout:"anchor",bodyBorder:!1,defaults:{labelWidth:160,anchor:"100%"},items:[{xtype:"checkbox",name:"showtab",fieldLabel:IRm$.r1("L_SHOW_TAB_BAR"),boxLabel:IRm$.r1("B_ENABLED")},{xtype:"gridpanel",name:"subtabs",height:120,store:{xtype:"store",fields:["docid","position","width","height","fixed_width","fixed_height","name"]},columns:[{xtype:"gridcolumn",text:IRm$.r1("B_NAME"),dataIndex:"name",flex:1,editor:{xtype:"textfield",allowBlank:!0}},{xtype:"gridcolumn",text:"docid",dataIndex:"docid"}]}]},{xtype:"panel",title:IRm$.r1("B_PROPERTY"),name:"opt_report",autoScroll:!0,layout:"anchor",bodyPadding:5,bodyBorder:!1,defaults:{labelWidth:160,anchor:"100%"},items:[{xtype:"fieldset",title:IRm$.r1("L_R_RUN_PROP"),defaults:{labelWidth:180},items:[{name:"openload",fieldLabel:IRm$.r1("L_ONLOAD_RUN"),xtype:"checkbox",boxLabel:IRm$.r1("B_ENABLED"),checked:!1},{xtype:"combobox",fieldLabel:IRm$.r1("L_USE_CACHE"),name:"enablecache",valueField:"value",displayField:"name",store:{data:[{name:"Default",value:""},{name:IRm$.r1("B_ENABLED"),value:"T"},{name:IRm$.r1("B_DISABLED"),value:"F"}]}},{name:"isdistinct",fieldLabel:IRm$.r1("L_DISTINCT_QUERY"),xtype:"checkbox",boxLabel:IRm$.r1("B_ENABLED"),checked:!1}]},{xtype:"fieldset",title:IRm$.r1("L_R_ANAL_CUBE"),layout:"anchor",defaults:{anchor:"100%"},items:[{fieldLabel:IRm$.r1("L_R_ANAL_CUBE_LBL"),name:"cubeuid",xtype:"combobox",editable:!1,queryMode:"local",valueField:"uid",displayField:"name",store:{fields:["name","uid"]}}]},{xtype:"fieldset",title:IRm$.r1("L_OPT_GRID"),name:"opt_grid",layout:"anchor",defaults:{anchor:"100%",labelWidth:160},items:[{name:"columnfill",fieldLabel:IRm$.r1("L_R_COLUMN_FIT"),xtype:"checkbox",boxLabel:IRm$.r1("B_ENABLED"),checked:!1},{name:"hidemenu",fieldLabel:IRm$.r1("L_GRID_HMENU"),xtype:"checkbox",boxLabel:IRm$.r1("B_ENABLED"),checked:!1}]},{xtype:"fieldset",title:"Dashboard option",hidden:!0,layout:"anchor",defaults:{anchor:"100%"},items:[{name:"viewchange",fieldLabel:IRm$.r1("L_SHOW_VIEW_CHANGE"),xtype:"checkbox",boxLabel:IRm$.r1("B_ENABLED")},{name:"toolbutton",fieldLabel:IRm$.r1("L_SHOW_TOOL_BUTTON"),xtype:"checkbox",boxLabel:IRm$.r1("B_ENABLED")}]}]},{xtype:"panel",name:"opt_text",title:IRm$.r1("B_PROPERTY"),layout:"fit",items:[{xtype:"htmleditor",name:"tcontent",enableColors:!0,enableAlignments:!0,enableFont:!0,enableFontSize:!0,enableFormat:!0,enableLinks:!0,enableLists:!0,enableSourceEdit:!0}]},{xtype:"panel",name:"opt_viewer",title:IRm$.r1("B_PROPERTY"),layout:{type:"vbox",align:"stretch"},items:[{xtype:"fieldset",title:IRm$.r1("L_RPT_V_OPT"),layout:"anchor",defaults:{anchor:"100%",labelWidth:160},items:[{xtype:"fieldcontainer",fieldLabel:"Report Address",layout:{type:"hbox",align:"stretch"},items:[{xtype:"textfield",name:"rpt_name",flex:1},{xtype:"button",text:"..",handler:function(){var e=new IG$.metaSelectDlg({visibleItems:"folder;report;",callback:new IG$.callBackObj(this,function(e){e&&(this.sheetoption.model.rptoption=e,this.down("[name=rpt_name]").setValue(e.name))})});IG$.checkLogin(this,e)},scope:this}]}]}]},{xtype:"panel",name:"opt_filter",title:IRm$.r1("B_PROPERTY"),layout:{type:"anchor",anchor:"100%",labelWidth:160},autoScroll:!0,items:[{xtype:"fieldset",title:"Filter Items",layout:{type:"vbox",align:"stretch"},items:[{xtype:"container",flex:1,anchor:"100%",layout:{type:"hbox",align:"stretch"},items:[{xtype:"gridpanel",name:"filteritems",flex:1,height:130,stateful:!1,store:{fields:[]},plugins:{ptype:"cellediting",clicksToEdit:!1},selType:"checkboxmodel",selModel:{checkSelector:".x-grid-cell",mode:"SINGLE"},columns:[{text:IRm$.r1("B_TITLE"),dataIndex:"title",sortable:!1,hideable:!1,flex:1,editor:{allowBlank:!0}},{text:IRm$.r1("B_NAME"),dataIndex:"name",sortable:!1,hideable:!1,tdCls:"igc-td-link",flex:1},{text:IRm$.r1("B_OP"),dataIndex:"operator",sortable:!1,hideable:!1,width:120,editor:{xtype:"combobox",queryMode:"local",displayField:"name",valueField:"value",editable:!1,autoSelect:!0,store:{xtype:"store",fields:["name","value"],data:e}},renderer:function(e,t,a){return l[e]}},{xtype:"actioncolumn",width:45,items:[{iconCls:"icon-grid-config",tooltip:"Detail Config",handler:function(e,t,a){i.configFilterItem.call(i,t,a)}},{iconCls:"icon-grid-delete",tooltip:"Remove",handler:function(e,t,a){i.removeFilterItem.call(i,t,a)}}]}],listeners:{cellclick:function(e,t,a,l,i,o,n,d){2==a&&this.configFilterItem.call(this,o,a)},scope:this}},{xtype:"container",layout:{type:"vbox",align:"stretch",pack:"center"},items:[{xtype:"button",iconCls:"icon-toolbar-moveup",tooltip:"Move Up",handler:function(){var e,t=this.down("[name=filteritems]"),a=t.getStore(),l=t.getSelectionModel().getSelection();l&&0<l.length&&0<(e=a.indexOf(l[0]))&&(a.remove(l[0]),l[0]=a.insert(e-1,l[0]))},scope:this},{xtype:"button",iconCls:"icon-toolbar-movedown",tooltip:"Move Down",handler:function(){var e,t=this.down("[name=filteritems]"),a=t.getStore(),l=t.getSelectionModel().getSelection();l&&0<l.length&&(e=a.indexOf(l[0]))+1<a.data.items.length&&(a.remove(l[0]),l[0]=a.insert(e+1,l[0]))},scope:this}]}]},{xtype:"container",layout:{type:"hbox",align:"stretch"},items:[{xtype:"container",flex:1},{xtype:"button",text:"Tab Selector",hidden:1==i.createMode,handler:function(){for(var e,t,a=this.down("[name=filteritems]").getStore(),l={},i=0,o=0;o<a.data.items.length;o++)l[a.data.items[o].get("name")]=1;for(e="viewselector_"+i;l[e];)e="viewselector_"+ ++i;t={name:e,type:"viewselector",selected:!1,operator:"LIKE",objtype:"combobox",f_uid:this.gen_uid()},this.filter_items.push(t),a.add(t)},scope:this},{xtype:"button",text:"Prompt",handler:function(){for(var e,t,a=this.down("[name=filteritems]").getStore(),l={},i=0,o=0;o<a.data.items.length;o++)l[a.data.items[o].get("name")]=1;for(e="prompt_"+i;l[e];)e="prompt_"+ ++i;t={name:e,type:"prompt",selected:!1,operator:"LIKE",objtype:"text",f_uid:this.gen_uid()},a.add(t),this.filter_items.push(t)},scope:this}]}]},{xtype:"fieldset",layout:{type:"vbox",align:"stretch"},title:"View Options",items:[{xtype:"checkbox",fieldLabel:IRm$.r1("L_RUN_BUTTON"),name:"showbutton",boxLabel:IRm$.r1("B_ENABLED"),listeners:{change:function(e,t,a,l){var i=this.down("[name=f_b_evt]"),o=this.down("[name=f_b_trg]"),n=this.down("[name=f_b_trg_all]");i.setDisabled(t),o.setDisabled(!t),n.setDisabled(!t)},scope:this}},{xtype:"textfield",fieldLabel:IRm$.r1("B_TEXT"),labelAlign:"right",name:"buttonname",value:IRm$.r1("L_BTN_SEARCH")},{xtype:"textfield",fieldLabel:IRm$.r1("B_DESC"),name:"f_b_desc"},{xtype:"combobox",editable:!1,fieldLabel:IRm$.r1("L_T_DIR"),name:"f_t_dir",queryMode:"local",valueField:"value",displayField:"name",store:{xtype:"store",fields:["name","value"],data:[{name:"Top",value:"top"},{name:"Left",value:"left"}]}},{xtype:"fieldcontainer",layout:{type:"hbox",align:"stretch"},items:[{xtype:"checkbox",name:"f_b_evt",disabled:!1,fieldLabel:IRm$.r1("L_BTN_EVT"),boxLabel:IRm$.r1("B_ENABLED")},{xtype:"displayfield",value:IRm$.r1("L_BTN_EVTDESC"),flex:1}]},{xtype:"fieldcontainer",layout:{type:"hbox",align:"stretch"},items:[{xtype:"checkbox",name:"f_b_trg",disabled:!0,fieldLabel:IRm$.r1("L_BTN_TRG"),boxLabel:IRm$.r1("B_ENABLED")},{xtype:"displayfield",value:IRm$.r1("L_BTN_TRGDESC"),flex:1}]},{xtype:"fieldcontainer",layout:{type:"hbox",align:"stretch"},items:[{xtype:"checkbox",name:"f_b_trg_all",disabled:!0,fieldLabel:IRm$.r1("L_BTN_TRG_ALL"),boxLabel:IRm$.r1("B_ENABLED")},{xtype:"displayfield",value:IRm$.r1("L_BTN_TRGALLDESC"),flex:1}]},{xtype:"textfield",name:"f_b_scr",fieldLabel:IRm$.r1("L_FLT_VAL_SCR")},{xtype:"checkbox",name:"f_b_clear",fieldLabel:IRm$.r1("L_CLEAR_FLT"),boxLabel:IRm$.r1("B_ENABLED")}]},{xtype:"fieldset",layout:{type:"vbox",align:"stretch"},title:"Filter Layout Options",items:[{xtype:"combobox",editable:!1,fieldLabel:IRm$.r1("L_VIEW_MODE"),name:"f_viewtype",queryMode:"local",valueField:"value",displayField:"name",store:{xtype:"store",fields:["name","value"],data:[{name:"Default",value:""},{name:"Table mode",value:"table"},{name:"Row mode",value:"row"}]},listeners:{change:function(e,t,a,l){var i=e.getValue();this.down("[name=f_c_size]").setEnabled("table"==i),this.down("[name=f_r_size]").setEnabled("row"==i),this.down("[name=f_b_row]").setEnabled("row"==i)},scope:this}},{xtype:"numberfield",name:"f_c_size",disabled:!0,fieldLabel:IRm$.r1("L_COL_SIZE"),minValue:1,maxValue:10,value:1},{xtype:"numberfield",name:"f_r_size",disabled:!0,fieldLabel:IRm$.r1("L_ROW_SIZE"),minValue:1,maxValue:10,value:1},{xtype:"numberfield",name:"f_b_row",disabled:!0,fieldLabel:IRm$.r1("L_BTN_ROW_ON"),value:0}]},{xtype:"fieldset",layout:{type:"vbox",align:"stretch"},title:"Other Options",items:[{xtype:"checkbox",name:"f_valueset_enable",fieldLabel:IRm$.r1("L_FLT_VS_EN"),boxLabel:IRm$.r1("B_ENABLED")},{xtype:"textfield",name:"f_valueset_title",fieldLabel:IRm$.r1("L_FLT_VS_TITLE")},{xtype:"checkbox",name:"f_valueset_force",fieldLabel:IRm$.r1("L_FLT_VS_FORCE"),boxLabel:IRm$.r1("B_ENABLED")},{xtype:"checkbox",name:"f_valueset_expand",fieldLabel:IRm$.r1("L_FLT_VS_EXP"),boxLabel:IRm$.r1("B_ENABLED")}]},{xtype:"fieldset",layout:{type:"vbox",align:"stretch"},title:"Excel Download Options",items:[{xtype:"checkbox",fieldLabel:IRm$.r1("L_XLS_BUTTON"),name:"f_bx_enable",boxLabel:IRm$.r1("B_ENABLED")},{xtype:"textfield",fieldLabel:IRm$.r1("L_XLS_STYLE"),name:"f_bx_css"},{xtype:"textfield",fieldLabel:IRm$.r1("B_TEXT"),labelAlign:"right",name:"f_bx_name",value:IRm$.r1("L_D_EXCEL")},{xtype:"gridpanel",name:"f_bx_sheets",height:300,store:{},columns:[{xtype:"checkcolumn",text:"Select",dataIndex:"sel_bx",width:80},{text:IRm$.r1("B_NAME"),dataIndex:"name"}]}]}]},{xtype:"panel",name:"pnldetail",title:IRm$.r1("L_R_OPT_FILTER"),autoScroll:!0,layout:{type:"vbox",align:"stretch"},items:[{xtype:"fieldset",name:"p_dset",title:IRm$.r1("L_R_UPD_TGT"),flex:1,layout:{type:"vbox",align:"stretch"},items:[{xtype:"gridpanel",name:"grd_detail_spec",flex:1,$h:200,store:{xtype:"store",fields:[]},columns:[{xtype:"checkcolumn",text:IRm$.r1("L_R_UT_DRILL"),dataIndex:"usedrill",width:50,listeners:{checkchange:function(e,t,a,l){for(var i=this.down("[name=grd_detail_spec]"),o=this.down("[name=edrill]"),n=!1,d=i.store,s=0;s<d.data.items.length;s++)if(d.data.items[s].get("usedrill")){n=1;break}n&&o.setValue(!1)},scope:this}},{text:IRm$.r1("B_NAME"),dataIndex:"name",flex:1},{text:IRm$.r1("L_REPORT_NAME"),dataIndex:"reportname",flex:1},{text:"Index",dataIndex:"sheetindex"},{xtype:"actioncolumn",name:"_ac_",hidden:!0,width:45,items:[{iconCls:"icon-grid-config",tooltip:"Detail Config",handler:function(e,t,a){var l=e.store.data.items[t];l&&i.configureDrill.call(i,l)}}]}],tbar:[{name:"edrill",fieldLabel:IRm$.r1("L_EN_DRILL"),xtype:"checkbox",boxLabel:IRm$.r1("B_ENABLED"),checked:!1,listeners:{change:function(e){var t,a=e.getValue(),l=this.down("[name=grd_detail_spec]");if(a)for(t=0;t<l.store.data.items.length;t++)l.store.data.items[t].set("usedrill",a)},scope:this}},{xtype:"displayfield",value:IRm$.r1("L_EN_DRILL_DESC")}],bbar:[{xtype:"displayfield",value:IRm$.r1("L_R_UT_DESC")}]}]},{xtype:"fieldset",title:IRm$.r1("L_R_CMENU"),name:"detailview",flex:1,layout:"fit",items:[{xtype:"gridpanel",name:"detailgrid",minHeight:300,selType:"checkboxmodel",selModel:{checkSelector:".x-grid-cell"},store:{xtype:"store",fields:[]},plugins:[{ptype:"cellediting",clicksToEdit:!1}],columns:[{xtype:"gridcolumn",text:IRm$.r1("B_NAME"),dataIndex:"name",editor:{xtype:"textfield",allowBlank:!1}},{xtype:"checkcolumn",text:IRm$.r1("L_R_CM_SHOWTAB"),width:60,dataIndex:"showintab"},{xtype:"gridcolumn",text:IRm$.r1("B_PATH"),dataIndex:"nodepath",flex:1},{xtype:"gridcolumn",text:IRm$.r1("B_SHEET_NAME"),dataIndex:"sheetname",editor:{xtype:"combo",queryMode:"local"}},{xtype:"gridcolumn",text:IRm$.r1("L_SHEET_NUM"),width:50,hidden:!0,dataIndex:"sheetindex",editor:{clickToEdit:!1}},{xtype:"actioncolumn",width:45,items:[{iconCls:"icon-grid-config",tooltip:"Detail Config",handler:function(e,t,a){var l=e.store.data.items[t];l&&i.configureDrill.call(i,l)}}]}],tbar:[{xtype:"button",text:IRm$.r1("B_ADD"),handler:function(){this.addDetailView()},scope:this},{xtype:"button",text:IRm$.r1("B_REMOVE"),handler:function(){var e,t=this.down("[name=detailgrid]"),a=t.getSelectionModel().getSelection();if(0<a.length)for(e=a.length-1;0<=e;e--)t.store.remove(a[e])},scope:this},{xtype:"button",text:IRm$.r1("B_MOVE_UP"),handler:function(){var e,t,a=this.down("[name=detailgrid]"),l=a.store,i=a.getSelectionModel().getSelection();i&&1==i.length&&(e=i[0],0<(t=l.indexOf(e))&&(l.removeAt(t),t=l.insert(t-1,t)))},scope:this},{xtype:"button",text:IRm$.r1("B_MOVE_DOWN"),handler:function(){var e,t,a=this.down("[name=detailgrid]"),l=a.store,i=a.getSelectionModel().getSelection();i&&1==i.length&&(e=i[0],(t=l.indexOf(e))+1<l.data.items.length&&(l.removeAt(t),t=l.insert(t+1,t)))},scope:this}]}]}]},{xtype:"panel",title:IRm$.r1("B_PROPERTY"),name:"opt_panel",layout:"anchor",defaults:{labelWidth:160,anchor:"100%"},items:[{xtype:"combobox",name:"playout",fieldLabel:IRm$.r1("L_LAYOUT"),queryMode:"local",displayField:"name",valueField:"value",editable:!1,store:{fields:["name","value"],data:[{name:IRm$.r1("L_VERTICAL"),value:"V"},{name:IRm$.r1("L_HORIZONTAL"),value:"H"},{name:IRm$.r1("L_B_LAYOUT"),value:"B"}]}},{xtype:"gridpanel",name:"childoption",height:120,store:{xtype:"store",fields:[]},columns:[{xtype:"gridcolumn",text:IRm$.r1("B_NAME"),dataIndex:"name",flex:1,editor:{xtype:"textfield",allowBlank:!0}},{xtype:"gridcolumn",text:IRm$.r1("B_ID"),dataIndex:"docid"}]}]}]}],buttons:[{text:IRm$.r1("B_APPLY"),hidden:this.isnewobject,handler:function(){this._confirm(1)},scope:this},"-",{text:IRm$.r1("B_CONFIRM"),handler:function(){this._confirm()},scope:this},{text:IRm$.r1("B_CANCEL"),handler:function(){this.close()},scope:this}],listeners:{afterrender:function(e){this.init_f()}}}),IG$.sheetobj.superclass.initComponent.apply(this,arguments)}});
IG$.p$ChartSlice=$s.extend(IG$.v$pnl,{title:"Chart Slicer",xtype:"panel",layout:{type:"vbox",align:"stretch"},maincontainer:null,floating:!0,toFrontOnShow:!0,width:220,hidden:!0,sheetoption:null,bInit:!1,applyChanges:function(){var e,t,i=this.down("[name=slicemeasures]");for(this.sheetoption.chartPivot.measures=[],e=0;e<i.store.data.items.length;e++)t=i.store.data.items[e].data,this.sheetoption.chartPivot.measures.push(t);this.hide(),this.maincontainer.updateReport.call(this.maincontainer)},dropSliceArea:function(e,t){var i,s=this.down("[name=slicemetrics]");this.down("[name=slicemeasures]");if(1==t){for(i=0;i<s.store.data.items.length;i++)if(s.store.data.items[i].data.uid==e.uid){s.store.remove(s.store.data.items[i]);break}}else!1===t&&s.store.add(e)},tools:[{type:"minimize",qtip:"Minimize",cls:"x-tool-minimize",handler:function(e,t,i){i.ownerCt.hide()},scope:this},{type:"gear",qtip:"Close",handler:function(e,t,i){var s=i.ownerCt;s.applyChanges.call(s)},scope:this}],applySheetOption:function(){var i=this;if(this.sheetoption&&1==this.bInit){for(var s,o=[],e=[],n={},t=this.down("[name=slicemetrics]"),r=this.down("[name=slicemeasures]"),a=0;a<this.sheetoption.chartPivot.clusters.length;a++)s=this.sheetoption.chartPivot.clusters[a].uid,n[s]=!0;for(a=0;a<this.sheetoption.chartPivot.rows.length;a++)s=this.sheetoption.chartPivot.rows[a].uid,n[s]=!0;for(a=0;a<this.sheetoption.chartPivot.measures.length;a++)s=this.sheetoption.chartPivot.measures[a].uid,e.push(IG$.CloneObject(this.sheetoption.chartPivot.measures[a])),n[s]=!0;$.each(["rows","cols","measures","queryItems"],function(e,t){for(a=0;a<i.sheetoption[t].length;a++)s=i.sheetoption[t][a].uid,void 0===n[s]&&o.push(IG$.CloneObject(i.sheetoption[t][a]))}),t.store.loadData(o,!1),r.store.loadData(e,!1)}},initComponent:function(){var n=this;IG$.apply(this,{items:[{xtype:"gridpanel",name:"slicemetrics",hideHeaders:!0,flex:1,enableDragDrop:!0,enableDD:!0,useArrows:!0,ddGroup:"SliceDDGroup",store:{fields:["name","type","nodepath","uid","itemtype"]},columns:[{text:IRm$.r1("B_NAME"),flex:1,sortable:!1,dataIndex:"name"}]},{xtype:"displayfield",text:"Measures",border:!1},{xtype:"gridpanel",name:"slicemeasures",hideHeaders:!0,flex:1,store:{fields:["name","type","uid","nodepath","itemtype"]},viewConfig:{plugins:{ptype:"gridviewdragdrop",ddGroup:"SliceDDGroup"},listeners:{beforedrop:function(e,t,i,s,o){var n=!0,r=t.records&&0<t.records.length?t.records[0]:null,a=(i&&i.data.location,r.get("type")||r.get("itemtype"));return t.copy=!1,"Measure"!==a&&(n=!1),n},drop:function(e,t,i,s){i&&i.get("name");var o=t.records&&0<t.records.length?t.records[0]:null;return"Measure"==(o.get("type")||o.get("itemtype"))}}},columns:[{text:IRm$.r1("B_NAME"),flex:1,sortable:!1,dataIndex:"name"},{xtype:"actioncolumn",width:20,items:[{iconCls:"icon-grid-delete",tooltip:"Remove",handler:function(e,t,i){var s=n.down("[name=slicemetrics]"),o=e.store.data.items[t].data;e.store.remove(e.store.data.items[t]),s.store.add(o)},scope:this}]}]}],buttons:[{xtype:"button",text:IRm$.r1("B_CONFIRM"),handler:function(){n.applyChanges.call(n)},scope:this},{xtype:"button",text:IRm$.r1("B_CLOSE"),handler:function(){n.hide()},scope:this}],listeners:{afterrender:function(){this.bInit=!0,this.applySheetOption()}}}),IG$.p$ChartSlice.superclass.initComponent.call(this)}});
IG$.chartPlotbandObject=function(e){this._content=e||{}},IG$.chartPlotbandObject.prototype={getRecords:function(e){var a=this;$.each(e.data,function(e,t){"id"!=e&&"selected"!=e&&(a._content[e]=t)}),a.value_desc=a.getValDesc()},updateRecords:function(a){var e=this,t=e._content;$.each(t,function(e,t){"id"!=e&&"selected"!=e&&a.set(e,t)}),e.value_desc=e.getValDesc(),a.set("value_desc",e.value_desc)},getValDesc:function(){var e=this._content,t="curvefit"==e.type?"Curve fit ("+(e.rtype||"")+")":"band"==e.type?(e.value_1||"No value")+" ~ "+(e.value_2||"No value"):e.value_1||"No value";return t},_v1:function(e,t){}},IG$.__chartoption.chartcateg=[{name:"All",value:"all"},{name:"General",value:"cartesian"},{name:"Pie and dashboard",value:"pie"},{name:"Scatter and point chart",value:"point"},{name:"Stock and Low High analysis",value:"stock"},{name:"Tree map",value:"tree"},{name:"Relation finding",value:"relation"},{name:"Scientific analysis",value:"scientific"},{name:"Statistical data visualization",value:"statistics"},{name:"Map and Geographical",value:"map"},{name:"Quality Control",value:"quality"}],IG$.__chartoption.charttype=[{label:"Column",charttype:"cartesian",subtype:"column",img:"column",grp:"cartesian"},{label:"Line",charttype:"cartesian",subtype:"line",img:"line",grp:"cartesian"},{label:"Spline",charttype:"cartesian",subtype:"spline",img:"line",grp:"cartesian"},{label:"Area",charttype:"cartesian",subtype:"area",img:"area",grp:"cartesian"},{label:"Spline Area",charttype:"cartesian",subtype:"areaspline",img:"area",grp:"cartesian"},{label:"Bar",charttype:"cartesian",subtype:"bar",img:"bar",grp:"cartesian"},{label:"Pie",charttype:"pie",subtype:"pie",img:"pie",grp:"pie"},{label:"Doughnut",charttype:"pie",subtype:"doughnut",img:"doughnut",grp:"pie"},{label:"Bubble",charttype:"bubble",subtype:"bubble",img:"bubble",grp:"point"},{label:"Scatter",charttype:"scatter",subtype:"scatter",img:"bubble",grp:"point"},{label:"Treemap",charttype:"treemap",subtype:"treemap",img:"treemap",grp:"tree"},{label:"Waterfall",charttype:"cartesian",subtype:"waterfall",img:"waterfall",grp:"cartesian"},{label:"Synchronized Chart",charttype:"cartesian",subtype:"syncchart",img:"syncchart",grp:"cartesian"},{label:"Radar",charttype:"radar",subtype:"radar",img:"radar"},{label:"Funnel",charttype:"funnel",subtype:"funnel",img:"funnel"},{label:"Pyramid",charttype:"pyramid",subtype:"pyramid",img:"pyramid"},{label:"Map",charttype:"map",subtype:"map",img:"usmap",grp:"map"},{label:"Comparision Matrix",charttype:"matrix",subtype:"matrix",img:"compmatrix",grp:"relation"},{label:"Parallel Coordinates",charttype:"parallel",subtype:"parallel",img:"parallel",grp:"scientific"},{label:"Mean & Deviation",charttype:"performancemap",subtype:"performancemap",img:"performancemap",grp:"statistics"},{label:"Box Plot",charttype:"boxplot",subtype:"boxplot",img:"boxplot",grp:"stock"},{label:"Network Diagram(+)",charttype:"networkdiagram_pos",subtype:"networkdiagram_pos",img:"networkdiagram",grp:"relation"},{label:"Network Diagram(-)",charttype:"networkdiagram_neg",subtype:"networkdiagram_neg",img:"networkdiagram",grp:"relation"},{label:"Matrix Diagram",charttype:"matrixdiagram",subtype:"matrixdiagram",img:"matrixdiagram",grp:"relation"},{label:"Force-Directed Layouts",charttype:"forcelayout",subtype:"forcelayout",img:"force",grp:"relation"},{label:"Cluster Chart",charttype:"anderson",subtype:"anderson",img:"cluster",grp:"scientific"},{label:"Chord Chart",charttype:"chord",subtype:"chord",img:"chord",grp:"scientific"},{label:"Sun burst Chart",charttype:"sunburst",subtype:"sunburst",img:"sunburst",grp:"scientific"},{label:"Time series chart",charttype:"nation",subtype:"nation",img:"timeseries",grp:"scientific"},{label:"Bubble map",charttype:"bubblemap",subtype:"bubblemap",img:"bubblemap",grp:"scientific"},{label:"Fixed Placement",charttype:"cartesian",subtype:"fixedplacement",img:"fixedplacement",grp:"cartesian"}],IG$.__chartoption.chartcolors={office_2013:["#5b9bd5","#ed7d31","#a5a5a5","#ffc000","#4472c4","#70ad47","#255e91","#9e480e","#636363","#997300","#264478","#43682b"],"theme 1":["#5b9bd5","#a5a5a5","#4472c4","#255e91","#636363","#264478","#7cafdd","#b7b7b7","#698ed0","#327dc2","#848484","#335aa1","#9dc3e6","#c9c9c9"],"theme 2":["#ed7d31","#ffc000","#70ad47","#9e480e","#997300","#43682b","#f1975a","#ffcd33","#8cc168","#d26012","#cc9a00","#5a8a39"],"theme 3":["#70ad47","#4472c4","#ffc000","#43682b","#264478","#997300","#8cc168","#698ed0","#ffcd33","#5a8a39","#335aa1","#cc9a00"],signika:["#f45b5b","#8085e9","#8d4654","#7798BF","#aaeeee","#ff0066","#eeaaee","#55BF3B","#DF5353","#7798BF","#aaeeee"],"light-color":["#7cb5ec","#f7a35c","#90ee7e","#7798BF","#aaeeee","#ff0066","#eeaaee","#55BF3B","#DF5353","#7798BF","#aaeeee"],"dark-color":["#2b908f","#90ee7e","#f45b5b","#7798BF","#aaeeee","#ff0066","#eeaaee","#55BF3B","#DF5353","#7798BF","#aaeeee"],combo1574:["#7A3E48","#EECD86","#E18942","#B95835","#3D3242","#06354F"],combo1573:["#7C786A","#8DCDC1","#D3E397","#FFF5C3","#EB6E44"],combo1572:["#6194BC","#A5D1F3","#D0EAFF","#E4001B","#ECECEC","#606060"]},IG$.v$chartViewer=$s.extend(IG$.v$pnl,{drillFlt:[],border:!1,maincontainer:null,drilldepth:0,_chartPnls:[],showtoolbar:!1,eventowner:null,eventhandler:null,reportoption:null,sheetoption:null,_selectedChart:null,resized:!1,initCustomControl:function(){var e,t,a,l=this,i=window.bowser;l.el&&(e=l.getWidth(),t=l.getHeight(),a=l.el.dom,l.drillup&&l.drillup.remove(),l.drillup=null,i.msie&&0<e&&0<t&&(a[0].style.width=e+"px",a[0].style.height=t+"px"))},showSlicePivot:function(){var e=this,t=e.getWidth()-20;e.slicehelper.sheetoption=e.sheetoption,e.slicehelper.applySheetOption.call(e.slicehelper),e.slicehelper.setSize(220,350),e.slicehelper.setPosition(t-e.slicehelper.width,0),e.slicehelper.show()},applyDropSlice:function(e,t,a){var l=this,i=t.data,n=new IG$.clItems(null);n.CopyObject(n,i),"slice"==e?(1==a&&l.sheetoption.chartPivot.clusters.push(n),l.slicehelper.dropSliceArea.call(l.slicehelper,n,a)):"xaxis"==e&&(1==a&&l.sheetoption.chartPivot.rows.push(n),l.slicehelper.dropSliceArea.call(l.slicehelper,n,a)),l.updateReport()},updateReport:function(){this.maincontainer.procUpdateReport.call(this.maincontainer)},applyReportResult:function(e,t,a,l,i){var n=this,r=n.body?n.body.dom:null,o=r?$(r):null,s=o?IG$.j$ext._w(o):0,c=o?IG$.j$ext._h(o):0;0<s&&0<c?(clearTimeout(n._xo),n.mresults=e,n.olapset=t,n.reportoption=a,n.sheetoption=l,1==n.resized||10<s&&10<c?(n.resized=!1,n.applRptRestRender(n.mresults,n.olapset,n.reportoption,n.sheetoption,i)):n.applyRenderer(i)):(clearTimeout(n._xo),n._xo=setTimeout(function(){n.applyReportResult.call(n,e,t,a,l,i)},300))},applyRenderer:function(a){var l=this;setTimeout(function(){var e=l.el?l.el.getWidth():0,t=l.el?l.el.getHeight():0;10<e&&10<t?l.applRptRestRender.call(l,l.mresults,l.olapset,l.reportoption,l.sheetoption,a):l.applyRenderer.call(l,a)},100)},createPanel:function(e,l,t,i){var a,n=this;return n._chartPnls.length>l?((a=n._chartPnls[l]).dmode!=e&&a.getHeader()[1==e?"show":"hide"](),a.dmode=e,a.afterinit.call(a)):(a=new $s.panel({xtype:"panel",layout:"fit",flex:1,x:0,y:0,width:n.width||200,height:n.height||200,dmode:e,header:1==e,title:1==e?" ":null,border:1==e?1:0,closable:!1,_collapse:"normal",tools:[{type:"minimize",qtip:"Minimize",handler:function(e){e._collapse="normal"==e._collapse?"collapsed":"normal",n.doClusterLayout.call(n)},scope:this},{type:"maximize",qtip:"Maximize",handler:function(e){e._collapse="normal"==e._collapse?"maximize":"normal",n.doClusterLayout.call(n)},scope:this}],afterinit:function(){var e=this,t=n.width||e.getWidth(),a=n.height||e.getHeight();e._loaded=!0,1==e.dmode?(e._chartview?n.applChartOpts.call(n,e._chartview,l):e._chartview=n.createChartCtrl.call(n,l,e.body.dom,t,a),e._chartview&&e.setTitle(e._chartview.mresult.clusterdesc||"blank"),n.mlength--,n.mlength<2&&n.doClusterLayout.call(n,!0)):(e._chartview?n.applChartOpts.call(n,e._chartview,l):e._chartview=n.createChartCtrl.call(n,0,e.body.dom,t,a),n.layoutChartPnls.call(n,!0,i))},listeners:{close:function(){n.clustChartClosed.call(n,n)},collapse:function(){n.clustChartClosed.call(n,n)},expand:function(){n.clustChartClosed.call(n,n)},resize:function(e,t,a){var l,i=this;i._chartview&&(1==i.dmode?(l=$(i._chartview.maincontainer),t=IG$.j$ext._w(l),a=IG$.j$ext._h(l),i._chartview.invalidateSize.call(i._chartview,t,a)):(2==i.dmode&&(l=$(i._chartview.container),t=IG$.j$ext._w(l),a=IG$.j$ext._h(l)),0<t&&0<a&&i._chartview.invalidateSize.call(i._chartview,t,a)))},afterrender:function(e){e.afterinit.call(e)}}}),n._chartPnls.push(a),n.containerpnl.add(a)),a},applRptRestRender:function(e,t,a,l,i){var n,r,o,s=this,c=(s.body.dom,null),h=null,p=s.down("[name=cslicemin]");if(s.cdrillindex=0,s.containerpnl=s.containerpnl||s.down("[name=cpm]"),s.cslicemetric||(s.cslicemin=s.down("[name=cslicemin]")),IG$.p$ChartSlice&&(s.slicehelper=new IG$.p$ChartSlice({maincontainer:s}),s.containerpnl.add(s.slicehelper),$(s.slicehelper.el.dom).css({zIndex:10})),s.sheetoption.model.bcluster&&s.sheetoption.model.clusters&&s.sheetoption.model.clusters.length){p&&p.setVisible(!0),s.mlength=s.mresults.results.length;for(var d=s.mresults.results.length,u=d;u<s._chartPnls.length;u++)s.containerpnl.remove(s._chartPnls[u]);s._chartPnls.splice(d,s._chartPnls.length-d),s._drawmode=1,$.each(s.mresults.results,function(e,t){s.createPanel.call(s,1,e,void 0,i).show()})}else{for(s.down("[name=cslicemin]").setVisible(!1),s._drawmode=0,u=s._chartPnls.length-1;0<u;u--)s.containerpnl.remove(s._chartPnls[u]);function m(e){var t=$(document.body),a=h.offset(),l=IG$.j$ext._w(h),i=IG$.j$ext._h(h),n=(n=e&&e.pageX)||-1,r=(r=e&&e.pageY)||-1;a.left<n&&n<a.left+l&&a.top<r&&r<a.top+i||(h.hide(),t.unbind("click",m))}function f(e,t,a){var l=$(e).offset(),i=$(document.body);i.unbind("click",m),a&&a.stopPropagation(),h.show(),h.empty(),h.css({top:l.top+20,left:l.left}),r=$("<ul></ul>").appendTo(h),$.each(t,function(e,t){var a=$("<li></li>").appendTo(r);a.text(t.text),a.bind("click",function(){t.handler.call(t.scope,t.opt||null),m()})}),i.bind("click",m)}s._chartPnls.splice(1,s._chartPnls.length-1),s.createPanel.call(s,0,0,void 0,i).show(),s._selfdrill=!1,1==s.sheetoption.model.chart_option.enabledrill&&1<s.sheetoption.model.rows.length?(s._selfdrill=!0,s.charttoolbar||(s.carea=$("<div class='idv-cht-tb-cont'></div>"),s.carea.css({position:"absolute",height:22,right:0,top:0}),s.carea.appendTo(s.body.dom),s.charttoolbar=$("<div class='mec-chart-toolbar'></div>").appendTo(s.carea),s.cpop=$("<div class='idv-cht-pop'></div>").appendTo($(document.body))),c=s.charttoolbar,h=s.cpop,c&&(c.empty(),c.show(),$.each(s.sheetoption.model.rows,function(e,t){var a,l,i=[];if(0<e){for(a=0;a<IG$.chartTypeMenu.length;a++){var n={text:IG$.chartTypeMenu[a].label,opt:{drilldepth:e,subtype:IG$.chartTypeMenu[a].subtype},handler:function(e){s.changeDrillChartType.call(s,e)},scope:s};i.push(n)}(l=$("<div class='idv-cht-btn-d'></div>").appendTo(c)).text(t.name),l.bind("click",function(){s.procDrillUpIdx.call(s,e)}),$("<div class='idv-cht-btn-m'></div>").appendTo(c).bind("click",function(e){f(l,i,e)})}else(l=$("<div class='idv-cht-btn-d idv-cht-nmarg'></div>").appendTo(c)).text(t.name),l.bind("click",function(){s.procDrillUpIdx.call(s,0)})}),n=$("<div class='idv-cht-btn-d idv-cht-pad'>Layout<div>").appendTo(c),o=[{text:IRm$.r1("L_LAYOUT_NORMAL"),handler:function(){this.sheetoption.model.chart_option.drillviewmode=0,this.layoutChartPnls(!1)},scope:s},{text:IRm$.r1("L_LAYOUT_POPUP"),handler:function(){this.sheetoption.model.chart_option.drillviewmode=1,this.layoutChartPnls(!1)},scope:s},{text:IRm$.r1("L_LAYOUT_CASCADE"),handler:function(){this.sheetoption.model.chart_option.drillviewmode=2,this.layoutChartPnls(!1)},scope:s},{text:IRm$.r1("L_LAYOUT_HORIZONTAL"),handler:function(){this.sheetoption.model.chart_option.drillviewmode=3,this.layoutChartPnls(!1)},scope:s},{text:IRm$.r1("L_LAYOUT_VERTICAL"),handler:function(){this.sheetoption.model.chart_option.drillviewmode=4,this.layoutChartPnls(!1)},scope:s}],n.bind("click",function(e){f(this,o,e)}))):(c=s.charttoolbar,s.drilldepth=0,c&&(c.empty(),c.hide()))}},changeDrillChartType:function(e){var t,a,l=e.drilldepth,i=e.subtype,n=this._chartPnls.length>l?this._chartPnls[l]._chartview:null;if(n){for(t=n.sheetoption.model.chart_option.drillcharttype=n.sheetoption.model.chart_option.drillcharttype||[],a=0;a<l+1;a++)l.length>a?l==a&&(t[a]=i):l==a?t.push(i):t.push("");this.drawChartCtrl(n)}},createChartCtrl:function(e,t,a,l){var i=this,n=new IG$.v$olapChartView(i,i.uid,t,a,l);return i.applChartOpts(n,e),n.onClickHandler=i.chartClickHandler,n.onClickOwner=i,n._scrollhandler={f:i._scrollhandler,o:i},n},applChartOpts:function(e,t){var a=this;e.drilldepth=0,a.mresults&&(e.jobid=a.mresults.jobid,e.mresult=a.mresults.results[t]),e.reportoption=a.reportoption,e.sheetoption=a.sheetoption},_reqData:function(e,t){this.fireEvent("request_data",this,e,t)},_scrollhandler:function(o,e){var t,s=this,a=o.scrollX,c=o.mresult;if(0<o.mresult.pagestart||o.mresult.pageend<o.mresult.rowcnt){if(0<o.mresult.pagestart&&o.mresult.pagestart>a||o.mresult.pageend<a+o._dlen)return void s.fireEvent("scroll_request",s,e);o.mresult.pagestart}t=o.drawChartResult.call(o,o.cwidth,o.cheight,!0),o.disposeContent.call(o,o),o._bandFormula.empty(),o._bandFormula.hide(),1==o.isHighChart&&$.each(t,function(e,t){var a,l,i=new Highcharts.Chart(t),n=s.sheetoption?s.sheetoption.model.chart_option:null,r=n?n.subtype:null;if(o._masterCharts.push(i),s.__sel_s=null,c&&c.__bands&&c.__bands.length)for(l=c.__bands,a=0;a<l.length;a++)s.drawBand.call(s,i,l[a],r,o);else t.__cf&&t.__cf.length&&s.curveFit.call(s,i,t.__cf,r,o)})},curveFit:function(l,e,t,i){for(var a,n=this,r=n.olapset,o=n.sheetoption?n.sheetoption.model.chart_option:null,s={charttype:(o?o.subtype:"")||"",bands:[]},c=0;c<e.length;c++)s.bands.push(e[c]);r&&((a=new IG$._rpc$).init(n,{ack:"olapservice",payload:{uid:r.uid,jobid:r.jobid,option:"curvefit"},mbody:s,meta_type:"bands"},n,function(e){var t,a=e?e.bands:null;if(a)for(t=0;t<a.length;t++)this.drawBand(l,a[t],s,i)}),a.send())},drawBand:function(v,e,w,t){var x=this,a=e.series,l=e.all_series,C=e.config,i=t._bandFormula;0!=C.showfitexp&&i.show(),$.each([a,l],function(g,e){var y;e&&(y=$("<ul></ul>").appendTo(i),$.each(e,function(e,t){var a,l,i,n,r,o,s,c,h,p,d,u,m,f="",_=t.xmin,b=t.xmax;for(_=_?Number(_):null,b=b?Number(b):null,t.curvefit,l=t.rtype,i=t.formula,n=t.formula_html,d=t.r_square,u=t.r_square_adj,(d||u)&&(f=(d?"<br /><span class='igc-cfit-rst'>R sqaure : </span><span class='igc-cfig-rs'>"+d+"</span>":"")+(u?"<br /><span class='igc-cfit-rst'>R sqaure adj: </span><span class='igc-cfig-rs'>"+u+"</span>":"")),c=C.name,h=1==g?"(ALL)":t.seriename||"",p=$("<li class='igc-cfit-leg-item'><span class='igc-cfit-bname'>"+(c?c+": ":"")+"</span><span class='igc-cfit-seriename'>"+h+"</span><br /><span class='igc-cfit-fm'>"+(n||i)+"</span>"+f+"</li>").appendTo(y),r=[],o=t.parameters,a=0;a<o.length;a++)s=o[a],r.push(Number(s));m=x.drawBandSeries.call(x,v,l,n||i,r,w,_,b,C),p.bind("click",function(e){var t=$(this);x.__sel_s&&(x.__sel_s.pdiv.removeClass("igc-cfit-sel"),x.__sel_s.series.update({lineWidth:2},!0)),m&&(t.addClass("igc-cfit-sel"),m.update({lineWidth:6},!0),x.__sel_s={pdiv:t,series:m})})}))})},drawBandSeries:function(e,t,a,l,i,n,r,o){var s,c,h,p,d,u,m,f,_,b={name:a,type:"spline",allowPointSelect:!1,showInLegend:!1,dashStyle:o.cf_lc||"Dot",lineWidth:2,marker:{enabled:!1},data:[]},g=o.cfitfcs?Number(o.cfitfcs):0,y=null!=n&&null!=r&&!isNaN(n)&&!isNaN(r),v=1,w=window.echarts?e.getOption():null;switch(w&&(b.type="line",b.smooth=!0),y?(u=r+y,v=(r-(d=n))/20):(d=0,u=w?(m=w.xAxis[0],g=Math.floor(g),w.series[0].data.length+g):(m=e.xAxis[0],g=Math.floor(g),e.series[0].data.length+g)),t){case"polynomial":for(s=d;s<u;s+=v){for(h=s,c=0;c<l.length;c++)p=0==c?l[c]:p+l[c]*Math.pow(h,c);b.data.push({x:h,y:p,value:p})}break;case"exponential":for(s=d;s<u;s+=v)h=s,p=Math.exp(l[0]+l[1]*h),b.data.push({x:h,y:p,value:p});break;case"logarithmic":for(s=d;s<u;s+=v)h=y?s:s+1,p=l[0]+l[1]*Math.log(h),b.data.push({x:s,y:p,value:p});break;case"power":for(s=d;s<u;s+=v)h=y?s:s+1,p=Math.exp(l[0]+l[1]*Math.log(h)),b.data.push({x:s,y:p,value:p})}if("bar"==i){for(s=0;s<b.data.length;s++)b.data[s].x_=b.data[s].x,b.data[s].x=b.data[s].y,b.data[s].y=b.data[s].x_,b.data[s].value=h,delete b.data[s].x_;m=e.yAxis[0]}if(m&&0<g){for(f=m.categories,s=0;s<g;s++)f.push("*"+(s+1));b.zoneAxis="bar"==i?"y":"x",b.zones=[{value:u-g},{color:"#ff0000"}],m.update({categories:f},!0)}return window.echarts?(w.series.push(b),e.setOption(w,{notMerge:!1,lazyUpdate:!1,silent:!1})):_=e.addSeries(b),_},drawChartCtrl:function(o,e){var t,s=this,a=$(o.maincontainer),l=$(o.container),i=IG$.j$ext._w(l),n=IG$.j$ext._h(l),c=o.mresult;o.disposeContent.call(o,o),s.contextmenu=$("<ul class='contextMenu'></ul>").appendTo(a),s.context={menu:s.contextmenu},a.contextMenu&&0!=s.enablecontextmenu&&a.contextMenu(s.context,new IG$.callBackObj(s,s.menuProc)),t=o.drawChartResult.call(o,i,n,void 0,e),o.drawchart=t,window.m$dorC&&window.m$dorC.call(s,o,t),o._bandFormula.empty(),o._bandFormula.hide(),1==o.isHighChart&&($.each(t,function(e,t){var a,l,i,n,r;if(window.echarts?(n=(i=s.sheetoption?s.sheetoption.chartoption:null)?i.subtype:null,(a=echarts.init(t.chart.renderTo,ig$.echarts_theme||"amplix",{renderer:"canvas"})).setOption(t),a.on("pieselectchanged",function(e){}),a.on("click",function(e){"series"==e.componentType&&o.procClickEvent({series:{name:e.seriesName,type:e.seriesType}},{point:e.data})}),a.on("brushselected",function(e){}),o._masterCharts.push(a)):(n=(i=s.sheetoption?s.sheetoption.model.chart_option:null)?i.subtype:null,a=new Highcharts.Chart(t),o._masterCharts.push(a),s.__sel_s=null),c&&c.__bands&&c.__bands.length)for(r=c.__bands,l=0;l<r.length;l++)s.drawBand.call(s,a,r[l],n,o);else t.__cf&&t.__cf.length&&s.curveFit.call(s,a,t.__cf,n,o)}),"syncchart"==o.rcs&&window.echarts&&echarts.connect(o._masterCharts))},menuProc:function(e){this.fireEvent("menu",this,e)},chartClickHandler:function(e,t,a){var l=this,i=e.mresult;if(l._selectedChart=e,l.selectedData=e.selectedData,1==l.sheetoption.model.chart_option.enabledrill&&l.sheetoption.model.rows.length>e.drilldepth+1){l.drilldepth=e.drilldepth+1;var n,r,o,s,c,h=e.selectedData,p=e.drilldepth+1,d=l.olapset.panel,u=(l.olapset.jobid,{ftype:"group",children:[]}),m=d.sheetoption.model,f=m.aux_filter=m.aux_filter||{};for(delete f.filter_drillchart,m.drilldepth=p,l.drillFlt.length>p-1&&l.drillFlt.splice(p-1,l.drillFlt.length-p+1),(s=[]).push(i._tabledata[h[0].r][i.colfix-1]),l.drillFlt.push({item:l.sheetoption.model.rows[p-1],data:s}),o=0;o<l.drillFlt.length;o++)n={ftype:"condition",name:(r=l.drillFlt[o]).item.name,operator:"EQ",fields:[{nodepath:r.item.nodepath,name:r.item.name,uid:r.item.uid,type:r.item.type}],values:[{code:r.data[0].code,value:r.data[0].value}]},u.children.push(n);f.filter_drillchart=u,l._chartPnls.length>l.drilldepth?c=l._chartPnls[l.drilldepth]:(c=l.createPanel(2,p,void 0))._chartview||(c._chartview=l.createChartCtrl(0,c.body.dom)),(e=c._chartview).drilldepth=p,d.procRunReport(null,null,e),l.layoutChartPnls(!1)}else if(a&&l.sheetoption.model.detailview&&l.sheetoption.model.detailview.length){var _=$(e.container),b=l.sheetoption.model.detailview,g={cl:l.selectedData.length?l.selectedData[0]:null},y=[];if(g.cl)for(o=0;o<b.length;o++)l.sheetoption.mL(b[o],g)&&y.push({disp:b[o].name,name:"detail:"+b[o].uid});y.length&&(l.prepMenu(y),l.context.cell=null,_.showContextMenu&&_.showContextMenu.call(_,l.context,a.offsetX,a.offsetY))}l.eventhandler&&l.eventowner?l.eventhandler.call(l.eventowner):l.fireEvent("itemclick",l)},prepMenu:function(e){var t,a=this.contextmenu;for(a.html(""),t=0;t<e.length;t++)a.append($("<li"+(e[t].class?" class='"+e[t].class+"'":"")+"><a href='#"+e[t].name+"'>"+e[t].disp+"</a></li>"))},procDrillUpIdx:function(e){this.drilldepth=e,this.layoutChartPnls(!1)},doClusterLayout:function(n){for(var r,o,s,c,h=this,l=(h.body.dom,h.getWidth()),i=h.getHeight(),p=0,d=0,u=!1,e=$(h.containerpnl.body.dom),m=0,l=h.containerpnl.getWidth(),i=h.containerpnl.getHeight(),t=0;t<h._chartPnls.length;t++)"maximize"==h._chartPnls[t]._collapse&&(u=!0,h.cslicemin.setVisible(!1));0==u&&h.cslicemin&&(h.cslicemin.setVisible(!0),h.cslicemin.removeAll()),$.each(h._chartPnls,function(e,t){var a;"collapsed"==t._collapse?(t.setVisible(!1),a=new $s.button({xtype:"button",width:120,text:t.title,handler:function(){t._collapse="normal",h.doClusterLayout.call(h)}}),h.cslicemin.add(a)):"maximize"==t._collapse?(t.setVisible(!0),t.setPosition(0,0),t.setSize(l,i)):"normal"==t._collapse&&(t.setVisible(1!=u),m++)}),0==u?(r=m<3?m:m<6?m/2:m<12?m/3:m/4,r=Math.floor(r),o=Math.ceil(m/r),(c=(i-h.cslicemin.getHeight())/o)<200?(s=(l-18)/r,c=200,e.css({overflowY:"scroll"})):(s=l/r,e.scrollTop(0),e.css({overflowY:"hidden"})),$.each(h._chartPnls,function(e,t){var a,l,i;"normal"==t._collapse?(a=s*(d%r),l=c*(Math.floor(d/r)%o),h._chartPnls[e].setPosition(a,l),h._chartPnls[e].setSize(s,c),d++):(h._chartPnls[e].setPosition(100*p,4),h._chartPnls[e].setSize(100,30),p++),1==n&&(i=h._chartPnls[e]._chartview,h.drawChartCtrl(i))})):(e.scrollTop(0),e.css({overflowY:"hidden"}))},layoutChartPnls:function(e,t){var a,l,i,n,r,o,s,c=this,h=$(c.containerpnl.body.dom);if(0!=c._chartPnls.length){for(h.scrollTop(0),h.css({overflowY:"hidden"}),o=c.getWidth()||c.width,s=c.getHeight()||c.height,a=c.drilldepth+1;a<c._chartPnls.length;a++)c._chartPnls[a].setVisible(!1);for(l=Math.min(c._chartPnls.length,c.drilldepth+1),i=3==(r=c.sheetoption.model.chart_option.drillviewmode)?o/l:o,n=4==r?s/l:s,a=0;a<l;a++){mc=3==r?i*a:0,mr=4==r?n*a:0;var p=c._chartPnls[a].pw,d=c._chartPnls[a].ph,u=c._chartPnls[a].px,m=c._chartPnls[a].py;c._chartPnls[a].setVisible(!(0==r&&a<l-1)),p==i&&d==n&&u==mc&&m==mr||(c._chartPnls[a].setPosition(mc,mr),c._chartPnls[a].setSize(i,n),c._chartPnls[a].pw=i,c._chartPnls[a].ph=n,c._chartPnls[a].px=mc,c._chartPnls[a].py=mr),1==e?c.drawChartCtrl(c._chartPnls[a]._chartview,t):(p!=i||d!=n||0<a)&&c._chartPnls[a]._chartview.invalidateSize.call(c._chartPnls[a]._chartview,i,n)}}},clustChartClosed:function(e){this.doClusterLayout()},CLS:{resize:function(e,t){var a=this,l=e||a.getWidth(),i=t||a.getHeight();10<l&&10<i&&(a.width=l,a.height=i,-1<a.stimer&&clearTimeout(a.stimer),a.stimer=setTimeout(function(){a.setPanelSize.call(a,l,i)},30))}},setPanelSize:function(e,t){var a=this;a.resized=!0,1==a._drawmode?this.doClusterLayout():this._chartPnls&&this.layoutChartPnls(!1)},getExportData:function(e,t,a,l,i,n){var r,o,s,c,h,p,d=this,u=[],m=t,f=a,_=$(d.body.dom).offset();d.getWidth(),d.getHeight();if(1==d._drawmode)for(r=0;r<d._chartPnls.length;r++)!(s=d._chartPnls[r])._chartview||"maximize"!=s._collapse&&"normal"!=s._collapse||(o=s.getPosition(),c=s._chartview,m=t+o[0]-_.left,f=a+o[1]-_.top,h=$(c.container),p={type:"chart",x:m,y:f,d_width:i,d_height:n,width:IG$.j$ext._w(h),height:IG$.j$ext._h(h),docid:l},c.getExportData.call(c,p),u.push(p));else for(r=0;r<d._chartPnls.length;r++)c=d._chartPnls[r]._chartview,m=t+(o=$(c.container).offset()).left-_.left,f=a+o.top-_.top,h=$(c.container),p={type:"chart",x:m,y:f,width:IG$.j$ext._w(h),height:IG$.j$ext._h(h),docid:l},c.getExportData.call(c,p),u.push(p);return u},getDrillXML:function(e){var t,a,l,i,n,r,o,s,c,h,p=this,d=p.selectedData,u=p.sheetoption.model,m=p._selectedChart.mresult,f={ftype:"group",conjunction:"AND",children:[]};if(p.sheetoption.model.filter&&(p.sheetoption.model.filter.conjunction="AND",f.children.push(p.sheetoption.model.filter)),p.sheetoption.model.aux_filter&&$.each(p.sheetoption.model.aux_filter,function(e,t){f.children.push(t)}),d&&0<d.length){for(1==u.rows.length&&0==u.cols.length&&(c={ftype:"group",children:[{operator:"IN",ftype:"condition",fields:[{name:(s=u.rows[0]).name,uid:s.uid,type:s.type}],values:[]}]},f.children.push(c)),n=0;n<d.length;n++)if(!((l=d[n]).r<m.rowfix||e&&e.titem.enabled&&(i=0,(1==l.position&&u.rows[l.index]&&e.titem.item_map[u.rows[l.index].uid]||3==l.position&&u.measures&&u.measures[l.index]&&e.titem.item_map[u.measures[l.index].uid]||2==l.position&&u.cols[l.index]&&e.titem.item_map[u.cols[l.index].uid])&&(i=1),0==i))){for(o={ftype:"group",conjunction:"OR",children:[]},t=m._tabledata[l.r],r=0;r<m.colfix;r++)if(1==(a=t[r]).position&&u.rows[a.index]){if(s=u.rows[a.index],e&&e.tparams&&e.tparams.enabled&&e.tparams.items.length&&!e.tparams.item_map[s.uid])continue;c?c.children[0].values.push({code:a.code,value:a.value}):(h={conjunction:"AND",operator:"EQ",ftype:"condition",fields:[{name:s.name,uid:s.uid,type:s.type}],values:[{code:a.code,value:a.value}]},o.children.push(h))}for(r=0;r<m.rowfix;r++)if(l.c>=m.colfix&&2==(a=m._tabledata[r][l.c]).position&&u.cols[a.index]){if(s=u.cols[a.index],e&&e.tparams&&e.tparams.enabled&&e.tparams.items.length&&!e.tparams.item_map[s.uid])continue;var _={operator:"EQ",conjunction:"AND",ftype:"condition",fields:[{name:s.name,uid:s.uid,type:s.type}],values:[{code:a.code,value:a.value}]};o.children.push(_)}!c&&o.children.length&&f.children.push(o)}}else f=null;return f},initComponent:function(){var l=this;l._chartPnls=[],l.on("resize",function(e,t,a){l.CLS.resize.call(l,t,a)}),l.on("afterrender",function(){var e=this;e.containerpnl=e.containerpnl||e.down("[name=cpm]"),e.CLS.resize.call(e)}),IG$.apply(this,{layout:{type:"vbox",align:"stretch"},items:[{xtype:"panel",name:"cpm",flex:1,layout:"absolute",border:!1},{xtype:"panel",height:25,name:"cslicemin",layout:{type:"hbox",align:"top"},border:0}]}),IG$.v$chartViewer.superclass.initComponent.call(this)}});
IG$.sheetViewer=$s.extend(IG$.v$pnl,{init_f:function(){var e,t,i=this,s=i.body?i.body.dom:null;s&&i.getWidth(),s&&i.getHeight();$(s).empty(),(t=i._gridview=new IG$.olapReportView(i.uid,null,s,10)).reportoption=i.reportoption,t.sheetoption=i.sheetoption,t.sheetobj=i.sheetobj,(e=t._mgrid).sheetoption=i.sheetoption,e.sheetobj=i.sheetobj,e.ctx.bind({selectionchanged:function(){1<e.selectedItems.length&&i.fireEvent("drillreport",i)},itemclick:function(e,t){i.fireEvent("itemclick",i,t)},itemdblclick:function(e,t){i.fireEvent("itemdblclick",i,t)},menu:function(e,t){i.fireEvent("menu",i,t)},pivotchanged:function(e){i.fireEvent("pivotchanged",i)},scroll_request:function(e,t){i.fireEvent("scroll_request",i,t)},hierarchy:function(e,t){i.fireEvent("hierarchy",i,t)}})},initCustomControl:function(){this.gridcontainer=[]},applyReportResult:function(e,t,i,s,r){var n,a,o=this,l=o.body?o.body.dom:null,d=l?o.getWidth():0,p=l?o.getHeight():0;window.bowser;if(o.mresults=e,o.olapset=t,o.reportoption=i,o.sheetoption=s,l){var m,u=!!e&&e._is_sc,c=e?e._hcell:null;if(1<o.mresults.results.length){m=o.mresults.results[0];for(var h,f,g,w,v=o.mresults.results,y=0,_=0,x=0,b=0,j=0;j<v.length;j++){for(f=v[j].clustercode.join(" "),g=v[j].clustervalue.join(" "),0==j?(y+=b=v[j].rowfix,_=v[j].colcnt,x=v[j].colfix,m.styles=v[j].styles):y+=v[j].rowcnt-v[j].rowfix+1,w=[],h=0;h<_;h++)w.push({text:h<x?" ":g||f,mrow:0,mcol:_-1,merged:0==h||h==x?2:4,stylename:"cluster_data",chart:null,position:-1,code:null,value:null,index:-1});if(0==j)m._tabledata.splice(b,0,w);else for(m._tabledata.push(w),h=v[j].rowfix;h<v[j].rowcnt;h++)m._tabledata.push(v[j]._tabledata[h])}m.rows=y,m.cols=_,m.colfix=x,m.rowfix=b}else m=o.mresults.results[0];n=(a=o._gridview)._mgrid,a.width=0<d?d:a.width,a.height=0<p?p:a.height,o.mresults&&(a.jobid=o.mresults.jobid,c||(a.mresult=m),a.reportoption=o.reportoption,a.sheetoption=o.sheetoption,n.sheetoption=o.sheetoption,a.drawOlapResult.call(a,r,u,c,m))}},CLS:{resize:function(e,t){this.setPanelSize(e,t)},afterrender:function(e){e.init_f.call(e)}},setPanelSize:function(e,t){var i=this._gridview?this._gridview._mgrid:null;i&&i.resize.call(i,e,t)},getDrillXML:function(e){var t,i,s,r,n,a,o,l,d,p,m,u,c,h,f,g=this,w=g._gridview._selectedCells.call(g._gridview),v=g._gridview._mgrid,y=g._gridview.mresult,_=g.sheetoption.model,x=_.showlnum,b={},j=0,C=0,E=0,b={ftype:"group",conjunction:"AND",children:[]};if(_.filter&&b.children.push(_.filter),_.aux_filter&&$.each(_.aux_filter,function(e,t){b.children.push(t)}),w&&0<w.length){for(1==_.rows.length&&0==_.cols.length&&(void 0===v.treecol||v.treeCol<0)&&(h={ftype:"group",children:[{ftype:"condition",operator:"IN",fields:[{name:_.rows[0].name,uid:_.rows[0].uid,type:_.rows[0].type}],values:[]}]},b.children.push(h)),c={ftype:"group",conjunction:"AND",children:[]},n=0;n<w.length;n++)if(t=w[n],!e||!e.titem.enabled||(C=0,(1==t.position&&_.rows[t.index]&&e.titem.item_map[_.rows[t.index].uid]||3==t.position&&_.measures&&_.measures[t.index]&&e.titem.item_map[_.measures[t.index].uid]||2==t.position&&_.cols[t.index]&&e.titem.item_map[_.cols[t.index].uid])&&(C=1),0!=C))if(1!=t.title){if(E++,u={ftype:"group",conjunction:"AND",children:[]},-1<v.treeCol){if(s=(r=v.treeData[t.dr])[v.treeCol])for(;s;)1==(i=s).position&&_.rows[i.index]?(f=_.rows[i.index],e&&e.tparams&&e.tparams.enabled&&e.tparams.items.length&&!e.tparams.item_map[f.uid]||(p={ftype:"condition",operator:"EQ",fields:[{name:f.name,uid:f.uid,type:f.itemtype}],values:[{code:i.code,value:i.value}]},u.children.push(p))):3==i.position&&_.measures&&_.measures[i.index]&&(f=_.measures[i.index],e&&e.tparams&&e.tparams.enabled&&e.tparams.items.length&&e.tparams.item_map[f.uid]&&(j=1,m={ftype:"measure",fields:[{name:f.name,uid:f.uid,type:f.itemtype}]},u.children.push(m))),s=i.parent;else 1==(i=r[v.treeCol]).position&&_.rows[i.index]?(f=_.rows[i.index],e&&e.tparams&&e.tparams.enabled&&e.tparams.items.length&&!e.tparams.item_map[f.uid]||(p={ftype:"condition",operator:"EQ",fields:[{name:f.name,uid:f.uid,type:f.itemtype}],values:[{code:i.code,value:i.value}]},u.children.push(p))):3==i.position&&_.measures&&_.measures[i.index]&&(f=_.measures[i.index],e&&e.tparams&&e.tparams.enabled&&e.tparams.items.length&&e.tparams.item_map[f.uid]&&(j=1,m={ftype:"measure",fields:[{name:f.name,uid:f.uid,type:f.itemtype}]},b.children.push(m)));!j&&_.measures&&1==_.measures.length&&t.c>=y.colfix&&t.r>=y.rowfix&&(f=_.measures[0],e&&e.tparams&&e.tparams.enabled&&e.tparams.items.length&&e.tparams.item_map[f.uid]&&(j=1,m={ftype:"measure",fields:[{name:f.name,uid:f.uid,type:f.itemtype}]},u.children.push(m)))}else{for(r=y._tabledata[t.r],o=x?1:0,l=y.colfix+(x?1:0),j=0,(!e||e&&!e.tparams.enabled)&&t.c<y.colfix&&(e&&e._dall||(o=t.c,l=t.c+1)),a=o;a<l;a++)if(1==(i=r[a]).position&&_.rows[i.index]){if(f=_.rows[i.index],e&&e.tparams&&e.tparams.enabled&&e.tparams.items.length&&!e.tparams.item_map[f.uid])continue;h?h.children[0].values.push({code:i.code,value:i.value}):(p={ftype:"condition",operator:"EQ",fields:[{name:f.name,uid:f.uid,type:f.type}],values:[{code:i.code,value:i.value}]},u.children.push(p))}else 3==i.position&&_.measures&&_.measures[i.index]&&(f=_.measures[i.index],e&&e.tparams&&e.tparams.enabled&&e.tparams.items.length&&e.tparams.item_map[f.uid]&&(j=1,m={ftype:"measure",fields:[{name:f.name,uid:f.uid,type:f.itemtype}]},u.children.push(m)));for(a=0;a<y.rowfix;a++)if(2==(i=y._tabledata[a][t.c]).position&&_.cols[i.index]){if(f=_.cols[i.index],e&&e.tparams&&e.tparams.enabled&&e.tparams.items.length&&!e.tparams.item_map[f.uid])continue;d={ftype:"condition",operator:"EQ",fields:[{name:f.name,uid:f.uid,type:f.type}],values:[{code:i.code,value:i.value}]},u.children.push(d)}else 3==i.position&&_.measures&&_.measures[i.index]&&(f=_.measures[i.index],e&&e.tparams&&e.tparams.enabled&&e.tparams.items.length&&e.tparams.item_map[f.uid]&&(j=1,m={ftype:"measure",fields:[{name:f.name,uid:f.uid,type:f.itemtype}]},u.children.push(m)));!j&&_.measures&&1==_.measures.length&&t.c>=y.colfix&&t.r>=y.rowfix&&(f=_.measures[0],e&&e.tparams&&e.tparams.enabled&&e.tparams.items.length&&e.tparams.item_map[f.uid]&&(m={ftype:"measure",fields:[{name:f.name,uid:f.uid,type:f.itemtype}]},u.children.push(m)))}h||(u.conjunction="OR",c.children.push(u))}else E++;b.children.push(c)}return 0<E?b:null},getSelection:function(){return this._gridview._selectedCells.call(this._gridview)},getExportData:function(e){var t=null,i=(new Array,this._gridview.mresult),s=i?i.delim:null;i&&i.merge,this._gridview._mgrid;return i?t={jobid:this._gridview.jobid,cols:i.cols,rows:i.rows,delimiter:s,fixedrow:i.rowfix}:t},applyOptions:function(e,t){var i=this;e&&t&&(i.reportoption=e,i.sheetoption=t),i._gridview.applyOptions(i.reportoption,i.sheetoption)},initComponent:function(){var s=this;s.on("resize",function(e,t,i){s.CLS.resize.call(s,t,i)}),s.on("afterrender",function(e){s.CLS.afterrender.call(s,e)}),IG$.sheetViewer.superclass.initComponent.call(this)}});
IG$.d$RscrEdit=$s.extend($s.window,{name:"rscript",title:"Script",layout:"fit",height:600,width:750,modal:!0,draggable:!0,resizable:!0,focusOnToFront:!0,bodyPadding:6,initApp:function(){var t=this,e=t.down("[name=rscript]"),a=t.down("[name=rprompt]"),o=t.down("[name=minwidth]"),n=t.down("[name=minheight]"),r=t.sheetoption;e.setValue(r.model.roption.script),a.setValue(r.model.roption.rprompts),o.setValue(r.model.roption.minwidth),n.setValue(r.model.roption.minheight)},confirm:function(){var t=this,e=t.down("[name=rscript]"),a=t.down("[name=rprompt]"),o=t.down("[name=minwidth]"),n=t.down("[name=minheight]");e.setValue(sheetoption.model.roption.script),a.setValue(sheetoption.model.roption.rprompts),o.setValue(sheetoption.model.roption.minwidth),n.setValue(sheetoption.model.roption.minheight)},initComponent:function(){$s.apply(this,{items:[{xtype:"container",layout:{type:"vbox",align:"stretch"},bodyPadding:6,items:[{xtype:"tabpanel",name:"meT",activeTab:0,flex:1,headerPosition:"right",tabPosition:"top",preventHeader:!0,border:0,layout:"fit",items:[{xtype:"panel",title:"Script",layout:{type:"vbox",align:"stretch"},border:0,items:[{xtype:"textarea",grow:!1,flex:1,name:"rscript",fieldLabel:"R Script",hideLabel:!0,anchor:"100%"},{xtype:"fieldset",title:IRm$.r1("L_VIEW_OPTION"),defaultType:"textfield",items:[{xtype:"fieldcontainer",layout:{type:"hbox",align:"stretch"},bodyPadding:0,items:[{name:"minwidth",fieldLabel:IRm$.r1("L_MIN_WIDTH"),xtype:"numberfield",labelAlign:"right",value:0,minValue:0,maxValue:5e3,flex:1},{name:"minheight",fieldLabel:IRm$.r1("L_MIN_HEIGHT"),xtype:"numberfield",labelAlign:"right",value:0,minValue:0,maxValue:5e3,flex:1}]}]}]},{xtype:"panel",title:"Prompt",layout:"fit",border:0,items:[{xtype:"textarea",grow:!1,name:"rprompt",fieldLabel:"R Prompt",hideLabel:!0,anchor:"100%"}]}]}]}],listeners:{beforeclose:function(t,e){this.sheetoption&&(this.sheetoption.model.roption.showscript=!1)},afterrender:function(){this.initApp()},scope:this},buttons:["->",{xtype:"button",text:"Request",handler:function(){var t=this,e=t.down("[name=rscript]"),a=t.down("[name=rprompt]"),o=t.down("[name=minwidth]"),n=t.down("[name=minheight]"),r=t.sheetoption.model.roption;r.script=e.getValue(),r.rprompts=a.getValue(),r.minwidth=o.getValue(),r.minheight=n.getValue(),t.callback&&t.callback.execute()},scope:this},{xtype:"button",text:"Close",handler:function(){this.close()},scope:this}]}),IG$.d$RscrEdit.superclass.initComponent.call(this)}}),IG$.v$rstatViewer=$s.extend(IG$.v$pnl,{sheetobj:null,pg:0,pgm:-1,pgs:2e3,rt:-1,df:6,sized:!0,aftsized:!1,layout:"fit",_init:!1,init_f:function(){var t=this;t.getWidth(),t.getHeight(),t.body.dom;t._init=!0,t.updatePromptCtrls(),t.mresults&&t.applyReportResult(null,null,null,null,!0)},initCustomControl:function(){},applyReportResult:function(t,e,a,o,n){var r=this,i=r.rstat;r.rstatcontent;n||(r.mresults=t,r.olapset=e,r.reportoption=a,r.sheetoption=o),r._init&&(r.getWidth(),r.getHeight(),r.sheetoption.model.roption=r.sheetoption.model.roption||{},r.sheetoption.model.roption.showsummary?i.show():i.hide(),r.pgs=r.sheetoption.model.roption.pgs||2e3,setTimeout(function(){t.r_stat?r.rs_requestR.call(r,t.r_stat):1==r.sized?r.requestR.call(r):r.aftsized=!0},20))},updateRScr:function(){this.sheetoption},_ctrlwindow:function(t){var e,a,o=this,n=o.rstat;switch(t){case"cmd_r_summary":e="showsummary",n.show();break;case"cmd_r_script":e="showscript",a=new IG$.d$RscrEdit({sheetoption:o.sheetoption,callback:new IG$.callBackObj(o,function(){var t=this;t.updatePromptCtrls.call(t),t.requestR()})}),IG$.checkLogin(this,a)}o.sheetoption&&e&&(o.sheetoption.model.roption[e]=!0)},initComponent:function(){var o=this;IG$.apply(o,{items:[{xtype:"panel",name:"rmain",layout:"fit",items:[{name:"rgraph",xtype:"panel",layout:"fit",items:[{name:"rg",html:"",xtype:"container",bodyStyle:"padding: 0px"}]}]}]}),o.on("resize",function(t,e,a){o.CLS.resize.call(o,e,a)}),o.on("afterrender",function(){o.CLS.afterrender.call(o,o)}),IG$.v$rstatViewer.superclass.initComponent.call(o)},CLS:{resize:function(t,e){var a=this,o=(a.down("[name=rgraph]"),a.down("[name=rg]")),n=a.rgraphzone;0<t&&0<e&&(o.setSize(t,e),n&&(IG$.j$ext._w(n,t),IG$.j$ext._h(n,e)),a.setPanelSize(t,e),a.sized=!0,1==a.aftsized&&(a.aftsized=!1,a.requestR.call(a)))},afterrender:function(t){var e=t.down("[name=rg]"),a=$(e.body.dom);a.empty(),t.render.call(t,a),this.init_f()}},requestR:function(){var t,e,a=this,o=a.olapset,n=a.reportoption,r=a.sheetobj;o&&o.jobid&&(r.sheetoption.model.panelwidth=IG$.j$ext._w(a._parentdom),r.sheetoption.model.panelheight=IG$.j$ext._h(a._parentdom),t=n.getCurrentPivot(),(e=new IG$._rpc$).init(a,{ack:"olapservice",payload:{uid:n.uid,jobid:o.jobid,option:"pivot",active:""+r.sheetindex,pivotresult:"F",rstatresult:"T"},mbody:t,meta_type:"report"},a,a.rs_requestR),e.send())},rs_requestR:function(t){var e,a,o,n,r,i,l,s,p=this,d=(p.rstat,p.rstatcontent),c=(p.rscript,p.rgraphzone),h=p.ctrlzone,m=d;if(m.empty(),c.empty(),e=IG$.XGetNode(t,"/smsg/result/execution"))for(a=IG$.XGetChildNodes(e),n=[],o=0;o<a.length;o++){r=IG$.XGetTextVal(a[o]),r=Base64.decode(r),i=null;try{i=$.parseJSON(r)}catch(t){0}i&&i.sc&&(1!=/(summary|print)/.test(i.sc)&&1!=i.iserror||p.appendSummary(i,m)),n.push(i)}if((e=IG$.XGetNode(t,"/smsg/result/plot"))&&(r=IG$.XGetTextVal(e))){r=Base64.decode(r);try{l=$.parseJSON(r)}catch(t){l=null}for(p.plotdata=[],o=0;o<l.gr.length;o++)"pg"==l.gr[o].c&&(s={w:l.w,h:l.h,gr:l.gr[o].data},p.plotdata.push(s));0<p.plotdata.length&&(p.pg=0,1<p.plotdata.length&&(h.show(),p.updatePgDisp()),p.drPlot(c,p.plotdata[p.pg],!0,!1))}},appendSummary:function(t,e,a){var o,n,r,i,l,s,p,d,c,h,m,f,g,u,b,w,y,v,x;if(1==t.iserror)m=$("<div class='idv-r-stable'></div>").appendTo(e),cont=t.cont,$("<span>&gt;&gt; "+t.sc+"</span><br>").appendTo(m),$("<span color='red'>"+cont+"</span>").appendTo(m);else if(t.dt)switch(r=t.dt){case"namedlist":if("namedlist"==t.attr.dt){for(y in i=t.attr.cont.names.cont,d=t.attr.cont["row.names"]?t.attr.cont["row.names"].cont:null,c=t.cont,h=!0,mlength=-1,c)if(c[y].cont&&c[y].cont.length&&(mlength<0&&(mlength=c[y].cont.length),mlength!=c[y].cont.length||"lang"==c[y].dt)){h=!1;break}if(i&&0<i.length)if(m=$("<div class='idv-r-stable'></div>").appendTo(e),g=$("<div><span style='float: left;'>"+(t.sc||(a?a.sc:""))+"</span><div>").appendTo(m),1==h){for(u=$("<div class='clipbutton' style='float: left;'>&nbsp;&nbsp;Select All</div>").appendTo(g),f=$("<table style='clear: both;'></table>").appendTo(m),u.bind("click",function(){IG$.selectAll(f)}),k=$("<tr></tr>").appendTo(f),d&&0<d.length&&$("<th></th>").appendTo(k),o=0;o<i.length;o++)$("<th>"+i[o]+"</th>").appendTo(k);for(x=d&&0<d.length?d.length:0,c&&c[i[0]]&&(x=Math.max(x,c[i[0]].cont.length)),o=0;o<x;o++)for(k=$("<tr></tr>").appendTo(f),d&&0<d.length&&(b=d.length>o?d[o]:"",$("<td>"+b+"</td>").appendTo(k)),n=0;n<i.length;n++)b=c[w=i[n]]&&c[w].cont.length>o?c[w].cont[o]:"",$("<td>"+b+"</td>").appendTo(k)}else for(y in c)c[y].sc=y,this.appendSummary(c[y],m)}break;case"numeric":case"int":case"lang":if(t.cont&&0<t.cont.length)if(m=$("<div class='idv-r-stable'></div>").appendTo(e),g=$("<div><span style='float: left;'>"+(t.sc||(a?a.sc:""))+"</span><div>").appendTo(m),u=$("<div class='clipbutton' style='float: left;'>&nbsp;&nbsp;Select All</div>").appendTo(g),f=$("<table style='clear: both;'></table>").appendTo(m),u.bind("click",function(){IG$.selectAll(f)}),k=$("<tr></tr>").appendTo(f),"lang"==r)$("<td>"+t.cont+"</td>").appendTo(k);else for(o=0;o<t.cont.length;o++)b=t.cont[o],$("<td>"+b+"</td>").appendTo(k);break;case"factor":if((c=t.cont)&&0<c.length){for(m=$("<div class='idv-r-stable'></div>").appendTo(e),g=$("<div><span style='float: left;'>"+(t.sc||(a?a.sc:""))+"</span><div>").appendTo(m),u=$("<div class='clipbutton' style='float: left;'>&nbsp;&nbsp;Select All</div>").appendTo(g),f=$("<table style='clear: both;'></table>").appendTo(m),u.bind("click",function(){IG$.selectAll(f)}),k=$("<tr></tr>").appendTo(f),$("<td></td>").appendTo(k),o=0;o<c.length;o++)b=c[o],$("<td>"+b+"</td>").appendTo(k);if(t.attr&&"namedlist"==t.attr.dt)for(y in t.attr.cont){var T=t.attr.cont[y].cont,k=$("<tr></tr>").appendTo(f);for($("<th>"+y+"</th>").appendTo(k),o=0;o<T.length;o++)b=T[o],$("<td>"+b+"</td>").appendTo(k)}}break;case"string":if((c=t.cont).length,v=[],x=1,t.attr&&"namedlist"==t.attr.dt&&t.attr.cont.names?i=t.attr.cont.names.cont:(t.attr&&t.attr.cont.dim&&((s=t.attr.cont.dim.cont)[1],x=s[0]),t.attr&&t.attr.cont.dimnames&&(p=t.attr.cont.dimnames.dt,l=t.attr.cont.dimnames.cont)),m=$("<div class='idv-r-stable'></div>").appendTo(e),g=$("<div><span style='float: left;'>"+(t.sc||(a?a.sc:""))+"</span><div>").appendTo(m),u=$("<div class='clipbutton' style='float: left;'>&nbsp;&nbsp;Select All</div>").appendTo(g),f=$("<table style='clear: both;'></table>").appendTo(m),u.bind("click",function(){IG$.selectAll(f)}),i&&0<i.length)for(k=$("<tr></tr>").appendTo(f),o=0;o<i.length;o++)b=i[o],$("<th>"+b+"</th>").appendTo(k);else if(s&&"list"==p&&l&&2==l.length)for(k=$("<tr></tr>").appendTo(f),$("<th></th>").appendTo(k),o=0;o<s[1];o++)b=l[1].cont[o],$("<th>"+b+"</th>").appendTo(k);for(o=0;o<x;o++)k=$("<tr></tr>").appendTo(f),v.push(k);for(o=0;o<c.length;o++){var I=o%v.length;o<v.length&&s&&"list"==p&&l&&2==l.length&&$("<td>"+l[0].cont[I]+"</td>").appendTo(v[I]),b=c[o],$("<td>"+b+"</td>").appendTo(v[I])}break;default:}},drPlotCanvas:function(t,e){var a,o=IG$.j$ext._w(t),n=IG$.j$ext._h(t),r=o/e.w,i=n/e.h,l=$("<canvas></canvas>").appendTo(t),s=o,p=n;if(IG$.j$ext._w(l,s),IG$.j$ext._h(l,p),a=(this.crv=l)[0].getContext("2d")){a.canvas.width=s,a.canvas.height=p;var d,c,h,m,f,g,u,b,w,y,v,x,T,k=a.lineWidth=0,I={x:0,y:0,w:a.canvas.width,h:a.canvas.height},P={x:I.x,y:I.y,w:I.w,h:I.h};for(d=0,c=e.gr.length;d<c;d++)if("cr"!=(m=e.gr[d]).c)if("rc"!=m.c){switch(a.save(),"t"==m.c||P.x==I.x&&P.y==I.y&&P.w==I.w&&P.h==I.h||(a.beginPath(),a.rect(I.x,I.y,I.w,I.h,!1),a.clip()),x=!(P={x:I.x,y:I.y,w:I.w,h:I.h}),m.lc&&(a.lineCap=m.lc),m.lj&&(a.lineJoin=m.lj),m.ml&&(a.miterLimit=Number(m.ml)),m.ss&&(lss=m.ss,a.lineWidth=1,x=!0,a.strokeStyle=lss),!m.lw&&0!=m.lw||(k=Number(m.lw)),1==x&&(a.lineWidth=k),m.fs&&(a.fillStyle=m.fs),y=w=0,m.ftr&&"t"!=m.c&&a.ftr(m.ftr[0]+w,m.ftr[1]+y),"t"==m.c?(v={width:a.measureText(m.data).width,height:10},s=m.ftr?m.ftr[0]:0,p=m.ftr?m.ftr[1]:0,y=m.fro?(m.x+=this.df*m.data.length/2-v.width/2,w=s*r,p*i):(w=(m.x+s)*r,(m.y+p)*i),a.translate(w,y),a.scale(1,1),lss=null,k=0):a.scale(r,i),m.fro&&a.rotate(m.fro),m.c){case"c":a.beginPath(),a.arc(m.cx,m.cy,m.r,0,2*Math.PI,!1),a.stroke(),m.fs&&a.fill();break;case"l":0<k&&(a.lineWidth=k,a.beginPath(),a.moveTo(m.x1,m.y1),a.lineTo(m.x2,m.y2),a.stroke());break;case"t":m.fro?a.fillText(m.data,m.x,m.y):a.fillText(m.data,0,0);break;case"pl":if(m.data){for(T=m.data.split(/[MLZ]+/),b=!1,h=0;h<T.length;h++)""!=T[h]&&(g=(f=T[h].split(","))[0],u=f[1],0==b?(a.beginPath(),a.moveTo(g,u)):a.lineTo(g,u),b=!0);1==x&&a.stroke()}break;case"po":if(m.data){for(T=m.data.split(/[MLZ]+/),b=!1,h=0;h<T.length;h++)""!=T[h]&&(g=(f=T[h].split(","))[0],u=f[1],0==b?(a.beginPath(),a.moveTo(g,u)):a.lineTo(g,u),b=!0);a.closePath(),m.fs&&a.fill(),1==x&&a.stroke()}break;case"r":a.beginPath(),a.rect(m.x+(m.w<0?m.w:0),m.y+(m.h<0?m.h:0),Math.abs(m.w),Math.abs(m.h)),m.fs&&a.fill(),1==x&&a.stroke();break;case"n":default:lss=null,k=0}a.restore()}else I={x:0,y:0,w:a.canvas.width,h:a.canvas.height};else I={x:m.x*r,y:m.y*i,w:m.w*r,h:m.h*i}}},drPlotSVG:function(t,e,a){var o,n,r,i,l,s,p,d,c,h,m,f,g,u,$,b,w,y,v=IG$.j$ext._w(t),x=IG$.j$ext._h(t),T=v/e.w,k=x/e.h,I=!1,P=[0,0,v,x],G=[];if(0==a){for(G.push("<svg style='overflow-x:hidden;overflow-y:hidden;position:relative;' height='"+x+"' version='1.1' width='"+v+"' xmlns='http://www.w3.org/2000/svg'><desc>Created by boguenon 2.0.0</desc>"),n=0,r=e.gr.length;n<r;n++){switch(I=!(m={}),$=u=s=null,(l=e.gr[n]).c){case"c":u="<circle style='stroke-opacity:1;' cx='"+l.cx+"' cy='"+l.cy+"' r='"+l.r+"' ",$="/>",m["stroke-width"]=0,I=!(m["stroke-opacity"]=0);break;case"l":u="<path style='stroke-opacity:1;' d='",u+="M"+l.x1+","+l.y1+"L"+l.x2+","+l.y2+"' ",$="/>",I=!0;break;case"t":t1x=0,t1y=0,l.pro&&(t1x=l.x+this.df*l.data.length/2,t1y=l.y),u="<text style='text-anchor: middle; font-family: Arial; font-size: 10px; font-style: normal; font-variant: normal; font-weight: normal; line-height: normal; ' x='"+t1x+"' y='"+t1y+"' text-anchor='middle' font='10px &quot;Arial&quot;'",$="><tspan>"+l.data+"</tspan></text>";break;case"pl":case"po":l.data&&(u="<path style='stroke-opacity:1;' d='"+l.data+"'",$="/>",m["stroke-width"]=0,m["stroke-opacity"]=0,m.fill="none",I=!0);break;case"r":u="<path style='stroke-opacity:1;' d='M"+(l.x+(l.w<0?l.w:0))+","+(l.y+(l.h<0?l.h:0))+"L"+(l.x+(l.w<0?l.w:0)+Math.abs(l.w))+","+(l.y+(l.h<0?l.h:0))+"L"+(l.x+(l.w<0?l.w:0)+Math.abs(l.w))+","+(l.y+(l.h<0?l.h:0)+Math.abs(l.h))+"L"+(l.x+(l.w<0?l.w:0))+","+(l.y+(l.h<0?l.h:0)+Math.abs(l.h))+"Z'",$="/>",m["stroke-opacity"]=0,m["stroke-width"]=0,m.fill="none",I=!0}if(u){if(l.lc&&(I=!0,m["stroke-linecap"]=l.lc),l.lj&&(I=!0,m["stroke-linejoin"]=l.lj),l.ml&&(I=!0,m["stroke-miterlimit"]=Number(l.ml)),l.lw&&(I=!0,m["stroke-width"]=Number(l.lw),m["stroke-opacity"]=0<Number(l.lw)?1:0),l.ss&&(m.stroke=l.ss,m["stroke-width"]=1,m["stroke-opacity"]=1,I=!0),l.fs){if("rgba"==l.fs.substring(0,4)){for((f=l.fs.substring(6,l.fs.length-1).split(","))[3]=Number(f[3]),g=1-f[3],i=0;i<f.length-1;i++)f[i]=Math.round(f[3]*Number(f[i])+255*g);m["fill-opacity"]=g,f.splice(3,1),m.fill="rgb("+f.join(",")+")"}else m.fill=l.fs;I=!0}if(w=!1,y="",1==I)for(b in m)u+=" "+b+"='"+m[b]+"'";d=p=0,w=("t"==l.c?(c=l.ftr?l.ftr[0]:0,h=l.ftr?l.ftr[1]:0,d=l.fro?(IG$.measureText(10,l.data),p=c*T-5,h*k):(p=(l.x+c)*T,(l.y+h)*k-5),y+=" translate("+ +p.toFixed(4)+","+ +d.toFixed(4)+")"):y+=" scale("+T+","+k+")",!0),l.ftr&&"t"!=l.c&&(y+=" translate("+l.ftr[0]+","+l.ftr[0]+")",w=!0),l.fro&&(y+=" rotate("+ +(180*l.fro/Math.PI).toFixed(2)+")",w=!0),w&&(u+=" transform='"+y+"'"),u+=$,G.push(u)}}G.push("</svg>")}else{for((o=Raphael(t[0],v,x)).setStart(),n=0,r=e.gr.length;n<r;n++){switch(s=null,I=!(m={}),(l=e.gr[n]).c){case"c":s=o.circle(l.cx,l.cy,l.r),m["stroke-width"]=0,I=!(m["stroke-opacity"]=0);break;case"l":s=o.path("M"+l.x1+","+l.y1+"L"+l.x2+","+l.y2);break;case"t":s=l.fro?(l.x+=this.df*l.data.length/2,o.text(l.x*T,l.y*k,l.data)):o.text(0,0,l.data);break;case"pl":case"po":l.data&&(s=o.path(l.data),m["stroke-width"]=0,I=!(m["stroke-opacity"]=0));break;case"r":s=o.rect(l.x+(l.w<0?l.w:0),l.y+(l.h<0?l.h:0),Math.abs(l.w),Math.abs(l.h)),m["stroke-opacity"]=0,I=!(m["stroke-width"]=0);break;case"cr":P=[l.x*T,l.y*k,l.w*T,l.h*k];break;case"rc":P=[0,0,v,x]}s&&("t"!=l.c&&(m["clip-rect"]=P.join(",")),l.lc&&(I=!0,m["stroke-linecap"]=l.lc),l.lj&&(I=!0,m["stroke-linejoin"]=l.lj),l.ml&&(I=!0,m["stroke-miterlimit"]=Number(l.ml)),l.lw&&(I=!0,m["stroke-width"]=Number(l.lw),m["stroke-opacity"]=0<Number(l.lw)?1:0),l.ss&&(m.stroke=l.ss,m["stroke-width"]=1,m["stroke-opacity"]=1,I=!0),l.fs&&(m.fill=l.fs,I=!0),1==I&&s.attr(m),d=p=0,"t"==l.c?(c=l.ftr?l.ftr[0]:0,h=l.ftr?l.ftr[1]:0,l.fro?(s.getBBox(),p=c*T-5,d=h*k,s.translate(p,d),s.rotate(180*l.fro/Math.PI,0,0)):(p=(l.x+c)*T,d=(l.y+h)*k-5,s.translate(p,d))):s.scale(T,k,T,k),l.ftr&&"t"!=l.c&&s.translate(l.ftr[0]+p,l.ftr[1]+d),l.fro&&"t"!=l.c&&s.rotate(180*l.fro/Math.PI))}o.setFinish()}return G},drPlot:function(t,e,a,o){var n=this,r=n._parentdom,i=IG$.j$ext._w(r),l=IG$.j$ext._h(r),s=IG$.j$ext._w(t),p=IG$.j$ext._h(t),d=(e.w,e.h,[]);0==i&&0==l&&(i=n.width,l=n.height,IG$.j$ext._w(r,i),IG$.j$ext._h(r,l)),0==s&&0==p&&(s=n.width,p=n.height,IG$.j$ext._w(t,s),IG$.j$ext._h(t,p)),5<Math.abs(e.w-i)||5<Math.abs(e.h-l)?(s=e.w,p=e.h,IG$.j$ext._w(t,s),IG$.j$ext._h(t,p),i<s||l<p?r.css({overflow:"scroll"}):r.css({overflow:"hidden"})):(!1===o&&(IG$.j$ext._w(t,e.w),IG$.j$ext._h(t,e.h)),r.css({overflow:"hidden"}));var c=!!window.HTMLCanvasElement,h=IG$.mcanvas||c;return 0==a?d=n.drPlotSVG(t,e,a):h?n.drPlotCanvas(t,e):n.drPlotSVG(t,e,a),d},updatePromptCtrls:function(){var panel=this,sop=panel.sheetoption,rpromptdlg=panel.rpromptPnl,rro=sop?sop.roption:null,s4,promptdef,sdom,tb,mh;if(rpromptdlg.hide(),panel.rpromptBtn.hide(),sdom=$("#promptcontent",panel.rpromptPnl),sdom.empty(),rro&&(rro.rpromptcontrols={items:[]},s4=rro.rprompts,s4)){try{promptdef=eval("("+s4+")")}catch(t){return void IG$.ShowError("Error on prompt control definition")}promptdef&&0<promptdef.length&&(tb=$("<table></table>").appendTo(sdom),$.each(promptdef,function(t,e){var a,o,n=$("<tr></tr>").appendTo(tb),r={name:e.name,type:e.type.toLowerCase(),ctrl:null};$("<th>"+(e.title||"")+"</th>").appendTo(n);var i=$("<td></td>").appendTo(n);switch(e.type.toLowerCase()){case"combobox":if(a=$("<select></select>").appendTo(i),e.data&&"object"==typeof e.data&&0<e.data.length)for(o=0;o<e.data.length;o++)$("<option value='"+(e.data[o].value||e.data[o].name)+"'>"+(e.data[o].name||e.data[o].value)+"</option>").appendTo(a);break;case"textinput":(a=$("<input type='text'></input>").appendTo(i)).val(e.value||e.data||"")}r.ctrl=a,rro.rpromptcontrols.items.push(r)}),rpromptdlg.show(),panel.rpromptBtn.show(),mh=$("#prompttable",panel.rpromptPnl).height()+25+30,rpromptdlg.height(Math.min(mh,300)))}},moveCtrlPg:function(t){var e=this,a=e.plotdata,o=e.pg,n=e.rgraphzone,r=o+t;r<a.length&&-1<r?(e.pg=r,e.updatePgDisp(),n.empty(),e.drPlot(n,a[e.pg],!0,!1)):-1<e.pgm&&clearInterval(e.pgm)},updatePgDisp:function(){this.currentPg.text("Page: "+(this.pg+1)+"/"+this.plotdata.length)},getDataColumns:function(){var t,e,a,o,n,r,i,l,s=[],p=this.mresults,d=p.results;if(p&&d&&0<d.length)for(e=(t=d[0]).rowfix,a=t.colfix,o=t.cols,n=t.data,r=0;r<o;r++){for(i=0;i<e;i++)l=0==i?n[i][r].code:l+"_"+n[i][r].code;s.push({cindex:r,isdata:!(r<a),name:l})}return s},render:function(t){var e=this;e._parentdom=t,e.rgraphzone=$("<div></div>"),e.rgraphzone.appendTo(t),e.ctrlzone=$("<ul class='r-menu'><ul>").hide(),e.currentPg=$("<li class='r-disp'></li>").appendTo(e.ctrlzone),e.currentPg.text("Page: "+(e.pg+1)),$("<li class='r-back' title='Previous page'> </li>").appendTo(e.ctrlzone).bind("click",function(){-1<e.pgm&&clearInterval(e.pgm),e.moveCtrlPg(-1)}),$("<li class='r-stop' title='Stop play'> </li>").appendTo(e.ctrlzone).bind("click",function(){-1<e.pgm&&(clearInterval(e.pgm),e.pgm=-1)}),$("<li class='r-play' title='Play pages'> </li>").appendTo(e.ctrlzone).bind("click",function(){-1<e.pgm&&clearInterval(e.pgm),e.pg=0,e.pgm=setInterval(function(){e.moveCtrlPg(1)},e.pgs)}),$("<li class='r-slower' title='Slower play'> </li>").appendTo(e.ctrlzone).bind("click",function(){-1<e.pgm&&clearInterval(e.pgm),e.pgs+=100,e.sheetoption.roption.pgs=e.pgs,e.pgm=setInterval(function(){e.moveCtrlPg(1)},e.pgs)}),$("<li class='r-faster' title='Fast play'> </li>").appendTo(e.ctrlzone).bind("click",function(){-1<e.pgm&&clearInterval(e.pgm),100<e.pgs-100&&(e.pgs-=100,e.sheetoption.roption.pgs=e.pgs),e.pgm=setInterval(function(){e.moveCtrlPg(1)},e.pgs)}),$("<li class='r-forward' title='Next page'> </li>").appendTo(e.ctrlzone).bind("click",function(){-1<e.pgm&&clearInterval(e.pgm),e.moveCtrlPg(1)}),e.ctrlzone.appendTo(t),IG$.drawLicenseTag(t),e.rstat=$("<div class='m-r-rstat'></div>").hide();var a=$("<div class='m-r-rstat-button'><span id='rstat-title'>Statistics Summary</span><div id='rstat-close'></div></div>").appendTo(e.rstat);$("#rstat-close",a).bind("click",function(){var t=e;t.sheetoption&&(t.sheetoption.roption.showsummary=!1),t.rstat.hide()}),e.rstatcontent=$("<div class='m-r-rstatcontent'></div>").appendTo(e.rstat),e.rstat.appendTo(t),e.rpromptBtn=$("<div class='m-r-promptbutton'><div class='icon'></div><span>Prompt</span></div>").hide(),e.rpromptBtn.appendTo(t),e.rpromptPnl=$("<div class='m-r-promptpanel'><table id='prompttable'><tr id='promptcontent'></tr><tr><td><button id='promptrequest'>Request</button></td></tr></table></div>").hide(),e.rpromptPnl.appendTo(t),sdom=$("#promptrequest",e.rpromptPnl),sdom.bind("click",function(){e.requestR.call(e)}),e.rpromptBtn.bind("click",function(){e.rpromptPnl.toggle()})},setPanelSize:function(e,a){var o=this;-1<o.rt&&clearTimeout(o.rt),o.rt=setTimeout(function(){var t=o.rgraphzone;t.empty(),o.plotdata&&0<o.plotdata.length&&(o.width=e,o.height=a,o.drPlot(t,o.plotdata[o.pg],!0,!0))},200)},getDrillXML:function(){return""},getExportData:function(t,e,a,o,n,r,i){var l,s=this,p={},d=s.plotdata,c=s.rgraphzone;return d&&d.length>s.pg&&(l=d[s.pg],p={type:"chart",x:e,y:a,d_width:r,d_height:i,width:IG$.j$ext._w(c),height:IG$.j$ext._h(c),docid:n},"SVG"!==o&&s.crv&&s.crv[0]&&s.crv[0].toDataURL?p.image_data={type:"png",data:s.crv[0].toDataURL("image/png")}:p.image_data={type:"svg",data:Base64.encode(s.drPlot(c,l,!1).join(""))}),p},applyOptions:function(t,e){t&&e&&(this.reportoption=t,this.sheetoption=e)}});
IG$.v$pyViewer=$s.extend(IG$.v$pnl,{sheetobj:null,pg:0,pgm:-1,pgs:2e3,rt:-1,df:6,sized:!0,aftsized:!1,layout:"fit",_init:!1,applyReportResult:function(e,t,i,o,n){var a=this;n||(a.mresults=e,a.olapset=t,a.reportoption=i,a.sheetoption=o),a._init&&(a.getWidth(),a.getHeight(),setTimeout(function(){var t;e.r_python?a.rs_reqPython.call(a,e.r_python):1==a.sized&&(t=ig$.bootconfig.scmap.nbt,window.requirejs&&window.require?a.reqPython.call(a):IG$.getScriptCache(t,new IG$.callBackObj(this,function(){a.reqPython.call(a)})))},10))},reqPython:function(){var r,t,e=this,s=e.olapset,p=e.reportoption,d=e.sheetobj;s&&s.jobid&&(d.sheetoption.panelwidth=IG$.j$ext._w(e._parentdom),d.sheetoption.panelheight=IG$.j$ext._h(e._parentdom),r=p.getCurrentPivot(),(t=new IG$._rpc$).init(e,{ack:"olapservice",payload:{uid:p.uid,jobid:s.jobid,option:"jupyter_script",active:""+d.sheetindex,pivotresult:"F",pythonresult:"T"},mbody:r,meta_type:"report"},e,function(t){var e=this,i=e.down("[name=rg]"),o=$(".notebook",i.body.dom),n=t.session_id;o.empty(),e.region=o,n&&((IG$._ipt_location=IG$._ipt_location||{})[n]=e);var a=new IG$._rpc$;a.init(e,{ack:"olapservice",payload:{uid:p.uid,jobid:s.jobid,option:"pivot",active:""+d.sheetindex,pivotresult:"F",pythonresult:"T",session_id:n},mbody:r,meta_type:"report"},e,e.rs_reqPython),a.send()}),t.send())},rs_reqPython:function(t){var e=this.down("[name=rg]"),i=$(".notebook",e.body.dom),o=t?t.execute_result:null;o=o?Base64.decode(o):"No results on python execution",t.session_id||$(o).appendTo(i)},applyPython:function(t){var e,o=this.region;switch(t.msg_type){case"status":case"kernel_info_reply":case"comm_info_reply":break;case"display_data":e=t.content.data?t.content.data:null,$.each(e,function(t,e){var i;"text/html"==t&&(i=$("<div></div>").appendTo(o),$(e).appendTo(i))})}},_ctrlwindow:function(t){},init_f:function(){var t=this;t.getWidth(),t.getHeight(),t.body.dom;t._init=!0,t.mresults&&t.applyReportResult(null,null,null,null,!0)},initComponent:function(){var o=this;$s.apply(o,{items:[{xtype:"panel",name:"rmain",layout:"card",items:[{name:"rgraph",xtype:"panel",layout:"fit",items:[{name:"rg",autoScroll:!0,bodyStyle:"padding: 0px",html:"<div id='notebook-container' class='notebook'></div>"}]},{xtype:"panel",title:"Python Code Editor",layout:"fit",items:[{xtype:"container",name:"redit",layout:"fit",html:"<div class='r_python'><textarea name='tarea'></textarea></div>"}]}]}]}),o.on("resize",function(t,e,i){o.CLS.resize.call(o,e,i)}),o.on("afterrender",function(){o.CLS.afterrender.call(o,o)}),IG$.v$pyViewer.superclass.initComponent.call(o)},CLS:{resize:function(t,e){var i=this;0<t&&0<e&&(i.setPanelSize(t,e),i.sized=!0,1==i.aftsized&&(i.aftsized=!1))},afterrender:function(t){this.init_f()}},setPanelSize:function(t,e){-1<this.rt&&clearTimeout(this.rt),this.rt=setTimeout(function(){},20)},getDrillXML:function(){return""},getExportData:function(t,e,i,o,n,a,r){var s,p=this,d={},l=p.plotdata,c=p.rgraphzone;return l&&l.length>p.pg&&(s=l[p.pg],d={type:"chart",x:e,y:i,d_width:a,d_height:r,width:IG$.j$ext._w(c),height:IG$.j$ext._h(c),docid:n},"SVG"!==o&&p.crv&&p.crv[0]&&p.crv[0].toDataURL?d.image_data={type:"png",data:p.crv[0].toDataURL("image/png")}:d.image_data={type:"svg",data:Base64.encode(p.drPlot(c,s,!1).join(""))}),d},applyOptions:function(t,e){t&&e&&(this.reportoption=t,this.sheetoption=e)},_do_edit:function(t){var e=this,i=e.down("[name=rmain]"),o=e.down("[name=redit]"),n=$("[name=tarea]",o.body.dom),a=e.sheetoption.model;i.setActiveItem(t?1:0),t?(e.editmode&&(a.python_script=n.val()),n.val(a.python_script||[].join("\n"))):e.editmode&&(n=$("[name=tarea]",o.body.dom),a.python_script=n.val()),e.editmode=t}});
IG$.v$anViewer=$s.extend(IG$.v$pnl,{sheetobj:null,pg:0,pgm:-1,pgs:2e3,rt:-1,df:6,sized:!0,aftsized:!1,layout:"fit",_init:!1,applyReportResult:function(t,e,a,i,n){var s=this,o=s.down("[name=rg]"),l=$(".d_analysis",o.body.dom),r=$(".d_analysis_rg",l),d=$(".d_analysis_empt",l);r.hide(),d.show(),n||(s.mresults=t,s.olapset=e,s.reportoption=a,s.sheetoption=i),s._init&&(s.getWidth(),s.getHeight(),setTimeout(function(){t.r_analysis?s.rs_reqAnalysis.call(s,t.r_analysis):1==s.sized&&s.reqAnalysis.call(s)},10))},reqAnalysis:function(){var t,e,a=this,i=a.olapset,n=a.reportoption,s=a.sheetobj;i&&i.jobid&&(s.sheetoption.panelwidth=IG$.j$ext._w(a._parentdom),s.sheetoption.panelheight=IG$.j$ext._h(a._parentdom),t=n.getCurrentPivot(),(e=new IG$._rpc$).init(a,{ack:"olapservice",payload:{uid:n.uid,jobid:i.jobid,option:"pivot",active:""+s.sheetindex,pivotresult:"F",analysisresult:"T"},mbody:t,meta_type:"report"},a,a.rs_reqAnalysis),e.send())},rs_reqAnalysis:function(t){var e=this.down("[name=rg]"),a=$(".d_analysis",e.body.dom),i=$(".d_analysis_rg",a),n=$(".d_analysis_empt",a),s=t?t.table_data:null;i.empty(),n.hide(),s&&s.length?($.each(s,function(t,e){var a=[];a.push("<table class='t_analysis'>"),$.each(e.headers,function(t,e){a.push("<tr>"),$.each(e,function(t,e){a.push("<th class='anal-"+e.stylename+"'"+(e.colspan?" colspan='"+e.colspan+"'":"")+">"+(e.text||"")+"</th>")}),a.push("</tr>")}),$.each(e.rows,function(t,e){a.push("<tr>"),$.each(e,function(t,e){"data"==e.stylename?a.push("<td class='anal-data'>"+(e.formatvalue||e.value)+"</td>"):a.push("<td class='anal-"+e.stylename+"'>"+(e.text||"")+"</td>")}),a.push("</tr>")}),a.push("</table>"),$(a.join("")).appendTo(i)}),i.show()):n.show()},_ctrlwindow:function(t){},init_f:function(){var t=this;t.getWidth(),t.getHeight(),t.body.dom;t._init=!0,t.mresults&&t.applyReportResult(null,null,null,null,!0)},initComponent:function(){var i=this;$s.apply(i,{items:[{xtype:"panel",name:"rmain",layout:"fit",items:[{name:"rg",autoScroll:!0,bodyStyle:"padding: 0px",html:"<div class='d_analysis'><div class='d_analysis_rg'></div><div class='d_analysis_empt'><div class='d_analysis_empt_bg></div><span>No Analysis Result Data </span></div></div>"}]}]}),i.on("resize",function(t,e,a){i.CLS.resize.call(i,e,a)}),i.on("afterrender",function(){i.CLS.afterrender.call(i,i)}),IG$.v$anViewer.superclass.initComponent.call(i)},CLS:{resize:function(t,e){var a=this;0<t&&0<e&&(a.setPanelSize(t,e),a.sized=!0,1==a.aftsized&&(a.aftsized=!1))},afterrender:function(t){this.init_f()}},setPanelSize:function(t,e){-1<this.rt&&clearTimeout(this.rt),this.rt=setTimeout(function(){},20)},getDrillXML:function(){return""},getExportData:function(t,e,a,i,n,s,o){var l,r=this,d={},p=r.plotdata,h=r.rgraphzone;return p&&p.length>r.pg&&(l=p[r.pg],d={type:"chart",x:e,y:a,d_width:s,d_height:o,width:IG$.j$ext._w(h),height:IG$.j$ext._h(h),docid:n},"SVG"!==i&&r.crv&&r.crv[0]&&r.crv[0].toDataURL?(d.image_data=r.crv[0].toDataURL("image/png"),d.image_type="png"):(d.image_data=Base64.encode(r.drPlot(h,l,!1).join("")),d.image_type="svg")),d},applyOptions:function(t,e){t&&e&&(this.reportoption=t,this.sheetoption=e)}});
IG$.__analoption=IG$.__analoption||{analcateg:[{name:"All",value:"all"},{name:"Descriptive Statistics",value:"descriptive"},{name:"Compare Means",value:"compare"},{name:"Regression",value:"regression"},{name:"Process",value:"process"}],analtype:[{label:"Descriptive Statistics",type:"descriptive",img:"column",grp:"descriptive"},{label:"Frequencies",type:"frequencies",img:"column",grp:"descriptive"},{label:"Means",type:"means",img:"column",grp:"compare"},{label:"One-Sample T Test",type:"onesamplettest",img:"column",grp:"compare"},{label:"Independent Samples T Test",type:"independent_ttest",img:"column",grp:"compare"},{label:"Paired_Samples T Test",type:"paired_tt",img:"column",grp:"compare"},{label:"One-Way ANOVA",type:"anova",img:"column",grp:"compare"},{label:"Linear",type:"linear",img:"column",grp:"regression"},{label:"Process Capability Indexes",type:"proc_cap_index",img:"column",grp:"process"}]},IG$.analeditor=$s.extend($s.window,{modal:!0,layout:"fit",closable:!1,resizable:!1,width:400,height:500,_init:function(){var e=this.down("[name=g_list]"),t=this.sheetoption.model,n=t.anal_options=t.anal_options||[];$.each(n,function(e,t){t.selected=!0}),e.store.loadData(n)},editItem:function(e){new IG$.analwizard({sheetoption:this.sheetoption,_eobj:e.data,callback:new IG$.callBackObj(this,function(){})}).show()},_confirm:function(){for(var e,t=this,n=t.sheetoption.model,a=[],i=t.down("[name=g_list]"),o=0;o<i.store.data.items.length;o++)e=i.store.data.items[o],a.push(e.data);n.anal_options=a,t.callback&&t.callback.execute(t),t.close()},initComponent:function(){this.title=IRm$.r1("T_ANAL_WIZARD"),$s.apply(this,{items:[{xtype:"panel",layout:{type:"vbox",align:"stretch"},padding:10,items:[{xtype:"gridpanel",name:"g_list",store:{},flex:1,selType:"checkboxmodel",selModel:{mode:"MULTI"},columns:[{text:IRm$.r1("B_NAME"),flex:1,dataIndex:"name",tdCls:"igc-td-link"},{text:IRm$.r1("B_DESC"),flex:1,dataIndex:"description"},{xtype:"actioncolumn",width:60,items:[{iconCls:"icon-grid-config",tooltip:"Config item",handler:function(e,t,n){var a=e.store.getAt(t);this.editItem(a)},scope:this},{iconCls:"icon-grid-delete",tooltip:"Delete Item",handler:function(e,t,n){var a=e.store.getAt(t);e.store.remove(a)},scope:this}]}],tbar:[{text:"New Analysis",handler:function(){var t=this,n={},e=new IG$.analwizard({reportoption:t.reportoption,sheetoption:t.sheetoption,_eobj:n,callback:new IG$.callBackObj(t,function(e){t.down("[name=g_list]").store.add(n)})});IG$.checkLogin(this,e)},scope:this},{text:"Delete Selected",handler:function(){},scope:this}]}]}],buttons:["->",{text:IRm$.r1("B_CONFIRM"),handler:function(){this._confirm()},scope:this},{text:IRm$.r1("B_CANCEL"),handler:function(){this.close()},scope:this}],listeners:{afterrender:function(){this._init()}}}),IG$.analeditor.superclass.initComponent.apply(this,arguments)}}),IG$.analwizard=$s.extend($s.window,{modal:!0,layout:"fit",closable:!1,resizable:!1,width:550,height:480,opt_panels:[{name:"popt_output",condition:null},{name:"popt_g1",condition:null}],_init:function(){for(var e,t=this,n=t.sheetoption.model,a=(n.anal_options,t.down("[name=_b]"),t.down("[name=g_inp1]")),i=[],o=0;o<n.rows.length;o++)e=IG$.CloneObject(n.rows[o]),i.push(e);for(o=0;o<n.measures.length;o++)e=IG$.CloneObject(n.measures[o]),i.push(e);a.store.loadData(i),t._einit()},_einit:function(){var e,t,n=this,a=n.down("[name=_b]"),i=n.down("[name=g_inp1]"),o=i.getSelectionModel(),l=n._eobj,s={};if($.each(IG$.__analoption.analtype,function(e,t){if(t.type==l.analtype)return n.down("[name=analgroup]").setValue(t.grp),!1}),a.setValue(l.analtype),o.clear(),l.input_fields){for(e=0;e<l.input_fields.length;e++)s[l.input_fields[e]]=1;for(e=0;e<i.store.data.items.length;e++)s[(t=i.store.data.items[e]).get("uid")]&&o.select(t,!0)}l.options=l.options||{},n.down("[name=p_general]").setAllValues(l,1),$.each(n.opt_panels,function(e,t){n.down("[name="+t.name+"]").setAllValues(l.options,1)}),n._elayout()},_elayout:function(){var a=this,e=a._eobj,i=e?e.analtype:null;i&&$.each(a.opt_panels,function(e,t){var n=a.down("[name="+t.name+"]");!t.condition||t.condition&&0<t.condition.indexOf(i)?n.show():n.hide()})},_econfirm:function(){var e,t,n=this,a=n._eobj,i=n.down("[name=g_inp1]");if(a){if(e=i.getSelectionModel().selected,a.input_fields=[],a.options=a.options||{},e)for(t=0;t<e.length;t++)a.input_fields.push(e.items[t].get("uid"));n.down("[name=p_general]").getAllValues(a,1),$.each(n.opt_panels,function(e,t){n.down("[name="+t.name+"]").getAllValues(a.options,1)})}},_confirm:function(){this._econfirm(),this.callback&&this.callback.execute(),this.close()},_changeGroup:function(){var e,t,n,a=this,i=a.down("[name=analgroup]"),o=a.analtypelist,l=a.down("[name=_b]"),s=i.getValue(),p=a.sheetoption.model.anal_options,r=l.getValue()||p.analtype,c=[];if(s!=a.analtype){for(t=0;t<o.length;t++)e=o[t],"all"!=s&&e.grp!=s&&r!=e.type||c.push(e);for(l.store.loadData(c),t=0;t<l.store.data.items.length;t++)if((n=l.store.data.items[t]).data.type==r){setTimeout(function(){l.setValue(n.data.type)},100);break}a.analtype=s}},initComponent:function(){var e=IG$.__analoption.analtype;this.title=IRm$.r1("T_ANAL_WIZARD"),this.analtypelist=e,this._custPnls=[],$s.apply(this,{items:[{xtype:"panel",layout:{type:"vbox",align:"stretch"},autoScroll:!0,border:0,padding:10,items:[{xtype:"fieldset",title:"General",name:"p_general",layout:{type:"vbox",align:"stretch"},items:[{xtype:"textfield",fieldLabel:"Name",name:"t_name",mapname:"name",required:!0},{xtype:"textarea",fieldLabel:"Description",mapname:"description",name:"t_desc",height:120},{xtype:"combobox",name:"analgroup",fieldLabel:IRm$.r1("L_ANAL_GROUP"),queryMode:"local",displayField:"name",valueField:"value",editable:!1,autoSelect:!0,store:{xtype:"store",fields:["name","value"],data:IG$.__analoption.analcateg},listeners:{change:function(e,t,n,a){this._changeGroup()},scope:this}},{xtype:"combobox",name:"_b",fieldLabel:"Analysis Type",queryMode:"local",valueField:"type",displayField:"label",mapname:"analtype",store:{xtype:"store",fields:["type","label"]},listeners:{change:function(e,t,n,a){this.sheetoption.model.anal_options;this._eobj.analtype=t,this._elayout()},scope:this}}]},{xtype:"fieldset",title:IRm$.r1("L_ASTEP_1"),name:"popt_output",border:0,layout:{type:"vbox",align:"stretch"},items:[{xtype:"fieldset",title:"Input",layout:{type:"vbox",align:"stretch"},items:[{xtype:"gridpanel",height:200,name:"g_inp1",selType:"checkboxmodel",selModel:{checkSelector:".x-grid-cell"},store:{},columns:[{text:"Name",flex:1,dataIndex:"name"}]}]}]},{xtype:"fieldset",title:IRm$.r1("L_ASTEP_2"),name:"popt_g1",border:0,layout:{type:"vbox",align:"stretch"},items:[{xtype:"fieldset",title:"Output options",layout:{type:"vbox",align:"stretch"},items:[{xtype:"checkbox",boxLabel:"Summary statistics",name:"s_stat"},{xtype:"container",layout:{type:"hbox",align:"stretch"},items:[{xtype:"checkbox",boxLabel:"Confidence Level for Mean",name:"s_conf_level_mean"},{xtype:"numberfield",name:"s_conf_level_mean_val"}]},{xtype:"container",layout:{type:"hbox",align:"stretch"},items:[{xtype:"checkbox",boxLabel:"Kth Largest / Smallest",name:"s_kth_ls"},{xtype:"numberfield",name:"s_kth_ls_val"}]}]}]}]}],buttons:[{text:IRm$.r1("B_CONFIRM"),handler:function(){this._confirm()},scope:this},{text:IRm$.r1("B_CANCEL"),handler:function(){this.close()},scope:this}],listeners:{afterrender:function(){this._init()}}}),IG$.analwizard.superclass.initComponent.apply(this,arguments)}});
IG$.dlg_sel_objs=$s.extend($s.window,{width:700,height:550,layout:"fit",modal:!0,bodyPadding:5,move_selections:function(e,t){var o,n=this,a=n.down("[name=dbpool]").getValue(),i=n.down("[name="+(e?"g_tgt":"g_src")+"]"),l=n.down("[name="+(e?"g_src":"g_tgt")+"]"),s=i.getSelectionModel().selected,d=(l.getSelectionModel().selected,{});if(1==e)$.each(s.items,function(e,t){i.store.remove(t)});else{for(o=0;o<l.store.data.items.length;o++)d[l.store.data.items[o].get("uid")]=1;$.each(s.items,function(e,t){var o=t.get("type").toLowerCase();/(folder|table|inlineview|dataset)/.test(o)&&!d[t.get("uid")]&&(t.set("cubeuid",a),l.store.add(t))})}},commit$f:function(){var e,t,o,n=this,a=n.down("[name=g_tgt]"),i=n.down("[name=dbpool]"),l=i.getValue(),s=a.store.data.items,d=[];if(s.length){for(e=0;e<s.length;e++)d.push(s[e].data);for(e=0;e<i.store.data.items.length;e++)if((t=i.store.data.items[e].data).uid==l){o={uid:t.uid,name:t.name,type:t.type,nodepath:t.nodepath};break}n.callback&&n.callback.execute([d,o]),n.close()}else IG$.alertmsg(ig$.appname,"Select objects",null,null,0,"")},initComponent:function(){var u=this;$s.apply(u,{title:"Select items",items:[{xtype:"panel",flex:1,layout:{type:"hbox",align:"stretch"},defaults:{padding:5},items:[{xtype:"panel",title:"Available objects",flex:1,layout:{type:"vbox",align:"stretch"},items:[{xtype:"combobox",displayField:"name",name:"dbpool",valueField:"uid",fieldLabel:"DataSource",store:{fields:["name","disp","uid"]},listeners:{change:function(e){var t=e.getValue(),o=(this.down("[name=bgroup]"),t?{uid:t,type:"ROOT",name:"Business items",leaf:!1,expanded:!0,children:[{type:"load",name:"Loading..."}]}:{type:"ROOT",name:"Select source"});(o=this.down("[name=g_src]").setRootNode(o)).get("uid")&&o.expand()},scope:this}},new IG$.naviTree({showtoolbar:!1,cubebrowse:!0,ddGroup:"_I$RD_G_",name:"g_src",flex:1,visibleItems:"folder;table;inlineview;dataset;",metatypes:"Table;Metric;InlineView;DataSet;Folder",enabledrag:!0,border:0,_search:!0,isdatasource:!0,custDblClickFunc:new IG$.callBackObj(u,function(e){this.move_selections(0,e)})})]},{xtype:"container",width:40,layout:"fit",items:[{xtype:"container",layout:{type:"vbox",align:"stretch"},items:[{xtype:"container",flex:1},{xtype:"button",text:">",handler:function(){u.move_selections(0)},scope:this},{xtype:"button",text:"<",handler:function(){u.move_selections(1)},scope:this},{xtype:"container",flex:1}]}]},{xtype:"panel",title:"Selected objects",flex:1,layout:{type:"vbox",align:"stretch"},items:[{xtype:"fieldcontainer",layout:{type:"hbox",align:"stretch"},items:[{xtype:"textfield",name:"t_sel",labelWidth:50,fieldLabel:"Search"},{xtype:"button",text:"..",handler:function(){}}]},{xtype:"gridpanel",name:"g_tgt",selType:"checkboxmodel",selModel:{mode:"MULTI"},flex:1,viewConfig:{plugins:{ptype:"gridviewdragdrop",ddGroup:"_I$RD_G_"},listeners:{beforedrop:function(e,t,o,n,a){var i,l,s,d,c={},r=u.down("[name=g_tgt]"),p=u.down("[name=dbpool]").getValue();for(t.copy=!0,i=0;i<r.store.data.items.length;i++)c[(l=r.store.data.items[i]).get("uid")]=1;for(i=0;i<t.records.length;i++)d=(l=t.records[i]).get("type").toLowerCase(),/(folder|table|inlineview|dataset)/.test(d)&&!c[l.get("uid")]&&(c[(s={uid:l.get("uid"),type:l.get("type"),name:l.get("name"),nodepath:l.get("nodepath"),cubeuid:p}).uid]=1,this.store.add(s));return!1},drop:function(e,t,o,n){t.copy}}},ddGroup:"_I$RD_G_",enabledrop:!0,enabledrag:!1,store:{fields:["name","uid","dbpool"]},columns:[{text:"Name",flex:1,width:180,dataIndex:"name"},{text:"Connection",width:180,dataIndex:"dbpool"}],listeners:{itemdblclick:function(e,t,o,n,a){u.move_selections(1)},scope:this}}]}]}],buttons:[{xtype:"button",text:IRm$.r1("B_CONFIRM"),handler:function(){u.commit$f()},scope:this},{xtype:"button",text:IRm$.r1("B_CANCEL"),handler:function(){this.close()},scope:this}]}),IG$.dlg_sel_objs.superclass.initComponent.call(this)}});
IG$.vsEdtr=$s.extend($s.window,{modal:!0,region:"center",layout:{type:"fit",align:"stretch"},closable:!0,resizable:!0,width:400,height:500,_init:function(){var e=this;$s.defaults(e.visual_story,{enabled:!0,cssname:"normal",top:"10px",left:"10px"}),e.setAllValues(e.visual_story)},_confirm:function(){var e=this;e.getAllValues(e.visual_story)||(e.callback&&e.callback.execute(),e.close())},initComponent:function(){var t=this;$s.apply(t,{title:IRm$.r1("L_FORMVIEWER"),bodyPadding:10,items:[{xtype:"panel",layout:{type:"vbox",align:"stretch"},border:0,items:[{xtype:"fieldset",title:"General",layout:{type:"vbox",align:"stretch"},items:[{xtype:"checkbox",name:"enabled",fieldLabel:"Visible",boxLabel:"Enabled"},{xtype:"textfield",name:"cssname",fieldLabel:"CSS name"},{xtype:"textfield",name:"condition",fieldLabel:"Condition"}]},{xtype:"fieldset",title:"Template",layout:{type:"vbox",align:"stretch"},items:[{xtype:"textarea",fieldLabel:"Template Context",name:"context"}]},{xtype:"fieldset",title:"Location",layout:{type:"vbox",align:"stretch"},items:[{xtype:"textfield",name:"top",fieldLabel:"Top"},{xtype:"textfield",name:"left",fieldLabel:"left"},{xtype:"textfield",name:"width",fieldLabel:"Width"},{xtype:"textfield",name:"height",fieldLabel:"Height"},{xtype:"textfield",name:"bottom",fieldLabel:"bottom"},{xtype:"textfield",name:"right",fieldLabel:"right"}]}]}],buttons:["->",{text:IRm$.r1("B_CONFIRM"),handler:function(){this._confirm()},scope:t},{text:IRm$.r1("B_CANCEL"),handler:function(){this.close()},scope:t}],listeners:{afterrender:function(e){t._init()}}}),IG$.vsEdtr.superclass.initComponent.call(this)}});
IG$.c$ClpBrd=$s.extend($s.window,{modal:!0,region:"center",layout:{type:"fit",align:"stretch"},closable:!1,resizable:!1,width:500,height:400,init_f:function(){var e=this,t=e.down("[name=outputtype]"),a=e.down("[name=p_page]"),l=e.down("[name=n_page]"),n=e.mresult;n&&n.rowcnt>n._tabledata.length&&(l.setValue("Partial page start "+(n.pagestart+1)+" to "+(n.pageend+1)),a.show()),t.setValue("comma"),e.setOutTxt()},changeOutTyp:function(){this.setOutTxt()},setOutTxt:function(){var e,t,a,l,n=this,o=n.down("[name=outputtype]"),s=n.down("[name=textoutput]"),i=n.down("[name=tableoutput]"),u=n.down("[name=btntableview]"),r=n.mresult,p=r&&r._tabledata&&0<r._tabledata.length?r._tabledata:null,d=[],c=o.getValue(),m=$(i.body.dom),h=",",b=!1,f="",x=!1;if(p){switch(c){case"tab":h="\t";break;case"comma":f='"';break;case"rawcomma":b=!0;break;case"rawtab":b=!0,h="\t";break;case"table":x=!0}if(0==x)for(u.setVisible(!1),e=0;e<p.length;e++){for(a="",t=0;t<p[e].length;t++)l=f+(1==b?p[e][t].code||"":p[e][t].text||p[e][t].code||"")+f,a=0==t?l:a+h+l;d.push(a)}else{for(u.setVisible(!0),u.setValue(!1),d.push("<table>"),e=0;e<p.length;e++){for(a="<tr>",t=0;t<p[e].length;t++)a+=l="<td>"+(p[e][t].text||p[e][t].code||"&nbsp;")+"</td>";d.push(a+"</tr>")}d.push("</table>"),m.empty(),m.html(d.join(""))}}s.setVisible(!0),i.setVisible(!1),s.setValue(d.join("\n"))},changeViewMode:function(){var e=this,t=(e.down("[name=outputtype]"),e.down("[name=textoutput]")),a=e.down("[name=tableoutput]"),l=e.down("[name=btntableview]").getValue();t.setVisible(!l),a.setVisible(l)},getAllData:function(){var e=this,t=e.sheetview,a=e.mresult,l=t.reportoption.getCurrentPivot();t.olapset.requestPivotResult.call(t.olapset,l,null,t.sheetindex,null,0,a.rowcnt+10,new IG$.callBackObj(e,function(e){var t=this,a=t.down("[name=n_page]");e&&!e.iserror&&e.mresults&&e.mresults.results.length?(t.mresult=e.mresults.results[0],a.setValue("Data Fetched... "+t.mresult._tabledata.length+" Rows"),t.setOutTxt()):a.setValue("Error while fetching data from server..")}),t._job,!0,!0)},initComponent:function(){var n=this;n.title=IRm$.r1("L_CLIPBOARD_COPY"),$s.apply(this,{defaults:{bodyStyle:"padding:10px"},items:[{xtype:"panel",bodyBorder:!1,layout:{type:"vbox",align:"stretch"},items:[{name:"outputtype",xtype:"combobox",fieldLabel:"Output type",queryMode:"local",displayField:"name",valueField:"value",editable:!1,autoSelect:!0,store:{xtype:"store",fields:["name","value"],data:[{name:"Tab separated",value:"tab"},{name:"Comma separated",value:"comma"},{name:"Raw data (Tab)",value:"rawtab"},{name:"Raw data (Comma)",value:"rawcomma"},{name:"HTML Table format",value:"table"}]},listeners:{change:function(e,t,a,l){n.changeOutTyp.call(n)}}},{xtype:"fieldcontainer",name:"p_page",hidden:!0,layout:{type:"hbox",align:"stretch"},items:[{xtype:"displayfield",name:"n_page",value:"-",flex:1},{xtype:"button",text:"Fetch All",handler:function(){this.getAllData()},scope:this}]},{xtype:"fieldcontainer",layout:"hbox",items:[{xtype:"displayfield",value:"Press Ctrl-A then Ctrl-C to copy this content to clipboard!",flex:1},{xtype:"checkbox",name:"btntableview",boxLabel:"Show HTML",hidden:!0,flex:1,listeners:{change:function(e,t,a,l){n.changeViewMode.call(n)}}}]},{xtype:"textarea",name:"textoutput",flex:1},{html:"",collapsible:!1,bodyStyle:"padding: 5px",name:"tableoutput",hidden:!0,autoScroll:!0,flex:1}]}],buttons:[{text:IRm$.r1("B_CONFIRM"),handler:function(){this._confirm()},scope:this},{text:IRm$.r1("B_CANCEL"),handler:function(){this.close()},scope:this}],listeners:{afterrender:function(e){this.init_f()}}}),IG$.c$ClpBrd.superclass.initComponent.apply(this,arguments)}});
IG$.prompt=$s.extend(IG$.v$pnl,{validate:function(){var e=this.down("[name=pregion]");this.prompts;e.clearControls()},clear:function(){var e=this.ctrl;e&&$.each(e,function(e,t){t.clear()})},init_f:function(){var n,e,t=this,l=t.prompts,a=t.down("[name=pregion]");if(t.ctrl=t.ctrl||[],n=t.ctrl,$.each(l,function(e,t){var i=n[e];i?i.setPrompt(t,!0):(i=new IG$.promptItem({init_prompt:t,prompts:l}),a.add(i),n.push(i))}),t.ctrl.length>l.length)for(e=t.ctrl.length-1;e>=l.length;e--)a.remove(t.ctrl[e],!0),t.ctrl.splice(e,1)},initComponent:function(){$s.apply(this,{height:60,items:[{xtype:"panel",name:"pregion",border:0,autoScroll:!0,layout:{type:"hbox"},items:[]}]}),IG$.prompt.superclass.initComponent.call(this)}}),IG$.promptItem=$s.extend(IG$.v$pnl,{initEvent:function(){var t=this,e=$(".prompt-filter",t.el.dom),i=$(".prompt-filter-desc",e);t._loaded||(t._loaded=1,t._region={cdiv:e,cdesc:i,cname:$(".prompt-filter-name",e),cvalue:$(".prompt-filter-value",e),delbtn:$(".prompt-filter-remove",e),clrbtn:$(".prompt-filter-clear",e)},t._region.delbtn.bind("click",function(e){e.stopPropagation(),e.preventDefault(),t._delprompt()}),t._region.clrbtn.bind("click",function(e){e.stopPropagation(),e.preventDefault(),t.prompt.selections=[],t.clear(),t.fireEvent("filterchanged",t,t.prompt)}),e.bind("click",function(e){t.showPromptEditor()}),t.init_prompt&&t.setPrompt(t.init_prompt,!0))},_delprompt:function(){var e=this;e.fireEvent("remove_prompt",e,e)},setPrompt:function(e,t){var i=this;i._region;i.prompt=e,i.prompt.selections=i.prompt.selections||[],i.validatePrompt(t)},validatePrompt:function(e){var t,i=this.prompt,n=this._region,l=[];if(i.selections)for(t=0;t<i.selections.length;t++)l.push(i.selections[t].name||i.selections[t].value);n.cname.html(i.title||i.name),n.cvalue.text(l.join(",")||"")},showPromptEditor:function(){var e=this,t=e._region.cdiv.offset(),i=e._popdlg,n=e._region.cdiv.height(),l=300,a=$(document).width(),o=$(document).height(),s=t.left+0+l<a?t.left+0:0<t.left-l?t.left-l:a/2,r=t.top+n+400<o?t.top+n:0<t.top-400?t.top-400:(o-n)/2;i?i.setPageFilter(e.prompt):(i=new IG$.dlgPromptUser({width:l,pagefilter:e.prompt,position:{left:s,top:r},callback:new IG$.callBackObj(e,function(){e.filterChanged()}),callback_reqvalues:new IG$.callBackObj(e,function(){e.fireEvent("requestpagevalues",e,e.prompt)})}),e._popdlg=i),i.show()},clear:function(){var e=this,t=e.prompt;e._popdlg&&e._popdlg.close(),e._popdlg=null,t&&(t.selections=[],e.validatePrompt())},filterChanged:function(){var e=this;e.validatePrompt(!1),e.fireEvent("filterchanged",e,e.prompt)},initComponent:function(){var e=this;$s.apply(e,{width:180,resize:!1,move:!1,border:0,items:[{html:"<div class='prompt-filter'><div class='prompt-filter-el'><div class='prompt-filter-name'></div><div class='prompt-filter-clear'></div><div class='prompt-filter-remove'></div><div class='prompt-filter-desc'></div><div class='prompt-filter-value'></div></div></div>",name:"filter_desc"}],listeners:{afterrender:function(e){e.initEvent()},beforeclose:function(){e._popdlg&&e._popdlg.close()}}}),IG$.promptItem.superclass.initComponent.call(this)}}),IG$.dlgPromptUser=$s.extend($s.popup,{modal:!1,bodyPadding:5,layout:"fit",_confirm:function(){var e=this,t=0,i=0,n=e.pagefilter,l=e.selections,a=e.down("[name=operator]").getValue(),o=e.down("[name=value]").getValue();if(2!=e._bconfirm){if(a!=n.operator&&(t=1),"IN"==a){if(e.sel_changed){l=[],t=1;var s,r=e.down("[name=grdmultivalue]").getSelectionModel().selected;for(s=0;s<r.items.length;s++)l.push({value:r.items[s].data.value,name:r.items[s].data.name});e.selections=l,e.sel_changed=0}}else o?1==e.selections.length&&e.selections[0]==o||(i=1):0!=e.selections.length&&(i=1),i&&(t=1,e.selections=o?[{value:o,name:o}]:[]);t&&(n.operator=a,n.selections=e.selections,e.callback&&e.callback.execute())}e._bconfirm=0},_init:function(){this.pagefilter&&this.setPageFilter(this.pagefilter)},setPageFilter:function(e){var t=this;t._pagefilter&&t._pagefilter.uid==e.uid||(t._pagefilter=e,t.down("[name=operator]").setValue(e.operator||"LIKE"),"IN"!=e.operator||t._pagevalues||t.callback_reqvalues&&t.callback_reqvalues.execute(),t._setDefaultValue())},loadPageFilterLookup:function(e){var t=this.down("[name=grdmultivalue]");this._pagevalues=e,t.store.loadData(e)},_updateOperatorLayout:function(){var e=this,t=e.down("[name=value]"),i=e.down("[name=multivalue]"),n=e.down("[name=operator]").getValue();t.setVisible("IN"!=n),i.setVisible("IN"==n),"IN"!=n||e._pagevalues||e.callback_reqvalues&&e.callback_reqvalues.execute()},clear:function(){this._pagevalues=null},_setDefaultValue:function(){var e=this,t=e.down("[name=operator]").getValue(),i=e._pagefilter,n=e.down("[name=value]");e.selections=i.selections,e.selections&&"IN"!=t&&i.selections.length&&n.setValue(i.selections[0].value)},initComponent:function(){var e=this;$s.apply(e,{items:[{xtype:"container",padding:5,layout:{type:"vbox",align:"stretch"},items:[{xtype:"fieldset",flex:1,layout:{type:"vbox",align:"stretch"},defaults:{labelWidth:80},items:[{xtype:"combobox",fieldLabel:"Operator",name:"operator",required:!0,store:{fields:["name","value"],data:[{name:"Value Selector",value:"IN"},{name:"Equal",value:"="},{name:"Like",value:"LIKE"},{name:"Greater Then",value:">="},{name:"Greater",value:">"},{name:"Lesser",value:"<"},{name:"Lesser Then",value:"<="}]},valueField:"value",displayField:"name",listeners:{change:function(e){this._updateOperatorLayout()},scope:this}},{xtype:"textfield",fieldLabel:"Value",name:"value",hidden:!0,enableKeyEvents:!0,listeners:{keyup:function(e,t){13==t.keyCode&&(this._bconfirm=1,this.hide())},scope:this}},{xtype:"container",name:"multivalue",height:300,hidden:!0,layout:{type:"vbox",align:"stretch"},items:[{xtype:"container",border:0,height:20},{xtype:"gridpanel",name:"grdmultivalue",flex:1,emptyText:IRm$.r1("M_S_S1"),selType:"checkboxmodel",selModel:{checkSelector:".x-grid-cell",mode:"MULTI"},tbar:[{xtype:"textfield",name:"k_mvalue",fieldLabel:"Search",labelWidth:60,width:160,enableKeyEvents:!0,listeners:{keyup:function(e,t,i){13==t.keyCode&&IG$._dofilter(this,"grdmultivalue",["value","name"],e)},scope:this}},{xtype:"button",text:"..",handler:function(){IG$._dofilter(this,"grdmultivalue",["value","name"],this.down("[name=k_mvalue]"))},scope:this}],store:{fields:["value","name"]},columns:[{text:"Value",flex:1,dataIndex:"value"},{text:"Name",flex:1,dataIndex:"name"}],listeners:{selectionchange:function(){this.sel_changed=1},scope:this}}]}]}]}],buttons:["->",{text:IRm$.r1("B_CONFIRM"),handler:function(){this._bconfirm=1,e.hide()},scope:this},{text:IRm$.r1("B_CANCEL"),handler:function(){this._bconfirm=2,e.hide()},scope:this}],listeners:{afterrender:function(e){this._init()},hide:function(){this._confirm()}}}),IG$.dlgPromptUser.superclass.initComponent.call(this)}}),IG$.dlgPromptConfig=$s.extend($s.window,{modal:!0,region:"center",layout:{type:"fit",align:"stretch"},closable:!1,resizable:!1,width:300,height:420,sheetoption:null,callback:null,defaults:{padding:5},init_f:function(){var e,t=this.filteritem,i=this.down("[name=foption]"),n=this.down("[name=defaultvalue]"),l=[];if(t.operator=t.operator||"LIKE",i.setAllValues(t),t.selections)for(e=0;e<t.selections.length;e++)l.push(t.selections[e].name||t.selections[e].value);n.setValue(l.join(","))},_confirm:function(){var e,t,i=this,n=i.filteritem,l=i.down("[name=defaultvalue]");for(i.down("[name=foption]").getAllValues(n),e=l.getValue().split(","),n.selections=[],t=0;t<e.length;t++)n.selections.push({value:e[t]});i.callback&&i.callback.execute(),i.close()},initComponent:function(){$s.apply(this,{bodyPadding:5,items:[{xtype:"container",padding:5,layout:{type:"vbox",align:"stretch"},items:[{xtype:"fieldset",name:"foption",title:"Options",layout:"anchor",flex:1,padding:5,defaults:{anchor:"100%"},items:[{xtype:"textfield",name:"name",readOnly:!0,fieldLabel:"Name"},{xtype:"combobox",fieldLabel:"Operator",name:"operator",required:!0,store:{fields:["name","value"],data:[{name:"Value Selector",value:"IN"},{name:"Equal",value:"="},{name:"Like",value:"LIKE"},{name:"Greater Then",value:">="},{name:"Greater",value:">"},{name:"Lesser",value:"<"},{name:"Lesser Then",value:"<="}]},valueField:"value",displayField:"name"},{xtype:"textfield",fieldLabel:"Description",name:"description"},{xtype:"textfield",fieldLabel:"Default Value",name:"defaultvalue"}]}]}],buttons:["->",{text:IRm$.r1("B_CONFIRM"),handler:function(){this._confirm()},scope:this},{text:IRm$.r1("B_CANCEL"),handler:function(){this.close()},scope:this}],listeners:{afterrender:function(){this.init_f()}}}),IG$.dlgPromptConfig.superclass.initComponent.apply(this,arguments)}}),IG$.dlgPromptEditor=$s.extend($s.window,{modal:!0,region:"center",layout:{type:"fit",align:"stretch"},closable:!1,resizable:!1,width:600,height:400,sheetoption:null,callback:null,defaults:{bodyStyle:"padding:5px"},init_f:function(){var e,t,i,a=this.sheetoption.model,n=a.dataquerymode,l=["rows"],o=[],s=[],r={},d=this.down("[name=grid_sc]"),c=this.down("[name=grid_st]");for("M_PIVOT"==n&&l.push("cols","measures"),$.each(l,function(e,t){var i,n,l=a[t];if(l&&l.length)for(i=0;i<l.length;i++)n=l[i],r[n.uid]||(o.push({uid:n.uid,name:n.name,itemtype:n.itemtype}),r[n.uid]=n)}),d.store.loadData(o),t=(e=a.page_filters=a.page_filters||[]).length-1;0<=t;t--)(i=e[t])&&(r[i.uid]?s.push({uid:i.uid,name:i.name,filter:i}):e.splice(t,1));c.store.loadData(s)},_confirm:function(){for(var e,t=this,i=t.sheetoption.model,n=[],l=t.down("[name=grid_st]"),a=0;a<l.store.data.items.length;a++)(e=l.store.data.items[a]).data.filter||(e.data.filter={uid:e.data.uid,name:e.data.name,itemtype:e.data.itemtype,operator:"LIKE"}),n.push(e.data.filter);i.page_filters=n,t.callback&&t.callback.execute(),t.close()},_regTables:function(e){var t,i=this.down("[name=grid_sc]"),n=this.down("[name=grid_st]"),l=(this.alias_map,{}),a=(e?n:i).getSelectionModel().selected;if(0!=a.length||e){if(!e)for(t=0;t<n.store.data.items.length;t++)l[n.store.data.items[t].get("uid")]=1;for(t=0;t<a.length;t++)e?n.store.remove(a.items[t]):l[a.items[t].get("uid")]||n.store.add(a.items[t]);e||i.getSelectionModel().clear()}else IG$.alertmsg(ig$.appname,"Search and check field to register.",null,null,0,"error")},changeOrder:function(e){var t,i,n=this.down("[name=grid_st]"),l=n.getSelectionModel(),a=l.selected;a&&1==a.length&&(i=a.items[0],t=n.store.indexOf(i),-1==e?0<t&&(n.store.remove(i),i=n.store.insert(t-1,i),l.select(i,!0)):t+1<n.store.data.items.length&&(n.store.remove(i),i=n.store.insert(t+1,i),l.select(i,!0)))},initComponent:function(){$s.apply(this,{title:"Page filtering",items:[{xtype:"panel",layout:{type:"vbox",align:"stretch"},items:[{xtype:"fieldset",title:"Layout options",hidden:!0,layout:{type:"anchor"},defaults:{anchor:"100%"},items:[]},{xtype:"panel",flex:1,layout:{type:"hbox",align:"stretch"},items:[{xtype:"fieldset",title:"Available Fields",layout:{type:"vbox",align:"stretch"},items:[{xtype:"gridpanel",name:"grid_sc",emptyText:IRm$.r1("M_S_S1"),selType:"checkboxmodel",selModel:{checkSelector:".x-grid-cell",mode:"MULTI"},store:{fields:["name","type","nodepath","uid","schemaname","dispname","checked"]},tbar:[{xtype:"textfield",name:"k_sc",fieldLabel:"Search",labelWidth:60,width:160,enableKeyEvents:!0,listeners:{keyup:function(e,t,i){13==t.keyCode&&IG$._dofilter(this,"grid_sc",["name"],e)},scope:this}},{xtype:"button",text:"..",handler:function(){IG$._dofilter(this,"grid_sc",["name"],this.down("[name=k_sc]"))},scope:this},"->"],columns:[{text:IRm$.r1("B_TYPE"),width:60,sortable:!0,dataIndex:"itemtype"},{text:IRm$.r1("B_NAME"),flex:1,sortable:!0,dataIndex:"name"}]}]},{xtype:"container",layout:{type:"vbox",align:"stretch"},items:[{xtype:"container",flex:1},{xtype:"button",text:">",handler:function(){this._regTables()},scope:this},{xtype:"button",text:"<",handler:function(){this._regTables(1)},scope:this},{xtype:"container",flex:1}]},{xtype:"fieldset",title:"Paged Filter Fields",layout:{type:"hbox",align:"stretch"},items:[{xtype:"gridpanel",flex:1,name:"grid_st",emptyText:IRm$.r1("M_S_S1"),selType:"checkboxmodel",selModel:{checkSelector:".x-grid-cell",mode:"MULTI"},tbar:[{xtype:"textfield",name:"k_st",fieldLabel:"Search",labelWidth:60,width:160,enableKeyEvents:!0,listeners:{keyup:function(e,t,i){13==t.keyCode&&IG$._dofilter(this,"grid_st",["name"],e)},scope:this}},{xtype:"button",text:"..",handler:function(){IG$._dofilter(this,"grid_st",["name"],this.down("[name=k_st]"))},scope:this}],store:{fields:["name","type","nodepath","uid","schemaname","dispname","checked"]},columns:[{text:IRm$.r1("B_TYPE"),width:60,sortable:!0,dataIndex:"itemtype"},{text:IRm$.r1("B_NAME"),flex:1,sortable:!0,dataIndex:"name"},{xtype:"actioncolumn",width:30,items:[{iconCls:"icon-grid-config",tooltip:IRm$.r1("B_CONFIG"),handler:function(e,t,i){var n,l=e.store.getAt(t);l.data.filter=l.data.filter||{uid:l.data.uid,name:l.data.name,itemtype:l.data.itemtype},n=new IG$.dlgPromptConfig({filteritem:l.data.filter}),IG$.checkLogin(this,n)},scope:this}]}]},{xtype:"container",layout:{type:"vbox",align:"stretch",pack:"center",padding:2},items:[{xtype:"container",flex:1},{xtype:"button",iconCls:"ig-btn-up",handler:function(){this.changeOrder(-1)},scope:this},{xtype:"button",iconCls:"ig-btn-down",handler:function(){this.changeOrder(1)},scope:this},{xtype:"container",flex:1}]}]}]}]}],buttons:["->",{text:IRm$.r1("B_CONFIRM"),handler:function(){this._confirm()},scope:this},{text:IRm$.r1("B_CANCEL"),handler:function(){this.close()},scope:this}],listeners:{afterrender:function(){this.init_f()}}}),IG$.dlgPromptEditor.superclass.initComponent.apply(this,arguments)}});
IG$.p$SheetView=$s.extend(IG$.v$pnl,{uid:null,name:"sheet",autoScroll:!1,bodyBorder:!1,scroll:!1,mresults:null,reportoption:null,sheetoption:null,activeView:-1,_directRun:!1,layoutcomplete:!1,border:0,_confirm:function(e){var t=this,i=t.sheetoption,o=i.needPrompt.call(i);o&&0<o.length?(t.promptpanel&&t.promptpanel.setVisible(!0),t.showPrompt.call(t,o)):t.promptpanel&&t.promptpanel.setVisible(!1),t.adjSize(),!e&&t.mresults&&t.procRunReport()},appendPrompt:function(e){for(var t=this.sheetoption.model,i=0,o=(o=t.page_filters)||(t.page_filters=[]),n=0;n<o.length;n++)if(o[n].uid==e.uid){i=1;break}i||(o.push({uid:e.uid,name:e.name,itemtype:e.type,operator:"=",description:e.description,selections:[]}),this._confirm(!0))},setStyle:function(e){var t,i=this,o=i.sheetoption;IG$.reportbase$.prepGridStyles.call(i,o.model.dataquerymode),t=new IG$.globalReportStyle({cmode:"report",activeSheet:o.model.index,reportoption:i.reportoption,sheetoption:o,targetitem:e,callback:new IG$.callBackObj(i,function(){i._confirm()})}),IG$.checkLogin(i,t)},removePrompt:function(e){for(var t=this.sheetoption.model,i=(i=t.page_filters)||(t.page_filters=[]),o=0;o<i.length;o++)if(i[o].uid==e.uid){i.splice(o,1),this._confirm(!0);break}},scrollReqPg:function(t){var i=this;clearTimeout(i.__s1),i.__s1=setTimeout(function(){var e=t<20?0:t-20;i.goPageView.call(i,e,200+e,!0)},100)},clearAuxFilter:function(){var e=this;e.sheetoption.model.drilldepth=0,e.chart$&&e.chart$.layoutChartPnls(!1)},_reqData:function(e,t,i){var o,n,a,l,r,s,p,c,h=this,d=h.sheetoption.model,u=i?i.cell:null,v=(i&&i.row,h.mresults&&h.mresults.results.length?h.mresults.results[0]:null);v&&v.data;if(h.customLoad(!0,!0),h._invalChart=!0,h._invalRstat=!0,h._invalPython=!0,h._invalAnal=!0,h._invalFV=!0,h.olapset&&h.olapset.jobid){if(n=h.olapset.jobid,a={uid:h.uid,option:"pivot",active:h.sheetindex,pivotresult:"T",jobid:n,source:i.source||"map",option:{zoom:i.zoom}},i.bound)a.option.bound={x1:i.bound.x1,y1:i.bound.y1,x2:i.bound.x2,y2:i.bound.y2};else if("hierarchy"==i.source){if(1==u.position&&(l=d.rows[u.index]),a.hierarchy={uid:l.uid,depth:u.celltree.depth,filter:[]},v&&(c=i.row,u.c<v.colfix))for(r=0;r<v.colfix;r++)1==c[r].position&&r!=u.c&&(p={fields:[d.rows[c[r].index]],operator:"EQ",values:[{code:c[r].code,text:c[r].text}]},a.hierarchy.filter.push(p));for(a.hierarchy.filter.push({fields:[l],values:[{type:"D",depth:u.celltree.depth,code:u.code,text:u.text}]}),s=u.celltree.parent;s;)a.hierarchy.filter.push({values:[{type:"D",depth:s.celltree.depth,code:s.code,text:s.text}]}),s=s.celltree.parent}(o=new IG$._rpc$).init(h,{ack:"olapservice",payload:{option:"pivot",pivotresult:"T",jobid:n,uid:h.uid,active:""+h.sheetindex},mbody:{},pivot_option:a},h,function(e){h.olapset.rrequestPivotResult.call(h.olapset,e,[null,h.sheetindex,null,null,null,null,null,u])}),o.send()}},CLS:{afterrender:function(){this.layoutcomplete=!0,this.init_f()},resize:function(e,t,i,o){var n=this,a=e.getWidth(),l=e.getHeight();0<a&&0<l&&(n.loadMask&&n.rendermask?n.customLoad(!0):n.loadMask&&n.setLoading(!0))}},init_f:function(){var e,t=this;t.rst?(e=t.sheetoption.model.viewmode,t.drawResults(e,t.rst),IG$.__ep):1==t._directRun&&t.procRunReport()},drawResults:function(e,t){this.procLoadResult(t)},updateViewMode:function(e){var t;switch(e){case"chart":t=1;break;case"r":t=2;break;case"d":t=3;break;case"python":t=4;break;case"analysis":t=5;break;default:t=0}3==t&&this.down("[name=mainzone]").setActiveItem(0),this.sheetoption.model.viewmode=3==t?this.sheetoption.model.viewmode:e,this.changeView(t)},getClipboardContent:function(){var e,t,i,o=[];if(0==this.activeView)for(e=this.grid$.getSelection.call(this.grid$),t=0;t<e.length;t++)i=e[t],0<t&&e[t-1]._n_==i._n_&&o.push("\t"),o.push(i.text||i.value),t+1<e.length&&e[t+1]._n_!=i._n_&&o.push("\n");return o.join("")},removePivotItem:function(e){for(var t=this.sheetoption.model,i=!1,o=null,n=0;n<t.rows.length;n++)if(t.rows[n].uid==e.uid){i=!0,o=t.rows[n],t.rows.splice(n,1);break}if(0==i)for(n=0;n<t.cols.length;n++)if(t.cols[n].uid==e.uid){i=!0,o=t.cols[n],t.cols.splice(n,1);break}if(0==i)for(n=0;n<t.measures.length;n++)if(t.measures[n].uid==e.uid){i=!0,o=t.measures[n],t.measures.splice(n,1);break}return o},getDrillXML:function(e){var t=this,i="";return 0==t.activeView?i=t.grid$.getDrillXML.call(t.grid$,e):1==t.activeView?i=t.chart$.getDrillXML.call(t.chart$,e):2==t.activeView?i=t.rstat$.getDrillXML.call(t.rstat$,e):3==t.activeView?i=t.python$.getDrillXML.call(t.python$,e):4==t.activeView?i=t.anal$.getDrillXML.call(t.anal$,e):5==t.activeView&&(i=t.fview$.getDrillXML.call(t.fview$,e)),i},getSelection:function(){var e=null;return 0==this.activeView&&(e=this.grid$.getSelection.call(this.grid$)),e},procUpdateReport:function(e,t,i){var o,n=this;3!=n.activeView&&(n.customLoad(!0,!0),n._invalChart=!0,n._invalRstat=!0,n._invalPython=!0,n._invalAnal=!0,n._invalFV=!0,n._job&&n._job.sid&&n._job.jid&&(n.olapset||(n.olapset=new IG$.m$ReqOlap,n.olapset.ctrlsource="report",(n.olapset.panel=n).olapset.uid=n.uid,n.olapset.sheet=null,n.olapset.chart=null),n.olapset.reportoption=n.reportoption),n.olapset&&(n.olapset.jobid||n._job)?(o=n.reportoption.getCurrentPivot(),n.olapset.requestPivotResult.call(n.olapset,o,null,n.sheetindex,null,e,t,null,n._job,i)):n.procRunReport())},setLoading:function(e){var t=this.reportoption;t&&t._mc.ploader?this.fireEvent(e?"_ld_":"_ldx_",this):IG$.p$SheetView.superclass.setLoading.call(this,e)},customLoad:function(e){var t,i,o=this,n=o.reportoption;n&&n._mc.ploader?o.fireEvent(e?"_ld_":"_ldx_",o):e?(i={msg:IRm$.r1("B_PROC")+" <button id='m-mec-loader'>"+IRm$.r1("B_PROC_CANCEL")+"</button>"},o.setLoading(i),t=$(o.rendermask),$("#m-mec-loader",t).bind("click",function(){o.cancelQuery.call(o)})):o.setLoading(!1,void 0,!0)},cancelQuery:function(t){var e=new IG$._rpc$;this.jobid&&(e.init(this,{ack:"olapservice",payload:{jobid:this.jobid,option:"cancel"},mbody:{}},this,function(e){"S"==(e?e.status:null)&&(this.setLoading(!1),t&&t.execute())},null),e.showerror=!1,e.send())},getResultSet:function(){return this.mresults&&this.mresults.results?this.mresults.results:null},_refreshMeasureGroup:function(e){this.mresults._update_measure_seq(e),this.procLoadResult(null,!0)},procLoadResult:function(e,t){var i=this,o=i.sheetoption;o&&o.model.viewmode;t?viewmode=i.reportoption&&1==i.reportoption.iscomposite?"grid":i.sheetoption.model.viewmode:(i._job=e._job,i.reportoption&&1==i.reportoption.iscomposite?(viewmode="grid",i.reportoption.mresults=e):(viewmode=i.sheetoption.model.viewmode,o.mresults=e),i.mresults=e);var n=i.activeView;i._invalChart=!0,i._invalGrid=!0,i._invalRstat=!0,i._invalPython=!0,i._invalAnal=!0,i._invalFV=!0,t||i.fireEvent("before_result_load",i,o,e),"grid"==viewmode?0!=n&&3!=n&&i.changeView?(i.reportpanel&&i.reportpanel.hideChartToolbar&&i.reportpanel.hideChartToolbar.call(i.reportpanel),i.changeView.call(i,0)):i.updateSheetUI(i,i.sheetindex):"chart"==viewmode?1!=n&&3!=n&&i.changeView?(i.reportpanel&&i.reportpanel.showChartToolbar&&i.reportpanel.showChartToolbar.call(i.reportpanel),i.changeView(1)):i.updateChartUI(i,i.sheetindex):"r"==viewmode?2!=n&&3!=n&&i.changeView?(i.reportpanel&&(i.reportpanel.hideChartToolbar.call(i.reportpanel),i.reportpanel.setRToolbar.call(i.reportpanel,!0)),i.changeView(2)):i.updateRstat(i,i.sheetindex):"python"==viewmode?3!=n&&i.changeView?(i.reportpanel&&i.reportpanel.hideChartToolbar.call(i.reportpanel),i.changeView(4)):i.updatePython(i,i.sheetindex):"analysis"==viewmode?4!=n&&i.changeView?(i.reportpanel&&i.reportpanel.hideChartToolbar.call(i.reportpanel),i.changeView(5)):i.updateAnalysis(i,i.sheetindex):"form"==viewmode&&(5!=n&&i.changeView?(i.reportpanel&&i.reportpanel.hideChartToolbar.call(i.reportpanel),i.changeView(6)):i.updateFormViewer(i,i.sheetindex)),t||i.fireEvent("result_loaded",i)},beforeRun:function(){this.sheetoption&&"python"==this.sheetoption.viewmode&&this.python$&&this.python$._do_edit(0)},procRunReport:function(e,t,i){var o,n,a,l,r=this;delete r.btabrun,r.executioncode=1,r.customLoad(!0,!0),r.getWidth(),r.getHeight(),r._invalChart=!0,r._invalRstat=!0,r._invalPython=!0,r._invalAnal=!0,r._invalFV=!0,r.olapset||(r.olapset=new IG$.m$ReqOlap,r.olapset.ctrlsource="report",(r.olapset.panel=r).olapset.uid=r.uid,r.olapset.sheet=null,r.olapset.chart=null),r.olapset.jobid=e||null,r.reportoption?(r.reportoption._dfilter=r._dfilter,r.olapset.reportoption=r.reportoption,l=(a=r.reportoption.sheets[r.sheetindex]).needPrompt.call(a),!0!==t&&l&&0<l.length&&(r.setLoading(!1),r.showPrompt(l),r.promptpanel&&r.promptpanel.clear()),o=r.reportoption.getCurrentPivot(),n=r.sheetoption.model.viewmode,r.olapset&&r.olapset.jobid?r.olapset.requestPivotResult.call(r.olapset,o,null,r.sheetindex):r.olapset&&r.olapset.requestUpdateReport.call(r.olapset,o,n,r.sheetindex,r,null,i)):r.setLoading(!1)},showPrompt:function(e){var t=this;t.promptpanel.sheetindex=""+t.sheetindex,t.promptpanel.reportoption=t.reportoption,t.promptpanel.prompts=e,t.promptpanel.init_f.call(t.promptpanel),t.promptpanel.setVisible(!0),t.adjSize()},rs_showPrompt:function(){this.procRunReport(null,!0)},updateSheetUI:function(e,t){var i,o,n,a,l,r,s=this;s.updateNoData(),s.grid$&&1==s._invalGrid&&s.mresults&&(r=s.updatePageView(),s._invalGrid=!1,s.grid$.initCustomControl.call(s.grid$),s.grid$.applyReportResult.call(s.grid$,e.mresults,e.olapset,e.reportoption,e.sheetoption,r),IG$.__ep&&(i=(l=s.grid$._gridview._mgrid).twidth+l.fixedColWidth,o=l.theight+l.fixedRowHeight,n=l.cwidth,a=l.cheight,0<i&&0<o&&(n<i||a<o)&&s.fireEvent("cresized",s,{tw:i,th:o,cw:n,ch:a})))},updatePageView:function(){var e,t=this,i=!1,o=t.sheetoption.model,n=t.down("[name=pagepanel]");return 1==o.usepaging&&t.mresults&&t.mresults.results&&1==t.mresults.results.length&&(0<(e=t.mresults.results[0]).pagestart||e.pageend<e.rowcnt)&&(i=!0),1==i?t.setPageView():n.setVisible(!1),t.adjSize(),i},exportSheet:function(e){this.fireEvent("export_sheet",this,{filetype:e})},editFormViewer:function(){var e=new IG$.formViewerEditor({reportoption:this.reportoption,sheetoption:this.sheetoption,sheetptr:this});IG$.checkLogin(this,e)},downloadAllCSV:function(){var e=this,t=new IG$._rpc$,i=e.reportoption._mc.name+" "+(e.sheetoption.title||""),o=e.olapset?e.olapset.jobid:"";i=(i=i.replace(/\./g,"_")).replace(/ /g,""),i+=".csv",o&&(e.setLoading(!0),t.init(e,{ack:"print",payload:{uid:e.uid,jobid:o,type:"csv",filename:i,option:"instanceload"},mbody:{}},e,e.rexportToFile,null,i),t.send())},mlLearn:function(){var e,t=this,i=t.olapset?t.olapset.jobid:"";i&&(IG$.d$MLearn?t.do_mlLearn.call(t,i):(e=ig$.scmap.igc9,IG$.getScriptCache(e,new IG$.callBackObj(this,function(){IG$.d$MLearn?t.do_mlLearn.call(t,i):IG$.ShowError(IRm$.r1("L_ERR_L_MOD"))}))))},do_mlLearn:function(e){new IG$.d$MLearn({jobid:e,fname:this.reportoption.name+" "+(this.sheetoption.title||"sheet")}).show()},rexportToFile:function(e,t){var i;this.setLoading(!1),"complete"==e.status&&(i=e.downloadurl,t=e.filename||t,$.download(ig$.servlet,[{name:"ack",value:"download"},{name:"_mts_",value:IG$._g$a||""},{name:"payload",value:i},{name:"mbody",value:t}],"POST"))},setPageView:function(){var e,t,i,o,n,a,l=this,r=l.down("[name=pagepanel]"),s=$("#idv-pgview",r.body.dom),p=l.mresults.results[0],c=l.sheetoption.model,h=c.rowperpage,d=c.pagestyle||"p10",u=p.pagestart,v=10,m=[];if(s.empty(),"p10"==d?v=10:"p5"==d&&(v=5),a=$("<div class='idv-pglist'></div>").appendTo(s),n=$("<ul></ul>").appendTo(a),i=p.rowcnt-p.rowfix,1<(t=Math.ceil(i/h))&&1==c.usepaging)if(r.setVisible(!0),o=Math.floor(u/h),$("<div class='idv-pg-dwn-csv' title='Download data in CSV'></div>").appendTo(s).bind("click",function(){l.downloadAllCSV.call(l)}),"button2"==d){0<o&&$("<li><span>&lt;&lt;</span></li>").appendTo(n).bind("click",function(){var e=(o-1)*h;l.goPageView.call(l,e)}),$("<li><span>"+(o+1)+" / "+t+" pages</span></li>").appendTo(n),o+1<t&&$("<li><span>&gt;&gt;</span></li>").appendTo(n).bind("click",function(){var e=(o+1)*h;l.goPageView.call(l,e)})}else{var f,g=(f=Math.floor(o/v)*v)+v;for(g=Math.min(t,g),0<f&&$("<li><span>&lt;&lt;</span></li>").appendTo(n).bind("click",function(){var e=(f-1)*h;l.goPageView.call(l,e)}),e=f;e<g;e++)m.push(e);$.each(m,function(e,t){var i=$("<li"+(t==o?" class='active'":"")+"><span>"+(t+1)+"</span></li>").appendTo(n);t!=o&&i.bind("click",function(){var e=t*h;l.goPageView.call(l,e)})}),g<t&&$("<li><span>&gt;&gt;</span></li>").appendTo(n).bind("click",function(){var e=g*h;l.goPageView.call(l,e)})}else r.setVisible(!1)},goPageView:function(e,t,i){this.procUpdateReport(e,t,i)},r_doSchJob:function(e,t){},updateChartUI:function(e,t){var i,o=this;o.updateNoData(),1==o._invalChart&&(i=o.updatePageView(),o._invalChart=!1,o.chart$&&(o.chart$.initCustomControl.call(o.chart$),o.chart$.applyReportResult.call(o.chart$,e.mresults,e.olapset,e.reportoption,e.sheetoption,i)))},updateAnalUI:function(e,t){var i,o=this;o.updateNoData(),1==o._invalAnal&&(i=o.updatePageView(),o._invalAnal=!1,o.anal$&&(o.anal$.initCustomControl.call(o.anal$),o.anal$.applyReportResult.call(o.anal$,e.mresults,e.olapset,e.reportoption,e.sheetoption,i)))},updateRstat:function(e,t){var i=this;1==i._invalRstat?(i.updatePageView(),i._invalRstat=!1,i.updateNoData(!0),i.rstat$.applyReportResult.call(i.rstat$,e.mresults,e.olapset,e.reportoption,e.sheetoption)):i.updateNoData()},updateFormViewer:function(e,t){var i=this;i._invalFV?(i.updatePageView(),i._invalFV=!1,i.updateNoData(!0),i.fview$.applyReportResult.call(i.$fview$,e.mresults,e.olapset,e.reportoption,e.sheetoption)):i.updateNoData()},updatePython:function(e,t){var i=this;i._invalPython?(i.updatePageView(),i._invalPython=!1,i.updateNoData(!0),i.python$.applyReportResult.call(i.python$,e.mresults,e.olapset,e.reportoption,e.sheetoption)):i.updateNoData()},updateAnalysis:function(e,t){var i=this;i._invalAnal?(i.updatePageView(),i._invalAnal=!1,i.updateNoData(!0),i.anal$.applyReportResult.call(i.anal$,e.mresults,e.olapset,e.reportoption,e.sheetoption)):i.updateNoData()},updateNoData:function(e){var t,i=this,o=!!e,n=i.sheetoption;if(!o&&i.mresults&&0<i.mresults.results.length&&(1==i.mresults.results.length&&0==i.mresults.results[0]._hasNoData||1<i.mresults.results.length))o=!0;else if(n&&n.mdf&&i.mresults&&0<i.mresults.results.length)for(var a in n.mdf)if((t=n.mdf[a])&&t.op){o=!0;break}$(".no-result-msg",i.down("[name=noresultpanel]").el.dom).html(IRm$.r1("B_NO_DATA")),i.down("[name=mainzone]").setActiveItem(o||3==i.activeView?0:1)},changeView:function(e){var t=this,i=t.a2_,o=i.getWidth(),n=i.getHeight();switch(t.activeView=e,t.updateNoData(),e){case 0:t.grid$||(t.grid$=new IG$.sheetViewer({layout:"fit",sheetobj:this,width:o,height:n,flex:1,html:"",reportoption:t.reportoption,sheetoption:t.sheetoption,listeners:{drillreport:function(e){return this.fireEvent("drillreport",this),!1},itemclick:function(e,t){return this.fireEvent("itemclick",this,t),!1},itemdblclick:function(e,t){return this.fireEvent("itemdblclick",this,t),!1},menu:function(e,t){return this.fireEvent("menu",this,t),!1},pivotchanged:function(e){return this.fireEvent("pivotchanged",this),!1},scroll_request:function(e,t){var i=0<(i=t)-50?i-50:i;this.scrollReqPg.call(this,i)},request_data:function(e,t,i){this._reqData.call(this,e,t,i)},hierarchy:function(e,t){var i={source:"hierarchy",cell:t.cell,row:t.row};this._reqData.call(this,e,null,i)},scope:this}}),i.add(t.grid$)),i.setActiveItem(t.grid$);break;case 1:t.chart$||(t.chart$=new IG$.v$chartViewer({layout:"fit",flex:1,width:o,height:n,autoHeight:!1,frame:!1,margins:"0 0 0 0",cmargins:"0 0 0 0",maincontainer:this,showtoolbar:!0,listeners:{drillreport:function(e){return this.fireEvent("drillreport",this),!1},itemclick:function(e,t){return this.fireEvent("itemclick",this,t),!1},itemdblclick:function(e,t){return this.fireEvent("itemdblclick",this,t),!1},menu:function(e,t){return this.fireEvent("menu",this,t),!1},pivotchanged:function(e){return this.fireEvent("pivotchanged",this),!1},scroll_request:function(e,t){return this.scrollReqPg.call(this,t),!1},request_data:function(e,t,i){return this._reqData.call(this,e,t,i),!1},hierarchy:function(e,t){return this._reqData.call(this,e,cview,option),!1},scope:this}}),i.add(t.chart$)),i.setActiveItem(t.chart$);break;case 2:t.rstat$||(t.rstat$=new IG$.v$rstatViewer({layout:"fit",flex:1,width:o,height:n,sheetobj:this,reportoption:t.reportoption,sheetoption:t.sheetoption}),i.add(t.rstat$)),i.setActiveItem(t.rstat$);break;case 3:t._pivotEditor||(t._pivotEditorIn=new IG$.pb({bodycls:"igc-peditor"}),i.add(t._pivotEditorIn)),i.setActiveItem(t._pivotEditor);break;case 4:t.python$||(t.python$=new IG$.v$pyViewer({layout:"fit",flex:1,width:o,height:n,sheetobj:this,reportoption:t.reportoption,sheetoption:t.sheetoption}),i.add(t.python$)),i.setActiveItem(t.python$);break;case 5:t.anal$||(t.anal$=new IG$.v$anViewer({layout:"fit",flex:1,width:o,height:n,sheetobj:this,reportoption:t.reportoption,sheetoption:t.sheetoption}),i.add(t.anal$)),i.setActiveItem(t.anal$);break;case 6:t.fview$||(t.fview$=new IG$.formViewer({flex:1,width:o,height:n,sheetobj:this,reportoption:t.reportoption,sheetoption:t.sheetoption}),i.add(t.fview$)),i.setActiveItem(t.fview$)}0==t.activeView?t._invalGrid&&t.updateSheetUI(t):1==t.activeView?t._invalChart&&t.updateChartUI(t):2==t.activeView?t._invalRstat&&t.updateRstat(t):4==t.activeView?t._invalPython&&t.updatePython(t):5==t.activeView?t._invalAnal&&t.updateAnalysis(t):6==t.activeView&&t._invalFV&&t.updateFormViewer(t)},setSheetOpt:function(e,t){this.reportoption=e,this.sheetoption=t,this.grid$.setSheetOpt(e,t),this.chart$.setSheetOpt(e,t)},applyOptions:function(){var e=this,t=e.grid$,i=e.rstat$,o=e.python$,n=e.anal$,a=e.fview$;t&&t.applyOptions.call(t,e.reportoption,e.sheetoption),i&&i.applyOptions.call(i,e.reportoption,e.sheetoption),o&&o.applyOptions.call(o,e.reportoption,e.sheetoption),n&&n.applyOptions.call(n,e.reportoption,e.sheetoption),a&&a.applyOptions.call(a,e.reportoption,e.sheetoption),e.drawStory()},updateFilterContent:function(e){},getFilterInfo:function(e){var t,i,o=this,n=o.sheetoption?o.sheetoption.model.aux_filter:null;if(filter=o.sheetoption?o.sheetoption.model.filter:null,n)for(t in n)(i=n[t])&&o.getSheetFlt(i,e);filter&&o.getSheetFlt(filter,e)},getSheetFlt:function(e,t){var i,o,n,a,l,r;if(e&&e.children&&0<e.children.length)for(i=0;i<e.children.length;i++)if((n=e.children[i])&&"group"==n.ftype)this.getSheetFlt(n,t);else if(n&&"condition"==n.ftype&&n.fields&&0<n.fields.length&&(l=t[a=n.fields[0].name]=t[a]||{data:[],p:{}},n.values))for(o=0;o<n.values.length;o++)(r=n.values[o].value||n.values[o].code||"")&&!l.p[r]&&(l.data.push(r),l.p[r]=1)},clearResult:function(){var e=this;e._invalGrid=!0,e._invalChart=!0,e._invalRstat=!0,e._invalPython=!0,e._invalAnal=!0,e._invalFV=!0,e.activeView=-1,e.promptpanel&&e.promptpanel.clear()},adjSize:function(){var e=this,t=e._adjWidth,i=e._adjHeight,o=e.down("[name=pagepanel]");e.promptpanel&&e.promptpanel.isVisible()&&(i-=60),o.isVisible()&&(i-=30),e.down("[name=a2_]").setSize(t,i),e.grid$&&e.grid$.setSize(t,i),e.chart$&&e.chart$.setSize(t,i),e.rstat$&&e.rstat$.setSize(t,i),e.python$&&e.python$.setSize(t,i),e.anal$&&e.anal$.setSize(t,i),e.fview$&&e.fview$.setSize(t,i)},createStoryView:function(){var e=this.down("[name=a2_]");this.visual$||(this.visual$=$("<div class='igc-story-view'></div>").appendTo(e.body.dom))},appendStory:function(){var e,t,i=this,o=i.sheetoption,n=o?o.model:null;n&&(n.visual_stories=n.visual_stories||{},e={},t=new IG$.vsEdtr({visual_story:e,callback:new IG$.callBackObj(i,function(){e.sequence=n.visual_stories.length,n.visual_stories.push(e),i.drawStory(n.visual_stories)})}),IG$.checkLogin(i,t))},drawStory:function(){var n=this,e=n.sheetoption,t=e?e.model:null,a=t?t.visual_stories:null,l=n.visual$;l&&l.empty(),l&&a&&a.length&&$.each(a,function(e,i){i.sequence=e;var t=$("<div class='igc-story-widget'><div class='igc-story-conent'></div><div class='igc-story-title'><span class='btn btn-config'></span><span class='btn btn-close'></span></div></div>").appendTo(l);t.mCustomScrollbar&&t.mCustomScrollbar({axis:"y"}),(i._mdiv=t).draggable({containment:"parent",handle:".igc-story-title",start:function(){},drag:function(){},stop:function(){}}),t.resizable({containment:"parent",helper:"ui-resizable-helper",resize:function(){},start:function(){},stop:function(){}});function o(e){var t={},i=e._mdiv;e.right?(t.right=e.right,e.left?t.left=e.left:e.width?(t.width=e.width,t.left="initial"):t.width="220px"):(t.left=e.left||"initial",e.width?(t.width=e.width,t.right="initial"):t.width="220px"),e.bottom?(t.bottom=e.bottom,e.top?t.top=e.top:(e.height?t.height=e.height:t.height="120px",t.top="initial")):(t.top=e.top||"initial",e.height?(t.height=e.height,t.bottom="initial"):t.height="120px"),t.width=t.width||"initial",t.height=t.height||"initial",i.css(t)}o(i),n.setStory(i),$(".btn-config",t).bind("click",function(e){var t=new IG$.vsEdtr({visual_story:i,callback:new IG$.callBackObj(n,function(){o(i),$(".igc-story-conent",i._mdiv).html(i.context)})});IG$.checkLogin(n,t)}),$(".btn-close",t).bind("click",function(e){for(var t=0;t<a.length;t++)if(a[t].sequence==i.sequence){a.splice(t,1);break}for(t=0;t<a.length;t++)a[t].sequence=t;i._mdiv.remove()})})},setStory:function(e){var t=e._mdiv,i=$(".igc-story-conent",t);i.empty(),i.html(e.context)},initComponent:function(){var i=this;i.on("afterrender",function(){i.CLS.afterrender.call(i);i.getWidth(),i.getHeight();i.rzone=i.down("[name=rzone]"),i.a2_=i.down("[name=a2_]"),i.noResultPnl=i.down("[name=noresultpanel]"),i.down("[name=mainzone]").setActiveItem(1),i.createStoryView()}),i.on("resize",function(e,t,i,o){this._adjWidth=t,this._adjHeight=i,this.adjSize()}),i.on("filterchanged",function(){return i.procUpdateReport(),!1}),i.on("requestpagevalues",function(t,i){var e=this,o=new IG$._rpc$,n=e.olapset?e.olapset.jobid:null;return n&&(t._popdlg.setLoading(!0),o.init(e,{ack:"olapservice",payload:{option:"pivot",pagefilter_lookup:"T",jobid:n,pageuid:i.uid,active:""+e.sheetindex},mbody:{}},e,function(e){t._popdlg.setLoading(!1),e[i.uid]&&t._popdlg.loadPageFilterLookup(e[i.uid])}),o.send()),!1}),i.promptpanel=new IG$.prompt({hidden:!0}),i.promptpanel.on("remove_prompt",function(e,t){i.removePrompt(t.prompt)}),$s.apply(this,{border:0,layout:{type:"vbox",align:"stretch"},items:[{xtype:"container",autoScroll:!1,scroll:!1,flex:1,border:0,layout:{type:"vbox",align:"stretch"},items:[i.promptpanel,{xtype:"panel",flex:1,layout:"card",autoScroll:!1,scroll:!1,name:"mainzone",border:0,items:[{xtype:"container",name:"rzone",deferredRender:!1,layout:"fit",items:[{xtype:"container",layout:{type:"vbox",align:"stretch"},items:[{xtype:"container",flex:1,name:"a2_",layout:"card",hidemode:"offset",border:0},{xtype:"container",name:"pagepanel",html:"<div id='idv-pgview' class='idv-pgview'>Page view</div>",hidden:!0,height:25}],region:"center",flex:1}]},{xtype:"container",name:"noresultpanel",deferredRender:!1,html:"<div class='igc-no-results'><div class='no-result-msg'>"+IRm$.r1("B_NOT_EXECUTED")+"</div></div>"}]}]}]}),IG$.p$SheetView.superclass.initComponent.call(this)}});
IG$.formViewerEditor=$s.extend($s.window,{modal:!0,region:"center",layout:{type:"fit",align:"stretch"},closable:!0,resizable:!0,width:800,height:600,_init:function(){var e=this,l=(e.reportoption._mc,e.sheetoption.model),t="M_DATA"==l.dataquerymode?["rows"]:["rows","cols","measures"],n=[],a=[{name:"Select Item",value:null}],o=e.down("[name=_mviewer_]");l.formbuilder=l.formbuilder||{items:[]},l.formbuilder.template=l.formbuilder.template||JSON.stringify(IG$.formViewerDefault.template,null,2),$.each(t,function(e,t){var o,i,r=l[t];if(r)for(o=0;o<r.length;o++)(i=IG$.copyObject(r[o])).iconcls=IG$.get_metatype_icon(i.type.toLowerCase(),i),n.push(i),a.push(i)}),e.setAllValues(l.formbuilder),o.loadTemplate(l.formbuilder.template)},_confirm:function(){var e=this,t=(e.reportoption._mc,e.sheetoption.model);e.down("[name=_mviewer_]");e.getAllValues(t.formbuilder)||(e.callback&&e.callback.execute(),e.close())},initComponent:function(){var t=this;$s.apply(t,{title:IRm$.r1("L_FORMVIEWER"),items:[{xtype:"panel",layout:{type:"vbox",align:"stretch"},border:0,items:[{xtype:"textarea",name:"scripts",labelPosition:"top",fieldLabel:"Script",flex:1},{xtype:"gridpanel",name:"dp1",flex:1,store:{fields:["name","uid","sel"]},columns:[{text:IRm$.r1("B_NAME"),dataIndex:"name",flex:1}]}]}],buttons:["->",{text:IRm$.r1("B_CONFIRM"),handler:function(){this._confirm()},scope:t},{text:IRm$.r1("B_CANCEL"),handler:function(){this.close()},scope:t}],listeners:{afterrender:function(e){t._init()}}}),IG$.formViewerEditor.superclass.initComponent.call(this)}}),IG$.formViewer=$s.extend(IG$.v$pnl,{layout:"fit",_init:function(){var e=this;e._designmode,e.reportoption&&e.sheetoption&&(e.sheetoption.formbuilder=e.sheetoption.formbuilder||{items:[]},e.sheetoption.formbuilder.template=e.sheetoption.formbuilder.template||JSON.stringify(IG$.formViewerDefault.template,null,2),e._draw_area(e.sheetoption.formbuilder.template))},_confirm:function(){var e=this,t=(e.reportoption._mc,e.sheetoption.model.formbuilder);t.items=[],e._cp_data(e._form_items.items,t.items)},_draw_area:function(template){var me=this,formview=me.down("[name=formview]"),ctrl;if(formview.removeAll(),template){try{ctrl=eval("("+template+")")}catch(e){return void me._alert("Error on template content : "+e)}if(ctrl)try{formview.add(ctrl)}catch(e){me._alert("Error on setting components : "+e)}}else me._alert("Empty template")},$apply:function(e){this.down("[name=formview]")},_alert:function(e){IG$.alertmsg(ig$.appname,e,null,null,0,"error")},loadTemplate:function(e){this._draw_area(e)},applyReportResult:function(e,t,o,i,r){},initComponent:function(){var t=this;$s.apply(t,{items:[{xtype:"panel",name:"formview",flex:1,autoScroll:!0,items:[]}]}),t.on("afterrender",function(e){t._init()}),IG$.formViewer.superclass.initComponent.call(this)}}),IG$.formViewerDefault={items:[],template:{xtype:"panel",layout:{type:"vbox",align:"stretch"},items:[{xtype:"textfield",fieldLabel:"fieldname",readOnly:!0,map:"{column:0}"},{xtype:"gridpanel",store:{},columns:[{title:"{header:0}",dataIndex:"{column:0}",flex:1},{title:"{header:1}",dataIndex:"{column:1}",flex:1}]}]}};
IG$.$d_hlconfig=$s.extend($s.window,{modal:!0,region:"center",layout:{type:"fit",align:"stretch"},closable:!1,resizable:!1,width:500,height:440,seq:0,_confirm:function(){var e=this;e.commit_f(),e.callback&&e.callback.execute(),e.close()},init_f:function(){var e=new IG$._rpc$;e.init(this,{ack:"appoption",payload:{address:"ReportStyle"},mbody:{}},this,function(e){for(var t,a,n=this,i=n._piobj._mc.highlight||[],l=[],o=n.down("[name=grdhl]"),s=e.themes[0].custom_styles,r=[],m=0;m<i.length;m++){if((t=i[m]).seq=n.get_sid(),t.itemname=t.name,t.value_desc=[],t.values)for(a=0;a<t.values.length;a++)t.value_desc.push(t.values[a].code);t.value_desc=t.value_desc.join(","),l.push(t)}if(o.store.loadData(l),s)for(a=0;a<s.length;a++)r.push({name:s[a].name});n.__global_cs=r},null),e.send()},commit_f:function(){for(var e,t,a=this,n=a._piobj._mc.highlight,i=a.down("[name=grdhl]").store,l=[],o=0;o<i.data.items.length;o++)for(t=i.data.items[o],e=0;e<n.length;e++)if(n[e].seq==t.get("seq")){l.push(n[e]);break}a._piobj._mc.highlight=l},make_new_option:function(e){var t=this,e=e,a=new IG$.$w_hl_config_item({_piobj:t._piobj,__global_cs:t.__global_cs,hlobj:e,callback:new IG$.callBackObj(t,t.rs_make_new_option)});IG$.checkLogin(t,a)},rs_make_new_option:function(e){var t,a,n,i=this,l=i.down("[name=grdhl]"),o=i._piobj._mc.highlight=i._piobj._mc.highlight||[];if(1==e.isnew)delete e.isnew,o.push(e),l.store.add(e);else{for(t=0;t<l.store.data.items.length;t++)if((n=l.store.data.items[t]).get("seq")==e.seq){a=n;break}a&&(a.set("name",e.name),a.set("delimiter",e.delimiter),a.set("itemname",e.itemname),a.set("uid",e.uid),a.set("operator",e.operator),a.set("stylename",e.stylename),a.set("styleuid",e.styleuid),a.set("apprange",e.apprange),a.set("appset",e.appset),a.set("values",e.values),a.set("value_desc",e.value_desc))}},get_sid:function(){return this.seq++,"seq_"+this.seq},initComponent:function(){this.title=IRm$.r1("T_HL_OPT"),$s.apply(this,{defaults:{bodyStyle:"padding:10px"},items:[{xtype:"form",layout:{type:"vbox",align:"stretch"},autoScroll:!0,defaults:{anchor:"100%"},items:[{xtype:"fieldcontainer",layout:{type:"hbox",align:"stretch"},items:[{xtype:"displayfield",value:IRm$.r1("L_HL_DESC"),flex:1},{xtype:"button",text:IRm$.r1("L_ADD_NEW"),handler:function(){var e={isnew:!0,seq:this.get_sid()};this.make_new_option(e)},scope:this}]},{xtype:"gridpanel",name:"grdhl",flex:1,store:{xtype:"store",fields:["name","delimiter","itemname","uid","operator","stylename","styleuid","apprange","appset","seq","values"]},selType:"checkboxmodel",selModel:{mode:"SINGLE"},tbar:[{iconCls:"icon-toolbar-moveup",text:"Move Up",handler:function(){var e,t,a=this.down("[name=grdhl]"),n=a.getSelectionModel(),i=n.getSelection();i&&1==i.length&&(e=i[0],0<(t=a.store.indexOf(e))&&(a.store.remove(e),e=a.store.insert(t-1,e),n.select(e,!0)))},scope:this},{xtype:"button",iconCls:"icon-toolbar-movedown",text:"Move Down",handler:function(){var e,t,a=this.down("[name=grdhl]"),n=a.getSelectionModel(),i=n.getSelection();i&&1==i.length&&(e=i[0],(t=a.store.indexOf(e))+1<a.store.data.items.length&&(a.store.remove(e),e=a.store.insert(t+1,e),n.select(e,!0)))},scope:this}],columns:[{xtype:"gridcolumn",text:IRm$.r1("B_NAME"),dataIndex:"itemname",tdCls:"igc-td-link",flex:1},{xtype:"gridcolumn",text:IRm$.r1("B_ST_NAME"),dataIndex:"stylename",flex:1},{xtype:"gridcolumn",text:IRm$.r1("L_CONDITION"),dataIndex:"operator",width:60},{xtype:"gridcolumn",text:IRm$.r1("B_VALUE"),dataIndex:"value_desc",flex:1},{xtype:"actioncolumn",width:40,items:[{iconCls:"icon-grid-delete",tooltip:IRm$.r1("B_DELETE"),handler:function(e,t,a){var n,i;for(rec=e.store.getAt(t),h=this._piobj._mc.highlight,n=0;n<h.length;n++)if(h[n].seq==rec.get("seq")){i=h[n],h.splice(n,1);break}i&&e.store.removeAt(t)},scope:this}]}],listeners:{cellclick:function(e,t,a,n,i,l,o,s){var r,m,d=e.store.getAt(l),c=this._piobj._mc.highlight;if(a<3&&0<a){for(m=0;m<c.length;m++)if(c[m].seq==d.get("seq")){r=c[m];break}r&&this.make_new_option(r)}},scope:this}}]}],buttons:[{text:IRm$.r1("B_CONFIRM"),handler:function(){this._confirm()},scope:this},{text:IRm$.r1("B_CANCEL"),handler:function(){this.close()},scope:this}],listeners:{afterrender:function(e){this.init_f()}}}),IG$.$d_hlconfig.superclass.initComponent.apply(this,arguments)}}),IG$.$w_hl_config_item=$s.extend($s.window,{modal:!0,region:"center",layout:{type:"fit",align:"stretch"},closable:!1,resizable:!1,width:450,height:400,_confirm:function(){var e=this;e.commit_f(),e.callback&&e.callback.execute(e.hlobj),e.close()},init_f:function(){var e,t=this,a=t._piobj,n=t.hlobj,i=a._mc,l=i.defaultstyle,o=i.customstyle,s=[],r=t.down("[name=dsitem]"),m=t.down("[name=stylename]"),d=t.__global_cs;if(d)for(e=0;e<d.length;e++)s.push({name:d[e].name,value:d[e].name});for(e in $.each([l,o],function(e,t){var a;if(t)for(e=0;e<t.length;e++)a={name:t[e].name,value:t[e].name},s.push(a)}),m.store.loadData(s),n.appset||{})switch(e){case"bg":t.down("[name=aset_1]").setValue(!0);break;case"fs":t.down("[name=aset_2]").setValue(!0);break;case"format":t.down("[name=aset_3]").setValue(!0);break;case"tmpl":t.down("[name=aset_4]").setValue(!0)}t.dsitemuid=n.uid,r.setValue(n.name),t.down("[name=delimiter]").setValue(n.delimiter||";"),t.down("[name=operator]").setValue(n.operator||"EQ"),t.down("[name=stylename]").setValue(n.stylename),t.down("[name=apprange]").setValue(n.apprange||"CELL"),t.down("[name=values]").setValue(n.value_desc)},commit_f:function(){var e,t,a=this,n=a.hlobj,i=a.down("[name=dsitem]"),l={};if($.each([{fname:"aset_1",code:"bg"},{fname:"aset_2",code:"fs"},{fname:"aset_3",code:"format"},{fname:"aset_4",code:"tmpl"}],function(e,t){1==a.down("[name="+t.fname+"]").getValue()&&(l[t.code]=1)}),n.appset=l,n.field={uid:a.dsitemuid,name:i.getValue()},n.uid=a.dsitemuid,n.itemname=i.getValue(),n.name=n.itemname,n.delimiter=a.down("[name=delimiter]").getValue(),n.operator=a.down("[name=operator]").getValue(),n.stylename=a.down("[name=stylename]").getValue(),n.apprange=a.down("[name=apprange]").getValue(),n.values=[],t=a.down("[name=values]").getValue(),n.value_desc=t)for(t=t.split(","),e=0;e<t.length;e++)n.values.push({code:t[e]})},cubeSelectedHandler:function(){var e=new IG$.metaSelectDlg({visibleItems:"workspace;folder;metric;table;dataset;inlineview;measure;",tree_options:{cubebrowse:!0,rootuid:this._piobj._mc.uid},callback:new IG$.callBackObj(this,this.rs_cubeSelectedHandler)});IG$.checkLogin(this,e)},rs_cubeSelectedHandler:function(e){this.dsitemuid=e.uid,this.down("[name=dsitem]").setValue(e.name)},initComponent:function(){this.title=IRm$.r1("T_HL_OPT"),$s.apply(this,{defaults:{bodyStyle:"padding:10px"},items:[{xtype:"form",layout:"anchor",autoScroll:!0,defaults:{anchor:"100%"},items:[{xtype:"fieldset",title:IRm$.r1("L_GENERAL_OPTION"),layout:"anchor",defaults:{anchor:"100%"},items:[{xtype:"fieldcontainer",layout:{type:"hbox",align:"stretch"},items:[{xtype:"textfield",name:"dsitem",readOnly:!0,fieldLabel:IRm$.r1("B_NAME")},{xtype:"button",text:"..",handler:function(){this.cubeSelectedHandler()},scope:this}]},{xtype:"combobox",fieldLabel:IRm$.r1("L_CONDITION"),name:"operator",valueField:"value",displayField:"name",editable:!1,queryMode:"local",autoSelect:!0,autoScroll:!0,store:{xtype:"store",fields:["name","value"],data:[{name:IRm$.r1("L_F_EQ"),value:"EQ"},{name:IRm$.r1("L_F_LT"),value:"LT"},{name:IRm$.r1("L_F_LE"),value:"LTE"},{name:IRm$.r1("L_F_GT"),value:"GT"},{name:IRm$.r1("L_F_GE"),value:"GTE"},{name:IRm$.r1("L_F_BETWEEN"),value:"BTW"},{name:IRm$.r1("L_F_LIKE"),value:"LIKE"},{name:IRm$.r1("L_F_IN"),value:"IN"}]},listeners:{change:function(e){var t=this.down("[name=delimiter]"),a=e.getValue();t.setVisible("IN"==a||"BTW"==a)},scope:this}},{xtype:"fieldcontainer",layout:{type:"vbox",align:"stretch"},items:[{xtype:"textarea",fieldLabel:IRm$.r1("B_VALUES"),name:"values"},{xtype:"textfield",hidden:!0,fieldLabel:IRm$.r1("B_DELIMITER"),name:"delimiter"}]}]},{xtype:"fieldset",title:IRm$.r1("L_STYLE_OPTION"),layout:"anchor",defaults:{anchor:"100%"},items:[{xtype:"combobox",fieldLabel:IRm$.r1("L_ST_NAME"),name:"stylename",valueField:"value",displayField:"name",editable:!1,queryMode:"local",autoSelect:!0,autoScroll:!0,store:{xtype:"store",fields:["name","value"]}},{xtype:"combobox",name:"apprange",fieldLabel:IRm$.r1("L_HL_RANGE"),valueField:"value",displayField:"name",editable:!1,queryMode:"local",autoSelect:!0,autoScroll:!0,store:{xtype:"store",fields:["name","value"],data:[{name:IRm$.r1("L_HL_CELL"),value:"CELL"},{name:IRm$.r1("L_HL_ROW"),value:"ROW"},{name:IRm$.r1("L_HL_COL"),value:"COL"}]}}]},{xtype:"fieldset",title:IRm$.r1("L_APPL_R"),layout:"anchor",items:[{xtype:"checkbox",name:"aset_1",boxLabel:IRm$.r1("L_BG_COL")},{xtype:"checkbox",name:"aset_2",boxLabel:IRm$.r1("L_FONT_ST")},{xtype:"checkbox",name:"aset_3",boxLabel:IRm$.r1("L_F_STR")},{xtype:"checkbox",name:"aset_4",boxLabel:IRm$.r1("L_F_TMPL")}]}]}],buttons:[{text:IRm$.r1("B_CONFIRM"),handler:function(){this._confirm()},scope:this},{text:IRm$.r1("B_CANCEL"),handler:function(){this.close()},scope:this}],listeners:{afterrender:function(e){this.init_f()}}}),IG$.$w_hl_config_item.superclass.initComponent.apply(this,arguments)}});
IG$.reportbase$=IG$.reportbase$||{},$s.apply(IG$.reportbase$,{doDrillReport:function(e){var t=this,o=e,i=o.sheetindex;if(t.updateFormula(o),o.sheetoption.model.drillreport)return!1;t._ine_t&&clearTimeout(t._ine_t),t._ine_t=setTimeout(function(){t.executeDrillReport.call(t,i,o)},500)},doLink:function(n,r,a){var l=this;l._ine_t&&clearTimeout(l._ine_t),l._ine_t=setTimeout(function(){var e;n.setLoading.call(n,!0,!1),(e=new IG$._rpc$).init(l,{ack:"content",payload:{uid:r.uid,type:r.type},mbody:{}},l,function(e){n.setLoading.call(n,!1);var t,o=e.content,i=o.link_option;"LINK_FIELD"==o.custom_type&&i&&(act=i.l_tp,"DOC"==act?dnode&&(fileuid=dnode.downloadurl,fileext=dnode.fileext,fname=dnode.filename,fname=(fname||r.name)+"."+fileext,$.download(ig$.servlet,[{name:"ack",value:"download"},{name:"payload",value:fileuid},{name:"_mts_",value:IG$._g$a||""},{name:"mbody",value:fname}],"POST")):"DRILL"==act?(t=n.getDrillXML.call(n,dobj),dnode={uid:i.l_rpt_uid,name:i.l_rpt_name,type:"Report"},dnode.uid&&l.showDetailView(n,dnode,t)):"EXTERNAL"==act&&i.l_elnk&&window[i.l_elnk]&&window[i.l_elnk].apply(null,[l,n,a,n.mresults.results[0]._tabledata[a.r]]))},function(e){n.setLoading.call(n,!1)}),e.send()},500)},updateAllFilters:function(e,t){for(var o,i,n,r,a=1,l=this.dzone,s=e?e.sheetoption.docid:null,d=[],c=0;c<l.items.length;c++)r=l.items[c],o=l.items[c].view,(t||!1!==r.visible)&&o&&o.sheetoption&&(n=(i=o.sheetoption).model.filter_options,"FILTER"!=i.objtype||r.docid==s||n.showbutton||"T"!=n.f_b_evt?"RPT_VIEW"==i.objtype&&o.irpt&&o.irpt.dzone&&(o.irpt.updateAllFilters.call(o.irpt,null,t)||(a=0)):o.checkFilterValues.call(o,1,d)?a&&(this.onFilterUpdate(o,1),$.each(d,function(e,t){o.changeActiveTab.call(o,t,void 0)})):a=0);return a},executeDrillReport:function(e,t){for(var o,i,n,r,a,l,s,d,c,p,h,u=this,m=(u.sheets[e].olapset&&u.sheets[e].olapset.jobid,t.sheetoption),_=!!m&&m.edrill,f=m&&m.model.drilltarget?m.model.drilltarget:null,b=new IG$.drilltarget(f),g=u.dzone,w=!1,v=u.dzone.docitems||{},x=!1,y=0;y<u.sheets.length;y++)if(o=u.sheets[y],n=b.isDrillTarget("sheet_"+y),(1==(c=o.sheetoption).drillreport||_||n&&n.isdrill)&&o.sheetindex!=e){if(!_&&b._e&&(!n||n&&!n.isdrill))continue;if(i=c.model.aux_filter,r=c.model.aux_filter)for(var $ in r)i[$]=r[$];(l=t.getDrillXML.call(t,n))&&0<l.children.length&&(x=!0,i["report_"+e]=l,w=!0,(a=g.getBox.call(g,o.renderBox))&&a.parent&&"TAB"==a.parent.objtype&&(w=a.parent.view.active==o.renderBox),1==w?o.procRunReport.call(o,null):o.btabrun=!0)}for($ in v)if(d=(s=v[$].lt.ubody).view,"RPT_VIEW"==s.objtype&&d&&d.irpt)for(y=0;y<d.irpt.sheets.length;y++)if(h=(o=d.irpt.sheets[y]).reportoption,p=o.sheetoption,n=h?b.isDrillTarget(h.uid+"_sheet_"+y):null,1==p.drillreport||_||n&&n.isdrill){if(!_&&b._e&&(!n||n&&!n.isdrill))continue;if(i=p.model.aux_filter,r=m.model.aux_filter)for(var $ in r)i[$]=r[$];(l=t.getDrillXML.call(t,n))&&0<l.length&&(x=!0,i["report_"+e]=l,w=!0,(a=g.getBox.call(g,o.renderBox))&&a.parent&&"TAB"==a.parent.objtype&&(w=a.parent.view.active==o.renderBox),1==w?o.procRunReport.call(o,null):o.btabrun=!0,s.visible&&(d.f_run=!1))}return u.broadcastFilter(),x},updateDashboardFilterInfo:function(e){for(var t=0;t<this.sheets.length;t++)this.sheets[t]._dfilter=e},updateFilterInfo:function(e){var t,o,i,n,r,a,l,s,d;if(e&&0<e.length)for((t=new IG$.clFilterGroup(null)).name="____systemfilter____",o=new IG$.clFilterGroup(null),t.subGroups.push(o),a=0;a<e.length;a++){for(n=e[a],(i=new IG$.clFilter(null)).operator=n.operator,(r=new IG$.clItems).uid=n.uid,r.type=n.type,r.nodepath=n.nodepath,r.name=n.name,i.itemList.push(r),i.delimiter="$%^",d=n.value,l=0;l<d.length;l++)iv=d[l],s={code:iv.code||iv,text:iv.text||iv.code||iv},i.values.push(s);o.subConditions.push(i)}if(t)for(a=0;a<this.sheets.length;a++){for(var c=this.sheets[a].sheetoption.filter;c&&0<c.subGroups.length;)c=c.subGroups[0];c&&c.subGroups.push(t)}},exportToFile:function(t,e,o,i,n){var r,a,l,s,d=this,c=new IG$._rpc$,p=d.reportoption._mc.name||"download",h=d.reportoption._mc.export_option,u=d.dzone;if(o&&o.sheetoption&&o.sheetoption.model&&(o.sheetoption.name||o.sheetoption.model.name)&&((a=u.docitems[o.renderBox])&&a.lt&&a.lt.ubody&&(s=a.lt.ubody.getTitle()),s&&(p+="_"+s)),p=(p=p.replace(/\./g,"_")).replace(/ /g,""),"JASPER_"==t.substring(0,"JASPER_".length))return t=t.substring("JASPER_".length).toLowerCase(),void d.toolbarHandler.call(d,"cmd_export_jasper",t);if("OFFICE_"==t.substring(0,"OFFICE_".length))return l=Number(t.substring("OFFICE_".length)),void(0==isNaN(l)&&-1<l&&h&&h.otmpl[l]&&d.toolbarHandler.call(d,"cmd_export_office",h.otmpl[l]));switch(t){case"EXCEL":p+=".xls";break;case"PNG":p+=".png";break;case"PDF":p+=".pdf";break;case"SVG":p+=".svg";break;case"HTML":p+=".html";break;case"ODT":case"ODS":case"ODP":case"TMPL":p+="."+t.toLowerCase()}r=d.getExportData(h,t,e,!1,null,o,i,n),c.init(d,{ack:"print",payload:{uid:d.uid,type:t,filename:p,fonttype:h&&h.fonttype?h.fonttype:"",isinstance:e?"T":"F",sheetname:s},mbody:r,meta_type:"print_data"},d,function(e){d.rexportToFile.call(d,e,p,t)},null),c.send()},rexportToFile:function(e,t,o){var i,n,r,a;"complete"==e.status&&(r=e.downloadurl,a=e.isinstance,t=e.filename||t,a?(i="./print.jsp?mts="+(IG$.dlgLogin.logininfo.mts_name||"")+"#p1=export&p2="+r,n=window.open(i,"name","height=500,width=800"),window.focus&&n.focus()):"HTML"==o?(i="./htmlview.jsp?mts="+(IG$.dlgLogin.logininfo.mts_name||"")+"&p1=export&p2="+r,n=window.open(i,"name","height=500,width=800"),window.focus&&n.focus()):$.download(ig$.servlet,[{name:"ack",value:"download"},{name:"payload",value:r},{name:"_mts_",value:IG$._g$a||""},{name:"mbody",value:t}],"POST"))},getExportData:function(e,t,o,i,n,r,a,l){var s,d,c,p,h,u,m,_,f,b,g,w,v,x,y=this,$={sheets:[]},I=y.dzone,k=(y.sheets,0),T=0,G=0,j={},R=[];if(!r&&a?x=$.sheetpages=[]:v=$.items=[],i?($.uid=y.uid,$.name=n):($.layout=e.layout||"portrait",$.option=e),r)p=r.renderBox,r.jobid&&$.sheets.push({docid:p,jobid:r.jobid,sheetname:r.sheetoption&&r.sheetoption.model?r.sheetoption.model.name:null});else for(s=0;s<I.items.length;s++)if("SHEET"==(c=I.items[s]).objtype){if(p=(u=c.view).renderBox,l&&!l["sheet_"+u.sheetindex])continue;$.sheets.push({docid:p,jobid:u.jobid,title:c.title,sheetname:u.sheetoption&&u.sheetoption.model?u.sheetoption.model.name:null}),j["SHEET_"+s]=c.title||""}else"FILTER"==c.objtype&&c.view&&(f=c.view).updateFilterPrompt.call(f,j);for(b in $.layoutinfo=I.getLayout.call(I),$.params=R=[{name:"REPORT_NAME",value:y.reportoption._mc.name}],j)R.push({name:b,value:j[b]});for(!y.reportoption._mc.name||a||r||(v.push({type:"label",x:k,y:T,sheet_title:!0,text:y.reportoption._mc.name}),T+=G=30),s=0;s<I.items.length;s++)if(_=m=0,u=null,!(c=I.items[s])||(r||a||(k=c.lt.x,T=c.lt.y+G),m=c.lt.w,_=c.lt.h,0!=c.visible))if("SHEET"==c.objtype){if(h=(u=c.view).sheetoption&&u.sheetoption.model?u.sheetoption.model.name:null,r&&r!=u)continue;if(l&&!l["sheet_"+u.sheetindex])continue;var C,E,S,L,F,D=v||[];if(u&&u.sheetoption)if(p=u.renderBox,u.sheetoption.name&&(D.push({type:"label",x:k,y:T,d_width:m,d_height:_,docid:c.docid,doc_title:!0,text:h,sheetname:h,sheetindex:u.sheetindex}),T+=20),e.filterdesc&&u.mresults&&u.mresults.results&&(w=(g=u.mresults.results)&&g.length?g[0].filterdesc:null)&&(D.push({type:"label",x:k,y:T,sheet_title:!0,text:w,sheetname:h,sheetindex:u.sheetindex}),T+=G=30,_=30<_?_-30:_),0==u.activeView)(L=u.grid$&&u.grid$.getExportData.call(u.grid$,e))&&D.push({type:"datagrid",x:k,y:T+20,d_width:m,d_height:_,docid:c.docid,sheetindex:u.sheetindex,instance:L,sheetname:h,sheetindex:u.sheetindex});else if(1==u.activeView){if((L=u.chart$&&u.chart$.getExportData.call(u.chart$,e,k,T+20,c.docid,m,_))&&"object"==typeof L&&L.length)for(d=0;d<L.length;d++)L[d].sheetname=h,u.jobid&&(L[d].instance={jobid:u.jobid}),L[d].sheetindex=u.sheetindex,D.push(L[d]);"EXCEL"==t&&u.sheetoption.tb_prt_grd&&(T+=(u.__h||300)+20,S=(E=(C=u._IK2).results[0])?E.delim:null,L={jobid:C._IL8,cols:E.cols,rows:E.rows,delimiter:S,fixedrow:E.rowfix},F={type:"datagrid",x:k,y:T+20,d_width:m,d_height:_,docid:c.docid,sheetindex:u.sheetindex,instance:L,sheetname:h,sheetindex:u.sheetindex},D.push(F))}else 2==u.activeView?(L=u.rstat$&&u.rstat$.getExportData.call(u.rstat$,e,k,T+20,t,c.docid,m,_))&&(L.sheetname=h,L.sheetindex=u.sheetindex,D.push(L)):((L=u.grid$&&u.grid$.getExportData.call(u.grid$,e))&&D.push({type:"datagrid",x:k,y:T+20,d_width:m,d_height:_,docid:c.docid,data:L,sheetname:h,sheetindex:u.sheetindex}),(L=u.chart$&&u.chart$.getExportData.call(u.chart$))&&D.push({type:"chart",x:k,y:T+20,d_width:m,d_height:_,width:u.chart$.body.getWidth(),height:u.chart$.body.getHeight(),docid:c.docid,data:L,sheetname:h,sheetindex:u.sheetindex}));x&&D.length&&(x.push({sheetname:h,sheetindex:u.sheetindex,items:D}),T=k=0)}else"FILTER"!=c.objtype||r||a||(L=(u=c.view).getExportData&&u.getExportData.call(u,k,T,c.docid,m,_))&&v&&v.push(L);return $},broadcastFilter:function(){this.sheets;for(var e,t={},o=this.dzone.items,i=0;i<o.length;i++)(e=o[i].view)&&e.getFilterInfo&&e.getFilterInfo.call(e,t);for(i=0;i<o.length;i++)(e=o[i].view)&&e.updateFilterContent&&e.updateFilterContent.call(e,t)},doCellClick:function(t,e){var o,i,n,r,a=this,l=(t.sheetindex,t.sheetoption),s=e?e.cl:null,d="amp_cellclick_handler";s&&(r=s.title,window[d]&&(a._ine_th&&clearTimeout(a._ine_th),a._ine_th=setTimeout(function(){var e=window[d];try{e.apply(null,[a,t,s,t.mresults.results[0]._tabledata[s.r]])}catch(e){IG$.ShowError("Error on click event handler."+e,a)}},500)),l&&9==r?(o=s.index,i=s.position,(n=l.getItem(o,i))&&a.doLink.call(a,t,n,s)):2<r&&a.doDrillReport.call(a,t))},procMenu:function(e,t){var o,i,n,r,a,l,s,d,c=this,p=e.sheetoption.model,h=t.menu.cell,u=!1,m=p?p.sortoption:null;switch(p&&(s=p.mdf=p.mdf||{},m=p.sortoption=p.sortoption||{}),h&&(1==(d=h.position)?o="rows":2==d?o="cols":3==d&&(o="measures"),i=o&&p[o].length>h.index?p[o][h.index]:null),t.cmd){case"CMD_REMOVE":if(4==h.position){if(n=p.sheet_formula)for(y=0;y<n.length;y++)if(n[y].node.fid=="formula_"+h.index){n.splice(y,1),u=!0;break}}else o&&1<p.rows.length+p.cols.length+p.measures.length&&(p[o].splice(h.index,1),u=!0);break;case"CMD_FILTER":c.toolbarHandler("cmd_filter",i);break;case"CMD_STYLE":c.toolbarHandler("cmd_style",i);break;case"CMD_ASC":"asc"!=i.sortorder&&(i.sortorder,i.sortorder="asc",u=!0);break;case"CMD_DESC":"desc"!=i.sortorder&&(i.sortorder,i.sortorder="desc",u=!0);break;case"CMD_TOP5":r="top",a=5,l=i.uid;break;case"CMD_TOP10":r="top",a=10,l=i.uid;break;case"CMD_BTM5":r="bottom",a=5,l=i.uid;break;case"CMD_BTM10":r="bottom",a=10,l=i.uid;break;case"CMD_SHOWALL":r="normal",a=0,l=null;break;case"CMD_UNDO":u=e.undolist.call(e);break;case"CMD_CLIPBOARD":var _=e.getClipboardContent();IG$.clipboardCopy(_);break;case"CMD_RUN_FILTER":s&&(u=!0,t.menu.mdf?s[h.c]=t.menu.mdf:delete s[h.c]);break;case"T_SUM":case"T_AVG":case"T_MIN":case"T_MAX":case"T_RANK":case"T_POT":case"T_CUMUL":case"T_INCR":case"T_DIFF":case"CL_FM":case"R_FMT":s&&c.formulaHandler(e,i,t.cmd);break;default:if("detail:"==t.cmd.substring(0,7)){for(var f,b,g,w,v=t.cmd.substring(7),x=p.detailview,y=0;y<x.length;y++)if(x[y].uid==v){f=x[y];break}if(f){if(g=(b={titem:{enabled:!1,items:[],item_map:{}},tparams:{enabled:!1,items:[],item_map:{}}}).titem,w=b.tparams,f.titem){for(g.items=f.titem.split("_"),y=0;y<g.items.length;y++)g.items[y]&&(g.item_map[g.items[y]]=1);g.items.length&&(g.enabled=!0)}if(f.tparams){for(w.items=f.tparams.split("_"),y=0;y<w.items.length;y++)w.items[y]&&(w.item_map[w.items[y]]=1);w.items.length&&(w.enabled=!0)}var $=e.getDrillXML.call(e,b);$&&0<$.children.length&&c.showDetailView(e,f,$)}}}m&&(r&&r!=m.sortmethod||a&&a!=m.sortcount||l&&l!=m.sortmeasure)&&(u=!0,m.sortmethod=r,m.sortcount=a,m.sortmeasure=l),1==u&&(c.contentchanged=!0,c.updatePivotCnt(c.activeSheet))},makeTempReportMeta:function(e){var t={content:{cube_objects:[],type:e.type,objinfo:{}},type:e.type};return e.cube_objects&&(t.content.cube_objects=e.cube_objects),t},continueReportOption:function(e){var t,o,i,n,r,a,l=this,s=e.cubeobj,d=l.reportoption,c=l.dzone,p=l.sheets,h={};if(l.reportoption||(d=l.reportoption),l.reportlayout&&(l.reportlayout=null),s){for(d._mc.default_datasource||(d._mc.default_datasource=s.uid),a=d._mc.cube_objects=d._mc.cube_objects||[],t=0;t<a.length;t++)h[a[t].uid]=1;h[s.uid]||(a.push(s),h[s.uid]=1),0==d.sheets.length&&(o=new IG$.clReport({},d.itemtype,!1),d.sheets.push(o),p.length||(i=l.appendBox(),c.setActive.call(c,i),n=l.createSheet(0,o,i),o.model.layoutinfo.docid=i.docid,i.setTitle.call(i,o.name||""),i.view=n,i.objtype="SHEET",i.validateProperty.call(i),i.setReportOption.call(i,o),l.sheets.push(n)),(r=l.sheets[0]).reportoption=d,r.sheetoption=o,r.applyOptions.call(r),c.updateDisplay.call(c)),l.refDS(),l.updateTbarAll()}},updateViewMode:function(e){var t,o=this,i=o.sheets[o.activeSheet];"chart"==e&&o.showChartToolbar(),"chart"!=e&&o.hideChartToolbar(),o.setRToolbar("r"==e),o.setPythonToolbar("python"==e),o.updateChartToolbar("chart"!=e),o.updateRToolbar("r"!=e),o.showAnalyToolbar("analysis"==e),o.setFormViewToolbar("form"==e),i.updateViewMode.call(i,e),"python"!=e||(t=i.python$)&&t._do_edit.call(t,o.editmode)},toolbarHandler:function(t,o,n,r,m){var e,a,l,s,d,c,p,h=this,u=h.dzone,_=h.sheets[h.activeSheet],f=h.down("[name=tbsch]"),b=h.down("[name=t_pivot]");switch(t){case"cmd_editmode":h.editmode=!h.editmode,b.setText(h.editmode?IRm$.r1("B_VIEWMODE"):IRm$.r1("B_EDITMODE")),h.updateTbarAll(),h.dzone.editmode=h.editmode,h.dzone.body_container.removeClass("igc_design_mode"),h.dzone.body_container.removeClass("igc_view_mode"),"python"!=(_&&_.sheetoption?_.sheetoption.model.viewmode:null)||(s=_.python$)&&s._do_edit.call(s,h.editmode),h.editmode?h.dzone.body_container.addClass("igc_design_mode"):h.dzone.body_container.addClass("igc_view_mode"),h.dzone.updateDisplay.call(h.dzone);break;case"cmd_sheetview":h.updateViewMode("grid");break;case"cmd_chartview":h.updateViewMode("chart");break;case"cmd_rview":"L1"==IG$.dlgLogin.logininfo.l3?IG$.ShowError("R Viewer is not allowed for license limitation. Please contact amplixbi.com for Enterprise license.",h):h.updateViewMode("r");break;case"cmd_pythonview":"L1"==IG$.dlgLogin.logininfo.l3?IG$.ShowError("Python Viewer is not allowed for license limitation. Please contact amplixbi.com for Enterprise license.",h):h.updateViewMode("python");break;case"cmd_analysis":"L1"==IG$.dlgLogin.logininfo.l3?IG$.ShowError("Analysis Viewer is not allowed for license limitation. Please contact amplixbi.com for Enterprise license.",h):h.updateViewMode("analysis");break;case"cmd_formview":"L1"==IG$.dlgLogin.logininfo.l3?IG$.ShowError("Form Viewer is not allowed for license limitation. Please contact amplixbi.com for Enterprise license.",h):h.updateViewMode("form");break;case"cmd_run":if(h.schedule_load)h.$init_block_run||IG$.confirmMessages(ig$.appname,IRm$.r1("L_C_SCH"),function(e){"yes"==e&&(f&&f.hide(),h.schedule_load=0,h.toolbarHandler.call(h,t,o,n,r,m))}),h.$init_block_run=!1;else{n&&h.updateFilterInfo(n),r&&h.updateDashboardFilterInfo(r),h.activeSheet=0,(_=h.sheets[h.activeSheet])&&(e=u.getBox.call(u,_.sheetoption?_.sheetoption.model.layoutinfo.docid:null),u.setActive.call(u,e)),h.clearAuxFilter(),h._params=null,h.refreshParameters();function g(e,t){var o,i,n,r,a,l,s,d,c,p,h=this,u=(h.dzone,h.dzone.docitems||{});if(h.$init_block_run)h.$init_block_run=!1;else{for(o=0;o<h.sheets.length;o++)(i=h.sheets[o]).executioncode=0,i.clearResult&&i.clearResult.call(i),i.beforeRun.call(i),!(n=i.sheetoption)||m&&1!=n.model.openload||"M_SYNC"==n.model.dataquerymode||(1==e||!(!t||1!=t[o]))&&(i.customLoad.call(i,!0,!0),i.olapset?(i.olapset.reportoption._dfilter=i._dfilter,p=i.olapset.reportoption.getCurrentPivot.call(i.olapset.reportoption),i.olapset.requestUpdateReport(p,"mode",i.sheetindex,i)):i.procRunReport.call(i));for(a in u)if("RPT_VIEW"==(r=(l=u[a]).lt.ubody).objtype){if(l.parent&&"inner"==l.parent.loc&&l.parent.node&&"TAB"==l.parent.node.objtype&&l.parent.node.active!=r.docid?r.visible=!1:r.visible=!0,1==r.visible&&r.view&&!r.view.validated){for(j in r.view._directFilter=r.view._directFilter||{},r.view.validateFilter=!0,c=r.view._directFilter)(-1<j.indexOf("report_")||-1<j.indexOf("filter_"))&&delete c[j];r.view.validateItems.call(r.view,1==e);continue}if(r.view)if(r.view.irpt)for(o=0;o<r.view.irpt.sheets.length;o++){for(j in 1,c=(d=(s=r.view.irpt.sheets[o]).sheetoption).model.aux_filter)(-1<j.indexOf("report_")||-1<j.indexOf("filter_"))&&delete c[j];1==r.visible&&1==e&&"M_SYNC"!=d.model.dataquerymode?(s.beforeRun.call(s),s.olapset?(p=s.olapset.reportoption.getCurrentPivot.call(s.olapset.reportoption),s.olapset.requestUpdateReport(p,"mode",o,s)):d&&s.procRunReport.call(s)):r.view.validateFilter=!0}else for(j in r.view._directFilter=r.view._directFilter||{},r.view.validateFilter=!0,c=r.view._directFilter)(-1<j.indexOf("report_")||-1<j.indexOf("filter_"))&&delete c[j]}}}var w,v=[],x=0,y={};for(i=0;i<u.items.length;i++)(a=u.items[i].view)&&a.initFilter&&(a.afterInit=null,v.push(a));0<v.length?(w=function(e,t){x++;var o,i,n,r,a=e.getFilter.call(e),l=this.sheets,s=e.sheetoption.model.filter_options,d=s.showbutton,c=s.edrill,p=s.drilltarget,h=new IG$.drilltarget(p),u=this.dzone.docitems||{},m="filter_"+this.dzone._dzid+"_"+e.sheetoption.docid,_=e.checkFilterValues.call(e,1,[]);if(!d)for(o=0;o<l.length;o++)n=u[(i=l[o].sheetoption).model.layoutinfo?i.model.layoutinfo.docid:null],r=h.isDrillTarget("sheet_"+o),!c&&h._e&&!r||(i.model.aux_filter[m]=a,n&&0==n.visible||(y[o]=void 0===y[o]?1:y[o],y[o]=_&&1==y[o]?1:0));e.afterInit=null,x==v.length&&g.call(this,2,y)},$.each(v,function(e,t){t.afterInit={p:h,f:w},t.initFilter.call(t,null,1)})):g.call(h,1),h.broadcastFilter()}break;case"cmd_save":h.reportoption&&((d=IG$.reportbase$.preSaveContent.call(h).uid)?(c=h.reportoption.getCurrentPivot.call(h.reportoption),h.saveContent(d,c,o)):h.saveAsContent(!1));break;case"cmd_saveas":IG$.reportbase$.preSaveContent.call(h),h.saveAsContent(!1);break;case"cmd_chartwizard":l=new IG$.chartwizard({reportoption:h.reportoption,sheetoption:h.reportoption.sheets[h.activeSheet],callback:new IG$.callBackObj(h,h.updateChartOpt)}),IG$.checkLogin(this,l);break;case"cmd_analwizard":l=new IG$.analeditor({reportoption:h.reportoption,sheetoption:h.reportoption.sheets[h.activeSheet],callback:new IG$.callBackObj(h,h.updateAnalOpt)}),IG$.checkLogin(this,l);break;case"cmd_r_summary":case"cmd_r_script":_.rstat$._ctrlwindow.call(_.rstat$,t);break;case"cmd_r_simage_png":h.exportToFile("PNG");break;case"cmd_r_simage_svg":h.exportToFile("SVG");break;case"cmd_r_wizard":l=new IG$.r_wizard_u({dc:_.rstat$.getDataColumns.call(_.rstat$),callback:new IG$.callBackObj(h,h.closeRWizard)}),IG$.checkLogin(h,l);break;case"cmd_export_excel":h.exportToFile("EXCEL");break;case"cmd_export_html":h.exportToFile("HTML");break;case"cmd_export_pdf":h.exportToFile("PDF");break;case"cmd_export_csv":_.downloadAllCSV.call(_);break;case"cmd_export_tmpl":h.exportToFile("TMPL");break;case"cmd_export_prt":h.exportToFile("PDF",!0);break;case"cmd_clipboard":h.clipboardCopy();break;case"cmd_export_office":var I,k,T,G=(L=h.reportoption)._mc.export_option,j=L._mc.name,R=new IG$._rpc$,C=o.name,E="TMPL_OC",S="TMPL";j=(j=j.replace(/\./g,"_")).replace(/ /g,""),0<(k=C.lastIndexOf("."))&&("docx"==(I=C.substring(k+1).toLowerCase())||"doc"==I?(E="TMPL_T",o.export_type?(T=o.export_type,j+="."+("field"==T?"fields.xml":T)):j+="."+I):"xlsx"!=I&&"xlsxm"!=I||(j+="."+I)),F=h.getExportData(G,"office"),R.init(h,{ack:"print",payload:{uid:h.uid,type:E,filename:j,utemplate:"T",tmpluid:o.uid,tmplname:o.name,tmpltype:o.type,outputformat:T},mbody:F,meta_type:"print_data"},h,h.rexportToFile,null,j),R.send();break;case"cmd_export_jasper":var L,F,G=(L=h.reportoption)._mc.export_option,j=L.name,R=new IG$._rpc$,S="TMPL";j=(j=j.replace(/\./g,"_")).replace(/ /g,""),j+="."+("excel"==o.toLowerCase()?"xls":o),F=h.getExportData(G,"jasper"),R.init(h,{ack:"print",payload:{uid:h.uid,type:S,filename:j,fonttype:G&&G.fonttype?G.fonttype:"",utemplate:"T",tmplpage:G.jasper&&G.jasper.jasper_template,tmpluid:G.jasper&&G.jasper.jasper_tmpl_uid,jasper_filetype:o},mbody:F,meta_type:"print_data"},h,h.rexportToFile,null,j),R.send();break;case"cmd_export_option":l=new IG$.exportWizard({reportoption:h.reportoption,sheetoption:_?_.sheetoption:null,dzone:h.dzone,callback:new IG$.callBackObj(h,h.updateExpOpt)}),IG$.checkLogin(this,l);break;case"cmd_filter":_&&o&&_.appendPrompt(o);break;case"cmd_style":_&&o&&_.setStyle(o);break;case"cmd_edit_data":l=new IG$.dateMetric({reportoption:h.reportoption,sheetoption:_.sheetoption,callback:new IG$.callBackObj(h,h.updateDataChange)}),IG$.checkLogin(this,l);break;case"cmd_prompt":var D=_.sheetoption,P=D.needPrompt.call(D);_.showPrompt.call(_,P,!0);break;case"cmd_view_sql":_&&(l=new IG$.dlgsqlview({reportoption:h.reportoption,sheetoption:_.sheetoption,uid:h.uid,activeSheet:h.activeSheet}),IG$.checkLogin(this,l));break;case"cmd_formview_edit":_&&_.editFormViewer();break;case"cmd_change_type":h.showReportOption();break;case"cmd_add_sheet":l=new IG$.sheetobj({dzone:h.dzone,sheets:h.sheets,reportoption:h.reportoption,isnewobject:!0,objtype:o||"SHEET",callback:new IG$.callBackObj(h,h.addSheet)}),IG$.checkLogin(this,l);break;case"cmd_edit_sql":l=new IG$.sqlcube_wizard({reportoption:h.reportoption,sheetoption:_.sheetoption,uid:h.uid,activeSheet:h.activeSheet,callback:new IG$.callBackObj(h,h.postEditSql)}),IG$.checkLogin(this,l);break;case"cmd_add_story":_&&_.appendStory();break;case"cmd_sort_option":l=new IG$.sortOptionDlg({reportoption:h.reportoption,sheetoption:_.sheetoption,callback:new IG$.callBackObj(h,h.updatePivotContent)}),IG$.checkLogin(this,l);break;case"cmd_statistics":l=new IG$.statistics({mresults:_.mresults}),IG$.checkLogin(h,l);break;case"cmd_layout":l=new IG$.dashboardLayoutTemplate({callback:new IG$.callBackObj(h,h.makeLayout,!1)}),IG$.checkLogin(h,l);break;case"cmd_loption":h.configDockNotify();break;case"cmd_schedule":h.uid&&(p=h.getRequests(),IG$.showScheduler(h,h.uid,h.itemtype,p,h.reportoption));break;case"cmd_favorites":h.uid&&((R=new IG$._rpc$).init(h,{ack:"helpcontent",payload:{uid:h.uid},mbody:{option:"addfavorites"}},h,h.rs_regFavorites,null,null),R.send());break;case"cmd_share":h.uid&&h.showShare()}},showShare:function(){var e=new IG$.dlg_share({uid:this.uid});IG$.checkLogin(this,e)},preSaveContent:function(){var e,t,o,i,n=this,r=n.dzone;if(n.editmode&&$.each(n.sheets,function(e,t){var o;"python"!=(t.sheetoption?t.sheetoption.model.viewmode:null)||(o=t.python$)&&o._do_edit.call(o,n.editmode)}),1<n.sheets.length)for(t=0;t<n.sheets.length;t++)(o=n.sheets[t]).sheetoption.model.layoutinfo={docid:o.renderBox,collapsed:o.collapsed,headerposition:o.headerPosition,region:o.region,width:o.getWidth(),height:o.getHeight()};for(t in n.reportoption._mc.uid=n.reportoption._mc.uid||n.uid,e=n.reportoption._mc.uid,n.reportoption._mc.layout=r.getLayout.call(r),n.reportoption._mc.ctrls={},r.ctrls)(i=r.ctrls[t]).model.docid=i.docid,i.model.objtype=i.objtype,n.reportoption.ctrls[t]&&i.objtype,n.reportoption._mc.ctrls[t]=i.model;return{uid:e}},showDetailView:function(e,t,o){var i,n,r,a,l,s,d={},c=e.sheetoption.model.aux_filter;for(i in c)n=(n=i.replace(/report/,"pageRPT")).replace(/filter/,"pageFLT"),r=t.uid+"_"+n,i=="report_"+e.sheetindex?d[r]=o:d[r]=c[i];d[t.uid+"_pageRPT_"+e.sheetindex]=o,t.showintab&&IG$.mainPanel?(l={auxfilter:d},(a=IG$.mainPanel).navigateApp.call(a,t.uid,t.type||"report",t.name,t.nodepath,!0,null,null,l)):(s=new IG$.detailDrillWin({viewinfo:t,auxfilter:d}),IG$.checkLogin(this,s))},saveAsContent:function(e){var t=new IG$.metaSelectDlg({mode:"newitem",initpath:this.nodepath});t.callback=new IG$.callBackObj(this,this.saveAsNew,e),IG$.checkLogin(this,t)},saveAsNew:function(e,t){var o=this,i=o.reportoption,n=i.getCurrentPivot.call(i),r=new IG$._rpc$;r.init(o,{ack:"writecontent",payload:{address:e.nodepath+"/"+e.name,name:e.name,type:o.itemtype?o.itemtype:"Report",pid:e.uid},mbody:n,meta_type:"report"},o,o._rs_procMakeItem,o.rs_procMakeItem,[e.name,t,e.nodepath,e.uid,n]),r.showerror=!1,r.send()},rs_procMakeItem:function(e,t){var o=this,i=t[0],n=t[1],r=t[2],a=t[3],l=t[4];"0x12e0"==IG$.getErrorCode(e)?IG$.confirmMessages(ig$.appname,i+" already exist on the server. Would you overwrite existing item with this copy?",function(e){var t;"yes"==e&&((t=new IG$._rpc$).init(o,{ack:"writecontent",payload:{address:r+"/"+i,name:i,type:o.itemtype||"Report",pid:a,overwrite:"T"},mbody:l,meta_type:"report"},o,o._rs_procMakeItem,null,[i,n,r]),t.send())},o,o):IG$.ShowErrorMessage(xdoc,o)},_rs_procMakeItem:function(e,t){var o,i=this,n=(t[0],t[1]),r=i.reportoption,a=e.name;if(1==n)return i.ignoreclose=!0,void i.close();for(i.contentchanged=!1,i.uid=e.uid,o=0;o<i.sheets.length;o++)i.sheets[o].olapset&&(i.sheets[o].olapset.uid=i.uid);r._mc.uid=i.uid,r._mc.name=a,i.id=e.type.toLowerCase()+"_"+e.uid,i.setTitle(a),i.down("[name=tbreportname]").setText(a)},updatePivotContent:function(){this.toolbarHandler("cmd_run")},clearAuxFilter:function(){var e,t,o=this.sheets;if(o&&0<o.length)for(e=0;e<o.length;e++)for(fname in(t=o[e]).clearAuxFilter(),auxfilter=t.sheetoption.model.aux_filter,auxfilter)(-1<fname.indexOf("report_")||-1<fname.indexOf("filter_"))&&delete auxfilter[fname]},updateRptResCnt:function(e){var t,o=this,i=o.activeSheet,n=-1<i?o.sheets[i]:null,r=o.down("[name=tbrescount]"),a=o.down("[name=tbcache]"),l="",s=0,d="",c=!1,p=o.sheets;if(n&&n.mresults&&n.mresults.results&&0<n.mresults.results.length&&(l="(Row: "+n.mresults.results[0].rowcnt+", Cols: "+n.mresults.results[0].colcnt+")",s=n.mresults.results[0].cache,d=n.mresults.results[0].u_cache_time),e){for(t=0;t<p.length;t++)if(1==p[t].executioncode){c=!0;break}c||o.doDbrdExit.call(o)}r&&r.setText(l),a&&(a.setVisible(s),a.setTooltip("DATA ON : "+d+"\nClick to refresh data!"))},refDS:function(){var t,e,o=this,i=o.down("[name=tbcubepath]"),n=o.sheets[o.activeSheet],r=o.reportoption.cube_objects,a=n?n.sheetoption.model.cube_object:null,l=new IG$._rpc$;a?(i.setText(a.name),i._cobj=a,i.show()):r.length?(t=IG$._dsmap=IG$._dsmap||{},e=r[0].uid,t[e]?(i.setText(t[e].name),i._cobj=t[e],i.show(),r[0].name=t[e].name,r[0].nodepath=t[e].nodepath):(i.setText(""),i._cobj=null,i.hide(),l.init(o,{ack:"helpcontent",payload:{uid:e},mbody:{option:"translate"}},o,function(e){e&&e.length&&(t[e[0].uid]=e[0],i.setText(e[0].name),i._cobj=e[0],i.show(),r[0].name=e[0].name,r[0].nodepath=e[0].nodepath)},!1),l.send())):(i.setText(""),i._cobj=null,i.hide())},appendBox:function(e){var t,o=this.dzone,i=o._root,n={objtype:"SHEET",docid:null,_direction:0,parent:i,width:100,height:100};return i.children.push(n),t=o.appendWidgetBox.call(o,null,{width:n.width?parseInt(n.width):null,height:n.height?parseInt(n.height):null,draggable:o.draggable},e||"SHEET"),n.docid=t.docid,t.objtype=n.objtype,n.lt={pos:{x:0,y:0,w:0,h:0},ubody:t},t._pc=n,t.validateProperty.call(t),t},updateLayout:function(e){var t,o,i,n,r=this,a=r.sheets,l=r.borderpanel,s=($(l.body),r.dzone);s._root;if(e)for(t=0;t<r.sheets.length;t++)i=r.reportoption.sheets[t],a[t].sheetoption=i,a[t].applyOptions.call(a[t]);else for(t=0;t<r.reportoption.sheets.length;t++)i=r.reportoption.sheets[t],a.length>t?(o=a[t],n=s.getBox.call(s,i.model.layoutinfo.docid)):(n=r.appendBox(),i.model.layoutinfo.docid=n.docid,(o=r.createSheet(t,r.sheetoption,n)).reportoption=r.reportoption,n.view=o,n.objtype="SHEET",n.validateProperty.call(n),n.setReportOption.call(n,i),r.sheets.push(o)),n&&(n.setTitle.call(n,i.name||""),n.showTitle.call(n,!i.hidetitle)),a[t].sheetoption=i,a[t].applyOptions.call(a[t])},updateExpOpt:function(){var i=(l=this).reportoption._mc.export_option||{},o=i?i.jasper:null,n=l.down("[name=jasper]"),r=l.down("[name=office]"),e=!1,a=0;if(l._tbar&&($.each(["xls","pdf","html","csv"],function(e,t){var o=l.down("[name=ig_r_"+t+"]");o&&o.setVisible(i["u_"+("xls"==t?"excel":t)]&&!ig$.features["ig_r_"+t])}),i.u_office&&i.otmpl&&i.otmpl.length?(r.show(),r.menu.removeAll(),$.each(i.otmpl,function(e,t){r.menu.add({xtype:"menuitem",text:t.description||t.name,handler:function(){l.toolbarHandler.call(l,"cmd_export_office",t)}})})):r.hide(),o&&o.jasper_template&&i.u_jasper&&(e=!0,n.menu.removeAll(),l.dft_jasp_exp=null,$.each(["pdf","rtf","ppt","csv","excel","xlsx","docx","html","xml"],function(e,t){"T"==o[t+"_output"]&&(0==a&&(l.dft_jasp_exp=t),n.menu.add({xtype:"menuitem",text:o[t+"_label"]||t,handler:function(){l.toolbarHandler.call(l,"cmd_export_jasper",t)}}),a++)})),l.down("[name=jasper]").setVisible(e&&i.u_jasper&&!ig$.features.ig_r_jasper),window.IExport)){var l,t,s,d=!1,c=(l=this)._tbar;for(t in window.IExport)window.IExport[t].toolbar&&(s=c.down("[name="+window.IExport[t].name+"]"),d=window.IExport[t].toolbarShow(l),s.setVisible(d))}},formulaHandler:function(e,i,t){var o,n,r,a,l,s,d,c=this,p=e.sheetoption,h=p.model.sheet_formula,u=0;if(i){if(n=[],"cl_fm"==t.toLowerCase())for(o=h.length-1;0<=o;o--)h[o].baseuid==i.uid&&(h.splice(o,1),u=1);else if("r_fmt"==t.toLowerCase())d=new IG$.dlgFormulaSelector({pR:c,pS:e,pF:h,pI:i,callback:new IG$.callBackObj(c,function(e){for(var t=h,o=t.length-1;0<=o;o--)t[o].baseuid==i.uid&&t.splice(o,1);for(o=0;o<e.length;o++)t.push(e[o]);c.contentchanged=!0,c.updatePivotCnt.call(c,c.activeSheet)})}),IG$.checkLogin(c,d);else{for(o=0;o<h.length;o++)if(h[o].baseuid==i.uid){if(h[o].expression==t.toUpperCase())return;n.push(h[o])}0<n.length?r=n[0]:(r={},h.push(r)),u=1,r.baseuid=i.uid,r.basename=i.name,r.direction="vertical",r.formatstring="",r.stylename=null,r.type=null,r.separatecolumn=!0,r.subtotalbase=null,r.usecolumnformat=!0,r.showtoprow=!1,r.groupresults=!1,r.fid="formula_"+p.si,p.si++,(s=IG$.formulas[t.toLowerCase()])&&(a=s.title,l=s.expr,void 0!==s.usecolumnformat&&(r.usecolumnformat=s.usecolumnformat),void 0!==s.formatstring&&(r.formatstring=s.formatstring),r.title=a,r.expression=l)}u&&(c.contentchanged=!0,c.updatePivotCnt(c.activeSheet))}},getRequests:function(){for(var e,t,o,i,n,r=[],a=this.dzone,l=0;l<a.items.length;l++)(e=a.items[l].view)&&e.clearResult&&(n="rolap"!=(i=e.reportoption).reportmode&&"sql"==i.reportmode?"sqlrun":"run",o={uid:this.uid,option:n,active:""+e.sheetindex,pivotresult:"T"},t=t||e.reportoption.getCurrentPivot(),r.push({ack:"olapservice",payload:o,mbody:t,jobkey:""+e.sheetindex,meta_type:"report"}));return r},createCtrl:function(e,t){var o,i,n,r=this,a=r.dzone,l=a._root;switch(l.children=l.children||[],t||("FILTER"==(i={objtype:e.objtype,docid:null,_direction:0,parent:l,width:l.width?.4*l.width:100,height:l.height?.4*l.height:100}).objtype&&1==l.children.length&&"SHEET"==l.children[0].objtype?(n={objtype:"_dc",docid:null,iscontainer:!0,_direction:1,children:[],width:0,height:0,parent:(o=l.children[0]).parent},a.processLayoutWidget(n,!0,null,a.ctrls),l.children.splice(0,1,n),(i.parent=n).children.push(i),(o.parent=n).children.push(o)):l.children.push(i),t=a.appendWidgetBox.call(a,null,{width:i.width?parseInt(i.width):null,height:i.height?parseInt(i.height):null,draggable:a.draggable},e.objtype),i.docid=t.docid,t.objtype=i.objtype,i.lt={pos:{x:0,y:0,w:0,h:0},ubody:t},t._pc=i,t.validateProperty.call(t)),e.docid=t.docid,e.objtype){case"NAVI":o=new IG$.rfNavi(t.box_container,e,r.reportoption,r);break;case"FILTER":(o=new IG$.dynFilterView(t.box_container,e,r)).callback=new IG$.callBackObj(r,r.onFilterUpdate);break;case"TEXT":o=new IG$.rfText(t.box_container,e);break;case"PANEL":o=new IG$.rfBlankPanel(t.box_container,e);break;case"TAB":o=new IG$.rfTabPanel(t.box_container,e,r.dzone);break;case"RPT_VIEW":o=new IG$.rfReportViewer(t.box_container,e,r)}return t.view=o,t.objtype=e.objtype,t.validateProperty.call(t),t.setReportOption.call(t,e),"FILTER"==e.objtype&&o.init_f&&setTimeout(function(){o.init_f.call(o)},100),t},_boxresized:function(e,t){for(var o,i,n,r,a,l,s,d=this.dzone.items,c=e.sheetoption,p=c.model.layoutinfo?c.model.layoutinfo.docid:null,h=0;h<d.length;h++)if(d[h].docid==p){o=d[h];break}o&&(r=o.box.offset(),l=(a=o.box_container.offset()).left-r.left,s=a.top-r.top,i=IG$.j$ext._w(o.box_container),n=IG$.j$ext._h(o.box_container),i=Math.max(i,t.cw),n=Math.max(n,t.ch),o.fixedW=t.tw>i,o.fixedH=t.th>n,o.width=o.fixedW?t.tw+l:o.width,o.height=o.fixedH?t.th+s:o.height,this.dzone.updateDisplay.call(this.dzone,!0))},refreshParameters:function(e){var t,o,i,n,r=e?e.mresults:null,a=(this.dzone,this.dzone.docitems),l=this._params=this._params||{};if(r&&r.results)for(o=0;o<r.results.length;o++)if(t=r.results[o]._params)for(i in t)l[i]=t[i];for(i in a)(n=a[i].lt.ubody).view,n._param=l,n.applyFlt.call(n)},runSyncRes:function(i){var e=this.sheets,n=i.mresults;n&&$.each(e,function(e,t){var o;t!=i&&(o=t.sheetoption)&&o.model&&"M_SYNC"==o.model.dataquerymode&&o.model.sync_target&&o.model.sync_target==i.renderBox&&o.model.layoutinfo.docid!=i.renderBox&&setTimeout(function(){t.drawResults.call(t,null,n)},10)})},updateRptMeasureGroup:function(e,t,o){var i,n=this.dzone,r=n.getBox.call(n,e.renderBox);t&&t.model&&t.model.measuregroup&&0<o.results.length&&o.results[0].measures&&1<o.results[0].measures.length?(i=r.showMeasureSelector(!0,o.results[0].measures),o._measure_seq=i,o._update_measure_seq(i)):r.showMeasureSelector(!1)},createSheet:function(e,t,o,i){var n,r=this,a=$("<div class='igc-sheet-cntbox'></div>").appendTo(o.box_container),l=$("<div></div>").appendTo(o.box_container),s=o.box_title,d=IG$.j$ext._w(o.box_container),c=IG$.j$ext._h(o.box_container);return l.css({position:"absolute",top:0,left:0,bottom:0,right:0,width:"100%",height:"100%",overflow:"hidden"}).hide(),n=new IG$.p$SheetView({width:d||(t&&t.model.layoutinfo?t.model.layoutinfo.width||IG$.j$ext._w(a):null),height:c||(t&&t.model.layoutinfo?t.model.layoutinfo.height||IG$.j$ext._h(a):null),renderTo:a[0],rendermask:l,renderBox:o.docid,reportoption:r.reportoption,sheetoption:t,uid:r.uid,sheetindex:e,region:0==e?"center":(t?t.region:null)||"east",collapsible:!1,minSize:100,reportpanel:r,floatable:!1,bindheaderevent:!1,rst:i,removeObj:function(){this.removeAll(),s.unbind("click")},listeners:{drillreport:function(e){r.doDrillReport.call(r,e)},itemclick:function(e,t){return r.setActSheet.call(r,o),0==e.activeView?r.doCellClick.call(r,e,t):!0!==e.sheetoption.isdrillreport&&r.doDrillReport.call(r,e),!1},itemdblclick:function(e,t){r.doDrillReport.call(r,e);return r.setActSheet.call(r,o),!1},menu:function(e,t){r.procMenu.call(r,e,t)},pivotchanged:function(e){r.contentchanged=!0},cresized:function(e,t){r._boxresized.call(r,e,t)},result_loaded:function(e){e.executioncode=0,r.refreshParameters.call(r,e),r.updateRptResCnt.call(r,!0),e.sheetoption&&e.sheetoption.model&&"M_SYNC"!=e.sheetoption.model.dataquerymode&&r.runSyncRes(e)},before_result_load:function(e,t,o){r.updateRptMeasureGroup(e,t,o)},export_sheet:function(e,t){r.exportToFile.call(r,t.filetype.toUpperCase(),!1,e)},destroy:function(e,t){e.__dx=!0},afterrender:function(e){o.view=e,$(e.body.dom).bind("click",function(){r.setActSheet.call(r,o)}),setTimeout(function(){o.box_container.trigger("i_ready")},10)},_ld_:function(e){r.dzone.customLoad.call(r.dzone,!0,e)},_ldx_:function(e){r.dzone.setLoading.call(r.dzone,!1,e)},scope:this}}),s.bind("click",function(){r.setActSheet.call(r,o)}),n},applyOption:function(e){var t,o,i,n=e.auxfilter,r=!1;if(n){for(o=0;o<this.reportoption.sheets.length;o++){for(t in(i=this.reportoption.sheets[o]).model.aux_filter)delete i.model.aux_filter[t];for(t in n)i.model.aux_filter[t]=n[t]}r=!0}r&&this.toolbarHandler("cmd_run")},updateFormula:function(e){var t,o=e,i=(o.sheetindex,this.down("[name=tbresult]")),n=o.getSelection.call(o),r="",a=0;if(n&&1<n.length){for(t=0;t<n.length;t++)3==n[t].position&&(a+=parseFloat(n[t].code));IG$.isNumber(a)&&(r="SUM: "+IG$.NumberFormat("0,000.00",a))}i&&i.setText(r)},onFilterUpdate:function(t,e){var o,i,n,r,a,l,s,d,c,p,h,u=this,m=u.sheets,_="filter_"+u.dzone._dzid+"_"+t.sheetoption.docid,f=u.dzone.docitems||{},b=t.sheetoption.model.filter_options,g=b.drilltarget,w=b.edrill,v=new IG$.drilltarget(g),x=b.f_b_clear,y=t._fr,$=(t.__dloaded,u.down("[name=tbsch]"));if(u.schedule_load)IG$.confirmMessages(ig$.appname,IRm$.r1("L_C_SCH"),function(e){"yes"==e&&($&&$.hide(),u.schedule_load=0,u.onFilterUpdate.call(u,t))});else{for(u._params=null,u.refreshParameters(),l=t.getFilter.call(t),a=0;a<m.length;a++)if(s=f[(i=(o=m[a]).sheetoption).model.layoutinfo?i.model.layoutinfo.docid:null],h=v.isDrillTarget("sheet_"+a),w||!v._e||h&&(!h||h.isdrill)){if(x)for(fname in c=i.model.aux_filter)(-1<fname.indexOf("report_")||-1<fname.indexOf("filter_"))&&delete c[fname];i.model.aux_filter[_]=l,s&&s.lt&&s.lt.ubody&&!s.lt.ubody.visible||y&&i&&!i.model.openload?o.btabrun=!0:(delete o.btabrun,o.olapset?(o.promptpanel&&o.promptpanel.clear(),r=o.olapset.reportoption.getCurrentPivot.call(o.olapset.reportoption),e||o.olapset.requestUpdateReport(r,"mode",a,o)):i&&(e||o.procRunReport.call(o)))}else y&&i&&i.model.openload&&(delete o.btabrun,o.olapset?(r=o.olapset.reportoption.getCurrentPivot.call(o.olapset.reportoption),e||o.olapset.requestUpdateReport(r,"mode",a,o)):i&&(e||o.procRunReport.call(o)));for(d in f)if(p=(s=f[d].lt.ubody).view,"RPT_VIEW"==s.objtype&&p&&p.irpt){for(a=0;a<p.irpt.sheets.length;a++)if(n=(o=p.irpt.sheets[a]).reportoption,i=o.sheetoption,h=n?v.isDrillTarget(n.uid+"_sheet_"+a):null,w||!v._e||h&&(!h||h.isdrill)){if(x)for(fname in c=i.model.aux_filter)(-1<fname.indexOf("report_")||-1<fname.indexOf("filter_"))&&delete c[fname];if(i.model.aux_filter[_]=l,s.visible){if(p.validateFilter=!1,y&&i&&!i.model.openload)continue;o.olapset?(r=o.olapset.reportoption.getCurrentPivot.call(o.olapset.reportoption),e||o.olapset.requestUpdateReport(r,"mode",a,o)):i&&(e||o.procRunReport.call(o))}else p.validateFilter=!0}else y&&i&&i.model.openload&&(delete o.btabrun,o.olapset?(r=o.olapset.reportoption.getCurrentPivot.call(o.olapset.reportoption),e||o.olapset.requestUpdateReport(r,"mode",a,o)):i&&(e||o.procRunReport.call(o)));s.visible&&(p.f_run=!1)}u.broadcastFilter()}},updatePivotCnt:function(e){var t,o,i=this.sheets[e];i.setLoading.call(i,!0,!0),t=i.sheetoption,i.olapset?(o=i.olapset.reportoption.getCurrentPivot.call(i.olapset.reportoption),i.olapset.requestUpdateReport(o,"mode",e,i)):t&&i.procRunReport.call(i),this.broadcastFilter()},rs_showPrompt:function(){this.toolbarHandler("cmd_run")},updateFilterChange:function(){this.updatePromptTbar(!0),this.toolbarHandler("cmd_run")},updateDataChange:function(){this.toolbarHandler("cmd_run")},showPivotConfig:function(e){var t,o,i=this,n=i.dzone,r=e?n.getBox.call(n,e):null,a=r?r.view:null,l=(i.sheets,r?r.objtype:null);a&&("FILTER"==l||(t=a.sheetindex),o=new IG$.pivot_dlg({sheetindex:t,reportoption:i.reportoption,sheet:i.sheets[t],objtype:l,width:"FILTER"==l?210:820,rptptr:i}),IG$.checkLogin(i,o))},clipboardCopy:function(){var e=this.sheets[this.activeSheet],t=e&&e.grid$?e.grid$._gridview.mresult:null;t&&new IG$.c$ClpBrd({sheetview:e,mresult:t}).show()},showReportOption:function(e,i,t){var o,n,r,a=this;new IG$._rpc$;a.reportoption||(r=1,o=a.itemtype||"Report",n=a.makeTempReportMeta({type:o}),a.reportoption=new IG$.clReports(n));var l=new IG$._IB6({modal:!0,cubeuid:a.cubeuid,reportoption:a.reportoption,sheetoption:t,callback:new IG$.callBackObj(a,function(e,t){var o=this;r?(!0!==t&&(n.content.cube_objects=e.cubeobj?[e.cubeobj]:null),o.rs_loadContent(n,!0,!0===t),o.continueReportOption(e),o.load_cube=null,o.cubeuid=null):!0!==t&&(o.continueReportOption(e),i&&i.execute(e.cubeobj))})});IG$.checkLogin(a,l)},updateAnalOpt:function(){var e=this.sheets[this.activeSheet];e.mresults;e._invalAnal=!0,e.updateAnalUI.call(panel,panel)},updateChartOpt:function(){var e,t=this.sheets[this.activeSheet],o=t.mresults;if(o&&o.results)for(e=0;e<o.results.length;e++)o.results[e].__bands=null;t._invalChart=!0,t.updateChartUI.call(t,t)},afterinit:function(e){var n=this,t=n._par;n.dzone=new IG$.boDockZone(e,n),n.dzone.cmode=n.cmode||0,t&&(t._dzseq=t._dzseq||0),n._dzid=t?t._dzid+"_"+t._dzseq++:"root",n.dzone._dzid=n._dzid,n.dzone.closeDockNoti={f:n.closeDockNoti,s:n},n.dzone.box.bind({config_doc:function(e,t,o){n.configDockNotify.call(n,t)},config_pivot:function(e,t,o){n.configDockPivot.call(n,t,o)}}),IG$.__ep&&n.dzone.box.bind("boxresized",function(){n.getWidth(),n.getHeight();var e=borderpanel.getWidth(),t=borderpanel.getHeight(),o=(n.dzone.box.offset(),IG$.j$ext._w(n.dzone.box)),i=IG$.j$ext._h(n.dzone.box)}),n.init_f(1==n.vmode||null)},init_f:function(e){var t,o=this,i=o.uid;o.initTbar(),i&&0<i.length?(o.issheet="Sheet"==o.itemtype,o.activeSheet=0,o.isnewitem||(o.pivot?setTimeout(function(){var e=IG$.loadXML(o.pivot);o.pivot=null,o.rs_loadContent(e)},10):(o.writable&&IG$.checkLock(o,function(e){"unlock"!=e&&(o.writable=!1,o.down("[name=t_save]").hide())}),(t=new IG$._rpc$).init(o,{ack:"content",payload:{uid:i,revision:o.revision},mbody:{option:o.hiddentoolbar?"":"diagnostics"}},o,o.rs_loadContent,!1,e),t.send()))):o.__jid&&o.__sid?o._doSchJob.call(o,o.__sid,o.__jid):(o.doDbrdExit.call(o),1!=o.vmode&&(o.cubeuid?((t=new IG$._rpc$).init(o,{ack:"helpcontent",payload:{uid:o.cubeuid},mbody:{option:"translate"}},o,function(e){var t;e&&e.length&&(itemtype=o.itemtype||"Report",t=o.makeTempReportMeta({type:itemtype}),o.reportoption=new IG$.clReports(t),t.content.cube_objects=[e[0]],o.rs_loadContent(t,!0),o.continueReportOption({cubeobj:e[0]}),o.load_cube=null,o.cubeuid=null)},!1),t.send()):setTimeout(function(){o.showReportOption.call(o,o.load_cube)},400)))},doDbrdExit:function(e){var t=this.execallback;t&&t.execute(e)},rs_loadContent:function(e,t,o){var i,n,r,a,l,s,d=this,c=d.auxfilter,p={};if(e&&"Export"==e.type){if(a=IG$.XGetNode(xdoc,"/smsg/item/export/report_content/reportxml"),d.reportoption=new IG$.clReports(a),a=IG$.XGetNode(xdoc,"/smsg/item/export/sheets"))for(l=IG$.XGetChildNodes(a),i=0;i<l.length;i++)(s=IG$.XGetNode(l[i],"gridresult"))&&(p[IG$.XGetAttr(l[i],"docid")]=new IG$.clResults(null,s));d.applRptCnt(p),d.fireEvent("_lc0",d)}else{if(d.reportoption=new IG$.clReports(e),d.applRptCnt(null,t,o),c)for(i=0;i<d.reportoption.sheets.length;i++)for(n in r=d.reportoption.sheets[i],c)r.model.aux_filter[n]=c[n];d.writable&&(d.dzone.editmode=d.editmode,d.dzone.updateDisplay.call(d.dzone)),d.fireEvent("_lc0",d)}},clearResult:function(){},setActSheet:function(e,t){var o,i,n,r,a=this,l=e.view.sheetindex,s=a.down("[name=tbreportname]"),d=a.dzone;if(t||l!=a.activeSheet){if(r=a.activeSheet="Sheet"==a.itemtype?0:l,n=(o=a.sheets[r])&&o.sheetoption?o.sheetoption.model.viewmode:null,a._tbar){var c=a.down("[name=t_grid]"),p=a.down("[name=t_chart]"),h=a.down("[name=t_r]"),u=a.down("[name=t_python]"),m=a.down("[name=t_anal]"),_=a.down("[name=t_fview]"),f=0;switch(n){case"chart":f=1;break;case"r":f=2;break;case"python":f=3;break;case"analysis":f=4;break;case"form":f=5}c.toggle(0==f,0==f),p.toggle(1==f,1==f),h.toggle(2==f,2==f),u.toggle(3==f,3==f),m.toggle(4==f),_.toggle(5==f),1==f&&a.showChartToolbar(),1!=f&&a.hideChartToolbar(),a.setRToolbar(2==f),a.updateChartToolbar(1!=f),a.updateRToolbar(2!=f),a.setPythonToolbar(3==f),a.setFormViewToolbar(5==f);var b=r.python$;b&&b._do_edit.call(b,a.editmode)}(i=d.getBox.call(d,o.sheetoption.model.layoutinfo.docid)).setTitle.call(i,o.sheetoption.name||""),d.setActive.call(d,i),a.updatePromptTbar(!1),s&&(a.reportoption._mc.locale_name?s.setText(a.reportoption._mc.locale_name+" ("+a.reportoption._mc.name+")"):s.setText(a.reportoption._mc.name),a.refDS(),a.updateTbar()),a.updateRptResCnt(!1)}},applRptCnt:function(e,t,o){var i,n,r,a,l,s,d,c,p,h,u,m,_,f,b=this,g=b.down("[name=tbreportname]"),w=b.dzone,v=!t,x=b.issheet,y=b.reportoption,I=y.sheets,k=y._mc;if(b.updateExpOpt(),w.clearAll.call(w),b.sheets=[],r=y.layoutinfo,b.ctrls=y.ctrls,b.updateTbarAll(),g&&g.setText(y.name||""),x||w.makeLayout.call(w,b,r,b.ctrls),0<I.length&&(u=(n=I[0]).model.layoutinfo,!x||0==b.sheetindex)){if(!(l=u.docid))for(p=w.items,i=0;i<p.length;i++)if("SHEET"==(h=p[i]).objtype&&!h.view){l=u.docid=h.docid;break}null!=(f=w.getBox.call(w,l))||l||(f=b.appendBox(),l=u.docid=f.docid),f&&(f.setTitle.call(f,n.name||""),w.setActive.call(w,f),s=e?e[l]:null,a=b.createSheet(0,n,f,s),f.view=a,f.objtype="SHEET",f.validateProperty.call(f),f.setReportOption.call(f,n),b.sheets.push(a),(c=b.sheets[0]).sheetindex=0,c.sheetoption=n,c.reportoption=y,c.applyOptions.call(c))}if(m=w.items,v&&m&&$.each(m,function(e,t){"FILTER"==t.objtype&&(v=!1)}),k.b_sc_load&&(v=!1,w.cmode=1,b.schedule_load=1),1<I.length){for(i=I.length-1;0<=i;i--)l=(u=(_=I[i]).model.layoutinfo).docid,(f=w.getBox.call(w,l))||(x?b.sheetindex==i&&(f=b.appendBox(_.objtype),u.docid=f.docid):(I.splice(i,1),b.sheets.splice(i,i)));for(i=1;i<I.length;i++)u=(n=I[i]).model.layoutinfo,x&&b.sheetindex!=i||(l=u.docid,(f=w.getBox.call(w,l))&&(s=e?e[l]:null,a=b.createSheet(i,n,f,s),f.view=a,f.objtype="SHEET",f.setReportOption.call(f,n),f.validateProperty.call(f),b.sheets.push(a),n.model.openload&&(a.sheetindex=i,a.sheetoption=n,a.reportoption=y,a.applyOptions.call(a),v=!0),f.setTitle.call(f,n.name||"")))}IG$.__ep||0!=k.cube_objects.length||!0===o||1!=b.vmode&&setTimeout(function(){b.showReportOption.call(b)},200),IG$.__ep||((d=0<I.length?w.getBox.call(w,I[0].model.layoutinfo.docid):null)&&b.setActSheet(d,!0),b.broadcastFilter(),b.updatePromptTbar(!0)),b.updateLayout(!0),v||b.doDbrdExit(),b.__loaded=!0,b._dboardCallback&&b._dboardCallback.execute(),"function"==typeof window.callPhantom&&window.callPhantom({_proc:"S"}),k.b_sc_load&&setTimeout(function(){var e=new IG$._rpc$;e.init(b,{ack:"schedule",payload:{uid:b.uid,action:"latestjob"},mbody:{}},b,function(e){e&&e.sid&&e.jid&&this._doSchJob.call(this,e.sid,e.jid)},null),e.send()},10)},rgetDbPassword:function(e,t){var o=this.sheets;IG$.dbp[t]=e,o&&0<o.length&&o[0].procRunReport.call(o[0])},regbody:function(e,t){this.__dreg=this.__dreg||{},this.__dreg[e]={b_init:!1,docid:e,fobj:t}},clearCache:function(){var e,t,o=this,i=new IG$._rpc$,n=[],r=o.dzone;for(o.uid&&n.push({uid:o.uid}),t=0;t<r.items.length;t++)r.items[t],(e=r.items[t].view)&&e.sheetoption&&(vopt=e.sheetoption,"FILTER"!=vopt.objtype&&"RPT_VIEW"!=vopt.objtype||e.getCacheItems(n));n.length&&(i.init(o,{ack:"helpcontent",payload:n,mbody:{option:"clear_cache"}},o,function(e){var t=this.down("[name=tbcache]");t&&t.hide()}),i.send())},prepGridStyles:function(e){var t,o,i,n,r,a=this.sheetoption.model,l=a.sheet_formula||[],s=a.rows,d=a.cols,c=a.measures,p={},h=[],u={};for(name_map={},o=a.styles=a.styles||[],t=0;t<o.length;t++)r=(n=o[t]).uid+"_"+(n.rptseq||"0")+(n.fid?"_"+n.fid:""),p[r]=n;if("M_REPORT"==e)for(h.push({items:s,m:0,rptseq:0}),t=0;t<a.report_items.length;t++)i=a.report_items[t],h.push({items:i.cols,m:0,rptseq:t}),h.push({items:i.measures,m:1,rptseq:t});else h=[{items:s,m:0,rptseq:0},{items:d,m:0,rptseq:0},{items:c,m:1,rptseq:0},{items:l||[],m:2,rptseq:0}];for($.each(h,function(e,o){var t=o.items;$.each(t,function(e,t){o.m;2!=o.m&&(name_map[t.uid]=t.name)})}),$.each(h,function(e,n){var t=n.items;$.each(t,function(e,t){var o,i;n.m;2==n.m?(o=t.baseuid+"_"+n.rptseq+"_"+t.fid,name_map[t.baseuid]&&(t.basename=name_map[t.baseuid])):o=t.uid+"_"+n.rptseq,u[o]=t,(i=p[o])&&(2==n.m?i.name=t.basename+" ("+(t.title||"")+")":i.name=t.name,i.rptseq=n.rptseq)})}),t=o.length-1;0<=t;t--)r=(n=o[t]).uid+"_"+(n.rptseq||"0")+(n.fid?"_"+n.fid:""),u[r]||o.splice(t,1)}}),IG$._doSchJob=function(b,g){var e=new IG$._rpc$;g&&(e.init(this,{ack:"schedule",payload:{sid:b,jid:g,action:"jobresult"},mbody:{}},this,function(e){var t,o,i,n,r,a,l,s,d,c,p,h,u=this.down("[name=tbsch]"),m=e&&e.length?e:null,_=[],f=this.sheets;if(m){for(t=0;t<m.length;t++)n=(h=m[t]).jobseq,r=h.key,l=h.crdate,s=h.srdate,a=r?parseInt(r):n,(i=h.result&&h.result&&h.result.result?h.result.result:null)&&(p={jobseq:a,crdate:l,srdate:s,crdate_fmt:d,srdate_fmt:c,content:i},_.push(p));if(_.length){for(t=0;t<_.length;t++)jobres=_[t],n=jobres.jobseq,l=jobres.crdate,d=jobres.crdate_fmt,s=jobres.srdate,c=jobres.srdate_fmt,jobres.content&&((o=new IG$.clResults(jobres.content)).srdate=s,o.crdate=l,o.srdate_fmt=c,o.crdate_fmt=d,o._job={sid:b,jid:g,jobid:o.jobid},f[n]&&f[n].procLoadResult.call(f[n],o));u&&(u.show(),u.setText(c||"-"))}}}),e.send())};
IG$.ReportView=$s.extend(IG$.v$pnl,{uid:null,layout:"fit",closable:!0,sheets:[],ctrls:{},activeSheet:0,iconCls:"icon-report",_tbarChart:[],_tbarR:[],contentchanged:!1,isnewitem:!1,ignoreclose:!1,_cbPath:{},_tbaritems:["t_save","t_save_as","t_run","t_exp","t_tool","t_grid","t_chart","t_anal","t_r","t_python","t_fview","toolbarprompt","t_sql_view","t_sheet","t_pivot","t_chart_wizard","t_chart_type","t_r_rptview","t_r_story","t_r_option","t_r_summary","t_r_script","t_r_wizard","t_anal_menu","t_fview_option","t_share","t_schedule"],initComponent:function(){var e,t,o,r=this;"dashboard"==r._viewmode&&(r.hiddenstatusbar=!0,r.hiddentoolbar=!0),IG$.__ep_m<1&&(e={xtype:"toolbar",name:"_1",hidden:r.hiddenstatusbar||!1,items:[{xtype:"button",text:"",name:"tbreportname",tooltipType:"title",tooltip:"Search in navigation",handler:function(){var e=r.reportoption,t=IG$.m_explorer;e&&e._mc.nodepath&&IG$.mainPanel&&t&&("tree"!=t.vmode&&IG$.changeApp(1),t.navigateTree.call(t,{name:e._mc.name,nodepath:e._mc.nodepath,uid:e.uid}))},scope:r},"-",{xtype:"button",text:"",name:"tbcubepath",tooltipType:"title",hidden:!0,handler:function(){var e=this.down("[name=tbcubepath]"),t=(IG$.mainPanel,IG$.m_explorer),o=e._cobj;o&&o.uid&&o.type&&("tree"!=t.vmode&&IG$.changeApp(1),t.navigateTree.call(t,{name:o.name,nodepath:o.nodepath,uid:o.uid}))},scope:r},"->",{xtype:"tbtext",text:"",hidden:!0,name:"tbsch"},{xtype:"tbtext",text:"",width:200,name:"tbresult"},"-",{xtype:"tbtext",name:"tbrescount",width:170,text:""},"-",{xtype:"tbtext",text:"Ready",name:"tbstatus"},{xtype:"button",iconCls:"igc-cached",hidden:!0,tooltipType:"title",name:"tbcache",tooltip:"Cached",handler:function(){this.clearCache()},scope:r}]},t={xtype:"toolbar",name:"_2",hidden:r.hiddentoolbar||ig$.features&&ig$.features.ig_r_tbar||!1,items:[{iconCls:"icon-toolbar-runreport",tooltip:IRm$.r1("L_RUN_REPORT"),handler:function(){this.toolbarHandler("cmd_run")},scope:r}]}),o=[{xtype:"panel",border:0,layout:"border",items:[{xtype:"panel",name:"mainpanel",border:0,region:"center",layout:"border",flex:1,defaults:{collapsible:!0,split:!1,bodyPadding:0,border:!0},items:[{name:"_3",html:"Please wait while loading...",region:"center",layout:"fit",border:0,collapsible:!1}],listeners:{resize:function(e,t,o,r){var a=this.dzone;a&&(IG$.j$ext._w(a.body_container,t),IG$.j$ext._h(a.body_container,o),a.updateDisplay.call(a,!0))},scope:r}}]}],$s.apply(r,{tbar:t,bbar:e,items:o}),IG$.ReportView.superclass.initComponent.call(this)},listeners:{afterrender:function(){var e=this,t=e.down("[name=_3]"),o=$(t.body.dom),r=e.down("[name=_1]");_2=e.down("[name=_2]"),e._statbar=r,e._tbar=_2,e.__loaded=1,e.borderpanel=t,o.empty(),e.afterinit(o)},resize:function(e,t,o,r){var a=this.dzone;0<t&&0<o&&a.updateDisplay.call(a,!0)},close:function(e,t){var o,r=this,a=r.sheets,n=r.dzone;if(a&&a.length){for(o=0;o<a.length;o++)a[o].close();r.sheets=null}if(n&&n.items&&n.items.length)for(o=0;o<n.items.length;o++)"SHEET"!=n.items[o].objtype&&n.items[o].view&&(n.items[o].view.__dx=!0)},beforeclose:function(e,t){for(var o,r=this,a=!0,n=[],i=r.sheets,s=0;s<i.length;s++)i[s].jobid&&n.push(i[s].jobid);return e.ignoreclose?a=!0:!e.contentchanged||!r.writable&&r.uid?r.writable&&r.uid?((o=new IG$._rpc$).init(e,{ack:"helpcontent",payload:{uid:e.uid},mbody:{option:"lock",detail:"close",rcs:n.join(";")}},e,function(e){},!1),o.send()):0<n.length&&((o=new IG$._rpc$).init(e,{ack:"olapservice",payload:{uid:e.uid},mbody:{option:"clearjob",rcs:n.join(";")}},e,function(e){},!1),o.send()):(IG$.confirmMessages(null,null,e.doClose,e,e),a=!1),a}},doClose:function(e){var t,o=this;"no"==e?o.uid?((t=new IG$._rpc$).init(o,{ack:"helpcontent",payload:{uid:o.uid},mbody:{option:"lock",detail:"close"}},o,function(e){o.ignoreclose=!0,o.close()},!1),t.send()):(o.ignoreclose=!0,o.close()):"yes"==e&&((t=new IG$._rpc$).init(o,{ack:"helpcontent",payload:{uid:o.uid},mbody:{option:"lock",detail:"close"}},o,function(e){o.toolbarHandler("cmd_save",!0)},!1),t.send())},closeDockNoti:function(e){var t,o,r=this,a=r.dzone,n=r.reportoption,i=a.getBox.call(a,e),s=i?i.view:null,l=r.sheets,c=!1;if(r.contentchanged=!0,s)switch(i.objtype){case"SHEET":for(t=0;t<l.length;t++)if((o=l[t])==s){l.splice(t,1),o.sheetoption&&"SHEET"==o.sheetoption.objtype&&n.sheets.length>t&&n.sheets.splice(t,1),c=!0;break}break;default:r.ctrls[e]&&(s.__dx=!0,delete r.ctrls[e]),c=!0}else r.ctrls[e]&&delete r.ctrls[e],c=!0;return c},configDockNotify:function(e){var t,o=this.dzone,r=e?o.getBox.call(o,e):null,a=r?r.view:null;this.sheets;a&&(t=a.sheetindex,this.showSheetOpt.call(this,t,a))},configDockPivot:function(e){this.showPivotConfig(e)},rgetDbPassword:IG$.reportbase$.rgetDbPassword,regbody:IG$.reportbase$.regbody,applRptCnt:IG$.reportbase$.applRptCnt,_doSchJob:IG$._doSchJob,r_doSchJob:IG$.r_doSchJob,executeDrillReport:IG$.reportbase$.executeDrillReport,showShare:IG$.reportbase$.showShare,refreshParameters:IG$.reportbase$.refreshParameters,setActSheet:IG$.reportbase$.setActSheet,updateRptResCnt:IG$.reportbase$.updateRptResCnt,showSheetOpt:function(e,t){t.sheetindex=e;var o=this,r=new IG$.sheetobj({dzone:o.dzone,sheets:o.sheets,sheetoption:t.sheetoption,sheetindex:e,reportoption:o.reportoption,callback:new IG$.callBackObj(o,o.rshowSheetOpt,t)});IG$.checkLogin(this,r)},rshowSheetOpt:function(e,t){var o,r,a,n,i,s,l,c=this,d=(c.reportoption.sheets,c.reportoption),h=t.sheetoption,p=c.dzone,_=t.sheetindex,u="SHEET"==h.objtype?h.model.layoutinfo.docid:h.docid,m=p.getBox.call(p,u);if(m){if(c.contentchanged=!0,i=d.sheets,h.changetype){if(c.activeSheet=0,"SHEET"==h.changetype){for(a=0;a<i.length;a++)if(i[a]==h){i.splice(a,1);break}for(a=0;a<c.sheets.length;a++)if(c.sheets[a]==t){c.sheets.splice(a,1);break}for(a=0;a<c.sheets.length;a++)c.sheets[a].sheetindex=a}m.view&&(m.view.removeObj.call(m.view),m.box_container.empty()),"SHEET"==h.objtype?((o=new IG$.clReport(null,c.itemtype,!1)).model.layoutinfo.docid=u,i.push(o),r=c.createSheet(_,o,m),m.view=r,c.sheets.push(r),r.sheetindex=c.sheets.length-1):("SHEET"==h.changetype&&((n=new IG$.sheetfiltercomp(null)).objtype=h.model.objtype,n.close=h.model.close,n.name=h.model.name),c.createCtrl(h,m),o=m.view,"SHEET"==h.changetype&&(c.ctrls[m.docid]=n),s=IG$.j$ext._w(o.container),l=IG$.j$ext._h(o.container),o.setSize(s,l)),c.updateLayout(!1)}"FILTER"!=h.objtype&&"TEXT"!=h.objtype&&"NAVI"!=h.objtype&&"RPT_VIEW"!=h.objtype||("FILTER"==h.objtype?m.view.validateItems.call(m.view,null,!1,!1,!0):m.view.validateItems.call(m.view)),m.setTitle.call(m,h.model.name),m.showTitle.call(m,!h.model.hidetitle),m.fw=h.fw,m.fh=h.fh,m.setReportOption.call(m,h),m.validateProperty.call(m)}p.updateDisplay.call(p,!0)},refDS:IG$.reportbase$.refDS,updateCubeInfo:IG$.reportbase$.updateCubeInfo,updateLayout:IG$.reportbase$.updateLayout,updateExpOpt:IG$.reportbase$.updateExpOpt,appendBox:IG$.reportbase$.appendBox,initTbar:function(){var e,t,o=this,r=o._tbar,a=[];if(r){for(r.suspendLayout=!0,r.removeAll(),e=0;e<IG$.chartTypeMenu.length;e++)t={text:IG$.chartTypeMenu[e].label,charttype:IG$.chartTypeMenu[e].charttype,subtype:IG$.chartTypeMenu[e].subtype,handler:function(){o.changeChartType.call(o,this)}},a.push(t);var n,i=[{iconCls:"icon-toolbar-save",name:"t_save",cls:"ig_r_save;ig_m_save",tooltip:IRm$.r1("L_SAVE_REPORT"),hidden:!0,handler:function(){this.toolbarHandler("cmd_save")},scope:this},{iconCls:"icon-toolbar-saveas",name:"t_save_as",cls:"ig_r_saveas;ig_m_saveas",tooltip:IRm$.r1("L_SAVE_REPORT_AS"),hidden:!0,handler:function(){this.toolbarHandler("cmd_saveas")},scope:this},"-",{iconCls:"icon-toolbar-runreport",name:"t_run",cls:"ig_r_run",hidden:!0,tooltip:IRm$.r1("L_RUN_REPORT"),handler:function(){this.toolbarHandler("cmd_run")},scope:this},"-",{iconCls:"icon-toolbar-pivot",name:"t_pivot",cls:"ig_r_design",hidden:!0,$w:120,enabled:!1,enableToggle:!0,text:this.editmode?IRm$.r1("B_VIEWMODE"):IRm$.r1("B_EDITMODE"),tooltip:IRm$.r1("B_EDITMODE"),handler:function(){this.toolbarHandler("cmd_editmode")},scope:this},"-",{iconCls:"icon-toolbar-grid",cls:"ig_r_grid",name:"t_grid",hidden:!0,toggleGroup:"vm",tooltip:IRm$.r1("L_VIEW_GRID"),handler:function(){this.contentchanged=!0,this.toolbarHandler("cmd_sheetview")},scope:this},{iconCls:"icon-toolbar-chart",name:"t_chart",cls:"ig_r_chart",toggleGroup:"vm",hidden:!0,tooltip:IRm$.r1("L_VIEW_CHART"),handler:function(){this.contentchanged=!0,this.toolbarHandler("cmd_chartview")},scope:this},"-",{iconCls:"icon-toolbar-fview",name:"t_fview",cls:"ig_r_fview",toggleGroup:"vm",hidden:!0,tootip:IRm$.r1("L_VIEW_FVIEW"),handler:function(){this.contentchanged=!0,this.toolbarHandler("cmd_formview")},scope:this},{iconCls:"icon-toolbar-anal",name:"t_anal",cls:"ig_r_anal",toggleGroup:"vm",hidden:!0,tooltip:IRm$.r1("L_VIEW_ANAL"),handler:function(){this.contentchanged=!0,this.toolbarHandler("cmd_analysis")},scope:this},{iconCls:"icon-toolbar-r",name:"t_r",cls:"ig_r_r",toggleGroup:"vm",hidden:!0,tooltip:IRm$.r1("L_VIEW_RSTAT"),handler:function(){this.contentchanged=!0,this.toolbarHandler("cmd_rview")},scope:this},{iconCls:"icon-toolbar-python",name:"t_python",cls:"ig_r_python",toggleGroup:"vm",hidden:!0,tooltip:IRm$.r1("L_VIEW_PYTHON"),handler:function(){this.contentchanged=!0,this.toolbarHandler("cmd_pythonview")},scope:this},"-",{iconCls:"icon-toolbar-pagefilter",name:"toolbarprompt",hidden:!0,tooltip:"Prompt",handler:function(){this.contentchanged=!0,this.toolbarHandler("cmd_prompt")},scope:this},{iconCls:"icon-toolbar-export",name:"t_exp",cls:"ig_r_exp",hidden:!0,tooltip:IRm$.r1("L_EXPORT"),xtype:"button",menu:[{text:IRm$.r1("L_EXPORT_EXCEL"),name:"ig_r_xls_",hidden:!0,iconCls:"icon-toolbar-excel",handler:function(){this.toolbarHandler("cmd_export_excel")},scope:this},{text:IRm$.r1("L_EXPORT_PDF"),name:"ig_r_pdf",hidden:!0,iconCls:"icon-toolbar-pdf",handler:function(){this.toolbarHandler("cmd_export_pdf")},scope:this},{text:IRm$.r1("L_EXPORT_CSV"),name:"ig_r_csv",handler:function(){this.toolbarHandler("cmd_export_csv")},scope:this},{text:IRm$.r1("L_EXPORT_HTML"),name:"ig_r_html",iconCls:"icon-toolbar-html",handler:function(){this.toolbarHandler("cmd_export_html")},scope:this},{name:"office",cls:"ig_r_office",text:IRm$.r1("L_EXPORT_OFFICE"),menu:{xtype:"menu",items:[]}},{name:"jasper",cls:"ig_r_jasper",text:IRm$.r1("L_EXPORT_JASPER"),menu:{xtype:"menu",items:[]},handler:function(){this.dft_jasp_exp&&me.toolbarHandler.call(me,"cmd_export_jasper",this.dft_jasp_exp)}},{text:IRm$.r1("L_CLIPBOARD_COPY"),cls:"ig_r_clb",iconCls:"icon-toolbar-clipboard",handler:function(){this.toolbarHandler("cmd_clipboard")},scope:this}]}];if(window.IExport)for(n in window.IExport)window.IExport[n].toolbar&&(window.IExport[n].toolbar.scope=this,i.push(window.IExport[n].toolbar));i.push({iconCls:"icon-sql",text:IRm$.r1("L_VIEW_SQL"),cls:"ig_r_sv",name:"t_sql_view",hidden:!0,handler:function(){this.toolbarHandler("cmd_view_sql")},scope:this},"-",{xtype:"button",iconCls:"icon-toolbar-addsheet",name:"t_sheet",cls:"ig_r_adpanel",hidden:!0,text:IRm$.r1("L_ADD_VIEW"),menu:{xtype:"menu",items:[{text:IRm$.r1("L_NEW_SHEET"),handler:function(){this.contentchanged=!0,this.toolbarHandler("cmd_add_sheet","SHEET")},scope:this},{text:IRm$.r1("L_NEW_FILTER"),handler:function(){this.contentchanged=!0,this.toolbarHandler("cmd_add_sheet","FILTER")},scope:this},{text:IRm$.r1("L_NEW_TEXTAREA"),handler:function(){this.contentchanged=!0,this.toolbarHandler("cmd_add_sheet","TEXT")},scope:this},"-",{text:IRm$.r1("L_NEW_TABPANEL"),handler:function(){this.contentchanged=!0,this.toolbarHandler("cmd_add_sheet","TAB")},scope:this},{text:IRm$.r1("L_NEW_PANEL"),handler:function(){this.contentchanged=!0,this.toolbarHandler("cmd_add_sheet","PANEL")},scope:this},{text:IRm$.r1("L_NEW_RPT_VIEWER"),name:"t_r_rptview",cls:"ig_r_rpt_vr",handler:function(){this.contentchanged=!0,this.toolbarHandler("cmd_add_sheet","RPT_VIEW")},scope:this},"-",{text:IRm$.r1("L_NEW_STORYVIEW"),name:"t_r_story",cls:"ig_r_story",handler:function(){this.contentchanged=!0,this.toolbarHandler("cmd_add_story")},scope:this}]}},{tooltip:IRm$.r1("L_EXPORT_OPTION"),iconCls:"icon-toolbar-popt",hidden:!0,name:"t_exp_opt",cls:"ig_r_eopt",handler:function(){this.contentchanged=!0,this.toolbarHandler("cmd_export_option")},scope:this},"-",{iconCls:"icon-toolbar-tools",name:"t_tool",cls:"ig_r_tools",hidden:!0,tooltip:IRm$.r1("L_REPORT_TOOLS"),xtype:"button",menu:[{text:IRm$.r1("L_STATISTICS"),cls:"ig_r_stat",handler:function(){this.contentchanged=!0,this.toolbarHandler("cmd_statistics")},scope:this}]},"-",{text:IRm$.r1("B_WIZARD"),iconCls:"icon-toolbar-analysis",name:"t_anal_menu",cls:"ig_anal_menu",hidden:!0,tooltip:IRm$.r1("L_ANAL_WIZARD"),xtype:"button",handler:function(){this.contentchanged=!0,this.toolbarHandler("cmd_analwizard")},scope:this},{text:IRm$.r1("B_WIZARD"),name:"t_chart_wizard",cls:"ig_r_cwz",dtype:"chart",hidden:!0,handler:function(){this.contentchanged=!0,this.toolbarHandler("cmd_chartwizard")},scope:this},{text:IRm$.r1("L_CHART_TYPE"),name:"t_chart_type",cls:"ig_r_ct",hidden:!0,dtype:"chart",menu:a},{text:IRm$.r1("L_R_OPTIONS"),name:"t_r_option",hidden:!0,menu:[{text:IRm$.r1("L_R_SUMMARY"),tooltip:IRm$.r1("L_R_SUMMARY"),name:"t_r_summary",cls:"ig_r_rsum",iconCls:"icon-toolbar-rsummary",dtype:"r",hidden:!0,handler:function(){this.contentchanged=!0,this.toolbarHandler.call(this,"cmd_r_summary")},scope:this},{text:IRm$.r1("L_R_SCRIPT"),tooltip:IRm$.r1("L_R_SCRIPT"),iconCls:"icon-toolbar-rscript",name:"t_r_script",cls:"ig_r_rsce",dtype:"r",hidden:!0,handler:function(){this.contentchanged=!0,this.toolbarHandler.call(this,"cmd_r_script")},scope:this},{text:IRm$.r1("L_R_WIZARD"),tooltip:IRm$.r1("L_R_WIZARD"),iconCls:"icon-toolbar-rwizard",name:"t_r_wizard",cls:"ig_r_rwzd",dtype:"r",hidden:!0,handler:function(){this.contentchanged=!0,this.toolbarHandler.call(this,"cmd_r_wizard")},scope:this}]},{text:IRm$.r1("L_FV_OPT"),tooltip:IRm$.r1("L_FV_OPT"),hidden:!0,name:"t_fview_option",handler:function(){this.contentchanged=!0,this.toolbarHandler.call(this,"cmd_formview_edit")},scope:this},"->",{iconCls:"icon-toolbar-schedule",cls:"ig_r_sch",hidden:!0,name:"t_schedule",tooltip:IRm$.r1("B_SCHEDULE"),hidden:!ig$.toolbar||!ig$.toolbar.enable_scheduler,handler:function(){this.toolbarHandler.call(this,"cmd_schedule")},scope:this},{iconCls:"icon-email",cls:"ig_r_email",hidden:!0,name:"t_share",tooltip:IRm$.r1("B_SHARE"),handler:function(){this.toolbarHandler.call(this,"cmd_share")},scope:this},{iconCls:"icon-toolbar-favorites",cls:"ig_r_fav",tooltip:IRm$.r1("B_FAVORITES"),handler:function(){this.toolbarHandler.call(this,"cmd_favorites")},scope:this},{iconCls:"icon-toolbar-svn",hidden:!0,tooltip:IRm$.r1("B_SVN"),handler:function(){this.toolbarHandler.call(this,"cmd_svn")},scope:this},{iconCls:"icon-toolbar-userdoc",tooltip:IRm$.r1("B_USER_DOC"),cls:"ig_r_inst",handler:function(){IG$.showHelp(this.uid,!0,"report")},scope:this}),r.add(i),r.suspendLayout=!1,r.doLayout()}},downloadExcel:function(e,t,o,r){this.exportToFile("EXCEL",e,t,o,r)},formulaHandler:IG$.reportbase$.formulaHandler,cacheTbar:function(){var e=this._tbar,t=this._tbaritems,o=this._tbarcache;if(e){if(!o)for(o=this._tbarcache={},i=0;i<t.length;i++)o[t[i]]=e.down("[name="+t[i]+"]");return o}},updateTbarAll:function(){var e,t,o=this,r=o._tbar,a=o._tbarcache,n=o._tbaritems,i=[];if(r){for(r.suspendLayout=!0,a=o.cacheTbar(),e=0;e<n.length;e++)a[n[e]].hide();!o.writable&&o.uid||i.push("t_save"),o.writable&&(i.push("t_share"),i.push("t_schedule")),i.push("t_save_as"),i.push(["t_run","t_tool","t_exp","t_grid","t_chart","t_anal","t_pivot","t_r_rptview","t_r_story"]),"P"!=IG$.dlgLogin.logininfo.l3.charAt(0)&&(i.push("t_r"),i.push("t_python"),i.push("t_fview")),o.updateTbar(),o.updateExpOpt();var s=-1<o.activeSheet?o.sheets[o.activeSheet]:null;for(s&&s.sheetoption&&s.sheetoption.model&&s.sheetoption.model.viewmode&&o.updateViewMode(s.sheetoption.model.viewmode),a.t_sheet[!ig$.features[a.t_sheet.cls]&&o.editmode?"show":"hide"](),o.down("[name=t_exp_opt]").setVisible(!ig$.features[a.t_exp.cls]&&o.editmode),e=0;e<i.length;e++)if("string"==typeof i[e])o.chk_tbar(a[i[e]]);else for(t=0;t<i[e].length;t++)o.chk_tbar(a[i[e][t]]);r.suspendLayout=!1,r.doLayout()}},chk_tbar:function(e){var o,t=e.cls.split(";");$.each(t,function(e,t){if(ig$.features[t]||(o=1,"t_fview"==t&&(o=0,activeview&&activeview.sheetoption&&activeview.sheetoption.model&&activeview.sheetoption.model.tb_formview&&(o=1))),!o)return!1}),e[o?"show":"hide"]()},updateTbar:function(){var e=this.cacheTbar();this.reportoption.cube_objects,this.sheets[this.activeSheet];e.t_sql_view.hide(),ig$.features[e.t_sql_view.cls]||e.t_sql_view.show()},updatePromptTbar:function(e){var t,o=this,r=null,a=o.down("[name=toolbarprompt]"),n=o.sheets[o.activeSheet];a&&a.hide(),a&&n&&o.reportoption&&o.reportoption.sheets.length>o.activeSheet&&((t=(r=o.reportoption.sheets[o.activeSheet]).needPrompt.call(r))&&0<t.length?(a.show(),e&&(n.promptpanel&&n.promptpanel.show(),n.showPrompt.call(n,t))):e&&n.promptpanel&&n.promptpanel.hide())},showChartToolbar:function(){var o=this,r=o.cacheTbar();r&&$.each(["t_chart_wizard","t_chart_type"],function(e,t){!ig$.features[r[t].cls]&&o.editmode&&r[t].show()})},hideChartToolbar:function(){var e=this.cacheTbar();e&&(e.t_chart_wizard.hide(),e.t_chart_type.hide())},showAnalyToolbar:function(o){var r=this,a=r._tbarcache;a&&$.each(["t_anal_menu"],function(e,t){a[t]&&a[t][!ig$.features[a[t].cls]&&o&&r.editmode?"show":"hide"]()})},setRToolbar:function(o){var r=this._tbarcache;r&&$.each(["t_r_option","t_r_summary","t_r_script","t_r_wizard"],function(e,t){r[t]&&r[t][!ig$.features[r[t].cls]&&o?"show":"hide"]()})},setPythonToolbar:function(e){this._tbarcache},setFormViewToolbar:function(o){var r=this._tbarcache;r&&$.each(["t_fview_option"],function(e,t){r[t]&&r[t][!ig$.features[r[t].cls]&&o?"show":"hide"]()})},changeChartType:function(e){var t,o=e.charttype,r=e.subtype,a=this.sheets[this.activeSheet],n=a?a.sheetoption:null;n&&((t=n.model.chart_option).charttype=o,t.subtype=r,this.updateChartOpt())},updateChartToolbar:function(e){for(var t=this,o=0;o<t._tbarChart.length;o++)e?t._tbar.remove(t._tbarChart[o]):t._tbar.add(t._tbarChart[o])},updateRToolbar:function(e){for(var t=this,o=0;o<t._tbarR.length;o++)e?t._tbar.remove(t._tbarR[o]):t._tbar.add(t._tbarR[o])},updateFilterInfo:IG$.reportbase$.updateFilterInfo,updateDashboardFilterInfo:IG$.reportbase$.updateDashboardFilterInfo,updateViewMode:IG$.reportbase$.updateViewMode,toolbarHandler:IG$.reportbase$.toolbarHandler,rs_regFavorites:function(e){IG$.alertmsg(ig$.appname,IRm$.r1("M_SAVED_FAV"),null,null,0,"success")},getRequests:IG$.reportbase$.getRequests,postEditSql:function(){this.updatePromptTbar(!0)},clearAuxFilter:IG$.reportbase$.clearAuxFilter,closeRWizard:function(e){var t=this.sheets[this.activeSheet],o=t.rstat$;e&&(t.sheetoption.roption.script=e.vcontent,o.updateRScr.call(o),o.requestR.call(o))},addSheet:function(e){var t,o,r=this,a=e.sheetoption,n=a.model,i=r.dzone;r.sheets.length;switch(a.objtype=n.objtype=e.objtype,n.close=e.closable,n.name=e.name,e.objtype){case"SHEET":r.reportoption.sheets.push(a);break;default:t=r.createCtrl(a),r.ctrls[t.docid]=a,n.docid=t.docid,t.setReportOption.call(t,a)}r.updateLayout(!1),i.updateDisplay.call(i,!0),o="SHEET"==a.objtype?a.model.layoutinfo.docid:a.docid,(t=i.getBox.call(i,o))&&(t.setTitle.call(t,a.model.name),t.showTitle.call(t,!a.model.hidetitle),t.fw=a.model.fixed_width,t.fh=a.model.fixed_height,t.setReportOption.call(t,a),t.validateProperty.call(t))},createCtrl:IG$.reportbase$.createCtrl,_boxresized:IG$.reportbase$._boxresized,createSheet:IG$.reportbase$.createSheet,runSyncRes:IG$.reportbase$.runSyncRes,updateRptMeasureGroup:IG$.reportbase$.updateRptMeasureGroup,procMenu:IG$.reportbase$.procMenu,showDetailView:IG$.reportbase$.showDetailView,applyOption:IG$.reportbase$.applyOption,doCellClick:IG$.reportbase$.doCellClick,doDrillReport:IG$.reportbase$.doDrillReport,broadcastFilter:IG$.reportbase$.broadcastFilter,updateFormula:IG$.reportbase$.updateFormula,updatePivotCnt:IG$.reportbase$.updatePivotCnt,onFilterUpdate:IG$.reportbase$.onFilterUpdate,rs_showPrompt:IG$.reportbase$.rs_showPrompt,updateFilterChange:IG$.reportbase$.updateFilterChange,updateDataChange:IG$.reportbase$.updateDataChange,showPivotConfig:IG$.reportbase$.showPivotConfig,updatePivotContent:IG$.reportbase$.updatePivotContent,updateChartOpt:IG$.reportbase$.updateChartOpt,doLink:IG$.reportbase$.doLink,updateAllFilters:IG$.reportbase$.updateAllFilters,saveContent:function(e,t,o){var r=new IG$._rpc$;r.init(this,{ack:"writecontent",payload:{uid:e},mbody:t,meta_type:"report"},this,this.rsaveContent,null,[o]),r.send()},rsaveContent:function(e,t){var o=this;!!t&&t[0]?(o.ignoreclose=!0,o.close()):(o.contentchanged=!1,o.id=e.type.toLowerCase()+"_"+e.uid,o.down("[name=tbreportname]").setText(e.name),IG$.alertmsg(ig$.appname,IRm$.r1("M_SAVED"),null,null,0,"success"))},saveAsContent:IG$.reportbase$.saveAsContent,saveAsNew:IG$.reportbase$.saveAsNew,rs_procMakeItem:IG$.reportbase$.rs_procMakeItem,_rs_procMakeItem:IG$.reportbase$._rs_procMakeItem,clipboardCopy:IG$.reportbase$.clipboardCopy,exportToFile:IG$.reportbase$.exportToFile,getExportData:IG$.reportbase$.getExportData,rexportToFile:IG$.reportbase$.rexportToFile,showReportOption:IG$.reportbase$.showReportOption,makeTempReportMeta:IG$.reportbase$.makeTempReportMeta,continueReportOption:IG$.reportbase$.continueReportOption,afterinit:IG$.reportbase$.afterinit,init_f:IG$.reportbase$.init_f,doDbrdExit:IG$.reportbase$.doDbrdExit,rs_loadContent:IG$.reportbase$.rs_loadContent,clearResult:IG$.reportbase$.clearResult,clearCache:IG$.reportbase$.clearCache});
IG$.detailDrillWin=$s.extend($s.window,{xtype:"window",modal:!0,region:"center",layout:"fit",closable:!0,resizable:!0,maximizable:!0,width:700,height:500,callback:null,poolname:null,defaults:{bodyStyle:"padding:10px"},confirm:function(){},initComponent:function(){var e=this,t=$(document),i=t.width()||700,n=t.height()||600;$s.apply(e,{width:i-80,height:n-80,title:IRm$.r1("L_DET_VIEW")+" ("+(e.viewinfo.title||e.viewinfo.name)+")",items:[{xtype:"container",layout:{type:"vbox",align:"stretch"},items:[{xtype:"panel",flex:1,border:0,layout:"fit",name:"p_main",items:[]}]}],buttons:[{text:IRm$.r1("B_CLOSE"),handler:function(){this.close()},scope:this}]}),IG$.detailDrillWin.superclass.initComponent.apply(this,arguments)},listeners:{afterrender:function(e){var t,i=this,n=i.viewinfo,a=i.down("[name=p_main]");n&&(t=IG$.createAppPanel(n.uid,"report",n.name,n.nodepath,!1,{closable:!1,hiddentoolbar:!0,auxfilter:i.auxfilter,header:!1}),a.add(t))}}});
function RBar(e){this.V$createComp(e)}window.IG$=window.IG$||{},RBar.prototype={V$createComp:function(e){var t=this;t.owner=e,t.html=$("<div class='m-datagrid-rhandle'></div>").appendTo(e.ctx).bind("mousedown",function(e){t.ms={x:e.pageX,y:e.pageY},t.sp=t.html.offset(),t.spo=t.owner.ctx.offset(),t.owner.resizeCol=!0,t.regG.call(t,e)}),t.col=-1},regG:function(e){var l=this,t=$("body");function i(e){var t=l.html[0],i=e.pageX,o=(e.pageY,l.ms),r=l.sp.left-l.spo.left+(i-o.x);t.style.left=r-2+"px"}function o(e){l.unRegG.call(l),l.ts={x:e.pageX,y:e.pageY},l.moveCol.call(l,l.ts.x-l.ms.x,l.ts.y-l.ms.y),l.ms=null,l.owner.resizeCol=!1}l.mouseMove=i,l.mouseUp=o,t.bind("mousemove",i),t.bind("mouseup",o)},moveCol:function(e,t){var i=this,o=i.owner;-1<i.col&&o.moveCol.call(o,i.col,e,t)},unRegG:function(){var e=$("body");e.unbind("mousemove",this.mouseMove),e.unbind("mouseup",this.mouseUp)}},IG$.fontStyle={P_NONE:0,P_BOLD:1,P_ITALIC:2,P_UNDERLINE:4},IG$.V$grid=function(e){var t,i=this;i._browser=i.browser(),(t=IG$._ccache=IG$._ccache||{}).colorcode=t.colorcode||{},t.tmeasure=t.tmeasure||{},i.V$createComp(e)},IG$.V$grid.prototype={merge:function(e,t){var i;for(i in t)e[i]=t[i]},V$createComp:function(e){var t=this;t.mv=!1,t._scrollX=0,t._scrollY=0,t.rowfix=0,t.colfix=0,t._treecol=-1,t._treerow=-1,t._fixedRowH=0,t._fixedRowW=0,t.rowcnt=0,t.colcnt=0,t._twidth=0,t._theight=0,t._dwidth=0,t._cheight=0,t.timer=0,t.interval=10,t.delay=250,t.styles={},t.cellcharts=[],t._freeCellCharts=[],t.renderers=[],t.trenderers=[],t.font="sans",t.size=13,t.regv=!1,t.regh=!1,t._scrollSize=13,t.selcolor="#f8a084",t.mmax=0,t.width=0,t.height=0,t.selectedItems=[],t.selectedRows=[],t._hasGlobalEv=!1,t._isScrolling=!1,t._isDragging=!1,t.thumbBtnDown=!1,t.thumbMouseSX=-1,t.thumbMouseSY=-1,t._thumbTimer=-1,t._nhidden=0,t.buttondown=!1,t._mouseSX=-1,t._mouseSY=-1,t._scrollSX=0,t._scrollSY=0,t._mouseDownTimer=-1,t._mouseUpTimer=-1,t.mouseAction=0,t.mouseMode="select",t.columnfill=!1,t.treeIndent=20,t.dtm=-1,t._editable=!1,t._enableContextMenu=!0,t.selectionmode="cell",t._loadingTimer=-1,t._invalidateData=!0,t._columnresized=!0,t._rendered=!1,t.cs_x=1,t.cs_y=1,e&&t.merge(t,e)},onRender:function(){},doFilter:function(){var e=this,t={menu:e.context},i=e._dfc.__af,o=e.context.cell,r=0;"between"==e._dfc.f_opt.val()?e._dfc.sval1.val()?e._dfc.sval2.focus():r=1:e._dfc.sval1.val()&&(r=1),r?i[o.c]={op:e._dfc.f_opt.val(),val1:e._dfc.sval1.val(),val2:e._dfc.sval2.val()}:delete i[o.c],t.cmd="cmd_run_filter".toUpperCase(),t.menu.mdf=i[o.c],e.fireEvent.call(e,"menu",t),e._df.hide()},_setFoc:function(){this._focElm&&this._focElm.focus()},_hookKeyEvt:function(){var t=this,e=t._focElm;e&&e.bind("keydown",function(e){67!=e.keyCode||1!=e.ctrlKey&&!e.metaKey?65!=e.keyCode||1!=e.ctrlKey&&!e.metaKey||(t._selectAll(),e.preventDefault(),e.stopImmediatePropagation()):(t._copyclip(),e.preventDefault(),e.stopImmediatePropagation())})},_selectAll:function(){var e,t,i=this;for(i.removeAllSelection(),e=0;e<i.rows.length;e++)if(!1!==i.rows[e].visible&&!0!==i.rows[e]._treeCollapsed){for(t=0;t<i.cols.length;t++)!1!==i.cols[t].visible&&(i[-1<this._treecol||-1<this._treerow?"treeData":"_dataSet"][e][t].selected=!0,i.selectedItems.push(i[-1<this._treecol||-1<this._treerow?"treeData":"_dataSet"][e][t]));i.selectedRows.push(i.rows[e])}i.refreshSelect(),i._setFoc()},_copyclip:function(){var e,t,i=this._focElm,o="",r=[],l=this.selectedItems;if(l&&l.length){for(e=0;e<l.length;e++)t=l[e],0<e&&l[e-1]._n_==t._n_&&r.push("\t"),r.push(t.text||t.value),e+1<l.length&&l[e+1]._n_!=t._n_&&r.push("\n");o=r.join("")}window.clipboardData?window.clipboardData.setData("Text",o):i&&(i.val(o),i.focus(),i.select(),document.execCommand("copy"))},initialize:function(e){var t,i,o,r,l,n,s,d=this;clearTimeout(d.timer),d.resizeHandles=[],d.owner=e,null==d.ctx&&(d._focElm=$("<textarea style='position:absolute;top:-400px;left:-400px;width:100px;height:100px'></textarea>").appendTo(e),d.ctx=$('<div class="m-datagrid-container"></div>').appendTo(e),d._regData_og=$('<div class="m-datagrid-data"></div>').appendTo(d.ctx),d._regData_og[0].uid="_regData_og",d._regData=$('<div class="m-datagrid-data-bg"></div>').appendTo(d._regData_og),d._regData[0].uid="_regData",d._regHscroll=$('<div class="m-datagrid-scroll m-datagrid-hscroll"></div>').css({height:d._scrollSize}).hide().appendTo(d.ctx),t=$('<div class="m-datagrid-track m-datagrid-track-h"></div>').appendTo(d._regHscroll),d._regHscrollThmb=$('<div class="m-datagrid-scrollthumb m-datagrid-scrollthumb-h"></div>').css({height:d._scrollSize,width:20}).appendTo(t),$('<div class="m-datagrid-end m-datagrid-end-h">').css({height:d._scrollSize,width:5}).appendTo(d._regHscrollThmb),d._regVscroll=$('<div class="m-datagrid-scroll m-datagrid-vscroll"></div>').hide().appendTo(d.ctx),i=$('<div class="m-datagrid-track m-datagrid-track-v"></div>').css({width:d._scrollSize}).appendTo(d._regVscroll),d._regVscrollThmb=$('<div class="m-datagrid-scrollthumb m-datagrid-scrollthumb-v"></div>').css({width:d._scrollSize,height:20}).appendTo(i),$('<div class="m-datagrid-end m-datagrid-end-v">').css({width:d._scrollSize,height:5}).appendTo(d._regVscrollThmb),d.measurediv=$('<div class="m-datagrid-cell-measure"></div>').appendTo($("body")),d.editor=$("<div class='m-datagrid-editor'></div>").appendTo(d.ctx).hide(),d.contextmenu=$("<ul class='contextMenu'></ul>").appendTo(d.ctx),d.context={menu:d.contextmenu},d._hookKeyEvt(),$(e).contextMenu&&0!=d.enablecontextmenu&&$(e).contextMenu(d.context,new IG$.callBackObj(d,d.menuProc))),d._loadingLayer||(d._loadingLayer=$("<div class='m-datagrid-loading-mask'><div class='m-datagrid-loading'><div class='m-datagrid-loading-indicator'></div></div></div>").appendTo(d.ctx).hide()),d._rendered=d.is_rendered(d.owner),0==d._rendered?((s=$(d.owner).clone()).css({visibility:"hidden",width:"",height:"",maxWidth:"",maxHeight:""}),$("body").append(s),l=s.outerWidth(),n=s.outerHeight(),s.remove()):(l=IG$.j$ext._w(d.ctx),n=IG$.j$ext._h(d.ctx)),0<l&&0<n&&(d._dwidth=l,d._cheight=n),d._scrollX=0,d._scrollY=0,d.rows=[],d.cols=[],d.trenderers=0,d.canvasH=0,d.renderers||(d.renderers=[]),d.pad=new IG$.V$grid.padding(2),d.cellcharts=[],d._freeCellCharts=[],d.ctx.bind({touchstart:function(e){return d.onTouchStart.call(d,d,e),!1},touchend:function(e){return d.onTouchEnd.call(d,d,e),!1},touchmove:function(e){return d.onTouchMove.call(d,d,e),!1},mousedown:function(e){return d.onMouseDown.call(d,d,e)},dblclick:function(e){return d.onMouseDblClick.call(d,d,e)},mousewheel:function(e,t){return e.stopPropagation(),e.preventDefault(),d.onMouseWheel.call(d,d,e,t)},selectstart:function(){return!1}}),d._regVscroll.bind({click:function(e){return 0==d.mv&&d.onScrollMouseClick.call(d,d,e,"v"),!1}}),d._regHscroll.bind({click:function(e){return 0==d.mv&&d.onScrollMouseClick.call(d,d,e,"h"),!1}}),d._regVscrollThmb[0].eventtarget="vertical",d._regVscrollThmb.bind({mousedown:function(e){return d.mv=!0,e.stopPropagation(),d.onThumbMouseDown.call(d,this,e,"v"),!1},mouseup:function(e){d.onThumbMouseUp.call(d,this,e,"v")}}),d._regHscrollThmb[0].eventtarget="horizontal",d._regHscrollThmb.bind({mousedown:function(e){d.mv=!0,d.onThumbMouseDown.call(d,this,e,"h")},mouseup:function(e){d.onThumbMouseUp.call(d,this,e,"h")}}),r=["<div class='igc-dfilter-m'><div class='igc-dfilter-bg'></div>","<div class='igc-dfilter'>","<div class='flt-line flt-sep' id='cmd_filter'>"+IRm$.r1("B_SET_FILTER")+"</div>","<div class='flt-line flt-sep' id='cmd_style'>"+IRm$.r1("B_SET_STYLE")+"</div>","<div class='flt-line' id='cmd_asc'>"+IRm$.r1("B_ORDER_ASC")+"</div>","<div class='flt-line' id='cmd_desc'>"+IRm$.r1("B_ORDER_DSC")+"</div>","<div class='flt-line flt-sep' id='cmd_sort'>"+IRm$.r1("L_SORT_OPTION")+"</div>","<div class='flt-line' id='b_fm'><span>"+IRm$.r1("L_FORMULA")+"</span><div class='flt-expand'></div></div>","<div class='flt-block' id='d_fm'>","<div class='flt-line-g'><span id='cl_fm'>Clear Formula</span><span id='r_fmt'>More</span></div>","<div id='c_fm'>","<ul>","<li class='flt-line' id='t_sum'>"+IRm$.r1("F_STOT")+"</li>","<li class='flt-line' id='t_avg'>"+IRm$.r1("F_AVG")+"</li>","<li class='flt-line' id='t_min'>"+IRm$.r1("F_MIN")+"</li>","<li class='flt-line' id='t_max'>"+IRm$.r1("F_MAX")+"</li>","<li class='flt-line' id='t_rank'>"+IRm$.r1("F_RNK")+"</li>","<li class='flt-line' id='t_pot'>"+IRm$.r1("F_P_POT")+"</li>","<li class='flt-line' id='t_cumul'>"+IRm$.r1("F_P_CUM")+"</li>","<li class='flt-line' id='t_incr'>"+IRm$.r1("F_INC")+"</li>","<li class='flt-line' id='t_diff'>"+IRm$.r1("F_DIFF")+"</li>","</ul>","</div>","</div>","<div class='flt-line' id='b_rank'><span>"+IRm$.r1("L_RANK_OPTION")+"</span><div class='flt-expand'></div></div>","<div class='flt-block' id='d_rank'>","<div class='flt-line' id='cmd_showall'>"+IRm$.r1("B_SHOW_ALL")+"</div>","<div class='flt-line' id='cmd_top5'>"+IRm$.r1("B_TOP")+" 5</div>","<div class='flt-line' id='cmd_top10'>"+IRm$.r1("B_TOP")+" 10</div>","<div class='flt-line' id='cmd_btm5'>"+IRm$.r1("B_BOTTOM")+" 5</div>","<div class='flt-line' id='cmd_btm10'>"+IRm$.r1("B_BOTTOM")+" 10</div>","</div>","<div class='flt-line flt-sep-top' id='cmd_remove'>"+IRm$.r1("B_REMOVE_PIVOT")+"</div>","</div></div>"],d._df=$(r.join("")).appendTo(d.ctx).hide(),o=$(".igc-dfilter",d._df),d._dfc={dmain:o,t_sum:$("#t_sum",o),t_avg:$("#t_avg",o),t_min:$("#t_min",o),t_max:$("#t_max",o),t_rank:$("#t_rank",o),t_pot:$("#t_pot",o),t_cumul:$("#t_cumul",o),t_incr:$("#t_incr",o),t_diff:$("#t_diff",o),b_rank:$("#b_rank",o),d_rank:$("#d_rank",o),d_filter:$("#d_filter",o),c_filter:$("#c_filter",o),cmd_filter:$("#cmd_filter",o),cmd_style:$("#cmd_style",o),cmd_asc:$("#cmd_asc",o),cmd_desc:$("#cmd_desc",o),cmd_sort:$("#cmd_sort",o),cmd_top5:$("#cmd_top5",o),cmd_top10:$("#cmd_top10",o),cmd_btm5:$("#cmd_btm5",o),cmd_btm10:$("#cmd_btm10",o),cmd_showall:$("#cmd_showall",o),cmd_remove:$("#cmd_remove",o),r_flt:$("#r_flt",o),cl_flt:$("#cl_flt",o),cl_fm:$("#cl_fm",o),b_fm:$("#b_fm",o),d_fm:$("#d_fm",o),r_fmt:$("#r_fmt",o)};$("<div><div class='igc-c-filter-op'><select id='f_opt'><option value='_like_'>"+IRm$.r1("L_F_LIKE")+"</option><option value='between'>"+IRm$.r1("L_F_BETWEEN")+"</option><option value='gt'>"+IRm$.r1("L_F_GT")+"</option><option value='lt'>"+IRm$.r1("L_F_LT")+"</option></select></div><div class='igc-c-filter-inp'><input type='text' name='sval1'></input><input type='text' name='sval2' style='display: none;'></input></div></div>").appendTo(d._dfc.c_filter);d._dfc.f_opt=$("#f_opt",o),d._dfc.sval1=$("[name=sval1]",o),d._dfc.sval2=$("[name=sval2]",o),d._dfc.d_fm.hide(),d._dfc.f_opt=$("#f_opt",o).bind("change",function(e){var t=$(this).val();d._dfc.sval2["between"==t?"show":"hide"]()}),d._dfc.sval1.bind("keyup",function(e){13==e.which&&d.doFilter.call(d)}),d._dfc.sval2.bind("keyup",function(e){13==e.which&&d.doFilter.call(d)}),$.each(["cmd_asc","cmd_desc","cmd_sort","cmd_top5","cmd_top10","cmd_btm5","cmd_btm10","cmd_showall","cmd_remove","cmd_filter","cmd_style","r_flt","cl_flt","cl_fm","r_fmt","t_sum","t_avg","t_min","t_max","t_rank","t_pot","t_cumul","t_incr","t_diff"],function(e,r){d._dfc[r]&&d._dfc[r].length&&d._dfc[r].bind("click",function(){var e={cmd:r.toUpperCase(),menu:d.context},t=d._dfc.__af,i=d.context.cell,o=1;if("r_flt"==r){if("between"==d._dfc.f_opt.val()?d._dfc.sval1.val()&&d._dfc.sval2.val()||(o=0):d._dfc.sval1.val()||(o=0),!o)return;t[i.c]={op:d._dfc.f_opt.val(),val1:d._dfc.sval1.val(),val2:d._dfc.sval2.val()},e.cmd="cmd_run_filter".toUpperCase()}else"cl_flt"==r?(delete t[i.c],e.cmd="cmd_run_filter".toUpperCase()):"cmd_"==r.substring(0,4)&&(e.cmd=r.toUpperCase());e.menu.mdf=t[i.c],d.fireEvent.call(d,"menu",e),d._df.hide()})}),d._dfc.b_rank.bind("click",function(){d._dfc.d_rank.toggle()}),d._dfc.b_fm.bind("click",function(){d._dfc.d_fm.toggle()}),d._dfc.dmain.bind({click:function(e){e.stopPropagation()},mousedown:function(e){e.stopPropagation()},mouseup:function(e){e.stopPropagation()}}),d._df.bind({click:function(e){e.stopPropagation(),$(this).hide()},mousedown:function(e){e.stopPropagation(),$(this).hide()},mouseup:function(e){e.stopPropagation(),$(this).hide()}})},moveCol:function(e,t,i){var o=this.cols[e];o.width=Math.max(o.width+t,50),this.redraw()},setLoading:function(e){var t=this;-1<t._loadingTimer&&(clearTimeout(t._loadingTimer),t._loadingTimer=-1),1==e?t._loadingLayer.show():t._loadingTimer=setTimeout(function(){t._loadingLayer.fadeOut()},500)},endEdit:function(e){},initializeDragDrop:function(e){},regGlobalEvent:function(t){function i(e){return r.glMouseDown.call(r,e,t),!1}function o(e){return e.stopPropagation(),r.mv=!0,r.glMouseMove.call(r,e,t),!1}var r=this,l=function(e){return e.stopPropagation(),r.mv=!0,r.glMouseUp.call(r,e,t),$(document).unbind({mousedown:i,mousemove:o,mouseup:l}),!1};this.ge={mousedown:i,mousemove:o,mouseup:l},$(document).bind({mousedown:i,mousemove:o,mouseup:l})},glMouseDown:function(e,t){},glMouseMove:function(e,t){e.preventDefault(),e.stopImmediatePropagation(),this&&this.scrollHandler.call(this,{x:e.pageX,y:e.pageY},t)},glMouseUp:function(e,t){var i=this;i._isScrolling=!1,i._isDragging=!1,i.ge=null,setTimeout(function(){i.mv=!1},50)},scrollHandler:function(e,t){var i,o,r=this,l=this,n=l._regVscroll,s=l._regHscroll,d=(l._regVscrollThmb,l._regHscrollThmb,e.x-r.thumbMouseSX),c=e.y-r.thumbMouseSY,a=r._scrollX,h=r._scrollY;r._theight,r._cheight,r._cheight,r._fixedRowH,r._twidth,r._dwidth,r._dwidth,r._fixedRowW;l.__scr||("v"==t?(o=IG$.j$ext._h(n),h=Math.min(o-l.thumbvheight,Math.max(0,r.sy+c))):(i=IG$.j$ext._w(s),a=Math.min(i-l.thumbhwidth,Math.max(0,r.sx+d))),r._scrollX==a&&r._scrollY==h||(r._scrollX=a,r._scrollY=h,r.updateThmbPos.call(r),-1<r._thumbTimer&&clearTimeout(r._thumbTimer),r._thumbTimer=setTimeout(function(){r.on_thumbTimer.call(r)},30)))},calcTreeHeight:function(){var e,t,i,o,r=this;if(-1<this._treecol){if(-1<this._treecol)for(e=r._theight=0;e<r.treeData.length;e++){for(t=r.treeData[e][r._treecol].parent,i=r.rows[e],o=!0;t;){if(t.treeinfo&&!0!==t.treeinfo.opened){o=!1;break}t=t.parent}1==o&&(r._theight+=i.height+r.cs_y)}this._treerow,r._regData_og.css({height:r._cheight})}},addCellChart:function(e,t,i,o,r,l){var n=$("<div>&nbsp;</div>").appendTo(l).css({position:"absolute",margin:0,padding:0,left:0,top:0,width:o,height:r}).show(),s={defaultPixelsPerValue:parseInt(o/e.series[0].code.length)},d=e,c=d.series;return c&&0<c.length&&0<c[0].datum.length&&(s.type="line",IG$.microChartType(d,s),"bar"==s.type&&(s.defaultPixelsPerValue=parseInt(o/c[0].datum.length),2<s.defaultPixelsPerValue-c[0].datum.length&&(s.barWidth=s.defaultPixelsPerValue-c[0].datum.length)),s.width=o,s.height=r,s.tooltipFormat="{{offset:offset}} {{y:val}}",s.tooltipValueLookups={offset:c[0].disp},"line"==s.type||"area"==s.type||(s.xvalues=c[c.length-1].disp)),n.sparkline(c&&0<c.length?c[0].datum:[],s),this.cellcharts.push(n),n},clearCellChart:function(){for(var e,t=this.cellcharts,i=t.length-1;0<=i;i--)(e=t.pop()).hide(),this._freeCellCharts.push(e)},getMenus:function(e){var t=0,i={};return 1==e.title&&(1!=e.position&&2!=e.position||(i.cmd_filter=1,i.cmd_asc=1,i.cmd_desc=1,t=i.cmd_sort=1),3==e.position&&(i.cmd_filter=1,t=i.b_rank=1),i.cmd_style=1,i.cmd_remove=1),{active:t,items:i}},prepMenu:function(e){var t,i=this.contextmenu;for(i.html(""),t=0;t<e.length;t++)i.append($("<li"+(e[t].class?" class='"+e[t].class+"'":"")+"><a href='#"+e[t].name+"'>"+e[t].disp+"</a></li>"))},menuProc:function(e){this.fireEvent("menu",e)},setDataProvider:function(e,t,i,o){var r,l,n,s,d=this;if(d._dataSet=e,0==d.__tpstart?(d._scrollX=0,d._scrollY=0):n=!1,d._invalidateData=!0,d.endEdit(),d.appDataSet=d._dataSet,-1<this._treecol||-1<this._treerow?(d.refreshTree(),d.rowcnt=d.treeData.length):d.rowcnt=d.appDataSet.length,0<d.rowcnt&&(d.colcnt=d.appDataSet[0].length),d.rowcnt<d.rows.length)for(d.rows.splice(d.rowcnt,d.rows.length-d.rowcnt),r=0;r<d.rows.length;r++)d.rows[r].init();else{for(r=0;r<d.rows.length;r++)d.rows[r].init();for(r=d.rows.length;r<d.rowcnt;r++)d.rows.push(new IG$.V$grid.DimInfo(r))}if(d.colcnt<d.cols.length)for(d.cols.splice(d.colcnt,d.cols.length-d.colcnt),r=0;r<d.cols.length;r++)d.cols[r].init();else if(d.cols.length!=d.colcnt||!1!==n){for(r=0;r<d.cols.length;r++)d.cols[r].init();for(r=d.cols.length;r<d.colcnt;r++)d.cols.push(new IG$.V$grid.DimInfo(r))}if(d.hidden_columns=i,d._nhidden=0,i&&i.length)for(r=0;r<i.length;r++)d.cols[i[r]]&&(i[r]<d.colfix&&d._nhidden++,d.cols[i[r]].visible=!1);else for(r=0;r<d.cols.length;r++)d.cols[r].visible=!0;for(d.hidden_rows=o||[],d.hidden_rows_map={},r=0;r<o.length;r++)d.hidden_rows_map[o[r]]=1;for(d._fixedRowH=0,d._theight=0,d.pad.paddingLeft,d.pad.paddingRight,d.pad.paddingTop,d.pad.paddingBottom,l={},r=0;r<d.rowcnt;r++)(s=-1<d._treecol||-1<d._treerow?d.treeData[r]:d.appDataSet[r])&&s.length&&d.validateRowSize(d.rows[r],s,l);l=null,!1!==t&&(d.updateThmbPos.call(d),d.redraw(n)),d.__scr=0},validateRowSize:function(e,t,i){for(var o,r,l,n,s,d,c,a,h=this,_=0;_<h.colcnt;_++)(o=t[_])&&(o.menus=h.getMenus(o),text=o.text,o.charts?(r=(n={width:o.charts.width||40,height:o.charts.height||30}).width,l=n.height):(s=o.stylename?h.styles[o.stylename]:null,9!=o.position&&i[text]?n=i[text]:(n=h.measureTextSize(h.font,h.size,text,s),(n=i[text]={width:n.width,height:n.height,fw_:n.fw_,fw:n.fw}).width=Math.max(n.width,9==o.position?20:80)),r=n.width,l=n.height,n.fw||(a=o.treeinfo,-1<h._treecol&&_==h._treecol?r+=16+(a&&a.depth&&!a.nd?a.depth*h.treeIndent:0):-1<h._treerow&&!0===o.haschild?r+=16:a&&(a.depth=a.depth||0,r+=16+(a.nd?0:a.depth*h.treeIndent)))),!n.fw&&o.menus&&o.menus.active&&(r+=16),c=s?(d=s.paddingleft+s.paddingright,s.paddingtop+s.paddingbottom):(d=h.pad.paddingLeft+h.pad.paddingRight,h.pad.paddingTop+h.pad.paddingBottom),o.tex_twidth=r,o.tex_theight=l,h.cols[_].width=n.fw?n.fw_:h.cols[_].fw?h.cols[_].width:Math.max(h.cols[_].width,r+d),h.cols[_].fw=n.fw?1:h.cols[_].fw,e.height=Math.max(e.height,l+c))},refreshData:function(){var e=this,t=e._scrollX,i=e._scrollY;e.setDataProvider(e._dataSet,!1,e.hidden_columns,e.hidden_rows),e._scrollX=t,e._scrollY=i,e.redraw(!1)},redraw:function(e){var t,i,o,r=this,l=r.hidden_rows_map;if(0<r.__tpstart||r.__trow>r.rowcnt){for(t=0;t<r.rowfix;t++)l[t]||(r._fixedRowH+=r.rows[t].height,r._theight+=r.rows[t].height+r.cs_y);r._tsh=r.rows.length>r.rowfix?r.rows[r.rowfix].height+r.cs_y:21,i=r._tsh*(r.__trow-r.rowfix),r._theight+=i}else for(t=0;t<r.rowcnt;t++)l[t]||(t<r.rowfix&&(r._fixedRowH+=r.rows[t].height),0!=r.rows[t].vcr&&(r._theight+=r.rows[t].height+r.cs_y,r.template&&1==r.appDataSet[t][0].expanded&&r.appDataSet[t][0].template&&(o=IG$.j$ext._h(r.appDataSet[t][0].template),r._theight+=o)));!1!==e&&(r._regVscroll.hide(),r._regHscroll.hide(),r.regv=!1,r.regh=!1),r.calcTSize(),r.calcTreeHeight(),r.initDraw(!1===e||void 0),r.draw()},plog:function(e,t){var i=t?(new Date).getTime():this.m_t,o=(new Date).getTime();this.m_t=t?i:this.m_t,console.log(e+">> "+(o-i))},initDraw:function(e){var t,i=0,o=0,r=this,l=0,n=0,s=r.hidden_rows_map;for(r.sh=1,r.sv=1,r._browser<8&&0<r._dwidth&&0<r._cheight&&r.ctx.width(r._dwidth).height(r._cheight),t=0;t<r.cols.length;t++)!1!==r.cols[t].visible&&n++;if(r._twidth<r._dwidth&&1==r.columnfill&&0<n)for(r.showlnum?1<n&&(l=(r._dwidth-r._twidth-(1==e?r._scrollSize:0))/(n-1)):l=(r._dwidth-r._twidth-(1==e?r._scrollSize:0))/n,t=0;t<r.colcnt;t++)r.showlnum&&0==t||(r.cols[t]._dwidth=l);else for(t=0;t<r.colcnt;t++)r.cols[t]._dwidth=0;for(t=0;t<Math.min(r.colfix,r.colcnt);t++)!1!==r.cols[t].visible&&(i+=r.cols[t].width+r.cols[t]._dwidth+2);for(t=0;t<r.rowfix;t++)s[t]||(o+=r.rows[t].height+1);r._fixedRowH=o,(r._fixedRowW=i)>r._dwidth&&(r._fixedRowW=i=0,r.colfix=0),r.updateRegion()},updateRegion:function(){this._regData_og.css({left:0,top:0,width:this._dwidth,height:this._cheight})},resize:function(e,t){var i=this;0<e&&0<t&&(i._dwidth=e,i._cheight=t,i._regVscroll.hide(),i.regv=!1,i.initDraw(!1),i.draw())},draw:function(){var e,t=this;-1<t.dtm&&clearTimeout(t.dtm),t.calcContentArea(),e=t.checkRequest(),t.__scr=2==e.r?1:0,t.dtm=setTimeout(function(){t.dtm=-1,t.draw_async.call(t,e)},5)},countSubNodes:function(e,t){for(var i=this,o=i._treecol,r=(i._treerow,1),l=i.treeData.length,n=0;n<e.length;n++)e[n].dr=l;if(i.treeData.push(e),e[o].children&&0<e[o].children.length)for(n=0;n<e[o].children.length;n++)r+=i.countSubNodes(e[o].children[n],t);return r},refreshTree:function(){var e,t=this;if((-1<this._treecol||-1<this._treerow)&&(t.treeData=[],t.appDataSet))for(e=0;e<t.appDataSet.length;e++)t.countSubNodes(t.appDataSet[e],e)},calcTSize:function(){var e,t=this;for(t._twidth=0,e=t._fixedRowW=0;e<t.colcnt;e++)!1!==t.cols[e].visible&&(e<t.colfix&&(t._fixedRowW+=t.cols[e].width+t.cols[e]._dwidth+2),t._twidth+=t.cols[e].width+t.cs_x+2)},updateTreeColumn:function(){for(var e,t,i,o=this,r=o.colfix,l=o.rowfix,n=o.treeData[o.rowfix-1],s=1;s<l;s++)o.rows[s].visible=!1;for(e=r;e<o.colcnt;e++){for(t=!1,i=n[e].parent;i;){if(!0!==i.treeinfo.opened){t=!0;break}i=i.parent}!0===n[e].haschild&&-1<n[e].depth&&!0===n[e].treeinfo.opened&&n[e].depth<o.rowfix&&0==t&&(o.rows[n[e].depth+1].visible=!0),o.cols[e].visible=!t}var d=0;for(o.sh=1,o.sv=1,o.calcTSize(),s=0;s<o.rowfix;s++)!1!==o.rows[s].visible&&(d+=o.rows[s].height);d!=o._fixedRowH&&(o._theight=o._theight-o._fixedRowH+d,o._fixedRowH=d),o._fixedRowW>o._dwidth&&(o._fixedRowW=0,o.colfix=0),o.updateRegion(),o.calcContentArea(),_scrollY=o._scrollY/o.sv,_scrollX=o._scrollX/o.sh},calcContentArea:function(){for(var e=this,t=0,i=0,o=0,r=0;r<e.colcnt;r++)!1!==e.cols[r].visible&&(r<e.colfix&&(i+=e.cols[r].width+e.cols[r]._dwidth+2),t+=e.cols[r].width+e.cols[r]._dwidth+2,o+=e.cols[r]._dwidth);!!e._meas_rect&&e._meas_rect.call(e,o,e._theight)||(e.sh=0<o?1:(e._dwidth-i)/(t-i),e.sv=(e._cheight-e._fixedRowH)/(e._theight-e._fixedRowH),e.sh<1&&(e.sv=(e._cheight-e._fixedRowH-e._scrollSize)/(e._theight-e._fixedRowH)),e.sv<1&&0==o&&(e.sh=(e._dwidth-i-e._scrollSize)/(t-i)))},checkRequest:function(){var e,t,i=this,o=0,r=i._scrollY/i.sv;return(0<i.__tpstart||i.__trow>i.rowcnt)&&(0<i.__tpstart&&i.__scr&&i.__scr_a&&(r=i.__scr_a._scrollY),e=(t=Math.ceil(r/i._tsh))+Math.ceil((i._cheight-i._fixedRowH)/i._tsh),(0<i.__tpstart&&i.__tpstart>t||i.__trow>i.__tpend&&i.__tpend<e)&&(o=i.__tpstart<i.__tpend||i.__scr_a&&i.__scr_a.nrow!=t?2:1)),{r:o,nrow:t}},draw_async:function(e){var t,i,o,r,l,n,s,d,c,a,h,_,m,u,f,g,p,w,v,b,x,$,T,y,I,D,S,R,M=0,C=0,P=-1,H=-1,Y=0,E=0,X=this,B=e.nrow,V=0,G=X.hidden_rows_map;if(X.validateRowHidden(),1<=X.sh&&(X._scrollX=0),1<=X.sv&&(X._scrollY=0),p=Math.floor(X._scrollY/X.sv),w=Math.floor(X._scrollX/X.sh),X.trenderers=X.canvasH=0,X.measurediv.show(),X.clearCellChart(),X.drawBackground(),2==e.r)return X.__scr_a={nrow:B,_scrollY:p},void X.fireEvent("scroll_request",B);for(0<X.__tpstart&&(p-=X._tsh*X.__tpstart),_=s=n=l=o=i=0,-1<X._treerow&&X.updateTreeColumn(),Q=X.mmax=0;Q<X.trenderers.length;Q++)X.trenderers[Q].hide();for(f=X.rowcnt,-1<X._treecol&&(f=X.treeData.length),X.pad.paddingTop,X.pad.paddingBottom,Q=0;Q<f;Q++){if(M=n=r=i=0,u=-1<X._treecol?X.treeData[Q]:X.appDataSet[Q],Q<X.rowfix)!(d=!0)===X.rows[Q].visible||G[Q]?d=!1:c=X.rows[Q].height;else{if(d=!0,-1<X._treecol){for(X.rows[Q]._treeCollapsed=!1,v=u[X._treecol].parent;v;){if(v.treeinfo&&!0!==v.treeinfo.opened){d=!1;break}v=v.parent}X.rows[Q]._treeCollapsed=!d}if(u&&u.length&&u[0].mcelltree&&0<u[0].mcelltree.length)for(b=0;b<u[0].mcelltree.length;b++){if(u[x=u[0].mcelltree[b]].celltree&&u[x].celltree.parent)for($=u[x].celltree.parent;$&&1==d;)0==$.celltree.opened&&(d=!1),$=$.celltree.parent;if(0==d)break}1==d&&0<p&&l+X.rows[Q].height+X.cs_y<p?(d=!1,l+=X.rows[Q].height+X.cs_y,c=0,_++):1==d&&0<p&&l<p?(s=X.rows[Q].height-(p-l),l+=X.rows[Q].height,0<(c=s)?d=!0:(d=!1,_++)):1==d&&(d=!0,c=X.rows[Q].height)}if(1==d){for((P<0||P<X.rowfix)&&(P=X.rowfix),H=-1,V=Y=0,o+=X.cs_y,t=0;t<X.colcnt;t++)if(u[t])if(!1!==X.cols[t].visible){var L=u[V].merged;if(0<w&&r<w&&(H<0||H<X.colfix-X._nhidden)&&(H=V),Q>X.rowfix&&Q-_==P&&8&L?L|=1:(0==V||0<V-X.colfix+X._nhidden&&V-X.colfix+X._nhidden==H)&&4&L&&(L|=2),a=X.rows[Q].height,h=X.cols[V].width+X.cols[V]._dwidth+X.cs_x,C=s,y=u[V].fvisible,I=u[V].flborder,1&L){for(k=Q+1;k<f&&8&(g=X[-1<X._treecol||-1<X._treerow?"treeData":"_dataSet"][k])[V].merged;k++)if(1==X.rows[k].vcr&&(g.length>V+1&&(g[V+1].flborder=!!(2&L)),a+=X.rows[k].height+X.cs_y,0<C&&(C+=X.rows[k].height+X.cs_y)),a+o>X._cheight){0<C&&(C+=X.rows[k].height+X.cs_y,a+=X.rows[k].height+X.cs_y);break}if(2&L)for(k=V+1;k<X.colcnt&&4&u[k].merged&&(u[k].text="",u[k].fvisible=!0,!(h+i>X._dwidth));k++)h+=X.cols[k].width+X.cols[k]._dwidth+X.cs_x+1}else if(2&L)for(k=V+1;k<X.colcnt&&4&u[k].merged;k++)if(!1!==X.cols[k].visible){if(h+i>X._dwidth)break;h+=X.cols[k].width+X.cols[k]._dwidth+X.cs_x+1}if(V<X.colfix?(0==L||1&L||2&L?X.drawCell(i,o,Q,V,M,C,a,h,Y,E,u,!0,L,I):X.drawCell(i,o,Q,V,M,C,a,h,Y,E,u,!1,L,I),Y++,i+=X.cols[V].width+X.cols[V]._dwidth+X.cs_x+1):0<w&&r+X.cols[V].width+X.cols[V]._dwidth<w?(r+=X.cols[V].width+X.cols[V]._dwidth,H=-1):0<w&&r<w?(n=X.cols[V].width+X.cols[V]._dwidth-(w-r),M=h-(w-r),0==L||1&L||2&L||1==y?X.drawCell(i,o,Q,V,M,C,a,h,Y,E,u,!0,L,I):X.drawCell(i,o,Q,V,M,C,a,h,Y,E,u,!1,L,I),Y++,r+=X.cols[V].width+X.cols[V]._dwidth+X.cs_x+1,i+=n+X.cs_x+1,M=n=0):(0==L||1&L||2&L||1==y?(R=1&L&&4&L||2&L&&8&L?!1:!0,X.drawCell(i,o,Q,V,0,C,a,h,Y,E,u,R,L,I)):X.drawCell(i,o,Q,V,0,C,a,h,Y,E,u,!1,L,I),Y++,i+=X.cols[V].width+X.cols[V]._dwidth+X.cs_x+1),V++,i>X._dwidth)break}else V++;if(s=0,o+=c,X.template&&1==u[0].expanded&&u[0].template&&(u[0].template.css({top:o}),u[0].template.show(),o+=IG$.j$ext._h(u[0].template)),X.renderers.length>E&&X.renderers[E])for(t=Y;t<X.renderers[E].length;t++)!1!==X.renderers[E][t].v&&(X.renderers[E][t].hide(),X.renderers[E][t].v=!1);if(E++,o>X._cheight)break}}for(Q=E;Q<X.renderers.length;Q++)for(t=0;t<X.renderers[Q].length;t++)!1!==X.renderers[Q][t].v&&(X.renderers[Q][t].hide(),X.renderers[Q][t].v=!1);if(X.sh<1?((m={left:X._fixedRowW}).width=X._dwidth-X._fixedRowW-(X.sv<1?X._scrollSize:0),X.thumbhwidth=m.width*X.sh,T=Math.max(30,m.width*X.sh),X._regHscroll.css(m),X._regHscroll.show(),D=IG$.j$ext._w(X._regHscroll),X._regHscrollThmb.css({left:Math.min(X._scrollX,D-T),width:T}),X.regh=!0):(X.regh=!1,X._regHscroll.hide()),X.sv<1){if((m={top:X._fixedRowH}).height=X._cheight-X._fixedRowH-(X.sh<1?X._scrollSize:0),X.thumbvheight=m.height*X.sv,T=Math.max(30,m.height*X.sv),S=m.height,X._regVscrollThmb.css({top:Math.min(X._scrollY,S-T),height:T}),X._regVscroll.css(m),!X.regv&&X._twidth<X._dwidth&&1==X.columnfill&&0<X.cols.length)return X._regVscroll.show(),X.regv=!0,X.initDraw(!0),void X.draw();X._regVscroll.show(),X.regv=!0}else{if(X.regv&&X._twidth<X._dwidth&&1==X.columnfill&&0<X.cols.length)return X.regv=!1,X._regVscroll.hide(),X.initDraw(!1),void X.draw();X.regv=!1,X._regVscroll.hide()}X.measurediv.hide(),X._regData.width(X.trenderers+X.cs_x).height(X.canvasH+X.cs_y);var z,j=X.resizeHandles;if(1==X._columnresized&&0<X.rowfix&&X.renderers.length>X.rowfix-1){for(var A,U,W,O=X.rowfix-1,F=X._fixedRowH,N=X.cols.length,K=0,q=0,J=0,Q=0;Q<N;Q++)if(X.renderers[O][Q]&&!1!==X.renderers[O][Q].v){if(U=X.renderers[O][Q].p,A=j.length>Q?(z=j[Q]).html[0]:(z=new RBar(X),j.push(z),z.html[0]),z.col=Q,K=U[2],q=0,1<X.rowfix)for(t=q=0;t<X.rowfix-1;t++)!1!==X.renderers[t][Q].v&&2!=X.renderers[t][Q].cl.merged||(q+=(W=X.renderers[t][Q].p)[3]-W[1]);A.style.left=K-2+"px",A.style.top=q+"px",A.style.height=F-q+"px",z.html.show(),J++}if(J<j.length)for(Q=J;Q<j.length;Q++)j[Q].html.hide()}else if(j&&0<j.length)for(Q=0;Q<j.length;Q++)j[Q].html.hide()},validateRowHidden:function(){var e,t,i,o,r=this;if(0!=r._invalidateData&&(e=-1<r._treecol?r.treeData:r.appDataSet)){for(i=0;i<e.length;i++){if(t=e[i],i<r.rowfix)o=!0;else if(o=!0,t&&0<t.length&&t[0].mcelltree&&0<t[0].mcelltree.length)for(cmi=0;cmi<t[0].mcelltree.length;cmi++)if(cmo=t[0].mcelltree[cmi],t[cmo].celltree&&t[cmo].celltree.parent)for(cmop=t[cmo].celltree.parent;cmop&&1==o;)0==cmop.celltree.opened&&(o=!1),cmop=cmop.celltree.parent;r.rows[i].vcr=o}r._invalidateData=!1}},refreshSelect:function(){for(var e,t,i,o,r=this,l=0;l<r.renderers.length;l++)for(e=0;e<r.renderers[l].length;e++)o=(t=r.renderers[l][e]).cl.selected,"row"==r.selectionmode&&1==r.rows[t.rowIndex].selected&&(o=!0),1==o?(t.cssobj.background=this.selcolor,t.css({background:this.selcolor}),t.addClass("m-datagrid-cell-selected")):(i=t.cbg||"rgb(255, 255, 255)",t.cssobj.background=i,t.css({background:i}),t.removeClass("m-datagrid-cell-selected"))},drawCell:function(e,t,i,o,r,l,n,s,d,c,a,h,_,m){var u,f,g,p,w,v,b,x,T,y,I,D,S,R,k,M,C=this,P=a[o],H=0<o?a[o-1]:null,Y=a[o+1],E=P.text,X=P.stylename,B=(P.tex_twidth,P.tex_theight),V=C.styles[X],G={},L={},z=e,j=t,A=0,U=0,W=n,O=n,F=s,N=null,K=null,q=!!(C.rowfix<i+1&&-1<C._treecol&&o==C._treecol&&P.treeinfo||C.rowfix>i&&-1<C._treerow&&!0===P.haschild),J=!(1!=q||!(P.children&&0<P.children.length||!0===P.haschild)),Q=null,Z=null,ee=null,te=(P.isdirty,C.rowfix,g=(f=-1<C._treecol?(u=0<i?C.treeData[i-1]:null,C.treeData[i+1]):(u=0<i?C.appDataSet[i-1]:null,C.appDataSet[i+1]),u?u[o]:null),f?f[o]:null);if(P.r=i,P.c=o,nparent=C._regData,C.renderers.length>c?C.renderers[c].length>d?N=C.renderers[c][d]:(N=$('<div class="m-datagrid-cell"></div>').appendTo(nparent),C.renderers[c].push(N)):(N=$('<div class="m-datagrid-cell"></div>').appendTo(nparent),C.renderers.push([]),C.renderers[c]=[],C.renderers[c].push(N)),N.removeClass("igc-grid-fixedrow"),N.removeClass("igc-grid-fixedcolumn"),N.removeClass("igc-grid-fixedtop"),0<C.rowfix&&i<C.rowfix&&0<C.colfix&&o<C.colfix?N.addClass("igc-grid-fixedtop"):(0<C.rowfix&&i<C.rowfix&&N.addClass("igc-grid-fixedrow"),0<C.colfix&&o<C.colfix&&N.addClass("igc-grid-fixedcolumn")),N.rowIndex=i,N.colIndex=o,p=N.cl,N.cl=P,N.p=[z,j,z+F,j+O],0<r&&(A=F-r,N.p[2]-=A),0<l&&(U=O-l,N.p[3]-=U),I=P.type||C.cols[o].type,0==h?(N.hide(),N.v=!1):!0!==N.v&&(N.show(),N.v=!0),N._cn&&N.removeClass(N._cn),(!p||p&&p.celltype!=I)&&(N.dobj=null,N.html("")),V?(L.paddingRight=V.paddingright||2,L.paddingLeft=V.paddingleft||2,L.paddingTop=V.paddingtop||2,L.paddingBottom=V.paddingbottom||2):(L.paddingRight=C.pad.paddingRight,L.paddingLeft=C.pad.paddingLeft,L.paddingTop=C.pad.paddingTop,L.paddingBottom=C.pad.paddingBottom),q&&(L.paddingLeft+=C.treeIndent*((P.treeinfo.nd?0:P.treeinfo.depth)||0)),P.celltree&&!P.celltree.nd&&(L.paddingLeft+=C.treeIndent*P.celltree.depth),N._cn=null,G.borderLeftWidth="0px",G.borderRightWidth="0px",G.borderTopWidth="0px",G.borderBottomWidth="0px",V){switch(k=V.bordercolor,M=V.borderoutcolor,R=V.cssname,D=parseInt(V.textalign)){case 1:case 4:case 7:G.textAlign="left";break;case 2:case 5:case 8:G.textAlign="center";break;case 3:case 6:case 9:G.textAlign="right",L.paddingLeft=0}switch(D){case 1:case 2:case 3:L.paddingTop-=0;break;case 4:case 5:case 6:L.paddingTop=(W-B)/2;break;case 7:case 8:case 9:L.paddingTop+=W-B-C.pad.paddingBottom}T=V.backcolor||"#f1f1f1",G.background=T,G.fontSize=Number(V.fontsize)+"px",G.color=V.forecolor||"initial",(k||M)&&(G.borderStyle="solid",g&&g.stylename==X||M&&(G.borderTopColor=M,G.borderTopWidth=V.borderouttop+"px"),te&&te.stylename==X?0==V.borderbottom&&0==V.bordertop?O+=1:k&&(G.borderBottomColor=k,G.borderBottomWidth=Math.max(V.borderbottom,V.bordertop)+"px"):0==V.borderoutbottom?O+=1:M&&(G.borderBottomColor=M,G.borderBottomWidth=V.borderoutbottom+"px"),Y&&Y.stylename==X||M&&(G.borderRightColor=M,G.borderRightWidth=V.borderoutright+"px"),H&&H.stylename==X?0==V.borderleft&&0==V.borderright?F+=1:k&&(G.borderLeftColor=k,G.borderLeftWidth=Math.max(V.borderleft,V.borderright)+"px"):0==V.borderoutleft?F+=1:M&&(G.borderLeftColor=M,G.borderLeftWidth=V.borderoutleft+"px")),V.fontstyle=Number(V.fontstyle),G.fontWeight="normal",G.fontStyle="normal",G.textDecoration="none",0==isNaN(V.fontstyle)&&(G.fontWeight=V.fontstyle&IG$.fontStyle.P_BOLD?"bold":"normal",G.fontStyle=V.fontstyle&IG$.fontStyle.P_ITALIC?"italic":"normal",G.textDecoration=V.fontstyle&IG$.fontStyle.P_UNDERLINE?"underline":"none")}if(G.left=z-A+"px",G.top=j-U+"px",G.width=F,G.height=O,0<C._browser&&C._browser<8&&(--G.width,--G.height),G.width+="px",G.height+="px",Q||1==q||P.celltree,a[o].charts)C.addCellChart(a[o].charts,e,t,s,n,N);else switch(I){case"checkbox":case"boolean":N.dobj?K=N.dobj:("true"!=E&&"false"!=E||(P.checked="true"==E,P.text=E=""),K=N.dobj=$("<input type='checkbox' value='"+(E||"&nbsp")+"'>"+(E||"&nbsp")+"</input>"),N.append(K)),K.attr("checked",P.checked),K.bind("click",function(e){e.stopPropagation(),P.checked=K.attr("checked")});break;case"radio":N.dobj?K=N.dobj:(K=N.dobj=$("<input type='radio' value='"+(E||"&nbsp")+"'>"+(E||"&nbsp")+"</input>"),N.append(K)),K.attr("checked",P.checked);break;case"action":if(C.columns&&C.columns[o].items)for(S=0;S<C.columns[o].items.length;S++)C.drawCellAction(C.columns[o].items[S],N);break;default:for(w in N.dobj?w=(K=N.dobj).tcss:(K=N.dobj=K=$("<div class='m-cell-text'></div>"),N.append(K)),L.paddingLeft,v=1==q&&1==J||P.celltree&&1==P.celltree.haschild?{marginLeft:"0px",marginTop:(L.paddingTop||0)+"px",marginRight:(L.paddingRight||0)+"px",marginBottom:(L.paddingBottom||0)+"px"}:{marginLeft:(L.paddingLeft||0)+"px",marginTop:(L.paddingTop||0)+"px",marginRight:(L.paddingRight||0)+"px",marginBottom:(L.paddingBottom||0)+"px"},E&&"<"==E.charAt(0)&&">"==E.charAt(E.length-1)||(E=(E||"").replace(" ","&nbsp;")),R=R?R.replace("${value}",E):null,K.html(E||" "),K.tcss=v)K[0].style[w]=v[w]}for(w in R&&(N._cn=R,N.addClass(R)),3==P.title||5==P.title?(N.addClass("igc-i-link"),N._b_link=1):N._b_link&&(N.removeClass("igc-i-link"),N._b_link=0),4==P.title||5==P.title?((b=N._drm)||(b=$("<div class='igc-dgs-drill'></div>").appendTo(N),N._drm=b),b.css({position:"absolute",left:"right"==G.textAlign?0:"initial",right:"right"==G.textAlign?"initial":0}),b.unbind("mouseover"),b.unbind("mouseout"),b.unbind("mousedown"),b.unbind("mouseup"),b.bind({mousedown:function(e){},mouseup:function(e){}})):N._drm&&(N._drm.remove(),N._drm=null),1==q&&1==J||P.celltree&&1==P.celltree.haschild?(N.treeicon?(Z=N.treeicon,ee=$("#treetext",Z),Q=$("#treeicon",Z)):(N.treeicon=Z=$("<div class='m-datagrid-tree-box'><div id='treeicon' class='m-datagrid-tree-icon'></div><div id='treetext' class='m-datagrid-tree-text'></div></div>"),Q=$("#treeicon",N.treeicon),ee=$("#treetext",N.treeicon),N.append(Z)),ee.html(K.html()),K.hide()):N.treeicon&&(N.treeicon.remove(),N.treeicon=null,K.show()),(1==q&&1==J||P.celltree&&1==P.celltree.haschild)&&(P.celltree?(y=!0===P.celltree.opened,Z.css({left:L.paddingLeft,top:L.paddingTop}),Q.unbind("click"),Q.bind("click",function(){return P.celltree.opened=!P.celltree.opened,C._invalidateData=!0,C.validateRowHidden(),C._theight=0,C.redraw.call(C),P.celltree.opened&&P.celltree.h&&C.fireEvent("hierarchy",{cell:P,row:a}),!1})):(y=!0===P.treeinfo.opened,Z.css({left:L.paddingLeft,top:L.paddingTop}),Q.unbind("click"),Q.bind("click",function(){return P.treeinfo.opened=!P.treeinfo.opened,C.calcTreeHeight(),C._invalidateData=!0,C.draw.call(C),!1})),Q.removeClass("m-datagrid-treeplus").removeClass("m-datagrid-treeminus").addClass(0==y?"m-datagrid-treeplus":"m-datagrid-treeminus")),P.menus&&P.menus.active&&!C.hidemenu?(N.menuobj?((b=N.menuobj).unbind("mouseover"),b.unbind("mouseout"),b.unbind("mousedown"),b.unbind("mouseup")):(b=$("<div class='m-datagrid-menu'></div>").appendTo(N),N.menuobj=b),N.menuobj.css({position:"absolute",right:L.paddingRight,top:L.paddingTop}),b.bind({mouseover:function(e){return $(this).addClass("m-datagrid-menu-focus"),!1},mouseout:function(e){return $(this).removeClass("m-datagrid-menu-focus"),!1},mousedown:function(e){return e.stopPropagation(),!1},mouseup:function(e){var t,i=C.owner,o=$(this).offset(),r=$(i).offset(),l=C._df,n=C._dfc,s=o.left-r.left,d=o.top-r.top+$(this).height(),c=n.__af=n.__af||{};return 0==C.enablecontextmenu||(e.stopPropagation(),$.each(["cmd_asc","cmd_desc","cmd_sort","b_rank","cmd_remove","cmd_filter","cmd_style"],function(e,t){var i=0;P.menus.items[t]&&(i=1),n[t][i?"show":"hide"]()}),n.d_rank.hide(),c[P.c]?n.d_filter.show():n.d_filter.hide(),t=c[P.c]=c[P.c]||{},n.f_opt&&n.f_opt.val(t.op||(3==P.position?"between":"_like_")),n.sval1&&n.sval1.val(t.val1||""),n.sval2&&n.sval2.val(t.val2||""),n.sval2["between"==n.f_opt.val()?"show":"hide"](),$.each(["t_sum","t_avg","t_min","t_max","t_rank","t_pot","t_cumul","t_incr","t_diff"],function(e,t){var i=n[t];1==P.position||2==P.position?i[/(t_sum|t_avg|t_min|t_max)/.test(t)?"show":"hide"]():3==P.position&&i[/(t_min|t_max)/.test(t)?"hide":"show"]()}),l.show(),s+n.dmain.width()>$(i).width()&&(s=$(i).width()-n.dmain.width()),C.context.cell=P,n.dmain.css({top:d,left:s})),!1}})):N.menuobj&&(N.menuobj.remove(),N.menuobj=null),i==C.rowfix-1&&C.__gflt&&C.__gflt[o]?N.ficon?x=N.ficon:(x=$("<div class='m-datagrid-filter'></div>").appendTo(N),(N.ficon=x).css({position:"absolute",right:L.paddingRight+(N.menuobj?16:0),top:L.paddingTop})):N.ficon&&(N.ficon.remove(),N.ficon=null),N.cbg=G.background,1==("row"==C.selectionmode&&1==C.rows[i].selected||P.selected)&&(G.background=C.selcolor),N.cssobj,N.cssobj=G)N[0].style[w]=G[w];return C.trenderers=Math.max(C.trenderers,z+F),C.canvasH=Math.max(C.canvasH,j+O),N},drawCellAction:function(e,t){var i=this;e.type,$("<button>"+e.name+"</button>").appendTo(t).bind("click",function(){return e.action&&e.action(i,t),!1})},drawBackground:function(){},getRendererByPt:function(e,t){var i,o,r,l,n,s,d,c,a,h=this,_=h.ctx.offset(),m=e-_.left,u=t-_.top,f=h.cols.length>h.colfix-h._nhidden?h.colfix-h._nhidden:0,g=(h._scrollY,h.sv,h._scrollX,h.sh,null),p=!1;if(0<h.renderers.length)for(i=0;i<h.renderers.length;i++){if(h.renderers[i].length>f&&-1<f&&(s=(n=(l=h.renderers[i][f]).p)[1],d=n[3],l&&!1!==l.v&&-1<s&&s<u&&u<d))for(o=0;o<h.renderers[i].length;o++)if(c=(n=(l=h.renderers[i][o]).p)[0],a=n[2],-1<c&&c<m&&m<a){if(p=!0,l.v||8!=l.cl.merged)!1!==l.v&&(g=l);else for(r=i;r>=h.rowfix;r--)if(h.renderers[r][o]&&(0==h.renderers[r][o].cl.merged||1==h.renderers[r][o].cl.merged)){g=h.renderers[r][o];break}break}if(g||p)break}return g},onTouchStart:function(e,t){var i,o=this,r=t.originalEvent;t&&(t.stopPropagation(),2==r.touches.length&&(o.regv||o.regh)?(i=r.touches[0],o.thumbBtnDown=!0,o.sx=o._scrollX,o.sy=o._scrollY,o._isScrolling=!0,o.thumbMouseSX=i.pageX,o.thumbMouseSY=i.pageY):0<r.touches.length?(i=r.touches[0],o.thumbBtnDown=!1,o.mouseDownHandler.call(o,i.pageX,i.pageY)):(o.thumbBtnDown=!1,o.mouseUpHandler.call(o,t.pageX,t.pageY,!1,!1)))},onTouchEnd:function(e,t){t&&(t.stopPropagation(),this.thumbBtnDown||this.mouseUpHandler.call(this,t.pageX,t.pageY,!1,!1),this.thumbBtnDown=!1)},onTouchMove:function(e,t){var i,o,r,l,n,s=this,d=t.originalEvent;d&&0<d.touches.length&&(t.stopPropagation(),i=d.touches[0],s.thumbBtnDown&&-1<s.thumbMouseSX&&-1<s.thumbMouseSY?(o={x:s.thumbMouseSX,y:s.thumbMouseSY},r={x:i.pageX,y:i.pageY},s.regv&&s.regh?(l=Math.abs(r.x-o.x),n=Math.abs(r.y-o.y)<l?"h":"v"):s.regv?n="v":s.regh&&(n="h"),s.scrollHandler.call(s,r,n)):s.mouseMoveHandler.call(s,i.pageX,i.pageY))},onMouseDown:function(i,e){var t,o,r,l,n,s=this,d=s.owner,c=!1;if(e&&!s.resizeCol){var a=!(!window.Ext||!Ext.dd.DragDropManager.dragCurrent||1!=Ext.dd.DragDropManager.dragCurrent.dragging);if(0==s._isScrolling&&0==s._isDragging&&!0!=a)if(1==e.which){function h(e){return s.onMouseMove.call(s,i,e),!1}s.editing&&(n=s.getRendererByPt(e.pageX,e.pageY))==s.editing?c=!0:e.stopPropagation(),s.mouseDownHandler.call(s,e.pageX,e.pageY),$(document).bind("mousemove",h).bind("mouseup",function e(t){return s.onMouseUp.call(s,i,t),$(document).unbind("mousemove",h).unbind("mouseup",e),!1})}else if(3==e.which){if(0==s.enablecontextmenu)return;var _,m=$(d).offset();if(e.stopPropagation(),t=e.pageX-m.left,o=e.pageY-m.top,r=[],s.selectedItems&&s.selectedItems.length<2&&(n=s.getRendererByPt(e.pageX,e.pageY))&&(s.removeAllSelection(),cl=n.cl,cl.selected=!0,s.rows[n.rowIndex].selected=!0,s.selectedRows.push(s.rows[n.rowIndex]),s.selectedItems.push(cl),s.refreshSelect()),s.selectedItems&&0<s.selectedItems.length&&(r.push({disp:IRm$.r1("B_CLIPBOARD"),name:"CMD_CLIPBOARD",class:0<r.length?"separator":null}),s.sheetoption&&0<s.sheetoption.model.detailview.length&&(_=s.sheetoption.model.detailview,n=s.getRendererByPt(e.pageX,e.pageY))))for(l=0;l<_.length;l++)s.sheetoption.mL(_[l],n)&&r.push({disp:_[l].name,name:"detail:"+_[l].uid});0<r.length&&(s.prepMenu(r),s.context.cell=null,$(d).showContextMenu&&$(d).showContextMenu.call($(d),s.context,t,o))}}return c},onMouseMove:function(e,t){var i,o=this;t&&!o.resizeCol&&(i=!(!window.Ext||!Ext.dd.DragDropManager.dragCurrent||1!=Ext.dd.DragDropManager.dragCurrent.dragging),0==o._isScrolling&&0==o._isDragging&&!0!=i&&(t.stopPropagation(),o.mouseMoveHandler.call(o,t.pageX,t.pageY)))},onMouseUp:function(e,t){t&&!this.resizeCol&&this.mouseUpHandler.call(this,t.pageX,t.pageY,t.which,t.ctrlKey,t.shiftKey)},onMouseDblClick:function(e,t){t&&!this.resizeCol&&this.mouseDblClickHandler.call(this,t.pageX,t.pageY,t.which,t.ctrlKey,t.shiftKey)},mouseDownHandler:function(e,t){var i,o=this;1!=o._isScrolling&&1!=o._isDragging&&1!=o.resizeCol&&(o._scrollSX=o._scrollX,o._scrollSY=o._scrollY,o.buttondown=!0,o._mouseSX=e,o._mouseSY=t,o.prevRenderer=o.getRendererByPt(e,t),o.startRenderer=o.prevRenderer,o.mouseAction=0,i=(new Date).getTime(),o.doubletap=!1,o._mouseDownTimer&&i-o._mouseDownTimer<800&&(o.doubletap=!0),o._mouseDownTimer=i)},mouseMoveHandler:function(e,t){var i,o,r,l,n,s=this,d=!1,c=s.startRenderer;if(1!=s._isScrolling&&1!=s._isDragging)if("scroll"==s.mouseMode)0==s.mouseAction&&1==s.buttondown&&(s._twidth>s._dwidth||s._theight>s._cheight)&&(i=e-s._mouseSX,o=t-s._mouseSY,s.setOffset(s,i,o,e,t));else if("select"==s.mouseMode&&(5<Math.abs(s._mouseSX-e)||5<Math.abs(s._mouseSY-t))&&0==s.mouseAction&&1==s.buttondown&&(renderer=s.getRendererByPt(e,t),renderer&&c)){if(n=renderer.cl,renderer==c&&(1!=s.selectedItems.length||1==s.selectedItems.length&&s.selectedItems[0]!=n))s.removeAllSelection(),n.selected=!0,s.rows[renderer.rowIndex].selected=!0,s.selectedRows.push(s.rows[renderer.rowIndex]),s.selectedItems.push(n),d=!0;else if(s.prevRenderer!=renderer){var a=Math.min(c.rowIndex,renderer.rowIndex),h=Math.min(c.colIndex,renderer.colIndex),_=Math.max(c.rowIndex,renderer.rowIndex),m=Math.max(c.colIndex,renderer.colIndex);for(s.removeAllSelection(),r=a;r<=_;r++)if(!1!==s.rows[r].visible&&!0!==s.rows[r]._treeCollapsed){for(l=h;l<=m;l++)!1!==s.cols[l].visible&&(s[-1<this._treecol||-1<this._treerow?"treeData":"_dataSet"][r][l].selected=!0,s.selectedItems.push(s[-1<this._treecol||-1<this._treerow?"treeData":"_dataSet"][r][l]));s.selectedRows.push(s.rows[r])}d=!0}1==d&&s.refreshSelect(),s.prevRenderer=renderer}},mouseUpHandler:function(e,t,i,o,r){var l,n,s,d=(new Date).getTime(),c=0,a=this;if(1!=a._isScrolling&&1!=a._isDragging){if("scroll"==a.mouseMode)0==a.mouseAction&&d-a._mouseDownTimer<500&&Math.abs(a._mouseSX-e)<10&&Math.abs(a._mouseSY-t)<10&&(l=a.getRendererByPt(e,t))&&(s=l.cl,a.removeAllSelection(),s.selected=!0,a.selectedItems.push(s),a.rows[l.rowIndex].selected=!0,a.selectedRows.push(a.rows[l.rowIndex]),a.refreshSelect());else if("select"==a.mouseMode){if(l=a.getRendererByPt(e,t)){if(a.editing!=l&&a.endEdit.call(a),3!=i){if(-1<a._mouseUpTimer&&d-a._mouseUpTimer<500&&a.mouseUpRenderer&&a.mouseUpRenderer==l||d-a._mouseDownTimer<500&&(!(c=1)!==a.itemClick(l)&&a.fireEvent("itemclick",l),a._setFoc()),s=l.cl,o&&1==c){if(s.selected=!s.selected,a.rows[l.rowIndex].selected=!a.rows[l.rowIndex].selected,1==s.selected)a.selectedItems.push(s),a.selectedRows.push(a.rows[l.rowIndex]);else{for(n=0;n<a.selectedItems.length;n++)if(a.selectedItems[n]==s){a.selectedItems.splice(n,1);break}if("row"==a.selectionmode)for(n=0;n<a.selectedRows.length;n++)if(a.selectedRows[n]==a.rows[l.rowIndex]){a.selectedRows.splice(n,1);break}}a.refreshSelect()}0<c?((1<c||!o)&&a.removeAllSelection(),s.selected=!0,a.selectedItems.push(s),a.rows[l.rowIndex].selected=!0,a.selectedRows.push(a.rows[l.rowIndex]),a.refreshSelect(),a._setFoc()):0<a.selectedItems.length&&(a.fireEvent("selectionchanged"),a._setFoc())}}else a.endEdit.call(a);a.mouseUpRenderer=l,a._mouseUpTimer=d}a.buttondown=!1,a._mouseSX=-1,a._mouseSY=-1}},mouseDblClickHandler:function(e,t,i,o,r){var l=this.getRendererByPt(e,t);!(this._mouseUpTimer=-1)!==this.itemDblClick(l)&&this.fireEvent("itemdblclick",l)},fireEvent:function(e,t){this.ctx.trigger(e,[t])},onMouseWheel:function(e,t,i){void 0===i&&(i=t.originalEvent?-.1*t.originalEvent.deltaY:0);var o=this,r=(o._scrollX,o._scrollY,Math.abs(i));o.__scr||(r=15<r?1.5*r:19,r=0<i?-r:r,o.endEdit.call(o),o._theight>o._cheight&&o.setOffset(o,0,void 0,0,0,0<r?10:-10))},itemDblClick:function(e){this._editable&&!1!==this.cols[e.colIndex]._editable&&this.beginEdit(e)},beginEdit:function(e){},createEditor:function(){},itemClick:function(e){},removeAllSelection:function(){for(var e=this.selectedItems,t=this.selectedRows,i=e.length-1;0<=i;i--)e[i].selected=!1;for(i=t.length-1;0<=i;i--)t[i].selected=!1;this.selectedItems=e=[],this.selectedRows=[]},onThumbMouseDown:function(e,t,i){var o=this;return t&&(t.preventDefault(),t.stopImmediatePropagation(),o.dt1=(new Date).getTime(),o.thumbBtnDown=!0,o.thumbMouseSX=t.pageX,o.thumbMouseSY=t.pageY,o.sx=o._scrollX,o.sy=o._scrollY,o._isScrolling=!0,o.scrolltarget=e.eventtarget,o.regGlobalEvent(i)),!1},onThumbMouseUp:function(e,t,i){var o,r,l,n,s,d,c,a,h,_=this,m=_,u=(new Date).getTime();t&&_.dt1&&-1<_.dt1&&u-_.dt1<200&&(r=(o=$(e)).offset(),l=t.pageX-r.left,n=t.pageY-r.top,s=IG$.j$ext._w(o),d=IG$.j$ext._h(o),c=_._scrollX,a=_._scrollY,_.dt1=-1,event.stopPropagation(),_.ge&&($(document).unbind(_.ge),_.ge=null),_.glMouseUp.call(_,t,i),m.thumbBtnDown=!1,m.thumbMouseSX=-1,m.thumbMouseSY=-1,"v"==i?(h=d/2<n?.1:-.1,a=(a+=Math.min(m._theight-m._cheight,.1*(m._cheight-m._fixedRowH))*h)<0?0:Math.min(a,m._theight-m._cheight)):"h"==i&&(h=s/2<l?.1:-.1,c=(c+=Math.min(m._twidth-m._dwidth,.1*(m._dwidth-m._fixedRowW))*h)<0?0:Math.min(c,m._twidth-m._dwidth)),m._scrollX==c&&m._scrollY==a||(m._scrollX=c,m._scrollY=a,m.updateThmbPos.call(m),-1<m._thumbTimer&&clearTimeout(m._thumbTimer),m._thumbTimer=setTimeout(function(){m.on_thumbTimer.call(m)},50)))},setScrollTop:function(e){this.endEdit(),this.on_thumbTimer.call(this)},setScrollRow:function(e){for(var t=this,i=Math.min(e+t.rowfix,t.rows.length),o=0,r=t.rowfix;r<i;r++)o+=t.rows[r].height;t.setScrollTop(o*t.sv)},setScrollBtm:function(){var e=this,t=(e._theight-e._fixedRowH-e._cheight)*e.sv+1;e.setScrollTop(t)},onhtmlscroll:function(e,t,i){var o,r=this;t.stopPropagation(),"v"==i?(o=$(e).scrollTop(),o*=r.sv,r._scrollY=o):"h"==i&&(o=$(e).scrollLeft(),o*=r.sh,r._scrollX=o),-1<r._thumbTimer&&clearTimeout(r._thumbTimer),r.endEdit(),r._thumbTimer=setTimeout(function(){r.on_thumbTimer.call(r)},10)},onScrollMouseClick:function(e,t,i){var o=this;t.stopPropagation(),o.endEdit.call(o);var r,l,n=o._scrollX,s=o._scrollY,d=0,c="v"==i?o._regVscrollThmb.offset():o._regHscrollThmb.offset();if("v"==i){if(d=c.top>t.pageY?-1:1,s+=o.thumbvheight*d,l=IG$.j$ext._h(o._regVscroll),s=Math.min(l-o.thumbvheight,Math.max(0,s)),o._scrollY==s)return;o._scrollY=s}else{if(d=c.left>t.pageX?-1:1,n+=o.thumbhwidth*d,r=IG$.j$ext._w(o._regHscroll),n=Math.min(r-o.thumbhwidth,Math.max(0,n)),o._scrollX==n)return;o._scrollX=n}o.updateThmbPos.call(o),-1<o._thumbTimer&&clearTimeout(o._thumbTimer),o._thumbTimer=setTimeout(function(){o.on_thumbTimer.call(o)},10)},on_thumbTimer:function(){this._thumbTimer=-1;var e=this;e._scrollY/e.sv>e._theight-e._fixedRowH-e._cheight&&e.fireEvent("scrollend",null),this.draw()},updateThmbPos:function(){var e=this,t=IG$.j$ext._w(e._regHscroll),i=IG$.j$ext._h(e._regVscroll),o=IG$.j$ext._w(e._regHscrollThmb),r=IG$.j$ext._h(e._regVscrollThmb);e._regHscrollThmb.css({left:Math.min(e._scrollX,t-o)}),e._regVscrollThmb.css({top:Math.min(e._scrollY,i-r)})},setOffset:function(e,t,i,o,r,l){var n,s,d,c=e._scrollX,a=e._scrollY,h=this._regVscroll,_=c,m=a;e.sh<1&&5<Math.abs(t)&&(n=IG$.j$ext._w(e._regHscroll),_=Math.min(n-e.thumbhwidth,Math.max(0,c+t))),e._theight>e._cheight&&void 0===i?(d=IG$.j$ext._h(h)-this.thumbvheight,s=l*e.sv*21,(m=Math.min(d,e._scrollY+s))<0&&(m=0)):e._theight>e._cheight&&5<Math.abs(i)&&(s=IG$.j$ext._h(e._regVscroll),m=Math.min(s-e.thumbvheight,Math.max(0,a+i))),_==c&&m==a||(e._scrollX=_,e._scrollY=m,e.updateThmbPos.call(e),e.draw())},measureTextSize:function(e,t,i,o){var r,l,n=this,s=new IG$.V$grid.CSize(0,0),d=(window.bowser,{}),c=IG$._ccache.tmeasure,a=0;return i=i||"&nbsp;",o?(d.fontSize=Number(o.fontsize),!1===o.autowidth&&o.columnwidth&&(r=Number(o.columnwidth),a=isNaN(r)?0:1)):d.fontSize=t,c[l=i+":"+d.fontSize+":"+(a?r:"")]?(s=c[l],a&&(s.fw=1,s.fw_=r),s):(n.measurediv.show(),n.measurediv.css(d),n.measurediv.html(i),s.height=IG$.j$ext._h(n.measurediv),s.width=IG$.j$ext._w(n.measurediv),a?(s.fw=1,s.fw_=r):o&&(s.width+=o.paddingright+o.paddingleft+8),c[l]=s)},getCellValue:function(e,t){var i=null,o=this.appDataSet;return o&&o.length>e&&o[e].length>t&&(i=o[e][t]),i},setCellValue:function(e,t,i){var o=this.appDataSet;o&&o.length>e&&o[e].length>t&&(o[e][t].text=i)},addRow:function(){var e,t,i=this,o=i.appDataSet,r=[],l=[],n=o.length;for(i.endEdit(),i._invalidateData=!0,i._theight=0,e=new IG$.V$grid.DimInfo(n),i.rows.push(e),t=0;t<i.colcnt;t++)r.push("");i.getRowDataProc(r,l),o.push(l),i.validateRowSize(e,l,{}),this.rowcnt=o.length,i.updateThmbPos.call(i),i.redraw()},removeRow:function(e){var t=this,i=t.appDataSet;t.endEdit(),t._invalidateData=!0,i.splice(e,1),t.rows.splice(e,1),this.rowcnt=i.length,t.updateThmbPos.call(t),t.redraw()},getRowDataProc:function(e,t){for(var i=this.columns,o=0;o<i.length;o++)cell={text:e[i[o].field]||null,mrow:0,mcol:0,merged:0,stylename:i[o].stylename||"normal",chart:null,position:-1,code:null,value:null,index:-1,title:-1,pindex:-1},cell.stylename&&this.styles[cell.stylename]&&(st=this.styles[cell.stylename],"numeric"==i[o].type&&st.formatstring&&(cell.code=cell.text,cell.text=this.formatString(cell.code,st.formatstring))),t.push(cell)},getRowData:function(e,t){this.columns;for(var i=0;i<e.length;i++)row=[],this.getRowDataProc(e[i],row),t.push(row)},is_rendered:function(e){var t=$(e)[0];if(t&&(1!=t.nodeType||t==document.body))return!0;if(t&&t.currentStyle&&"none"!=t.currentStyle.display&&"hidden"!=t.currentStyle.visibility)return this.is_rendered(t.parentNode);if(t&&window.getComputedStyle){var i=document.defaultView.getComputedStyle(t,null);if("none"!=i.getPropertyValue("display")&&"hidden"!=i.getPropertyValue("visibility"))return this.is_rendered(t.parentNode)}return!1},check_rendered:function(e){var t=$(e)[0],i=e;if(1!=t.nodeType||t==document.body)return null;if(t.currentStyle&&("none"==t.currentStyle.display||"hidden"==t.currentStyle.visibility))return i;if(window.getComputedStyle){var o=document.defaultView.getComputedStyle(t,null);if("none"==o.getPropertyValue("display")||"hidden"==o.getPropertyValue("visibility"))return i}else if(i=this.check_rendered(t.parentNode))return i;return i},browser:function(){var e,t=-1;return"Microsoft Internet Explorer"==navigator.appName&&(e=navigator.userAgent,new RegExp("MSIE ([0-9]{1,}[.0-9]{0,})").exec(e)&&(t=parseFloat(RegExp.$1))),t}},IG$.V$grid.padding=function(e){this.paddingTop=e,this.paddingBottom=e,this.paddingLeft=e,this.paddingRight=e},IG$.V$grid.DimInfo=function(e){this.index=e,this.width=0,this.height=0,this._dwidth=0},IG$.V$grid.DimInfo.prototype={w:function(){return this.width+(this._dwidth?this._dwidth:0)},h:function(){return this.height+(this._cheight?this._cheight:0)},init:function(){var e=this;e._dwidth=0,e._cheight=0,e.width=0,e.height=0,e.visible=!0,e.fw=void 0,e.fw_=void 0}},IG$.V$grid.CSize=function(e,t){this.width=e,this.height=t};
function qigridview(t){this.createComponent(),this.editable=!0,this.enablecontextmenu=!1,this.scrollbar="image",this.drawmode=t&&t.drawmode||"req",this.columnfill=!(!t||1!=t.columnfill),this.processRowFunction=t?t.processRowFunction:null,this.initStyles(),t&&this.merge(t)}qigridview.prototype=new IG$.V$grid,(qigridview.prototype.constructor=qigridview).prototype.parent=IG$.V$grid.prototype,qigridview.prototype.initStyles=function(){var t;this.styles={normal:{name:"normal",fontsize:11,color:0,backcolor1:16777215,padtop:4,padbottom:4,padright:2,padleft:2,formatstring:null,textalign:"4"}},(t=this.addStyle("fixedrow")).padtop=2,t.padbottom=2,t.textalign="5",t.backcolor1=874901,t.color=16777215,t=this.addStyle("fixedcolumn"),(t=this.addStyle("numeric")).formatstring="#,###",t.textalign="6",(t=this.addStyle("boolean")).textalign="5",(t=this.addStyle("grandtotal","numeric")).backcolor1=16645822,(t=this.addStyle("subtotal","numeric")).backcolor1=16645822,(t=this.addStyle("grandtotallabel")).backcolor1=16645822,(t=this.addStyle("subtotallabel")).backcolor1=16645822},qigridview.prototype.addStyle=function(t,e){var a,i=this,o=(o=i.styles[e])||i.styles.normal,n={name:t};for(a in o)"name"!=a&&(n[a]=o[a]);return i.styles[n.name]=n},qigridview.prototype.merge=function(t){var e,a=t;for(e in a)void 0!==this[e]&&(this[e]=a[e])},qigridview.prototype.setColumns=function(t,e,a){var i,o,n,l,r=this,d=[],s=[];if(r.subtotal=e,r.template=a,t){for(r.columns=t,n=r.calculateDepth(t,s,0,0,null).depth,i=0;i<n+1;i++){for(l=[],o=0;o<s.length;o++)l.push(null);d.push(l)}r.makeHeaderData(d,t,0,0),r.colcount=d&&0<d.length?d[0].length:0,r.rowcount=d.length,r.fixedRow=d.length,r.setDataProvider(d)}return r.columns=s},qigridview.prototype.calculateDepth=function(t,e,a,i,o){for(var n,l,r,d={depth:0,cols:0},s=0;s<t.length;s++)if(t[s].columns&&0<t[s].columns.length)a=(r=this.calculateDepth(t[s].columns,e,a+1,s,t[s].defaults||o)).depth,d.cols+=r.cols,r.cols,i+=r.cols;else{if(o)for(l in o)t[s][l]=o[l];"numeric"==t[s].type?t[s].stylename=t[s].stylename||"numeric":"boolean"==t[s].type&&(t[s].stylename=t[s].stylename||"boolean"),t[s].formatstring&&((n=this.addStyle("column_"+(s+i),t[s].stylename||"normal")).formatstring=t[s].formatstring,t[s].stylename=n.name),e.push(t[s]),d.cols++,0}return d.depth=a,d},qigridview.prototype.makeHeaderData=function(t,e,a,i){for(var o,n,l=this,r=0,d=0;d<e.length;d++)if(n={text:e[d].name||e[d].field,mrow:0,mcol:0,merged:0,stylename:e[d].headerstyle||"fixedrow",chart:null,position:-1,code:null,value:null,index:-1,title:-1,pindex:-1},e[d].columns&&0<e[d].columns.length){for(o=0;o<e[d].columns.length;o++)(n=l.ocopy(n)).merged=0==o?2:4,t[a][r+o+i]=n;r+=l.makeHeaderData(t,e[d].columns,a+1,r)}else{for(o=a;o<t.length;o++)(n=l.ocopy(n)).merged=o==a?1:3,n.type="string",t[o][r+i]=n;r++}return r},qigridview.prototype.ocopy=function(t){var e,a={};for(e in t)a[e]=t[e];return a},qigridview.prototype.setDataProvider=function(t,e){if(t){var a,i=this,o=i.columns;for(qigridview.prototype.parent.setDataProvider.call(i,t,!1),a=0;a<o.length;a++)o[a].minwidth&&(i.cols[a].width=Math.max(i.cols[a].width,o[a].minwidth)),o[a].maxwidth&&(i.cols[a].width=Math.min(i.cols[a].width,o[a].maxwidth)),i.cols[a].type=o[a].type;!1!==e&&i.redraw()}},qigridview.prototype.loadData=function(t){var e=this,a=e.dataProvider;e.columns;a.length>e.fixedRow&&a.splice(e.fixedRow,a.length-e.fixedRow),t&&(e.getRowData(t,a),a=e.updateSubtotal(a)||a,e.updateMerge(a)),e.setDataProvider(a)},qigridview.prototype.formatString=function(t,e){return t=this.format(Number(t),e)},qigridview.prototype.format=function(t,e){if("string"!=typeof e)return"";var a=-1<e.indexOf(","),i=this.j5(e).split("."),o=t;if(1<i.length)o=o.toFixed(i[1].length);else{if(2<i.length)throw"NumberFormatException: invalid format, formats should have no more than 1 period: "+e;o=o.toFixed(0)}var n=o.toString();if(a){for(var l=(i=n.split("."))[0],r=[],d=l.length,s=(Math.floor(d/3),l.length%3||3),c=0;c<d;c+=s)0!=c&&(s=3),r[r.length]=l.substr(c,s),0;n=r.join(","),i[1]&&(n+="."+i[1])}return e.replace(/[\d,?,#\.?,#]+/,n)},qigridview.prototype.j5=function(t){t+="";for(var e=/^\d|\.|\#|-$/,a="",i=0;i<t.length;i++)e.test(t.charAt(i))&&("."==t.charAt(i)&&-1!=a.indexOf(".")||"-"==t.charAt(i)&&0!=a.length||(a+=t.charAt(i)));return a},qigridview.prototype.loadAjaxData=function(e){var i=this;e&&(e.datatype=e.datatype||"json",i.setLoading(!0),$.ajax({type:e.method||"GET",url:e.url,dataType:e.datatype||"json",data:e.data,timeout:1e4,success:function(t){e.success&&e.success.call(e.scope||i,t),i.processAjaxData.call(i,e,t,"load")},error:function(t,e,a){i.setLoading(!1)}}))},qigridview.prototype.appendAjaxData=function(e){var i=this;e&&(e.datatype=e.datatype||"json",i.setLoading(!0),$.ajax({type:e.method||"GET",url:e.url,dataType:e.datatype||"json",data:e.data,timeout:1e4,success:function(t){i.processAjaxData.call(i,e,t,"append")},error:function(t,e,a){i.setLoading(!1)}}))},qigridview.prototype.processAjaxData=function(t,e,a){var i=this;i.setLoading(!1);var o,n,l,r=[],d=i.dataProvider;if("xml"==t.datatype){if(s=i.L7(e,t.rootnode))for(c=i.L14(s),o=0;o<c.length;o++)if((p=i.processRowFunction?i.processRowFunction.call(i,i,c[o]):i.L10(c[o]))&&(r.push(p),1==c[o].hasChildNodes()))for(l=this.L14(c[o]),n=0;n<l.length;n++)p[this.L17(l[n])]=this.L12(l[n])}else if("json"==t.datatype){var s,c,p,u,g=t.rootnode.split("/");if(0<g.length){for(o=0;o<g.length;o++)s=0==o?e:s[g[o]];if(s)for(c=s,o=0;o<c.length;o++)(p=i.processRowFunction?i.processRowFunction.call(i,i,c[o]):c[o])&&r.push(p)}}"load"==a?(i.dataFullLoaded=!1,i.loadData(r)):"append"==a&&(0==r.length?i.dataFullLoaded=!0:(i.getRowData(r,d),u=i.updateSubtotal(d),i.dataProvider=d=u||d,i.updateMerge(d),i.refreshData()))},qigridview.prototype.updateSubtotal=function(t){var e,a,i,o,n,l=this,r=l.columns,d=t||l.dataProvider,s={};for(h=0;h<r.length;h++)s[r[h].field]=h;if(l.subtotal&&0<l.subtotal.length){for(h=0;h<l.subtotal.length;h++)if((i=l.subtotal[h]).colindex=-1,i.field&&void 0!==s[i.field]&&i.datafields&&0<i.datafields.length)for(i.colindex=s[i.field],i.pvalue=null,i.fcalc=[],i.topposition=-1,e=0;e<i.datafields.length;e++)void 0!==s[i.datafields[e]]&&i.fcalc.push({field:i.datafields[e],colindex:s[i.datafields[e]],sum:null,mbody:null});for(h=d.length-1;h>=l.fixedRow;h--)1==d[h][0].issubtotal&&d.splice(h,1);for(var c,p,u,g=[],h=0;h<l.fixedRow;h++)g.push(d[h]);for(h=l.fixedRow;h<d.length;h++)for(c=d[h],g.push(c),e=0;e<l.subtotal.length;e++)if(-1<(i=l.subtotal[e]).colindex){for(n=i.toplocate||!1,a=0;a<i.fcalc.length;a++)o=Number(c[i.fcalc[a].colindex].code||c[i.fcalc[a].colindex].text),0==isNaN(o)&&(i.fcalc[a].sum=null==i.fcalc[a].sum?o:i.fcalc[a].sum+o);if(1==i.isgrandtotal)1!=n&&h==d.length-1?(p=l.addSubTotalRow(i,null),g.push(p)):1==n&&h==l.fixedRow?(p=l.addSubTotalRow(i,null),i.srow=p,g.splice(g.length-1,0,p)):1==n&&h==d.length-1&&l.updateSubTotalRow(i,null);else if(u=h+1<d.length?d[h+1][i.colindex].text:null,d[h][i.colindex].text!=u)for(p=l.addSubTotalRow(i,c[i.colindex]),1==n?(i.topposition<0&&(i.topposition=l.fixedRow),g.splice(i.topposition,0,p),i.srow=p,l.updateSubTotalRow(i,c[i.colindex]),i.topposition=g.length):g.push(p),a=0;a<i.fcalc.length;a++)i.fcalc[a].sum=null,i.fcalc[a].cnt=null;i.pvalue=d[h][i.colindex].text}return g}return null},qigridview.prototype.addSubTotalRow=function(t,e){for(var a,i,o,n,l=this,r=l.columns,d=[],s=0;s<r.length;s++)o={text:null,mrow:0,mcol:0,merged:0,stylename:null,chart:null,position:-1,code:null,value:null,index:-1,title:-1,pindex:-1,issubtotal:!0,type:"string"},s==t.colindex?(o.text=1==t.isgrandtotal?t.name:e.text,o.stylename=t.labelstylename||(t.isgrandtotal?"grandtotallabel":"subtotallabel")):1!=t.isgrandtotal&&s==t.colindex+1&&(o.text=t.name,o.stylename=t.labelstylename||(t.isgrandtotal?"grandtotallabel":"subtotallabel")),d.push(o);for(s=0;s<t.fcalc.length;s++)a=r[i=t.fcalc[s].colindex],(o=d[i]).code=t.fcalc[s].sum,o.text=o.code,o.stylename=t.stylename||(1==t.isgrandtotal?"grandtotal":"subtotal"),t.stylename&&l.styles[t.stylename]?(st=l.styles[t.stylename],n=st.formatstring):a.stylename&&l.styles[a.stylename]&&(st=l.styles[a.stylename],n=st.formatstring),n&&(o.text=l.formatString(o.code,n));return d},qigridview.prototype.updateSubTotalRow=function(t,e){var a,i,o,n,l,r=this,d=r.columns,s=[];if(s=t.srow)for(a=0;a<t.fcalc.length;a++)i=d[o=t.fcalc[a].colindex],(n=s[o]).code=t.fcalc[a].sum,n.text=n.code,n.stylename=t.stylename||(1==t.isgrandtotal?"grandtotal":"subtotal"),t.stylename&&r.styles[t.stylename]?(st=r.styles[t.stylename],l=st.formatstring):i.stylename&&r.styles[i.stylename]&&(st=r.styles[i.stylename],l=st.formatstring),l&&(n.text=r.formatString(n.code,l));return s},qigridview.prototype.updateMerge=function(t){for(var e,a,i,o,n,l,r,d,s,c,p,u=this.columns,g=[],h=[],f=!1,m=t||this.dataProvider,v=0;v<u.length;v++)1==u[v].merged&&(f=!0,g.push(v),h.push(null));if(1==f)for(v=this.fixedRow;v<m.length;v++)for(a=m[v],i=v>this.fixedRow?m[v-1]:null,o=v+1<m.length?m[v+1]:null,e=0;e<g.length;e++)l=g[e],n=0<e&&g[e-1]==l-1?g[e-1]:-1,e+1<g.length&&g[e+1]==l+1&&g[e+1],r=o?o[l].text:null,s=a[l].text,d=i?i[l].text:null,p=i?i[l].merged:0,c=-1<n?a[n].merged:3,d!=s&&r==s?a[l].merged=1:d==s&&1<c?a[l].merged=3:r==s&&(a[l].merged=1<c&&0<p?3:1)},qigridview.prototype.L7=function(t,e){var a=e.split("/"),o=0,n=t;""==a[0]&&(n=t.getElementsByTagName(a[1])[0],o=2);for(i=o;i<a.length&&(null!=(n=this.L8(n,a[i]))&&null!=n);i++);return n},qigridview.prototype.L8=function(t,e){var a,i=null,o=null;if(null!=t&&1==t.hasChildNodes())for(o=this.L14(t),a=0;a<o.length;a++)if(o[a].nodeName==e){i=o[a];break}return i},qigridview.prototype.L9=function(t,e){return t.getAttribute(e)},qigridview.prototype.L10=function(t){for(var e={},a=window.bowser,i=0;i<t.attributes.length;i++)e[a.msie?t.attributes[i].nodeName:t.attributes[i].localName]=t.attributes[i].value;return e},qigridview.prototype.L14=function(t,e){var a=[];if(null!=t&&1==t.hasChildNodes())for(var i=0;i<t.childNodes.length;i++)"1"==t.childNodes[i].nodeType&&(e&&e!=this.L17(t.childNodes[i])||a.push(t.childNodes[i]));return a},qigridview.prototype.L12=function(t){if(window.bowser.msie){if(t)return t.text||t.textContent||""}else if(null!=t&&void 0!==t.textContent)return t.textContent;return""},qigridview.prototype.L17=function(t){return t.nodeName},qigridview.prototype.expandTemplate=function(t,e){var a=this,i=this.dataProvider[t],o=!1;a.template&&(i[0].expanded=e,i[0].template||(i[0].template=$("<div></div>").css({position:"absolute"}).appendTo(a.regdata),i[0].template.append($(a.template)),a.trenderers.push(i[0].template),o=!0),e?(a.theight+=i[0].template.height(),i[0].template.fadeIn(500)):(0==o&&(a.theight-=i[0].template.height()),i[0].template.fadeOut(500)),a.refreshData())},qigridview.prototype.createEditor=function(t){var e,a,i,o,n,l=this;if(t&&t.editor)switch(t.editor.type){case"select":case"combobox":if(e=$("<select></select>"),t.editor.data)for(a=0;a<t.editor.data.length;a++)i=(n=t.editor.data[a])[t.editor.codename||"value"],o=n[t.editor.displayname||"label"]||i,$("<option value='"+i+"'>"+o+"</option>").appendTo(e);break;default:(e=$("<input type='text'></input>")).bind("keyup",function(t){return 13==t.keyCode&&l.endEdit.call(l,"enter"),!1})}else e=qigridview.prototype.parent.createEditor.call(l);return e},qigridview.prototype.beginEdit=function(t){var e,a,i=this,o=i.ctx.offset(),n=i.columns,l=(i.cols[t.colIndex],n[t.colIndex]),r=!1;if(1==i.editable&&!1!==i.cols[t.colIndex].editable){if(e=t.offset(),t.cl,i.editing=t,i.editor.empty(),l.editor&&l.editor.type)switch(l.editor.type){case"combobox":case"select":a=l.editrenderer=i.createEditor(l),i.editor.append(a),i.editor.css({left:e.left-o.left,top:e.top-o.top,overflow:"visible"}),(i.editor.ceditor=a).width(t.width()),i.editor.width(t.width()).height(t.height()),i.editor.show(),r=!0}0==r&&qigridview.prototype.parent.beginEdit.call(i,t)}};var qigridinstances={instance:0};function qigridpages(t){this.container=t.container,this.template=t.template||"totalcounter",this.totalcount=t.totalcount,this.pagecount=t.pagecount,this.datagrid=t.datagrid,this.prevlabel=t.prevlabel||"Previous",this.nextlabel=t.nextlabel||"Next",this.instance=qigridinstances.instance,qigridinstances.instance++,this.init()}qigridpages.prototype={init:function(){var t;switch(this.pageindex=0,this.container.empty(),this.template){case"totalcounter":t="<div class='m-datagrid-totalcounter'><div class='m-datagrid-pageinfo-1'><span><b>{START_LABEL}</b> - <b>{END_LABEL}</b> of <b>{TOTAL_LABEL}</b><span></div><div class='m-datagrid-page-btngrp'>{BUTTON_PREV}{BUTTON_NEXT}</div></div>";break;case"pageindex":t="<div class='m-datagrid-pageindex'><div class='m-datagrid-pageinfo-2'><div class='m-datagrid-page-btn-prev10'>{BUTTON_PREV10}</div><div class='m-datagrid-page-indexlist'>{PAGE_INDEX_10}</div><div class='m-datagrid-page-btn-next10'>{BUTTON_NEXT10}</div></div></div>"}this.tmpl=t},updatePage:function(t){var e,a,i,o=this,n=o.tmpl,l=o.pagecount,r=t*l,d=(t+1)*l,s=10*Math.floor(t/10),c=Math.ceil(o.totalcount/o.pagecount),p="";if(o.pageindex=t,o.container.empty(),n){for(i=o.instance,d=Math.min(d,o.totalcount),n=(n=(n=(n=(n=(n=(n=n.replace("{START_LABEL}",1+r)).replace("{END_LABEL}",d+1)).replace("{TOTAL_LABEL}",qigridview.prototype.formatString(o.totalcount,"#,###"))).replace("{BUTTON_PREV}","<div class='m-datagrid-prevpage"+(0==t?" m-datagrid-page-disabled":"")+"' id='qipages_btn_prev_"+i+"'>"+(o.prevlabel||"")+"</div>")).replace("{BUTTON_NEXT}","<div class='m-datagrid-nextpage"+(t==Math.ceil(o.totalcount/o.pagecount)?" m-datagrid-page-disabled":"")+"' id='qipages_btn_next_"+i+"'>"+(o.nextlabel||"")+"</div>")).replace("{BUTTON_PREV10}","<div class='m-datagrid-prevpage"+(0==s?" m-datagrid-page-disabled":"")+"' id='qipages_btn_prev10_"+i+"'>"+(o.prevlabel||"")+"</div>")).replace("{BUTTON_NEXT10}","<div class='m-datagrid-nextpage"+(c<=10+s?" m-datagrid-page-disabled":"")+"' id='qipages_btn_next10_"+i+"'>"+(o.nextlabel||"")+"</div>"),e=s;e<Math.min(10+s,c);e++)p+="<div class='m-datagrid-jumppage"+(e==t?" m-datagrid-currentpage":"")+"' name='qipages_btn_jump_"+i+"'>"+(e+1)+"</div>";n=n.replace("{PAGE_INDEX_10}",p),a=$(n),o.container.append(a),$("#qipages_btn_next_"+i).bind("click",function(){o.changePage.call(o,++o.pageindex)}),$("#qipages_btn_prev_"+i).bind("click",function(){0<o.pageindex&&o.changePage.call(o,--o.pageindex)}),$("#qipages_btn_next10_"+i).bind("click",function(){10+s<c&&o.changePage.call(o,10+s)}),$("#qipages_btn_prev10_"+i).bind("click",function(){0<s&&o.changePage.call(o,s-1)}),a.find("[name='qipages_btn_jump_"+i+"']").bind("click",function(t){var e=$(t.target).text();e&&(e=parseInt(e))-1!=o.pageindex&&o.changePage.call(o,e-1)})}},changePage:function(t){this.container.trigger("changepage",[this,t])}};
IG$.V$grid.prototype.initializeDragDrop=function(e){var r=this;r.dropFeedback=$('<div class="m-datagrid-feedback"></div>'),r.dropFeedback.appendTo(r.owner),r.dropFeedback.hide()},IG$.V$grid.prototype.isAllowedType=function(e){var r=!1,i=this.getTypeName(e);return"d"!=i&&"m"!=i||(r=!0),r},IG$.V$grid.prototype.getTypeName=function(e){var r="";return"measure"==e||"formulameasure"==e||"measuregroup"==e?r="m":"metric"!=e&&"custommetric"!=e&&"tabdimension"!=e&&"measuregroupdimension"!=e||(r="d"),r};
IG$.makeItem=$s.extend($s.window,{modal:!0,layout:"fit",closable:!1,resizable:!1,width:300,autoHeight:!0,viewmode:"newitem",_init:function(){var e=this,t=e.itemtype.split(";");if(1<t.length){e.itemtype=t[0],e._itemtypes=t;var i,a=e.down("[name=txttitle]"),n=e.down("[name=txtedittitle]"),o=e.down("[name=selitemtype]"),r=[];for(a.setVisible(!1),n.setVisible(!1),o.setVisible(!0),r.push({name:IRm$.r1("L_CR_TP_SEL"),value:""}),i=0;i<t.length;i++)r.push({name:IRm$.r1("D_"+t[i].toUpperCase()),value:t[i]});o.store.loadData(r),o.setValue("")}e.down("[name=fitemname]").focus()},commit_f:function(){var e=this,t=e.down("[name=fitemname]"),i=e.down("[name=fitemname]").getValue(),a=e.down("[name=fdesc]").getValue(),n=e.down("[name=fhelpuid]").getValue()||null,o=e.down("[name=selitemtype]"),r=e.down("[name=group_dim_name]"),d=e.down("[name=groupid]").getValue();if(t.clearInvalid(),!i)return t.markInvalid([t.blankText]),void(e._proc=0);if("Help"!=e.itemtype||n)if(e._itemtypes&&1<e._itemtypes.length&&(e.itemtype=o.getValue(),!e.itemtype))e._proc=0;else{if("MeasureGroup"==e.itemtype&&!r.getValue())return r.markInvalid([r.blankText]),void(e._proc=0);if(0==e.doUpdate)return e.callback&&e.callback.execute(),void(e._proc=0);var l=new IG$._rpc$,s="writecontent",p={address:e.parentnodepath?"/"==e.parentnodepath?e.parentnodepath+i:e.parentnodepath+"/"+i:null,name:i,type:e.itemtype,pid:"/"==e.parentuid?"":e.parentuid,memo:n||null,dimname:r.getValue(),description:a},m={name:i};"Group"==e.itemtype?(s="usercontent",p={address:"/usergroup/"+i,action:"create",pid:e.parentuid,description:a,groupid:d},m={type:"usergroup",pid:e.parentuid,description:a,groupid:d}):"Auth"==e.itemtype?(s="usercontent",p={address:"/Auth/"+i,action:"create",pid:e.parentuid,description:a},m={option:"create",name:i,description:a}):"tenant"==e.itemtype&&(s="usercontent",p={address:"/tenants/"+i,action:"create",pid:e.parentuid,description:a},m={}),l.init(e,{ack:s,payload:p,mbody:m,meta_type:e.meta_type||null},e,e.rs_processMakeMetaItem,function(){e._proc=0}),l.send()}else e._proc=0},rs_processMakeMetaItem:function(e){var t=this;t.down("[name=fitemname]").getValue();t.callback&&t.callback.execute(),t.close()},setGroupActive:function(e){var t=this,i=new IG$._rpc$;i.init(t,{ack:"usercontent",payload:{address:"/usergroup",action:e},mbody:{gid:t.uid}},t,t.rs_setGroupActive,!1,[e]),i.send()},rs_setGroupActive:function(e,t){var i=this,a=t[0],n=i.down("[name=p_grp_desc]"),o=i.down("[name=btn_erase]");switch(a){case"activate":n.setValue("Active"),i.group_active=a,o.setVisible(!1);break;case"delete":n.setValue("Blocked"),i.group_active=a,o.setVisible(!0),i.down("[name=btn_erase]").show();break;case"erase":i.close()}},initComponent:function(){var e=this;e.title=e.title||IRm$.r1("L_MAKEITEM_G");var t=IRm$.r1("D_"+e.itemtype.toUpperCase());$s.apply(this,{defaults:{padding:10},items:[{xtype:"container",padding:10,layout:{type:"vbox",align:"stretch"},items:[{xtype:"displayfield",value:IRm$.r1("L_MAKEITEM",t),name:"txttitle",hidden:"newitem"!=e.viewmode,height:30,border:0},{xtype:"displayfield",value:IRm$.r1("L_RENAME_ITEM",e.itemname||""),name:"txtedittitle",height:30,hidden:"edititem"!=e.viewmode,border:0},{xtype:"panel",layout:"anchor",border:0,defaults:{anchor:"100%",labelWidth:80},items:[{name:"selitemtype",hidden:!0,xtype:"combobox",fieldLabel:IRm$.r1("L_CR_TP_SEL"),queryMode:"local",displayField:"name",valueField:"value",editable:!1,autoSelect:!0,store:{xtype:"store",fields:["name","value"]}},{xtype:"textfield",fieldLabel:IRm$.r1("L_ITEMNAME"),name:"fitemname",_fasl:1,allowBlank:!0,blankText:"Item name is required!",enableKeyEvents:!0,listeners:{keyup:function(e,t){13==t.keyCode&&this.commit_f.call(this)},scope:this}},{xtype:"textfield",fieldLabel:"HELPID",name:"fhelpuid",hidden:"Help"!=e.itemtype,allowBlank:!1,blankText:"HELP_ID is required!"},{xtype:"textfield",fieldLabel:"Group ID",name:"groupid",hidden:"Group"!=e.itemtype,allowBlank:!0},{xtype:"textfield",fieldLabel:"Dimension",name:"group_dim_name",blankText:"Item is required!",hidden:"MeasureGroup"!=e.itemtype},{fieldLabel:IRm$.r1("B_DESC"),xtype:"textarea",height:50,name:"fdesc"},{xtype:"fieldset",title:"Enable/Disable",name:"p_activate",hidden:"Group"!=e.itemtype||!e.uid,layout:{type:"vbox",align:"stretch"},items:[{xtype:"displayfield",name:"p_grp_desc",value:1==e.group_active?"Active":"Deactive"},{xtype:"container",layout:{type:"hbox",align:"stretch"},items:[{xtype:"button",iconCls:"icon-toolbar-activate",flex:1,text:"Activate",handler:function(){this.setGroupActive("activate")},scope:e},{xtype:"container",width:10},{xtype:"button",iconCls:"icon-toolbar-deprivation",flex:1,text:"Deprivate",handler:function(){this.setGroupActive("delete")},scope:e}]}]}]}]}],buttons:[{text:"Erase Group",name:"btn_erase",hidden:"Group"!=e.itemtype||!e.uid||0!=e.group_active,handler:function(){this.setGroupActive("erase")},scope:e},"->",{text:IRm$.r1("B_CONFIRM"),handler:function(){var e=this;e._proc?IG$.alertmsg(ig$.appname,IRm$.r1("M_SAVE_PROGRESS"),null,null,0,"warning"):(e._proc=1,e.commit_f())},scope:this},{text:IRm$.r1("B_CANCEL"),handler:function(){this.close()},scope:this}],listeners:{afterrender:function(e){e._init()}}}),IG$.makeItem.superclass.initComponent.apply(this,arguments)}}),IG$.makeItemEditor=$s.extend(IG$.makeItem,{viewmode:"edititem",commit_f:function(){var e,t,i=this,a=this,n=this.down("[name=fitemname]"),o=n.getValue(),r=this.down("[name=fdesc]").getValue(),d=this.down("[name=fhelpuid]").getValue(),l=this.down("[name=selitemtype]"),s="writecontent",p=this.down("[name=groupid]").getValue(),m="rename";if(i._itemtypes&&1<i._itemtypes.length&&(l.clearInvalid(),i.itemtype=l.getValue(),!i.itemtype))return l.markInvalid(IG$._markInvalid),void(i._proc=0);if(n.clearInvalid(),!o)return n.markInvalid(IG$._markInvalid),void(i._proc=0);switch(e={uid:i.uid,name:o,itemtype:i.itemtype,pid:i.parentuid,description:r,memo:"Help"==i.itemtype?d:null},i.itemtype){case"Group":s="usercontent",e={address:"/usergroup/"+o,action:m="update",gid:i.uid,description:r,groupid:p}}(t=new IG$._rpc$).init(a,{ack:s,payload:e,mbody:{option:m}},a,a.rs_processMakeMetaItem,function(){i._proc=0}),t.send()},initComponent:function(){var e=this;e.title=IRm$.r1("T_RENAME_ITEM",e.itemname),e.on("afterrender",function(){var e=this,t=e.down("[name=fitemname]"),i=e.down("[name=fdesc]"),a=e.down("[name=fhelpuid]"),n=e.down("[name=txttitle]"),o=e.down("[name=txtedittitle]"),r=e.down("[name=groupid]");n.setVisible(!1),o.setVisible(!0),t.setValue(e.itemname),i.setValue(e.description),a.setValue(e.memo),r.setValue(e.groupid),t.focus()},e),IG$.makeItemEditor.superclass.initComponent.apply(e,arguments)}});
IG$.pageParameter=function(t,e,i,a){var n=this;n.owner=t,n.uid=e,n.name=i,n.value=a,n.orig_value=a,n.$rel_params=[]},IG$.pageParameter.prototype={set:function(t){var e=this,i=e.owner.pobj;e.value=t,i&&i.$set_params&&i.$set_params(e)},get:function(){return this.value},val:function(t){if(void 0===t)return this.get();this.set(t)},validate:function(t){var e,i,a,n=this,l=n.owner.page_param_map,r=n.value;if(n.orig_value=r,n.$rel_params=[],r&&r.length)for(n.value.length,e=r.indexOf("${");-1<e&&!((i=r.indexOf("}",e+2))<0);)(a=r.substring(e+2,i))&&l[a]&&a!=n.name&&n.$rel_params.push(l[a]),e=i+1},set_param:function(t,e){var i,a,n,l=this.value,r="${"+t+"}",p="",o=0;if(l&&l.length){for(n=l.length,a=r.length,i=l.indexOf(r);-1<i&&(p=l.substring(o,i)+(e||""),o+=i+a,!((i=l.indexOf(r,i+a))+a<0)););o<n&&(p+=l.substring(o+n))}return p}},IG$.frameEvents=function(t){this.inherit=IG$.clEvents,this.inherit(t)},IG$.frameEvents.prototype=new IG$.clEvents,IG$.frameControl=function(t,e,i){var a,n,l,r,p,o,h,u,s,c=this;if(c.properties={visible:!0,border:0,bordercolor:"#e5e5e5",backgroundcolor:"#ffffff",padding:2},c.parentctrl=e,c.position={},c.layout=[],c.pname=e&&e.name?e.name:null,c.puid=e&&e.uid?e.uid:null,c.actionlist={},c._f_columns=[],t){if(c.uid=t.uid,c.type=t.type,s=t.pos,$.each("top;left;width;height;right;middle;bottom;percentwidth;percentheight".split(";"),function(t,e){s[e]&&(c.position[e]=Number(s[e]))}),r=t.properties)for(p in r)o=r[p],c.properties[p]=o;if(c.name=c.properties.Name,h=t.appl.actevents)for(a=0;a<h.length;a++){var d=h[a].uid,m=(h[a].name,h[a].actitem);for(c.actionlist[d]=[],n=0;n<m.length;n++)c.actionlist[d].push(m[n])}if((h=t.appl.xparam)&&h.length&&(c._xparam=h),h=t.appl.f_columns)for(c._f_columns=[],a=0;a<h.length;a++){var g=h[a];c._f_columns.push(g)}if((r=t.appl.item)&&(c.item=r,i.regReportContent.call(i,c.item)),u=t.wgt)for(a=0;a<u.length;a++)(l=new IG$.frameControl(u[a],c,i)).updatePropertyValue.call(l),c.layout.push(l),i&&(i.controls[l.uid]=l)}},IG$.frameControl.prototype={updatePropertyValue:function(t,e){for(var i,a,n=this,l={},r=new IG$.clControlItem(null,null,1,e).getControl(n.type.toLowerCase()),p=n.position,o=0;o<r.p.length;o++)l[r.p[o].name]=r.p[o];for(i in n.properties)if(l[i])switch(value=n.properties[i],l[i].datatype){case"boolean":value&&0<value.length&&(n.properties[i]="true"==value);break;case"number":value&&0<value.length&&(n.properties[i]=Number(value))}t&&(a=IG$.getControl(n.type,!1,!0),p.width=a.width,p.height=a.height)},measurePosition:function(t,e){var i={x:-1,y:-1,w:-1,h:-1},a=this.position;return a.percentwidth=void 0===a.percentwidth?null:a.percentwidth,a.percentheight=void 0===a.percentheight?null:a.percentheight,a.width=void 0===a.width?null:a.width,a.height=void 0===a.height?null:a.height,a.top=void 0===a.top?null:a.top,a.left=void 0===a.left?null:a.left,a.right=void 0===a.right?null:a.right,a.bottom=void 0===a.bottom?null:a.bottom,null!=a.left&&null!=a.right?(i.x=a.left,i.w=e.w-a.left-a.right):null!=a.left?(i.x=a.left,i.w=null!=a.percentwidth?(e.w-a.left)*a.percentwidth*.01:null!=a.width?a.width:-1):null!=a.right&&(i.w=null!=a.percentwidth?(e.w-a.right)*a.percentwidth*.01:null!=a.width?a.width:-1,i.x=e.w-i.w),null!=a.top&&null!=a.bottom?(i.y=a.top,i.h=e.h-a.top-a.bottom):null!=a.top?(i.y=a.top,i.h=null!=a.percentheight?(e.h-a.top)*a.percentheight*.01:null!=a.height?a.height:-1):null!=a.right&&(i.h=null!=a.percentheight?(e.h-a.right)*a.percentheight*.01:null!=a.height?a.height:-1,i.y=e.h-i.h),i},getXML:function(){var t,e,i=this,a=(i.actionlist,{uid:i.uid,name:i.name,type:i.type,pos:{},properties:{},appl:{item:null,actevents:[],f_columns:[]}}),n=i.position;for(t in $.each("top;left;width;height;right;middle;bottom;percentwidth;percentheight".split(";"),function(t,e){a.pos[e]=null==n[e]||isNaN(n[e])?"":""+n[e]}),i.properties)null!==i.properties[t]&&(a.properties[t]=""+i.properties[t]);for(t in i.item&&i.item.uid&&(a.appl.item=i.item),i.actionlist)if(i.actionlist[t]){for(var l={uid:t,name:i.actionlist[t].name,actitem:[]},r=0;r<i.actionlist[t].length;r++)l.actitem.push({uid:i.actionlist[t][r].uid,name:i.actionlist[t][r].name});a.appl.actevents.push(l)}if(i._f_columns)for(r=0;r<i._f_columns.length;r++)a.appl.f_columns.push(i._f_columns[r]);if(i._xparam&&(a.appl.xparam=i._xparam),i.layout&&0<i.layout.length)for(a.wgt=[],r=0;r<i.layout.length;r++)e=i.layout[r].getXML(),a.wgt.push(e);return a}},IG$.cdxml=function(t){this.content=t?t.content:{}},IG$.cdxml.prototype={regReportContent:function(t){for(var e=0;e<this.dashboardreport.length;e++)if(this.dashboardreport[e].uid==t.uid)return;this.dashboardreport.push(t)},parseContent:function(t){var e,i,a,n,l,r,p,o,h,u,s=this,c=s.content;if(s.tmpl=null,s.pobj=t,s.controls={},s.eventseq=0,s.events={},s._applActions={onload:null,ontimer:null},s.activescript="",s._funcNames=[],s.dashboardreport=[],s.page_params=[],s.page_param_map={},s.rcs=[],c){for(s.tmpl=c.tmpl,s.layout=[],s.autowidth=c.autowidth,s.autoheight=c.autoheight,s.vscroll=c.vscroll,s.hscroll=c.hscroll,s.width=c.width||800,s.height=c.height||600,s.minwidth=c.minwidth||500,s.minheight=c.minheight||500,s.cls=c.cls||"",s.background=c.background||"",s.title=c.title||"",c.wgt=c.wgt||[],i=c.wgt,y=0;y<i.length;y++)(r=new IG$.frameControl(i[y],null,s)).updatePropertyValue.call(r,void 0,s.pobj),s.layout.push(r),s.controls[r.uid]=r;if(s.activescript=c.activescript,s._condScript=c.conditionscript,t&&s.parseScriptFunc(),e=c.page_params){for(y=0;y<e.length;y++)h=e[y].uid||e[y].name,p=e[y].name,o=e[y].value,(u=new IG$.pageParameter(s,h,p,o)).type=e[y].type||"var",u.ctrltype=e[y].ctrltype,s.page_params.push(u),s.page_param_map[u.uid]=u;s.page_param_map.userid?s.page_param_map.userid.value=IG$.dlgLogin.logininfo.userid:((u=new IG$.pageParameter(s,"userid","userid",IG$.dlgLogin.logininfo.userid)).type="var",s.page_params.push(u),s.page_param_map[u.uid]=u)}if(e=c.actevents)for(var d,m,g,f,v,_,w,y=0;y<e.length;y++){for(d=e[y].uid,m=e[y].name,g=e[y].description,-1<d.indexOf("_")&&""!=(_=d.substring(d.indexOf("_")+1))&&0<_.length&&(s.eventseq=Math.max(s.eventseq,Number(_)+1)),v=[],f=e[y].actitem,a=0;a<f.length;a++)w=new IG$.frameEvents(f[a]),v.push(w),w.updateParamValue(s);s.events[d]={uid:d,name:m,description:g,actionlist:v}}if(e=c.appl_acts)for(y=0;y<e.length;y++){var $=e[y].uid,b=(e[y].name,e[y].actitem);for(s._applActions[$]=[],a=0;a<b.length;a++)s._applActions[$].push(b[a])}if(e=c.appl_data)for(s.applicationdata=[],y=0;y<e.length;y++){for(n=!1,l=e[y],a=0;a<s.applicationdata.length;a++)if(s.applicationdata[a].uid==l.uid){n=!0;break}0==n&&s.applicationdata.push(l)}}},parseScriptFunc:function(){ig$._scfunc=ig$._scfunc||0;var t=this,e=t.content.uid||"scfunc_"+ig$._scfunc++,i=Base64.decode(t.activescript);t.mainDynScript=new IG$.cDynScript("cls_"+e.replace("-","_"),"IG$.dyn_base"),t.mainDynScript.loadScript.call(t.mainDynScript,i),t.mainDynScript.preparePrototype.call(t.mainDynScript,t.controls,t.pobj),t._funcNames=t.mainDynScript.getFunctionList.call(t.mainDynScript)},getLayout:function(){var t,e=this,i={};if($s.apply(i,{autowidth:e.autowidth,autoheight:e.autoheight,vscroll:e.vscroll,hscroll:e.hscroll,width:e.width,height:e.height,minwidth:e.minwidth,minheight:e.minheight,title:e.title,cls:e.cls,background:e.background,wgt:[]}),e.layout&&0<e.layout.length)for(t=0;t<e.layout.length;t++)i.wgt.push(e.layout[t].getXML());return i},setLayout:function(t){var e,i,a,n=this,l=JSON.parse(t),r=!1;if(l&&(e=l.wgt))for(r=!0,n.layout=[],n.controls={},i=0;i<e.length;i++)(a=new IG$.frameControl(e[i],null,n)).updatePropertyValue.call(a),n.layout.push(a),n.controls[a.uid]=a;return r},getXML:function(){var t,e,i,a=this,n=a.events,l=a.content,r={uid:l.uid,name:l.name,nodepath:l.nodepath,type:l.type};for(t in a.tmpl&&a.tmpl.uid&&(r.tmpl=a.tmpl),i=a.getLayout(),r.autowidth=i.autowidth,r.autoheight=i.autoheight,r.vscroll=i.vscroll,r.hscroll=i.hscroll,r.width=i.width,r.height=i.height,r.minwidth=i.minwidth,r.minheight=i.minheight,r.cls=i.cls,r.title=i.title,r.background=i.background,r.wgt=i.wgt,r.activescript=a.activescript,r.actevents=[],$.each(n,function(t,e){for(var i={uid:t,name:e.name,description:e.description,actitem:[]},a=0;a<e.actionlist.length;a++)i.actitem.push(e.actionlist[a].getXML());r.actevents.push(i)}),r.appl_acts=[],a._applActions)if(a._applActions[t]){for(var p=a._applActions[t],o={uid:t,name:p.name,actitem:[]},h=0;h<p.length;h++)o.actitem.push({uid:p[h].uid,name:p[h].name,description:p[h].description});r.appl_acts.push(o)}for(r.page_params=[],h=0;h<a.page_params.length;h++)r.page_params.push({uid:a.page_params[h].uid,type:a.page_params[h].type,ctrltype:a.page_params[h].ctrltype,name:a.page_params[h].name,value:a.page_params[h].value});if(r.appl_data=[],a.applicationdata)for(h=0;h<a.applicationdata.length;h++)e=a.applicationdata[h],r.appl_data.push({nodepath:e.nodepath,lastupdatedate:e.lastupdatedate,memo:e.memo,name:e.name,type:e.type,uid:e.uid});return r}},IG$.pluginResults=function(t){this.resultmap={},t&&this.parse(t)},IG$.pluginResults.prototype={parse:function(t){this.resultmap=t||{}}};
IG$.__global=IG$.__global||{},IG$.$d={applyOption:function(t){var e=this;t.bt?e.rs_procRunDashboard(t.bt):t._ipcnt&&(e.applyParameters(),e.executeAction(e.framecontent._applActions.onload,{ctrl:null,ptr:e,event:"onload"})),e.bt=null},procRunDashboard:function(){var t,e,a,o=this,n=o.uid,l=($(".dashboard_cnt",o.body.dom),$(".dashboardview",o.body.dom)),r=window.bowser;n&&0<n.length&&(t=o._emode?o.getWidth():o.body.getWidth(),e=o._emode?o.getHeight():o.body.getHeight(),o.initialized=!0,$(l).empty(),r.msie&&0<t&&0<e&&(IG$.j$ext._w(l,t),IG$.j$ext._h(l,e)),o.bt&&o.bt.content?o.applyOption({bt:o.bt}):((a=new IG$._rpc$).init(o,{ack:"content",payload:{uid:n},mbody:{}},o,o.rs_procRunDashboard,null),a.send()))},rs_procRunDashboard:function(t){var e,a=this;a.setLoading(!1),a.framecontent=new IG$.cdxml(t),a.framecontent.parseContent(a),(e=a.framecontent.item)&&e.uid&&(a.uid=e.uid),a.fireEvent("meta_loaded",a,a.framecontent),a.parseEvents(t.content),a.layoutControls(),a.parseScript(t.content),a.applyParameters(),a.executeAction(a.framecontent._applActions.onload,{ctrl:null,ptr:a,event:"onload"})},showDummyInfo:function(t){var e,a=this,o=[{name:"Name",value:t.name},{name:"Type",value:t.type}],n=$("<ul class='dm-info'></ul>");for(a.dummyInfo.empty(),t.item&&o.push({name:"Bind",value:t.item.name}),e=0;e<o.length;e++)n.append($("<li><span class='dm-title'>"+o[e].name+": </span><span>"+o[e].value+"</span></li>"));var l=t.dummy.html.offset(),r=$(a.body.dom).offset();a.dummyInfo.css({left:l.left-r.left+5,top:l.top-r.top+5}),a.dummyInfo.show()},applyParameters:function(){var t,e,a,o,n,l=this;if($.each(l.framecontent.page_param_map,function(t,e){e.validate()}),l._ipcnt&&l._ipcnt.data)for(t=l._ipcnt.data,e=l.framecontent.page_param_map,a=0;a<t.length;a++)o=t[a].name,n=t[a].value,e[o]&&(e[o].value=n);l._ipcnt=null,$.each(l.framecontent.page_param_map,function(t,e){l.$set_params(e)})},$set_params:function(o){var t;o.$rel_params.length&&(o.value=o.orig_value,$.each(o.$rel_params,function(t,e){var a=o.set_param(e.name,e.val());o.value=a}),"ctrl"==o.type&&(t=this.ControlDict[o.uid.toLowerCase()])&&t.control.set("text",o.value))},parseEvents:function(t){var e,a,o,n,l,r,i=this,s=t.actevents;if(i.ActionEvents={},i.ApplicationActions={onload:null,ontimer:null},s)for(e=0;e<s.length;e++){for(o=s[e].uid,s[e].name,n=s[e].actitem||[],l=[],a=0;a<n.length;a++)r=new IG$.clEvents(n[a]),l.push(r);i.ActionEvents[o]=l}if(s=t.appl_acts)for(e=0;e<s.length;e++){var c=s[e].uid;s[e].name;i.ApplicationActions[c]=s[e].event}},layoutControls:function(t){var e,a,o,n,l,r,i=this,s=$(".dashboard_cnt",i.body.dom),c=$(".dashboardview",i.body.dom),p=c;t&&(i.framecontent=t),a=i.framecontent,i.ControlItems&&$.each(i.ControlItems,function(t,e){var a=e.control;a&&a.destroy&&a.destroy.call(a)}),i.ControlItems=[],i.ControlDict={},i.ControlDictNames={},i.RootControlItems=[],c.empty(),o=IG$.j$ext._w(s),n=IG$.j$ext._h(s),i.dsmode?(c.addClass("ig-ds-designmode"),i.dummyInfo=$("<div class='dummyinfo'></div>"),i.dummyInfo.appendTo(p),i.dummyInfo.hide(),i.dummyInfo.bind("click",function(){i.dummyInfo.fadeOut(1e3)}),i.sizeInfo=$("<div class='sizeinfo'></div>"),i.sizeInfo.appendTo(p),r=l=0,l=a.autowidth?o:a.width,r=a.autoheight?n:a.height,i.sizeInfo.width(l).height(r)):c.addClass("ig-ds-viewmode"),e={x:0,y:0,w:o,h:n},i.parseLayout(a.layout,c,e,null,i.RootControlItems),i.dsmode||$.each(i.ControlItems,function(t,e){var a=e.control;a&&(a.__ivp_=1,a.__ivp&&a.__ivp.call(a))}),i.validateSize("",e.w,e.h,null)},changeLayout:function(t){var e=t.measuredRect;this.validateSubSize(t,t.layouts,e.x,e.y,e.w,e.h)},parseScript:function(t){for(var e=this,a=(t.activescript,{}),o=0;o<e.ControlItems.length;o++)a[e.ControlItems[o].ctrlname]=e.ControlItems[o].control;e.mainDynScript=e.framecontent.mainDynScript,e.mainDynScript.preparePrototype.call(e.mainDynScript,a,e)},parseLayout:function(t,e,a,o,n){var l;if(t&&t.length)for(l=0;l<t.length;l++){var r=this.appendControl(t[l],e,a,o);r.layouts=[],t[l].layout.length&&this.parseLayout(t[l].layout,r.control.html,r.measuredRect,r,r.layouts),n.push(r)}},appendControl:function(e,t,a,o){var n,l,r,i=this,s=new IG$.clControlItem(e,o,i.dsmode,i),c={};s.dashboard=i,(s.parentcontrol=i).ControlItems.push(s),i.ControlDict[s.uid.toLowerCase()]=s,(i.ControlDictNames[s.name]=s).measurePosition(o,a.x,a.y,a.w,a.h);$("<div id='"+s.ctrlname+"'>");for(var p=0;p<s.control.p.length;p++)c[s.control.p[p].name]=s.control.p[p];for(n in s.property)if(c[n])switch(l=s.property[n],c[n].datatype){case"boolean":s.property[n]="true"==l||1==l;break;case"number":s.property[n]=Number(l)}return s.control.html.appendTo(t).css({position:"absolute"}),null!=s.control&&null!=s.control.html&&(s.control.layout=e,s.control.initDrawing()),s.control&&(s.control.ctrlEvtProc=i.ctrlEvtProcHandler,s.control.invalidate.call(s.control)),i.dsmode&&(r=s.initDesignerMode.call(s,e))&&r.bind({e_resize:function(t){t.stopPropagation(),t.stopImmediatePropagation(),i.dashboardEditor.dummyResized.call(i.dashboardEditor,e)},e_click:function(t){t.stopPropagation(),t.stopImmediatePropagation(),i.dashboardEditor.dummyFocused.call(i.dashboardEditor,e)}}),s},ctrlEvtProcHandler:function(t,e){var a=this.ctrl.dashboard;switch(t){case"magnifire":var o,n,l,r=e.ctrl,i=IG$.j$ext._w(r.control.html),s=IG$.j$ext._h(r.control.html);(l=r.measuredRect).w==i&&l.h==s?(o=$(".dashboardview",a.body.dom),r.control.html.css({top:0,left:0,width:o.clientWidth,height:o.clientHeight,zIndex:99}),(n=r.control).zoom=!0,n.invalidate.call(n)):(r.control.html.css({position:"absolute",top:l.y+l._py,left:l.x+l._py,height:l.h,width:l.w,zIndex:""}),r.control.zoom=!1,r.control.invalidate.call(r.control))}},executeAction:function(t,e){var a,o,n,l,r,i=this,s=[];if(i.ActionEvents&&t&&0<t.length){for(n=0;n<t.length;n++)if(a=t[n],i.ActionEvents[a.uid])for(o=i.ActionEvents[a.uid],l=0;l<o.length;l++)r=o[l],s.push(r);i.processRunEvents.apply(i,[s,e])}},processRunEvents:function(t,e){var a=this,o=arguments,o=Array.prototype.slice.call(o,1);a.executeEvents&&0<a.executeEvents.length?IG$.ShowError("Currently processing another job. Please wait while complete!"):(a.customLoad(!0),clearTimeout(a.executionTimer),a.executionTimer=setTimeout(function(){for(a.executeEvents=[],i=0;i<t.length;i++)a.executeEvents.push({event:t[i],args:o});$.each(a.ControlDict,function(t,e){e&&e.control&&e.control.commit&&e.control.commit.call(e.control)}),a.contEventProc.call(a,a)},100))},customLoad:function(t){var e,a,o=this;1==t?(a={msg:IRm$.r1("B_PROC")+" <button id='m-mec-loader'>"+IRm$.r1("B_PROC_CANCEL")+"</button>"},o.setLoading(a),e=$(o.rendermask),$("#m-mec-loader",e).bind("click",function(){o.cancelQuery.call(o)})):o.setLoading(!1,void 0,!0)},cancelQuery:function(){this.executeEvents=null,this.setLoading(!1)},contEventProc:function(e){if(0<e.executeEvents.length){var t=e.executeEvents.shift(),a=t.event,o=0,n=!0,l=t.args;try{a.condition_script&&(l.unshift(a.condition_script),n=e.mainDynScript.executeScript.apply(e.mainDynScript,l),e.mainDynScript.lastError&&(IG$.ShowError(e.mainDynScript.lastError),o=3)),!0===n?e.ctrlEvtProcs.call(e,t):1===n?e.ctrlEvtProcs.call(e,t,!0):o||0===n?(e.executeEvents=null,e.customLoad.call(e,!1),e.setLoading(!1),o=4):e.contEventProc(e)}catch(t){IG$.ShowError(IRm$.r1("E_D_EVNT",a.name)),setTimeout(function(){e.executeEvents=null,e.customLoad.call(e,!1),e.setLoading(!1)},10)}}else setTimeout(function(){e.customLoad.call(e,!1),e.setLoading(!1)},10)},updateEventValue:function(t){var e,a,o,n,l,r=this.framecontent.page_param_map;if((t.filtervalue=null,t.operator)&&("control"==(l=t.valuemode)?(n=this.ControlDict[t.valuefield.toLowerCase()])&&null!=(e=n.getSelectionData.call(n,t.valuefield))&&(t.filtervalue=e):"value"==l&&(e=[{code:t.valuetext}],t.filtervalue=e),e&&0<e.length))for(a=0;a<e.length;a++)(o=e[a].code)&&"{"==o.charAt(0)&&"}"==o.charAt(o.length-1)&&r[o=o.substring(1,o.length-1)]&&(o=r[o].get(),e[a].code=o)},procParamValue:function(t,e,a){var o,n;if(!e&&t&&t.values&&t.values.length)for(o=0;o<t.values.length;o++)t.values[o].name=t.name,this.procParamValueItem(t.values[o],e,a);else n=this.procParamValueItem(t,e,a);return n},procParamValueItem:function(t,e,a){var o,n,l,r,i,s=null,c=this.framecontent,p=a?a.resultmap:null,d=p?p[t.name]:null,u=t.maptype;if("var"==u)o=c.page_param_map[t.value],e?s=o?o.get():null:d&&o.set("dataset"==d.type?d:d.value);else if("ctrl"==u)if(t.value&&(o=this.ControlDict[t.value.toLowerCase()]),e)o&&o.control&&o.control.getSelectionData?(n=o.control.getSelectionData.call(o.control,t))&&0<n.length&&(s=n[0].code):o&&o.control&&(s=o.control.get("text"));else if(d)if("grid"==d.type)if(o.control.applyDataSet)o.control.applyDataSet.call(o.control,d);else{if(!d._headermap)for(d._headermap={},l=0;l<d.headers.length;l++)d._headermap[d.headers[l]]=l;void 0!==(i=d._headermap[o.ctrlname])&&d.data.length&&d.data[0].length>i&&(r=d.data[0][i]),o.control.set("text",r)}else o.control.set("text",d.value);else s=!1;return s},getInputParams:function(t){var e,a,o=[];if(t.params)for(e in t.params.iparams)a=t.params.iparams[e],o.push({uid:a.uid,name:a.name,value:this.procParamValue(a,!0)});return o},ctrlEvtProcs:function(t,c){var e,a,o,i=this,n=!1,l=-1,p=t.event,r=t.args;switch(p.purpose.toLowerCase()){case"onlinereport":for(var d,s,u=(p.item?p.item.uid:null)||null,h=0;h<i.ControlItems.length;h++)if((s=i.ControlItems[h]).applicationItem&&s.ctrlname==u){d=s;break}var m,g,v={source:"dashboard",params:i.getInputParams(p)};d?(m=d.control,d.property,n=!1,g=new IG$.callBackObj(i,function(t,e){}),m.eRun&&m.eRun.call(m,g,v)):l=1;break;case"valuelist":if(p.item&&p.item.uid)return(b=new IG$._rpc$).init(i,{ack:"olapservice",payload:{uid:p.item.uid,option:"valuelist"},mbody:{}},i,function(t){var o=this,e=t?IG$.parseValueList([t]):null,n=e&&e.length?e[0]:null;(n=n||{}).data=n.data||[],$.each(p.params.oparams,function(t,e){var a;"ctrl"==e.maptype&&e.value&&(a=o.framecontent.controls[e.value.toLowerCase()],rctrl=o.ControlDict[e.value.toLowerCase()],rctrl=rctrl?rctrl.control:null,a&&rctrl&&rctrl.loadData&&rctrl.loadData.call(rctrl,n))}),!0!==c&&o.contEventProc(o)},null),void b.send();l=1;break;case"execute_script":i.mainDynScript?p.script&&(r.unshift(p.script),a=i.mainDynScript.executeScript.apply(i.mainDynScript,r),i.mainDynScript.lastError?(IG$.ShowError(i.mainDynScript.lastError),l=3):2===a?n=!0:0==a&&(i.executeEvents=null,i.customLoad.call(i,!1),i.setLoading(!1),n=!0)):l=2;break;case"export":if(p.exp_tmpl&&p.exp_out){var f,y=i.getExportData(),w=i.framecontent.item?i.framecontent.item.name:"",b=new IG$._rpc$;switch(p.exp_out){case"excel":f="xls";break;case"word":f="doc";break;default:f=p.exp_out}w=(w=(w=w||"unnamed").replace(/\./g,"_")).replace(/ /g,""),w+="."+f,b.init(i,{ack:"print",payload:{uid:i.uid,type:"TMPL",filename:w,fonttype:"",utemplate:"T",tmplpage:p.exp_tmpl,jasper_filetype:p.exp_out},mbody:y},i,i.rexportToFile,null,w),b.send()}else l=2;break;case"servercall":p.jmodule&&p.jmethod?(n=!0,b=new IG$._rpc$,(o={}).data=i.getInputParams(p),b.init(i,{ack:"plugin",payload:{uid:i.uid,option:"exec",jmodule:p.jmodule,jmethod:p.jmethod},mbody:o,meta_type:"sysparams"},i,function(t){var e,a,o,n,l,r=0,i={},s=new IG$.pluginResults(t);if(s.resultmap)for(e in s.resultmap)if("grid"==s.resultmap[e].type)for(r=1,(a=s.resultmap[e])._headermap={},o=0;o<a.headers.length;o++)a._headermap[a.headers[o]]=o;for(e in p.params.oparams)0==this.procParamValue(p.params.oparams[e],!1,s)&&(i[e]=p.params.oparams[e]);if(r)for(e in s.resultmap)if("grid"==s.resultmap[e].type)for(o in r=1,n=(a=s.resultmap[e]).data[0],i)void 0!==a._headermap[o]&&((l={resultmap:{}}).resultmap[o]={value:n?n[a._headermap[o]]:""},this.procParamValue(p.params.oparams[o],!1,l));this._1_p(t,d,c)},function(){this.executeEvents=null,i.customLoad(!1)},d),b.send()):l=4;break;case"open_win":var _=p.item&&p.item.uid,I=p.params,x={},E=I.iparams&&I.iparams.target_window?I.iparams.target_window:null;E&&E.value&&E.type&&(_=i.procParamValue(I.iparams.target_window,!0)),_?(n=!0,x.data=i.getInputParams(p),(b=new IG$._rpc$).init(i,{ack:"helpcontent",payload:{uid:_},mbody:{option:"translate"}},i,function(t){var e,a,o,n,l,r=t[0];r&&"Dashboard"==r.type&&1==p.ispopup?(a=(e=r.attributes)&&e.attrb1||"800",o=e&&e.attrb2||"600",(n=new IG$.DashboardViewDlg({uid:r.uid,title:r.name,width:Number(a),height:Number(o),_ipcnt:x,callback:new IG$.callBackObj(i,function(t){i._1_p(null,null,c)})})).on("close_win",function(t,e){if("ID_OK"!=e)return i.executeEvents=null,i.customLoad.call(i,!1),void i.setLoading(!1);var o,n,a;t.framecontent&&t.framecontent.page_param_map&&(o=t.framecontent.page_param_map,n=i.framecontent.page_param_map,a=p.params.oparams,$.each(a,function(t,e){var a;e.maptype&&"var"==e.maptype&&(a=o[e.uid],n[e.uid]&&a&&n[e.uid].set(a.value))})),i._1_p.call(i,null,null,c)}),IG$.checkLogin(this,n)):((l=IG$.mainPanel)&&l.navigateApp.call(l,r.uid,r.type.toLowerCase(),r.name,r.nodepath,!1,r.writable,null,{_ipcnt:x}),i._1_p.call(i,null,null,c))},!1),b.send()):l=5;break;case"open_dlg":switch(n=!0,p.btntype){case"yesno":IG$.confirmMessages(p.dlgtitle,p.dlgmsg,function(t){i._1_p.call(i,null,null,c)},null,null,6);break;case"yesnocancel":IG$.confirmMessages(p.dlgtitle,p.dlgmsg,function(t){i._1_p.call(i,null,null,c)},null,null,14);break;default:IG$.alertmsg(p.dlgtitle,p.dlgmsg,function(){i._1_p.call(i,null,null,c)},null,2)}break;case"close":this.fireEvent("close_win",this,p.dlgresult||"ID_OK");break;case"update_params":case"upload_file":break;case"mapping":(I=p.params).iparams;var G,C,D,P,S=I.oparams,R={},L=i.getInputParams(p);for(h=0;h<L.length;h++)R[L[h].name]=L[h];for(G in S)D=S[G],(C=R[G])&&D.maptype&&D.value&&((P={resultmap:{}}).resultmap[D.name]={value:C.value},i.procParamValue(D,!1,P))}if(0==n&&l<0&&!0!==c)i.contEventProc(i);else if(-1<l){switch(l){case 1:e="Item not found";break;case 2:e="Script not loaded";break;case 3:e="Error on script execution";break;case 4:e="Service not found";break;case 5:e="Service parameter not configured correctly"}i.executeEvents=null,i.customLoad.call(i,!1),i.setLoading(!1),e&&IG$.ShowError(e)}else!0===c&&(i.executeEvents=null,i.customLoad.call(i,!1),i.setLoading(!1))},_1_p:function(t,e,a){!0!==a&&this.contEventProc(this)},stopEventProc:function(){this.executeEvents=null,this.customLoad.call(this,!1),this.setLoading(!1)},getExportData:function(){var n={items:[]};return $.each(this.ControlItems,function(t,e){var a,o=e.control;if(o)switch(a=o.ctrl.ctrlname||"",o.type){case"olapreport":o.viewer&&n.items.push(o.viewer.getExportData.call(o.viewer,{},"jasper",!1,!0,a));break;case"dashboard":o.viewer&&n.items.push({name:a,type:"dashboard",data:o.viewer.getExportData.call(o.viewer)});break;case"label":n.items.push({type:"text",name:a,data:o.get("text")})}}),n},validateSize:function(t,e,a,o){var n=this,l=$(".dashboard_cnt",n.body.dom),r=$(".dashboardview",n.body.dom),i=n.framecontent,s=IG$.j$ext._w(l),c=IG$.j$ext._h(l);i&&(e=0==i.autowidth&&0<i.width?i.width:i.minwidth>s?i.minwidth:s,a=0==i.autoheight&&0<i.height?i.height:i.minheight>c?i.minheight:c),IG$.j$ext._w(r,e),IG$.j$ext._h(r,a),l.css({overflowX:i&&i.hscroll?"auto":"hidden",overflowY:i&&i.vscroll?"auto":"hidden"}),n.validateSubSize(null,n.RootControlItems,0,0,e,a)},validateSubSize:function(t,e,a,o,s,c){var n,l,r,i,d=this,u={t:0,b:0,l:0,r:0},h=0,m={},g=0,v=!1;if(null!=t&&"panel"==t.ctrltype&&(l=t.property.padding||0,u={t:l,b:l,l:l,r:l}),s=s-u.l-u.r,c=c-u.t-u.b,t&&"panel"==t.ctrltype){if("border"==t.property.layout){for(n=0;n<e.length;n++)i=e[n],(m[i.property.region]=i).measurePosition(t,a,o,s,c);g=0,$.each(["north","south","east","west","center"],function(t,e){var a,o,n,l,r,i=m[e];if(i){switch(a=i.measuredRect,e){case"north":a.x=0,a.y=g,a.w=s,a.h-=g;break;case"south":a.x=0,a.y=c-g-a.h,a.w=s,a.h-=g;break;case"east":a.x=s-a.w,a.y=g,a.h=c-g,m.north&&(a.y=g+m.north.measuredRect.h,a.h-=m.north.measuredRect.h),m.south&&(a.h-=m.south.measuredRect.h);break;case"west":a.x=0,a.y=g,a.h=c-g,m.north&&(a.y=g+m.north.measuredRect.h,a.h-=m.north.measuredRect.h),m.south&&(a.h-=m.south.measuredRect.h);break;case"center":a.x=0,a.y=g,a.w=s,a.h=c-g,m.north&&(a.y=g+m.north.measuredRect.h,a.h-=m.north.measuredRect.h),m.south&&(a.h-=m.south.measuredRect.h),m.west&&(a.x=m.west.measuredRect.w,a.w-=m.west.measuredRect.w),m.east&&(a.w-=m.east.measuredRect.w)}i.control.html.css({position:"absolute",top:a.y+u.t,left:a.x+u.l,height:a.h-u.t-u.b,width:a.w-u.l-u.r}),null!=i.control&&i.control.invalidate.call(i.control),i.layouts&&0<i.layouts.length&&(l=i.measuredRect.x,r=i.measuredRect.y,o=i.measuredRect.w,n=i.measuredRect.h,"panel"==i.ctrltype&&(n-=i.control.titleheight),d.validateSubSize.call(d,i,i.layouts,l,r,o,n))}}),v=!0}else if("hbox"==t.property.layout||"vbox"==t.property.layout){var f=t.property.layout,y=0,w=0,b=0,_=0;for(th=0,padding=0,gap=0,align=t.property.align||"",void 0!==t.property.padding&&(padding=Number(t.property.padding),isNaN(padding)&&(padding=0)),y=padding,void 0!==t.property.gap&&(gap=Number(t.property.gap),isNaN(gap)&&(gap=0)),n=0;n<e.length;n++)i=e[n],p=i.position,i.measurePosition(t,a,o,s,c),null!=p.percentwidth?w+=p.percentwidth:null!=p.width&&(_+=p.width),null!=p.percentheight?b+=p.percentheight:null!=p.height&&(th+=p.height);for(n=0;n<e.length;n++)i=e[n],p=i.position,r=i.measuredRect,"hbox"==f?(r.x=y,r.y=t.control.titleheight+padding,r.w=null!=p.width?p.width:null!=p.percentwidth?(s-_-2*padding-(1<e.length?gap*(e.length-1):0))*p.percentwidth/w:r.w,y+=r.w+gap,"stretch"==align?r.h=c-t.control.titleheight-2*padding:"center"==align&&(rec.y=(c-t.control.titleheight-2*padding-r.h)/2)):"vbox"==f&&(r.x=padding,r.y=y+(0==n?t.control.titleheight:0),r.h=null!=p.height?p.height:null!=p.percentheight?(c-th-2*padding-(1<e.length?gap*(e.length-1):0))*p.percentheight/b:r.h-gap/2-padding/e.length,"stretch"==align?r.w=s-2*padding:"center"==align&&(r.x=(s-2*padding-r.w)/2),y+=r.h+gap+(0==n?t.control.titleheight:0)),cstr=i.control.html,$ctrl=d.dsmode?cstr.css({position:"absolute",top:r.y+u.t,left:r.x+u.l,height:r.h,width:r.w}):(t.control.move_html(cstr),cstr.css({position:"absolute",top:r.y,left:r.x,height:r.h,width:r.w})),null!=i.control&&i.control.invalidate.call(i.control),i.layouts&&0<i.layouts.length&&(plx=r.x,ply=r.y,plw=r.w,plh=r.h,null!=i&&"panel"==i.ctrltype&&(plh-=i.control.titleheight),d.validateSubSize(i,i.layouts,plx,ply,plw,plh));v=!0}}else if(t&&"tabpanel"==t.ctrltype){for(t.control.loadHeader.call(t.control,e),h=t.controls.getTabHeight.call(t.controls),n=0;n<e.length;n++){(i=e[n]).measuredRect={x:0,y:0,w:s,h:c,_px:a,_py:o},(r=i.measuredRect).y+=h,r.h-=h,cstr=i.control.html,$ctrl=cstr.css({position:"absolute",top:r.y+u.t,left:r.x+u.l,height:r.h-u.t-u.b,width:r.w-u.l-u.r}),null!=i.control&&i.control.invalidate.call(i.control),i.layouts&&0<i.layouts.length&&(plx=r.x,ply=r.y,plw=r.w,plh=r.h,d.validateSubSize(i,i.layouts,plx,ply,plw,plh)),n==t.control.activeIndex?i.controls.html.show():i.controls.html.hide()}v=!0}if(!v)for(n=0;n<e.length;n++)(i=e[n]).measurePosition(t,a,o,s,c),cstr=i.control.html,r=i.measuredRect,$ctrl=t&&"panel"==t.ctrltype?(i.measuredRect.y+=t.control.titleheight,cstr=i.control.html,d.dsmode?cstr.css({position:"absolute",top:r.y+u.t,left:r.x+u.l,height:r.h-u.t-u.b,width:r.w-u.l-u.r}):(t.control.move_html(cstr),cstr.css({position:"absolute",top:r.y,left:r.x,height:r.h,width:r.w}))):cstr.css({position:"absolute",top:r.y+u.t,left:r.x+u.l,height:r.h-u.t-u.b,width:r.w-u.l-u.r}),null!=i.control&&i.control.invalidate.call(i.control),i.layouts&&0<i.layouts.length&&(plx=r.x,ply=r.y,plw=r.w,plh=r.h,i&&"panel"==i.ctrltype&&(plh-=i.control.titleheight),d.validateSubSize(i,i.layouts,plx,ply,plw,plh))},disposeContent:function(t){var e=$(".dashboardview",t.body.dom);if(t.ControlItems){for(var a=t.ControlItems.length-1;0<=a;a--)t.ControlItems[a]&&(t.ControlItems[a].disposeContent(t.ControlItems[a]),delete t.ControlItems[a]);t.ControlItems=null}e&&$(e).empty()},afterrender:function(t){!t.initialized&&t.uid&&0<t.uid.length&&t.procRunDashboard()},resize:function(t,e,a,o,n){t.validateSize.call(t,e,a,null)}},IG$.DashboardView=$s.extend(IG$.v$pnl,{layout:"fit",iconCls:"icon-doc-dashboard",entryLogin:function(t){t.procRunDashboard.call(t)},commitCode:function(){return!0},refreshCode:function(){this.dashboardEditor.refreshControl.call(this.dashboardEditor),this.layoutControls()},initComponent:function(){$s.apply(this,{hiddenPkgs:[],_emode:1,ActionEvents:{},ControlDict:{},ControlDictNames:{},ControlItems:[],RootControlItems:[],initialized:!1,refreshmode:"F",closable:!0,autoScroll:!1,collapseFirst:!1,items:[{xtype:"container",html:"<div class='dashboard_cnt'><div class='dashboardview'></div></div>"}]}),IG$.DashboardView.superclass.initComponent.call(this)},applyOption:IG$.$d.applyOption,procRunDashboard:IG$.$d.procRunDashboard,rs_procRunDashboard:IG$.$d.rs_procRunDashboard,showDummyInfo:IG$.$d.showDummyInfo,applyParameters:IG$.$d.applyParameters,parseEvents:IG$.$d.parseEvents,layoutControls:IG$.$d.layoutControls,changeLayout:IG$.$d.changeLayout,parseScript:IG$.$d.parseScript,parseLayout:IG$.$d.parseLayout,appendControl:IG$.$d.appendControl,ctrlEvtProcHandler:IG$.$d.ctrlEvtProcHandler,executeAction:IG$.$d.executeAction,processRunEvents:IG$.$d.processRunEvents,customLoad:IG$.$d.customLoad,cancelQuery:IG$.$d.cancelQuery,contEventProc:IG$.$d.contEventProc,updateEventValue:IG$.$d.updateEventValue,procParamValue:IG$.$d.procParamValue,procParamValueItem:IG$.$d.procParamValueItem,getInputParams:IG$.$d.getInputParams,ctrlEvtProcs:IG$.$d.ctrlEvtProcs,rexportToFile:IG$.reportbase$.rexportToFile,_1_p:IG$.$d._1_p,stopEventProc:IG$.$d.stopEventProc,getExportData:IG$.$d.getExportData,validateSize:IG$.$d.validateSize,validateSubSize:IG$.$d.validateSubSize,$set_params:IG$.$d.$set_params,listeners:{afterrender:IG$.$d.afterrender,resize:IG$.$d.resize}}),IG$.DashboardViewDlg=$s.extend($s.window,{modal:!0,layout:"fit",closable:!0,resizable:!1,width:600,height:500,confirmSettings:function(){this.callback&&this.callback.execute(["ok",this]),this.close()},initComponent:function(){var t=this;t.on("close",function(){t._ignore_close||t.fireEvent("close_win",t.dmain,"CLOSE")}),$s.apply(this,{items:[],listeners:{afterrender:function(t){var a=this;a.dmain=new IG$.DashboardView({uid:a.uid,closable:!0,header:!1,border:0,_ipcnt:a._ipcnt}),a.dmain.on("meta_loaded",function(t,e){e.title&&a.setTitle(e.title)}),a.dmain.on("close_win",function(){a._ignore_close=!0,setTimeout(function(){a.close()},10)}),a.add(a.dmain)}}}),IG$.DashboardViewDlg.superclass.initComponent.apply(this,arguments)}});
IG$.dlgCellConfig=$s.extend($s.window,{modal:!0,region:"center",layout:{type:"fit",align:"stretch"},closable:!1,resizable:!1,width:490,height:520,sheetoption:null,callback:null,defaults:{bodyStyle:"padding:5px"},_confirm:function(){var e,t,o,a=this,i=a.item||null,l=a.record||null;i&&l&&(e=a.down("[name=cb_sortdir]").getGroupValue(),a.down("[name=cb_sorttype]"),t=a.down("[name=cb_sorttype]").getGroupValue(),o=a.item.itemtype,a.sheetoption&&a.sheetoption.model.sheet_formula,l.set("sortorder",""==e?null:e),l.set("memo",""==t?null:t),l.set("aggrfunc",a.down("[name=aggrfunc]").getValue()),l.set("disp_title",a.down("[name=disp_title]").getValue()),l.set("hidecolumn",a.down("[name=hidecolumn]").getValue()),l.set("timeformat",a.down("[name=timeformat]").getValue()),"Measure"!=o&&"FormulaMeasure"!=o&&"MeasureGroup"!=o||l.set("activeformula",null)),a.callback&&a.callback.execute(),a.close()},init_f:function(){var e=this;if(e.formulas=[],e.item){var t,o,a=e.item.sortorder||"",i=e.down("[name=optsortdir]"),l=e.item.memo||"",n=e.down("[name=optsorttype]"),r=e.down("[name=aggrfunc]"),s=e.down("[name=disp_title]"),m=e.down("[name=timeformat]"),u=e.down("[name=hidecolumn]");e.item.itemtype;if(i.setValue({cb_sortdir:[a]}),n.setValue({cb_sorttype:[l]}),r.setValue(e.item.aggrfunc||""),s.setValue(e.item.disp_title||""),m.setValue(e.item.timeformat||""),u.setValue(e.item.hidecolumn),e.sheetoption&&e.sheetoption.model.sheet_formula){for(o=e.sheetoption.model.sheet_formula,t=0;t<o.length;t++)o[t].baseuid==e.item.uid&&e.formulas.push(o[t]);e.down("[name=grd_formula]").store.loadData(e.formulas)}}},editFormula:function(e){var t=this,a=t.sheetoption.model.sheet_formula,i=t.item;dlg=e?new IG$.dlgFormulaConfig({rec:e,sheetoption:t.sheetoption,uitem:i}):new IG$.dlgFormulaSelector({baseconfig:t,sheetoption:t.sheetoption,formulas:a,uitem:i,pselect:e,callback:new IG$.callBackObj(t,function(e){for(var t=a,o=t.length-1;0<=o;o--)t[o].baseuid==i.uid&&t.splice(o,1);for(o=0;o<e.length;o++)t.push(e[o]);this.down("[name=grd_formula]").store.loadData(e)})}),IG$.checkLogin(t,dlg)},initComponent:function(){var m=this,e=m.item;e&&e.itemtype;$s.apply(this,{title:IRm$.r1("T_METRIC_SETTING"),items:[{xtype:"panel",layout:"anchor",autoScroll:!0,defaults:{anchor:"100%"},items:[{xtype:"fieldset",title:IRm$.r1("L_SORT_SEL"),layout:"anchor",defaults:{anchor:"100%"},items:[{xtype:"radiogroup",name:"optsortdir",fieldLabel:IRm$.r1("L_SORT_ORD"),plain:!0,items:[{boxLabel:IRm$.r1("B_DEFAULT"),name:"cb_sortdir",inputValue:"",checked:!0},{boxLabel:IRm$.r1("B_ASC"),name:"cb_sortdir",inputValue:"asc"},{boxLabel:IRm$.r1("B_DSC"),name:"cb_sortdir",inputValue:"desc"}]},{xtype:"radiogroup",name:"optsorttype",fieldLabel:IRm$.r1("L_SORT_TP"),plain:!0,items:[{boxLabel:IRm$.r1("B_DEFAULT"),name:"cb_sorttype",inputValue:"",checked:!0},{boxLabel:IRm$.r1("B_STRING"),name:"cb_sorttype",inputValue:"VARCHAR"},{boxLabel:IRm$.r1("B_NUMERIC"),name:"cb_sorttype",inputValue:"NUMBER"}]}]},{xtype:"fieldset",title:IRm$.r1("L_OTHER_OPTION"),layout:"anchor",$w:400,defaults:{anchor:"100%",$w:400},items:[{xtype:"textfield",name:"disp_title",fieldLabel:IRm$.r1("L_DISP_TITLE")},{xtype:"checkbox",name:"hidecolumn",fieldLabel:IRm$.r1("L_COL_VIS"),boxLabel:IRm$.r1("B_HIDE")},{xtype:"textfield",name:"timeformat",fieldLabel:IRm$.r1("L_TIME_FMT")},{xtype:"displayfield",value:IRm$.r1("L_TIME_FMT_DSC")}]},{xtype:"fieldset",title:IRm$.r1("L_AGGR"),layout:"anchor",hidden:"Metric"!=m.item.type||"mea"!=m.loc,defaults:{anchor:"100%"},items:[{xtype:"combobox",name:"aggrfunc",fieldLabel:IRm$.r1("L_FUNC"),displayField:"name",valueField:"value",queryMode:"local",editable:!1,store:{xtype:"store",fields:["name","value"],data:[{name:"Not Use",value:""},{name:"Sum values",value:"SUM"},{name:"Count rows",value:"COUNT"},{name:"Distinct count",value:"COUNT_DISTINCT"},{name:"Minimum",value:"MIN"},{name:"Maximum",value:"MAX"},{name:"Average",value:"AVG"}]}}]},{xtype:"fieldset",title:IRm$.r1("L_FORMULA"),layout:"fit",height:160,items:[{xtype:"gridpanel",border:0,name:"grd_formula",bbar:[{text:"Config Formula",handler:function(){this.editFormula()},scope:this}],store:{xtype:"store",fields:["title","expression","baseuid","fid"]},columns:[{text:"Name",flex:1,dataIndex:"title"},{text:"Expression",flex:1,dataIndex:"expression"},{xtype:"actioncolumn",width:50,items:[{iconCls:"icon-grid-config",tooltip:IRm$.r1("L_EDIT"),handler:function(e,t,o){var a=e.store.getAt(t);this.editFormula(a)},scope:this},{iconCls:"icon-grid-delete",tooltip:"Delete item",handler:function(e,t,o){var a,i=e.store,l=i.getAt(t),n=m.sheetoption.model.sheet_formula,r=l.get("baseuid"),s=l.get("fid");for(i.removeAt(t),a=0;a<n.length;a++)if(n[a].baseuid==r&&n[a].fid==s){n.splice(a,1);break}}}]}]}]}]}],buttons:["->",{text:IRm$.r1("B_CONFIRM"),handler:function(){this._confirm()},scope:this},{text:IRm$.r1("B_CANCEL"),handler:function(){this.close()},scope:this}],listeners:{afterrender:function(){this.init_f()}}}),IG$.dlgCellConfig.superclass.initComponent.apply(this,arguments)}});
IG$.metricSetting=$s.extend($s.window,{modal:!0,region:"center",layout:{type:"fit",align:"stretch"},closable:!1,resizable:!1,width:480,height:430,_confirm:function(){var e=this;if(e.item){var t,a=e.down("[name=cb_sortdir]").getGroupValue(),n=(e.down("[name=cb_sorttype]"),e.down("[name=cb_sorttype]").getGroupValue()),i=e.down("[name=optstyle]"),o=e.down("[name=optremoveblank]"),l=e.down("[name=isdatetype]"),d=e.down("[name=dateformat]"),m=IG$.majorDateformat,s="";for(e.item.sortorder=""==a?null:a,e.item.sorttype=""==n?null:n,e.item.removeblank=o.getValue(),e.item.stylename=i.getValue(),e.item.isdatetype=l.getValue(),e.item.dateformat=d.getValue(),t=0;t<m.length;t++)1==e.down("[name=datediv_"+m[t].name+"]").getValue()&&(s=""==s?m[t].name:s+";"+m[t]);e.item.dateitems=s,e.item.datecustom=e.down("[name=customdatetype]").getValue()}e.callback&&e.callback.execute(e.item),e.close()},init_f:function(){var e=this;e.formulas=[],e.item&&e.applyItemInfo()},applyItemInfo:function(){var e,t,a=this,n=a.item.sortorder||"",i=a.down("[name=optsortdir]"),o=a.item.sorttype||"",l=a.down("[name=optsorttype]"),d=a.down("[name=optstyle]"),m=a.down("[name=optremoveblank]"),s=a.down("[name=isdatetype]"),u=a.down("[name=dateformat]");IG$.majorDateformat;if(i.setValue({cb_sortdir:[n]}),l.setValue({cb_sorttype:[o]}),m.setValue(a.item.removeblank||!1),s.setValue(a.item.isdatetype||!1),u.setValue(a.item.dateformat||""),d.setValue(a.item.stylename||""),a.item.dateitems)for(t=a.item.dateitems.split(";"),e=0;e<t.length;e++)a.down("[name=datediv_"+t[e]+"]").setValue(!0);a.down("[name=customdatetype]").setValue(a.item.datecustom||"")},changeDateFormat:function(){this.down("[name=dateformat]").setValue("")},initComponent:function(){var e,t=this,a=[];if(t.title=IRm$.r1("T_METRIC_SETTING"),a.push({name:"-Item Default-",value:""}),t.styles&&0<t.styles.length)for(e=0;e<t.styles.length;e++)a.push({name:t.styles[e].name,value:t.styles[e].name});$s.apply(t,{bodyStyle:"padding:5px; background: #ffffff",border:0,items:[{xtype:"panel",layout:"anchor",padding:"5 5",border:0,autoScroll:!0,defaults:{anchor:"100%"},items:[{xtype:"fieldset",title:"Sorting",layout:"anchor",padding:"0 5",defaults:{anchor:"100%"},items:[{xtype:"radiogroup",name:"optsortdir",fieldLabel:"Sort Direction",padding:"0 5",plain:!0,items:[{boxLabel:"Default",name:"cb_sortdir",inputValue:"",checked:!0},{boxLabel:"Ascending",name:"cb_sortdir",inputValue:"asc"},{boxLabel:"Descending",name:"cb_sortdir",inputValue:"desc"}]},{xtype:"radiogroup",name:"optsorttype",fieldLabel:"Sort Type",padding:"0 5",plain:!0,items:[{boxLabel:"Default",name:"cb_sorttype",inputValue:"",checked:!0},{boxLabel:"String",name:"cb_sorttype",inputValue:"VARCHAR"},{boxLabel:"Numeric",name:"cb_sorttype",inputValue:"NUMBER"}]}]},{xtype:"fieldset",title:"Style",layout:"anchor",padding:"3 5",defaults:{anchor:"100%"},items:[{xtype:"combobox",name:"optstyle",fieldLabel:"Base style",queryMode:"local",displayField:"name",valueField:"value",editable:!1,autoSelect:!0,store:{xtype:"store",fields:["name","value"],data:a}}]},{xtype:"fieldset",title:"Other options",layout:"anchor",padding:"3 5",defaults:{anchor:"100%"},items:[{xtype:"checkbox",name:"optremoveblank",boxLabel:"Ignore blank value"},{xtype:"checkbox",name:"isdatetype",boxLabel:"Date type field",listeners:{change:function(e,t,a,n){var i=this,o=e.getValue(),l=i.down("[name=datedivision]"),d=i.down("[name=customdatetypecontainer]"),m=i.down("[name=datediv_CUSTOM]");l.setVisible(o),1==o&&1==m.getValue()?d.setVisible(!0):d.setVisible(!1)},scope:this}},{xtype:"fieldcontainer",fieldLabel:"Date format",layout:{type:"hbox",align:"stretch"},items:[{xtype:"textfield",name:"dateformat",flex:1},{xtype:"button",text:"Example",menu:{items:[{text:"2001.07.04 AM 12:08:56",value:"yyyy.MM.dd a HH:mm:ss",handler:function(){t.down("[name=dateformat]").setValue(this.value)}},{text:"2001-07-04 AM 12:08:56",value:"yyyy-MM-dd a HH:mm:ss",handler:function(){t.down("[name=dateformat]").setValue(this.value)}},{text:"Wed, Jul 4, '01",value:"EEE, MMM d, ''yy",handler:function(){t.down("[name=dateformat]").setValue(this.value)}},{text:"20010704120856",value:"yyyyMMddHHmmss",handler:function(){t.down("[name=dateformat]").setValue(this.value)}}]}}]}]},{fieldLabel:IRm$.r1("L_GROUP_LEVEL"),name:"datedivision",hidden:!0,xtype:"checkboxgroup",columns:3,plain:!0,items:[{boxLabel:IRm$.r1("B_YEAR"),name:"datediv_YYYY",inputValue:"YYYY"},{boxLabel:IRm$.r1("B_QUARTER"),name:"datediv_QUARTER",inputValue:"QUARTER"},{boxLabel:IRm$.r1("B_MONTH"),name:"datediv_MM",inputValue:"MM"},{boxLabel:IRm$.r1("B_DAY"),name:"datediv_DD",inputValue:"DD"},{boxLabel:IRm$.r1("B_WEEKMONTH"),name:"datediv_WM",inputValue:"WM"},{boxLabel:IRm$.r1("B_WEEK"),name:"datediv_WEEK",inputValue:"WEEK"},{boxLabel:IRm$.r1("B_AMPM"),name:"datediv_AMPM",inputValue:"AMPM"},{boxLabel:IRm$.r1("B_HOUR"),name:"datediv_HH",inputValue:"HH"},{boxLabel:IRm$.r1("B_MINUTE"),name:"datediv_MI",inputValue:"MI"},{boxLabel:IRm$.r1("B_CUSTOM"),name:"datediv_CUSTOM",inputValue:"CUSTOM",listeners:{change:function(e,t,a,n){var i=e.getValue();this.down("[name=customdatetypecontainer]").setVisible(1==i)},scope:this}}]},{xtype:"fieldcontainer",fieldLabel:IRm$.r1("B_CUSTOM"),name:"customdatetypecontainer",hidden:!0,layout:{type:"hbox",align:"stretch"},items:[{xtype:"textfield",name:"customdatetype",flex:1},{xtype:"button",text:"Example",menu:{items:[{text:"2001.07.04 AM 12:08:56",value:"yyyy.MM.dd a HH:mm:ss",handler:function(){t.down("[name=customdatetype]").setValue(this.value)}},{text:"2001-07-04 AM 12:08:56",value:"yyyy-MM-dd a HH:mm:ss",handler:function(){t.down("[name=customdatetype]").setValue(this.value)}},{text:"Wed, Jul 4, '01",value:"EEE, MMM d, ''yy",handler:function(){t.down("[name=customdatetype]").setValue(this.value)}},{text:"20010704120856",value:"yyyyMMddHHmmss",handler:function(){t.down("[name=customdatetype]").setValue(this.value)}}]}}]}]}],buttons:["->",{text:IRm$.r1("B_CONFIRM"),handler:function(){this._confirm()},scope:this},{text:IRm$.r1("B_CANCEL"),handler:function(){this.close()},scope:this}],listeners:{afterrender:function(){this.init_f()}}}),IG$.metricSetting.superclass.initComponent.apply(this,arguments)}});
IG$.c$pivot=$s.extend($s.gridpanel,{border:0,initComponent:function(){var m=this,G=m.ptr_p;$s.apply(this,{hideHeaders:!0,store:{xtype:"store",fields:["name","nodepath","li","activeformula","itemtype","memo","sortorder","type","uid","iupd","disp_title","hidecolumn","timeformat","aggrfunc","iconcls","lname","ispageitem"]},viewConfig:{plugins:{ptype:"gridviewdragdrop",ddGroup:"_I$RD_G_"},__ing:1,listeners:{beforedrop:function(e,t,o,i,n){var r,a,l,s,c,d,p,m,u,h,g,_,f,v,w=!1,y=o?o.data.li:-1,b=!1,I=(G.reportmode,G.down("[name=bcluster]").getValue()),x=0,C=this.panel,R=G.down("[name=dataquerymode]").getValue();for(t.copy=!t.view.__ing,l=C.location,r=o?C.store.indexOf(o):0,"after"==i&&r++,m="rc"==l||"rm"==l,p=0;p<t.records.length;p++){if(a=t.records[p],b=!1,m)g=["pivotgrid_row","pivotgrid_rpt_col","pivotgrid_rpt_mea"],$.each(g,function(e,t){for(var o=G.down("[name="+t+"]").store.data.items,i=0;i<o.length;i++)if(trec=o[i],trec.get("uid")==a.get("uid")){b=!0;break}if(1==b)return!1});else if("M_DATA"==R?(g=["pivotgrid_row"],_=["pivotgrid_col","pivotgrid_mea","pivotgrid_cls"]):g=["pivotgrid_row","pivotgrid_col","pivotgrid_mea","pivotgrid_cls"],$.each(g,function(e,t){var o,i=G.down("[name="+t+"]").store.data.items;if("pivotgrid_cls"!=t||I){for(o=0;o<i.length;o++)if(i[o].get("uid")==a.get("uid")){b=!0;break}return 1!=b&&void 0}}),_)for(d=0;d<_.length;d++)for(c=(v=(f=G.down("[name="+_[d]+"]")).store.data.items).length-1;0<=c;c--)v[c].get("uid")==a.get("uid")&&f.store.remove(v[c]);if(a&&0==b)switch("link"==(s=(u={type:(h=a.data).type,rawtype:h.rawtype,uid:h.uid,name:h.name,address:h.address,nodepath:h.nodepath,lname:h.lname}).type.toLowerCase())&&(s=u.rawtype?u.rawtype.toLowerCase():null),s){case"measure":case"measuregroup":case"formulameasure":case"chartmeasure":case"metric":case"measuregroupdimension":case"tabdimension":case"custommetric":case"groupfield":case"hierarchy":case"udg":u.location=l,u.li=y,u.iconcls=IG$.get_metatype_icon(s,u),u=this.store.insert(r+x++,u),G.postDropItem.call(G,u.location,u.li,m)}else a&&0==t.copy&&("link"==(s=(h=a.data).type.toLowerCase())&&(s=h.rawtype?h.rawtype.toLowerCase():null),w="datemetric"!=s,"m"!=l&&"rm"!=l||"measure"==s||h.aggrfunc?!h.aggrfunc||"c"!=l&&"rc"!=l&&"r"!=l&&"rr"!=l||a.set("aggrfunc",""):a.set("aggrfunc","COUNT"),G.postDropItem.call(G,h.location,h.li,m))}return w},drop:function(e,t,o,i){var n=!1;return 0==t.copy&&o&&(t.records[0].get("li"),o&&this.panel.store.indexOf(o),"after"==i&&0,n=!1),n}}},columns:[{text:"",dataIndex:"iconcls",menuDisabled:!0,width:30,renderer:function(e,t,o,i,n,r){return"<div class='igc_g_icon "+e+"' title='"+(o.get("nodepath")||"")+"'></div>"}},{dataIndex:"name",flex:1,renderer:function(e,t,o,i,n,r){var a=o.get("type").toLowerCase(),l=[];"link"==a&&(a=(o.get("rawtype")||a).toLowerCase());var s=o.get("aggrfunc"),c="M_DATA"==G.down("[name=dataquerymode]").getValue(),d=("metric"==a||"custommetric"==a||"udg"==a)&&(c||"rm"==m.location||"m"==m.location||s),p=o.get("hidecolumn")?"color:#C7C7C7":"";return l.push("<div class='igc-pivot-field' style='"+p+"' title='"+(o.get("nodepath")||"")+"'>"),l.push(o.get("lname")||o.get("name")),l.push(d?"<div class='igc-aggr-sel'><div class='sel-icon'></div><span>"+(s?s.toLowerCase():"")+"</span></div>":""),l.push("</div>"),l.join("")}},{xtype:"actioncolumn",width:40,items:[{iconCls:"icon-grid-config",tooltip:"Config Item",handler:function(e,t,o){var i,n=e.store.data.items[t];e.__loc||(e=e.ownerCt),n.get("uid")&&("link"==(i=n.get("type").toLowerCase())&&(i=(n.get("rawtype")||i).toLowerCase()),"hierarchy"!=i&&"hierarchymetric"!=i&&(n.set("iupd",!0),G.beginItemCfg.call(G,n,e.__loc,e.__loc1)))},scope:this},{iconCls:"icon-grid-delete",tooltip:"Remove Item",handler:function(e,t,o){var i=e.store.data.items[t];e.__loc||(e=e.ownerCt),i.data.uid&&(e.store.remove(i),G.postDropItem.call(G,i.data.location,i.data.li,e.__loc1))},scope:this}]}],listeners:{afterrender:function(e){var o=e,i=$(e.el.dom);i.on("click",".igc-aggr-sel",function(e){e.stopPropagation();var t=o.getSelectionModel().selected;t&&t.length&&G.showAggr.call(G,t.items[0],i,this)})},scope:this}}),IG$.c$pivot.superclass.initComponent.call(this)}}),IG$.c$pivotRpt=$s.extend($s.window,{modal:!0,region:"center",layout:"fit",closable:!1,resizable:!0,width:450,autoHeight:!0,initApp:function(){var n=this,r=n._dt;n._f=["name","measureposition","measuretitle","ext_title"],r&&$.each(n._f,function(e,t){var o=n.down("[name="+("name"==t?"t":"")+t+"]"),i=r[t];o.setValue(i)})},_confirm:function(){var i=this,e=i.callback,n=i._dt;n&&$.each(i._f,function(e,t){var o=i.down("[name="+("name"==t?"t":"")+t+"]").getValue();n[t]=o}),e&&e.execute(),i.close()},initComponent:function(){$s.apply(this,{title:IRm$.r1("L_P_RPT_C"),items:[{xtype:"panel",bodyPadding:10,layout:"anchor",defaults:{anchor:"100%"},items:[{xtype:"textfield",name:"tname",fieldLabel:IRm$.r1("B_NAME")},{xtype:"numberfield",name:"measureposition",fieldLabel:IRm$.r1("L_M_POSITION"),minValue:0,maxValue:99,value:0,anchor:"60%"},{xtype:"checkbox",name:"measuretitle",fieldLabel:IRm$.r1("L_M_TITLE"),boxLabel:IRm$.r1("B_ENABLED")},{xtype:"textfield",name:"ext_title",fieldLabel:IRm$.r1("L_M_EXT_TITLE")}]}],buttons:[{text:IRm$.r1("B_CONFIRM"),handler:function(){this._confirm()},scope:this},{text:IRm$.r1("B_CANCEL"),handler:function(){this.close()},scope:this}]}),IG$.c$pivotRpt.superclass.initComponent.apply(this,arguments)},listeners:{afterrender:function(e){e.initApp.call(e)}}}),IG$.c$pivotPnl=$s.extend($s.panel,{floatable:!1,collapseFirst:!1,bodyBorder:!1,activeItem:0,margins:"0 0 0 0",cmargins:"0 0 0 0",browser:null,pivotchanged:!1,autoScroll:!1,border:0,layout:{type:"vbox",align:"stretch"},droptarget:null,metriclistview:null,sheetoption:null,spl:"5.Splice with",_pivotChanged:!1,fct:"uid;name;itemtype;rawtype;rawuid;type;sortorder;nodepath;memo;pid;description;activeformula;rankcount;aggrfunc;disp_title;hidecolumn;timeformat;ispageitem",setPivotInfo:function(e){this.sheetoption=e,this.rendered&&this.applCurPivotInfo()},applCurPivotInfo:function(){var e,t,o,i,n,r,a,l,s,c,d,p=this,m=p.reportoption,u=p.sheetoption?p.sheetoption.model:null;u&&p.peditor&&(t=p.down("[name=dataquerymode]"),p.down("[name=pivotgrid_rpt]"),o=p.down("[name=pivotgrid_rpt_item]"),i=p.down("[name=bcluster]"),n=p.down("[name=syncrows]"),r=p.down("[name=sync_view]"),a=p.down("[name=sync_target]"),l=[],c=u.dataquerymode,d=[{aname:"rows",bname:"row",li:0},{aname:"cols",bname:"col",li:2},{aname:"measures",bname:"mea",li:1},{aname:"clusters",bname:"cls",li:1}],$.each(d,function(e,t){var o,i,n=u[t.aname],r=[];if(n&&n.length)for(o=0;o<n.length;o++)"link"==(i=n[o].type.toLowerCase())&&(i=(n[o].rawtype||i).toLowerCase()),n[o].li=t.li,n[o].iconcls=IG$.get_metatype_icon(i,n[o]),r.push(n[o]);p.down("[name=pivotgrid_"+t.bname+"]").store.loadData(r)}),u.report_items&&u.report_items.length?(s=u.report_items,p.procRptItems(s,4)):s=u.report_items=[{name:p.pivot_unit,itemtype:"unit",measures:p.measures,cols:p.cols}],n.setValue(u.syncrows),o.store.loadData(s),p.updateColor(u.c1),p._dmode_sys=1,t.setValue(c),p._dmode_sys=0,l=[{name:"Select Sheet",value:""}],$.each(m.sheets,function(e,t){t.model&&t.model!=u&&t.model.layoutinfo&&l.push({name:t.name||"sheet "+e,value:t.model.layoutinfo.docid})}),a.store.loadData(l),a.setValue(u.sync_target||""),r.setVisible("M_SYNC"==c),i.setValue(u.bcluster),(e=p.down("[name=feditor]")).reportoption=m,e.sheetoption=p.sheetoption,e._init.call(e)),p.checkCubeJoins()},checkCubeJoins:function(){var t=this,e=new IG$._rpc$,o=[];t.sheetoption&&t.gatherMetrics(o,t.sheetoption.model),o.length?(e.init(t,{ack:"olapservice",payload:{option:"checkjoins"},mbody:{children:o},meta_type:"metrics"},t,function(e){t.fireEvent("join_tables",e)}),e.send()):t.fireEvent("join_tables",null)},gatherMetrics:function(i,e){var n=this;e&&$.each(["pivotgrid_row","pivotgrid_col","pivotgrid_mea","pivotgrid_cls"],function(e,t){var o=n.down("[name="+t+"]").store.data.items;if(o.length)for(e=0;e<o.length;e++)i.push(o[e].data)})},loadReport:function(){var e=this,t=e.down("[name=pivotgrid_rpt_col]"),o=e.down("[name=pivotgrid_rpt_mea]");t.store.loadData(e._a_rpt.cols||[]),o.store.loadData(e._a_rpt.measures||{}),e.updateColor(e._a_rpt.c1)},procRptItems:function(e,t){for(var o,i,n,r=0;r<e.length;r++){if((n=e[r]).name=n.name||this.pivot_unit,n.cols&&0<n.cols.length)for(o=0;o<n.cols.length;o++)(i=n.cols[o]).li=t,i.iconcls=IG$.get_metatype_icon(i.type.toLowerCase(),i);if(n.measures&&0<n.measures.length)for(o=0;o<n.measures.length;o++)(i=n.measures[o]).li=t,i.iconcls=IG$.get_metatype_icon(i.type.toLowerCase(),i)}},hasPivotField:function(r){var a=this,l=null,s=a.down("[name=bcluster]").getValue();return $.each(["pivotgrid_row","pivotgrid_col","pivotgrid_mea","pivotgrid_cls"],function(e,t){var o,i,n=a.down("[name="+t+"]").store;if("pivotgrid_cls"!=t||s){for(i=0;i<n.data.items.length;i++)if((o=n.data.items[i]).get("uid")==r.uid){l=o;break}return!l&&void 0}}),l},postDropItem:function(e,t,o){this.checkCubeJoins(),o&&this.confirmRptItem(this._a_rpt)},confirmRptItem:function(l){var s=this;s.fct.split(";");l.cols=[],l.measures=[],$.each(["pivotgrid_rpt_col","pivotgrid_rpt_mea"],function(e,t){for(var o,i,n=s.down("[name="+t+"]"),r=n.location,a=0;a<n.store.data.items.length;a++)if((o=n.store.data.items[a].data).uid)switch(i={},o.itemtype=o.type||o.itemtype,IG$.CopyObject(o,i,s.fct),o.iupd=!1,r){case"rc":l.cols.push(i);break;case"rm":l.measures.push(i)}})},beginItemCfg:function(e,t,o){new IG$.dlgCellConfig({sheetoption:this.sheetoption,item:e.data,record:e,loc:t,reportoption:this.reportoption,callback:new IG$.callBackObj(this,function(){this.rbeginItemCfg(e),o&&this.postDropItem(null,null,!0)},null)}).show()},rbeginItemCfg:function(e){},listeners:{afterrender:function(){this.peditor=this.down("[name=peditor]"),this.sheetoption&&this.applCurPivotInfo()}},initUI:function(){var r=this,t=this.down("[name=c_z]"),e=$(".igc-p-color",t.el.dom),o=$(".igc-p-remove",t.el.dom),i=$("span",e);o.bind("click",function(){r.setColor.call(r,null)}),i.bind("click",function(){}),this._dropzone=$s.create($s.dropzone,e[0],{ddGroup:"_I$RD_G_",nodeouttimer:-1,getTargetFromEvent:function(e){e.browserEvent.pageX||e.browserEvent.clientX,e.browserEvent.pageY||e.browserEvent.clientY;return t},onNodeEnter:function(e,t,o,i){var n=!1;i.records&&0<i.records.length&&"Measure"==i.records[0].get("type")&&(n=!0),this.accept=n},onNodeOver:function(e,t,o,i){var n=1==this.accept;return 1==this.accept&&i.records&&0<i.records.length&&i.records[0].data,n},onNodeDrop:function(e,t,o,i){var n;return 1==this.accept&&i.records&&0<i.records.length&&(dt=i.records[0].data,n={},IG$.CopyObject(dt,n,r.fct),r.setColor.call(r,[n])),!(this.accept=!1)}})},setColor:function(e){var t=this,o=t.sheetoption.model,i=t.down("[name=dataquerymode]").getValue();"M_REPORT"==i?t._a_rpt&&(t._a_rpt.c1=e):"M_PIVOT"==i&&(o.c1=e),t.updateColor(e)},showAggr:function(e,t,o){var i=$(o),n=(i.parent(),i.offset()),r=(i.width(),i.height());new $s.menu({margin:"0 0 10 0",floating:!0,items:[{text:"Count rows",handler:function(){e.set("aggrfunc","COUNT")}},{text:"Distinct Count",handler:function(){e.set("aggrfunc","COUNT_DISTINCT")}},{text:"Sum values",handler:function(){e.set("aggrfunc","SUM")}},{text:"Minimum",handler:function(){e.set("aggrfunc","MIN")}},{text:"Maximum",handler:function(){e.set("aggrfunc","MAX")}},"-",{text:"Clear",handler:function(){e.set("aggrfunc","")}}]}).showAt(n.left,n.top+r)},updateColor:function(e){var t=this.down("[name=c_z]").el.dom,o=$(".igc-p-color",t),i=$("span",o);bdom=$(".igc-p-remove",t),i.empty(),e&&e.length?(bdom.show(),i.attr("title",e[0].nodepath),i.html(e[0].name||"")):(bdom.hide(),i.removeAttr("title"),i.html(""))},_confirm:function(){var e,t,l,s=this,c=s.sheetoption.model,o=s.down("[name=dataquerymode]"),i=s.down("[name=pivotgrid_rpt_item]"),n=s.down("[name=syncrows]"),r=i.store,d=s._pivotChanged,p=[],m=[],u=[],h=[],a=s.fct.split(";"),g=c.report_items,d=c.dataquerymode!=o.getValue()||d;for(c.dataquerymode=o.getValue(),c.bcluster=s.down("[name=bcluster]").getValue(),c.syncrows=n.getValue(),c.sync_target=s.down("[name=sync_target]").getValue(),l=function(e,t){var o,i=!1;if(e&&t)for(o=0;o<a.length&&1!=(i=e[a[o]]!=t[a[o]]||i);o++);else i=!0;return i},$.each(["pivotgrid_row","pivotgrid_col","pivotgrid_mea","pivotgrid_cls"],function(e,t){for(var o,i,n=s.down("[name="+t+"]"),r=n.location,a=0;a<n.store.data.items.length;a++)if((o=n.store.data.items[a].data).uid)switch(i={},o.itemtype=o.type||o.itemtype,IG$.CopyObject(o,i,s.fct),d=!!o.iupd||d,o.iupd=!1,r){case"r":d=!!l(i,c.rows[p.length])||d,p.push(i);break;case"c":d=!!l(i,c.cols[m.length])||d,m.push(i);break;case"m":d=!!l(i,c.measures[u.length])||d,u.push(i);break;case"l":d=!!l(i,c.clusters[h.length])||d,h.push(i)}}),"M_REPORT"==c.dataquerymode&&s._a_rpt&&s.confirmRptItem(s._a_rpt),d=c.rows.length!=p.length||d,d=c.cols.length!=m.length||d,d=c.measures.length!=u.length||d,c.rows=p,c.cols=m,c.measures=u,c.clusters=h,c.queryItems=[],e=0;e<r.data.items.length;e++)t=r.data.items[e],g&&g.length>e&&(g[e].name=t.get("name"));var _=this.down("[name=feditor]");return _.confirmFilterSetting.call(_),d},_confirmRptItems:function(e,t){for(var o,i,n,r,a,l,s,c,d=0;d<e.childNodes.length;d++){for(c={cols:[],measures:[]},s=e.childNodes[d],i=0;i<s.childNodes.length;i++)if("pivot_mea"==(l=s.childNodes[i]).get("itemtype")&&l.childNodes)for(o=0;o<l.childNodes.length;o++)a=l.childNodes[o].data,n=new IG$.clItems(null),a.itemtype=a.type||a.itemtype,IG$.CopyObject(a,n,me.fct),r=!!a.iupd||r,a.iupd=!1,c.measures.push(n);else if("pivot_col"==l.get("itemtype")&&l.childNodes)for(o=0;o<l.childNodes.length;o++)a=l.childNodes[o].data,n=new IG$.clItems(null),a.itemtype=a.type||a.itemtype,IG$.CopyObject(a,n,me.fct),r=!!a.iupd||r,a.iupd=!1,c.cols.push(n);0<c.cols.length+c.measures.length&&t.push(c)}},validateViewMd:function(){var e=this,t=e.down("[name=dataquerymode]"),o=e.down("[name=pivotgrid_cls]"),i=e.down("[name=sync_view]"),n=e.down("[name=mv]"),r=e.down("[name=vc]"),a=e.down("[name=vr]"),l=e.down("[name=bcluster]"),s=t.getValue(),c=e.down("[name=pivotgrid_rpt_item]"),d=e.sheetoption.model;n.setVisible("M_DATA"!=s&&"M_SYNC"!=s),l.setVisible("M_PIVOT"==s),r.setVisible("M_PIVOT"==s),a.setVisible("M_REPORT"==s),i.setVisible("M_SYNC"==s),c.setVisible("M_REPORT"==s),o.setVisible(l.getValue()&&"M_PIVOT"==s),"M_REPORT"==s&&d&&(c.getSelectionModel().select(c.store.data.items[0]),e._a_rpt=d.report_items[0],e.loadReport())},changeDataViewMd:function(){var e,t,o,i,n,r=this.down("[name=dataquerymode]").getValue(),a=this.down("[name=pivotgrid_row]"),l=this.down("[name=pivotgrid_mea]"),s=[];if("M_DATA"==r?(i=l.store,n=a.store):"M_PIVOT"==r&&(i=a.store,n=l.store),i&&n){for(l.getView().refresh(),a.getView().refresh(),e=0;e<i.data.items.length;e++)"Measure"==(t=i.data.items[e]).get("type")&&s.push(t);if(s.length)for(o=n.data.items.length,e=s.length-1;0<=e;e--)i.remove(s[e]),n.insert(o,s[e])}},updateFilterChange:function(){this._pivotChanged=!0},updatePivotContent:function(){this._pivotChanged=!0},prepGridStyles:IG$.reportbase$.prepGridStyles,moveGridSelection:function(e,t,o){var i=e.getSelectionModel().getSelection(),n=i.length?i[0]:null;if(n){var r,a=e.getStore().indexOf(n),l=a;if(t<0){if(--l<0)return}else if(++l>=e.getStore().getCount())return;o&&o.length&&(r=o[a],o.splice(a,1),o.splice(l,0,r)),e.getStore().remove(n),n=e.getStore().insert(l,n),e.getSelectionModel().select(n,!0)}},_changeTargetSheet:function(){},initComponent:function(){var e,n=this;n.row=IRm$.r1("L_P_ROW"),n.column=IRm$.r1("L_P_COL"),n.measure=IRm$.r1("L_P_MEASURE"),n.pivot_unit=IRm$.r1("L_P_PIVOT_UNIT"),n.cluster=IRm$.r1("L_P_CLUSTER"),1!=n._pivotEdtMd?n.browser=new IG$.naviTree({showtoolbar:!1,cubebrowse:!0,collapsible:!1,floatable:!1,floating:!1,ddGroup:"_I$RD_G_",layout:"fit",enabledrag:!0,flex:1,border:0,_search:!0}):e={name:"peditor",layout:"fit",floatable:!1,border:0,flex:1,items:[{xtype:"container",border:0,layout:{type:"vbox",align:"stretch"},items:[{xtype:"fieldcontainer",name:"dataquerymode_bar",layout:{type:"hbox",align:"stretch"},border:1,items:[{xtype:"combobox",fieldLabel:IRm$.r1("L_VIEW_MODE"),name:"dataquerymode",labelAlign:"right",queryMode:"lcoal",displayField:"name",valueField:"value",editable:!1,width:280,store:{xtype:"store",fields:["name","value"],data:[{name:IRm$.r1("L_VIEW_MODE_LBL"),value:"M_DATA"},{name:IRm$.r1("L_V_PIVOT"),value:"M_PIVOT"},{name:IRm$.r1("L_V_RPT"),value:"M_REPORT"},{name:IRm$.r1("L_V_SYNC"),value:"M_SYNC"}]},listeners:{change:function(e,t,o,i){n.validateViewMd.call(n)},select:function(e,t,o){n._dmode_sys||n.changeDataViewMd.call(n)}}},{xtype:"displayfield",value:"..",listeners:{afterrender:function(e){IG$.r___.registerTooltip(e,"data_query_viewer")}}},{xtype:"checkbox",name:"bcluster",labelAlign:"right",fieldLabel:IRm$.r1("L_CLUSTER"),boxLabel:IRm$.r1("B_ENABLED"),listeners:{change:function(e){var t=this.down("[name=pivotgrid_cls]"),o=this.down("[name=dataquerymode]");this.down("[name=sync_view]");t.setVisible(e.getValue()&&"M_PIVOT"==o.getValue())},scope:this}}]},{xtype:"container",name:"sync_view",layout:{type:"hbox",align:"stretch"},items:[{xtype:"combobox",name:"sync_target",store:{},fieldLabel:"Target Sheet",labelAlign:"right",queryMode:"lcoal",displayField:"name",valueField:"value",handler:{change:function(e){this._changeTargetSheet()},scope:this}},{xtype:"container",flex:1}]},{xtype:"container",layout:"border",flex:1,border:0,padding:8,items:[{xtype:"container",flex:1,region:"center",layout:{type:"vbox",align:"stretch"},items:[{xtype:"gridpanel",name:"pivotgrid_rpt_item",title:IRm$.r1("L_P_RPT"),region:"north",height:140,hidden:!0,hideHeaders:!0,store:{fields:["name"]},tbar:[{iconCls:"icon-toolbar-addsheet",handler:function(){var e=this,t={name:e.pivot_unit,itemtype:"unit",measuretitle:!0,ext_title:null,cols:[],measures:[]},o=e.down("[name=pivotgrid_rpt_item]"),i=o.getSelectionModel();e.sheetoption.model.report_items.push(t),o.store.loadData(e.sheetoption.model.report_items),i.select(o.store.data.items.length-1),e._a_rpt=t,e.loadReport()},scope:this},{iconCls:"icon-toolbar-moveup",handler:function(){this.moveGridSelection(this.down("[name=pivotgrid_rpt_item]"),-1,this.sheetoption.model.report_items)},scope:this},{iconCls:"icon-toolbar-movedown",handler:function(){this.moveGridSelection(this.down("[name=pivotgrid_rpt_item]"),1,this.sheetoption.model.report_items)},scope:this},"-",{xtype:"checkbox",boxLabel:"Synchronize Rows",name:"syncrows"}],selType:"checkboxmodel",selModel:{checkSelector:".x-grid-cell",mode:"SINGLE"},plugins:[{ptype:"cellediting",clicksToEdit:!1}],columns:[{text:IRm$.r1("B_NAME"),flex:1,dataIndex:"name",editor:{allowBlank:!0}},{xtype:"actioncolumn",width:60,items:[{iconCls:"icon-grid-config",tooltip:"Config Item",handler:function(e,t,o){var i,n=e.store.data.items[t],r=this.sheetoption.model.report_items[t];r&&(i=new IG$.c$pivotRpt({_dt:r,callback:new IG$.callBackObj(this,function(){n.set("name",r.name)})}),IG$.checkLogin(this,i))},scope:this},{iconCls:"icon-toolbar-filter",tooltip:"Filter",handler:function(e,t,o){e.store.data.items[t];var i,n=this.sheetoption.model.report_items[t];n&&(n.filter=n.filter||new IG$.clFilterGroup(null),n.havingfilter=n.havingfilter||new IG$.clFilterGroup(null),i=new IG$.filterEditorWindow({sheetoption:{filter:n.filter,havingfilter:n.havingfilter},reportoption:{cube_objects:this.reportoption.cube_objects},callback:new IG$.callBackObj(this,function(e){n.filter=e.filter,n.havingfilter=e.havingfilter})}),IG$.checkLogin(this,i))},scope:this},{iconCls:"icon-grid-delete",tooltip:"Remove Item",handler:function(e,t,o){var i=e.store.data.items[t];1<e.store.data.items.length&&(e.store.remove(i),this.sheetoption.model.report_items.splice(t,1),e.getSelectionModel().select(e.store.data.items[0]),this._a_rpt=this.sheetoption.model.report_items[0],this.loadReport())},scope:this}]}],listeners:{cellclick:function(e,t,o,i,n,r,a,l){},selectionchange:function(e,t,o){var i,n=this,r=e.store.indexOf(t[0]);-1<r&&(i=n.sheetoption.model.report_items[r])&&(n._a_rpt&&n.confirmRptItem(n._a_rpt),n._a_rpt=i,n.loadReport())},scope:this}},new IG$.c$pivot({name:"pivotgrid_row",ptr_p:n,title:n.row,location:"r",flex:1,__loc:"row"})]},{xtype:"container",layout:{type:"vbox",align:"stretch"},region:"east",name:"mv",flex:1,items:[{xtype:"container",flex:1,layout:"border",border:0,name:"vc",padding:4,items:[new IG$.c$pivot({name:"pivotgrid_col",ptr_p:n,flex:1,region:"south",title:n.column,location:"c",__loc:"col"}),new IG$.c$pivot({name:"pivotgrid_mea",ptr_p:n,flex:1,region:"center",title:n.measure,location:"m",__loc:"mea"}),new IG$.c$pivot({name:"pivotgrid_cls",ptr_p:n,flex:1,region:"south",title:n.cluster,hidden:!0,location:"l",__loc:"cls"})]},{xtype:"container",flex:1,layout:"fit",border:0,region:"east",name:"vr",hidden:!0,padding:4,items:[{xtype:"panel",name:"pivotgrid_rpt",border:0,flex:1,location:"p",layout:{type:"vbox",align:"stretch"},items:[new IG$.c$pivot({name:"pivotgrid_rpt_mea",ptr_p:n,flex:1,region:"center",title:n.measure,location:"rm",__loc:"mea",__loc1:!0}),new IG$.c$pivot({name:"pivotgrid_rpt_col",ptr_p:n,flex:1,region:"south",title:n.column,location:"rc",__loc:"col",__loc1:!0})]}]},{xtype:"panel",border:0,region:"south",height:30,layout:{type:"hbox",align:"stretch"},items:[{html:"<div><div class='igc-p-color'><span></span></div><div class='igc-p-color-ic' title='Color Measure'></div><div class='igc-p-remove'></div></div>",name:"c_z",flex:1,listeners:{afterrender:function(){setTimeout(function(){n.initUI.call(n)},100)}}},{html:"<div class='igc-p-color'></div>",name:"s_z",hidden:!0,flex:1,listeners:{afterrender:function(){n.initUI.call(n)}}}]}]}]}]}]},n.items=[],n.browser&&n.items.push({xtype:"container",layout:"fit",flex:1,region:"center",autoScroll:!1,items:[n.browser]}),e&&n.items.push({xtype:"panel",layout:"card",region:1<n._pivotEdtMd?"east":"center",name:"p_editor",border:0,flex:1,deferredRender:!1,tbar:[{type:"button",iconCls:"icon-toolbar-pivot",name:"btn_pivot",pressed:1,$w:80,text:IRm$.r1("L_PIVOT"),handler:function(){var e=this.down("[name=p_editor]"),t=this.down("[name=btn_filter]"),o=this.down("[name=btn_pivot]");e.getLayout().setActiveItem(0),o.toggle(!0),t.toggle(!1)},scope:this},{type:"button",iconCls:"icon-toolbar-filter",name:"btn_filter",$w:80,text:IRm$.r1("L_FILTER"),handler:function(){var e=this.down("[name=p_editor]"),t=this.down("[name=btn_filter]"),o=this.down("[name=btn_pivot]");e.getLayout().setActiveItem(1),o.toggle(!1),t.toggle(!0)},scope:this},{xtype:"button",iconCls:"icon-toolbar-pagefilter",name:"btn_pagefilter",$w:60,text:IRm$.r1("L_PAGE_FILTER"),handler:function(){var e=this,t=new IG$.dlgPromptEditor({reportoption:e.reportoption,sheetoption:e.sheetoption,callback:new IG$.callBackObj(e,e.updatePivotContent)});IG$.checkLogin(e,t)},scope:this},{type:"button",iconCls:"icon-toolbar-sort",$w:80,text:IRm$.r1("L_SORT_OPTION"),handler:function(){var e=this,t=new IG$.sortOptionDlg({reportoption:e.reportoption,sheetoption:e.sheetoption,callback:new IG$.callBackObj(e,e.updatePivotContent)});IG$.checkLogin(e,t)},scope:this},{type:"button",iconCls:"icon-toolbar-style",$w:80,name:"btn_grid_style",text:IRm$.r1("L_GRID_STYLE"),handler:function(){var e,t=this;t.prepGridStyles(t.down("[name=dataquerymode]").getValue()),e=new IG$.globalReportStyle({cmode:"report",activeSheet:t.activeSheet,reportoption:t.reportoption,sheetoption:t.sheetoption,callback:new IG$.callBackObj(t,t.updatePivotContent)}),IG$.checkLogin(this,e)},scope:this},"->",{type:"button",$w:140,name:"btn_adv",text:IRm$.r1("L_ADV_OPTION"),handler:function(){var e=new IG$.d$PivotAdvOpt({sheetoption:this.sheetoption});this._pivotChanged=!0,IG$.checkLogin(this,e)},listeners:{afterrender:function(e){IG$.r___.registerTooltip(e,"advanced_pivot")}},scope:this}],items:[e,new IG$.filterMainEditor({name:"feditor",deferredRender:!1,bodyPadding:10})]}),IG$.c$pivotPnl.superclass.initComponent.call(this)}});
IG$.d$PivotAdvOpt=$s.extend($s.window,{modal:!0,layout:"fit",closable:!1,resizable:!1,width:500,autoScroll:!1,height:550,maxHeight:550,bodyPadding:10,bodyStyle:{background:"#ffffff"},_confirm:function(){var o,i=this,m=i.sheetoption,s=0,e=i.down("[name=cb_mloc]"),a=i.down("[name=measureposition]");i.down("[name=measuregroup]");m&&(o=e.getGroupValue(),s=a.getValue(),"row"==o&&m.model.rows.length<s?s=m.model.rows.length:"column"==o&&m.model.cols.length<s&&(s=m.model.cols.length),s=s<0?0:s,$.each(i._f,function(e,a){var l,t=i.down("[name="+a+"]");switch(a){case"measurelocation":l=o;break;case"measureposition":l=s;break;case"customfix":case"usepaging":case"measuretitle":default:l=t.getValue()}m.model[a]=l})),i.callback&&i.callback.execute(),i.close()},init_f:function(){var o=this,i=o.sheetoption;o._f=["measurelocation","measureposition","measuretitle","isdistinct","treeview","columntree","isbigdecimal","showlnum","customfix","customfixcols","usepaging","rowperpage","pagestyle","measureformat","measureformatname","fetchmode","measuregroup"],i&&(i.model.measureposition=i.model.measureposition<0?0:i.model.measureposition,$.each(o._f,function(e,a){var l=o.down("[name="+a+"]"),t=i.model[a];switch(a){case"measurelocation":l.setValue({cb_mloc:[t]});break;case"customfix":case"usepaging":case"measuretitle":l.setValue(t),"customfix"==a&&o.down("[name=customfixcols]").setVisible(t);break;case"customfixcols":l.setValue(t||0);break;case"rowperpage":l.setValue(t||20);break;case"pagestyle":l.setValue(t||"normal");break;default:l.setValue(t)}}))},initComponent:function(){this.title=IRm$.r1("L_ADV_OPTION"),$s.apply(this,{items:[{xtype:"panel",layout:"anchor",autoScroll:!0,border:0,defaults:{anchor:"100%"},fieldDefaults:{labelWidth:100},padding:10,items:[{xtype:"fieldset",title:IRm$.r1("L_M_POSITION"),collapsible:!1,defaults:{anchor:"100%"},items:[{name:"measurelocation",fieldLabel:IRm$.r1("L_MEASURE_ON"),xtype:"radiogroup",plain:!0,items:[{boxLabel:IRm$.r1("L_P_ROW"),name:"cb_mloc",inputValue:"row"},{boxLabel:IRm$.r1("L_P_COL"),name:"cb_mloc",inputValue:"column",checked:!0}],listeners:{}},{xtype:"numberfield",name:"measureposition",fieldLabel:IRm$.r1("L_M_POSITION"),minValue:0,maxValue:99,value:0,anchor:"60%"},{xtype:"checkbox",name:"measuretitle",fieldLabel:IRm$.r1("L_M_TITLE"),boxLabel:IRm$.r1("B_ENABLED")},{xtype:"fieldcontainer",fieldLabel:IRm$.r1("L_FIX_COLUMN"),layout:{type:"hbox",align:"stretch"},items:[{xtype:"checkbox",name:"customfix",boxLabel:IRm$.r1("L_CUSTOM_FIX"),listeners:{change:function(e,a,l,t){this.down("[name=customfixcols]").setVisible(a)},scope:this}},{xtype:"numberfield",name:"customfixcols",minValue:0,maxValue:10,value:0}]},{xtype:"checkbox",name:"measuregroup",fieldLabel:IRm$.r1("L_M_GROUP"),boxLabel:IRm$.r1("B_ENABLED")}]},{xtype:"fieldset",layout:"anchor",title:IRm$.r1("L_M_FORMAT"),items:[{xtype:"textfield",fieldLabel:IRm$.r1("L_M_FORMAT"),name:"measureformat"},{xtype:"textfield",fieldLabel:IRm$.r1("L_M_NAME"),name:"measureformatname"},{xtype:"displayfield",value:"* Merge multiple measure in single column"}]},{xtype:"fieldset",layout:"anchor",title:IRm$.r1("L_PAGING"),items:[{xtype:"checkbox",name:"usepaging",fieldLabel:IRm$.r1("L_USE_PAGING"),boxLabel:IRm$.r1("B_ENABLED")},{xtype:"numberfield",name:"rowperpage",fieldLabel:IRm$.r1("L_ROW_P_PAGE"),minValue:10,maxValue:1e3,value:20},{xtype:"combobox",name:"pagestyle",fieldLabel:IRm$.r1("L_PAGE_STYLE"),queryMode:"local",displayField:"name",valueField:"value",editable:!1,autoSelect:!0,store:{xtype:"store",fields:["name","value"],data:[{name:"Normal",value:"normal"},{name:"10 pages",value:"p10"},{name:"5 pages",value:"p5"},{name:"2 buttons",value:"button2"}]}}]},{xtype:"fieldset",title:IRm$.r1("L_TREE_VIEW"),collapsible:!1,items:[{xtype:"form",layout:"anchor",border:0,hidden:!1,defaults:{anchor:"100%"},items:[{xtype:"checkbox",boxLabel:IRm$.r1("L_ENABLE_TREE_VIEW"),name:"treeview",bodyPadding:"0 10 10 10"},{xtype:"checkbox",boxLabel:IRm$.r1("L_COL_TREE"),name:"columntree",bodyPadding:"0 10 10 10"}]}]},{xtype:"fieldset",title:IRm$.r1("L_OTHER_OPTION"),collapsible:!1,items:[{xtype:"checkbox",fieldLabel:IRm$.r1("L_DISTINCT"),name:"isdistinct",boxLabel:IRm$.r1("B_ENABLED")},{xtype:"combobox",fieldLabel:IRm$.r1("L_FETCH_MODE"),name:"fetchmode",valueField:"value",displayField:"name",store:{data:[{name:"Default",value:""},{name:IRm$.r1("L_FETCH_APPPAGE"),value:"fetch_page"},{name:IRm$.r1("L_FETCH_DBPAGE"),value:"fetch_page_db"},{name:IRm$.r1("L_FETCH_ALL"),value:"fetch_all"}]}},{xtype:"checkbox",fieldLabel:IRm$.r1("L_NUM_PREC"),boxLabel:IRm$.r1("L_HIGH_PREC"),bodyPadding:"0 10 10 10",name:"isbigdecimal"},{xtype:"checkbox",fieldLabel:IRm$.r1("L_LINE_NUM"),name:"showlnum",boxLabel:IRm$.r1("B_ENABLED")}]}]}],buttons:[{text:IRm$.r1("B_CONFIRM"),handler:function(){this._confirm()},scope:this},{text:IRm$.r1("B_CANCEL"),handler:function(){this.close()},scope:this}]}),IG$.d$PivotAdvOpt.superclass.initComponent.apply(this,arguments)},listeners:{afterrender:function(e){e.init_f.call(e)}}});
IG$.p$PivotBrws=$s.extend($s.panel,{region:"center",layout:{type:"fit",align:"stretch"},loadSheetOption:function(e,t){var o=this;o.down("[name=pivoteditor]");o.sheetoption=e,o.reportoption=t,o._init.call(o)},_init:function(){var e,t,o=this,i=o.reportoption,n=o.down("[name=custom_formula]"),a=i._mc.calculation_custom_dims,c=[];if(o.getCube(i._mc.cube_objects),a)for(e=0;e<a.length;e++)t=a[e],c.push({name:t.name,uid:t.uid,type:t.type});n.store.loadData(c)},_confirm:function(){var e=this.down("[name=pivoteditor]");e._confirm.call(e)},getCube:function(e){var t=this,o=t.down("[name=cube_tree]"),i=(t.reportoption,t.sheetoption),n=i&&i.cube_object?i.cube_object:null,a={type:"ROOT",name:"Cubes",leaf:!1,expanded:!0,children:[{type:"load",name:"Loading..."}]};!n&&e&&e.length&&(n=e[0]),n&&(a.uid=n.uid,a.name=n.name,a.nodepath=n.nodepath,a.type=n.type),o.setRootNode(a).expand(),t.fireEvent("cube_changed",t)},createItem:function(e){var t=this,o=IG$.mainPanel,i=t.reportoption,n=t.down("[name=cube_tree]").getRootNode(),a=i._mc.calculation_custom_dims,c=t.down("[name=custom_formula]"),a=i._mc.calculation_custom_dims=i._mc.calculation_custom_dims||[];o.navigateApp(null,e.toLowerCase(),"",null,!0,!0,{editmode:!0,dmode_cnt:{type:e},cubeuid:n.get("uid"),cubepath:n.get("nodepath"),dmode:1,callback:new IG$.callBackObj(t,function(e){var t=IG$.getKeyName(e.name),o={},i=0;for($.each(a,function(e,t){o[t.uid]=1});o[t];)t+="_"+i++;e.uid=t,a.push(e),c.store.add({uid:e.uid,type:e.type,name:e.name})})})},editCustomItem:function(t){for(var e,o=this,i=IG$.mainPanel,n=o.reportoption,a=o.down("[name=cube_tree]").getRootNode(),c=n._mc.calculation_custom_dims,s=t.get("uid"),d=0;d<c.length;d++)if(c[d].uid==s){e=c[d];break}e&&i.navigateApp(e.uid,e.type.toLowerCase(),e.name,null,!0,!0,{editmode:o.writable,dmode:1,dmode_cnt:e,cubeuid:a.get("uid"),cubepath:a.get("nodepath"),callback:new IG$.callBackObj(o,function(e){t.set("name",e.name)})})},setFilter:function(e){this.down("[name=cube_tree]").setFilter(e)},initComponent:function(){this.addEvents("cube_changed"),$s.apply(this,{title:IRm$.r1("T_RPT_PIVOT"),header:!1,items:[{xtype:"panel",title:"Objects",border:0,layout:{type:"vbox",align:"stretch"},items:[new IG$.naviTree({showtoolbar:!1,cubebrowse:!0,ddGroup:"_I$RD_G_",name:"cube_tree",layout:"fit",enabledrag:!0,rootuid:"none",flex:1,border:0,_search:!0,hiddenItems:{cubemodel:1},tools:[{xtype:"button",iconCls:"icon-toolbar-addsheet",tooltip:IRm$.r1("B_ADD"),handler:function(){var e=this.rptptr;e.showReportOption.call(e,null,new IG$.callBackObj(this,function(e){for(var t=this.reportoption,o=this.sheetoption,i=0,n=0;n<t.cube_objects.length;n++)if(t.cube_objects[n].uid==e.uid){i=1;break}i||t.cube_objects.push(e),o&&(o.cube_object=e),this.getCube([e])}),this.sheetoption)},scope:this}]}),{xtype:"gridpanel",ddGroup:"_I$RD_G_",enabledrag:!0,height:150,name:"custom_formula",hideHeaders:!0,hidden:ig$.features.ig_p_cmt,columns:[{text:"Name",dataIndex:"name",flex:1},{xtype:"actioncolumn",width:40,items:[{iconCls:"icon-grid-config",tooltip:"Config Item",handler:function(e,t,o){var i=e.store.data.items[t];this.editCustomItem(i)},scope:this},{iconCls:"icon-grid-delete",tooltip:"Remove Item",handler:function(e,t,o){for(var i=e.store.data.items[t],n=this.reportoption._mc.calculation_custom_dims,a=i.get("uid"),c=0;c<n.length;c++)if(n[c].uid==a){n.splice(c,1);break}e.store.removeAt(t)},scope:this}]}],store:{fields:[]},tbar:[{xtype:"displayfield",value:"Custom Formulas"},"->",{xtype:"button",iconCls:"icon-toolbar-addsheet",tooltip:IRm$.r1("B_ADD"),menu:{xtype:"menu",items:[{text:IRm$.r1("D_CUSTOMMETRIC"),hidden:ig$.features.ig_n_cm,handler:function(){this.createItem("CustomMetric")},scope:this},{text:IRm$.r1("D_MEASURE"),hidden:ig$.features.ig_n_ms,handler:function(){this.createItem("Measure")},scope:this},{text:IRm$.r1("D_FORMULA"),hidden:ig$.features.ig_n_fm,handler:function(){this.createItem("FormulaMeasure")},scope:this}]}}]}]}]}),IG$.p$PivotBrws.superclass.initComponent.apply(this,arguments)}});
IG$.pivot_dlg=$s.extend($s.window,{modal:!1,region:"center",layout:"fit",closable:!1,resizable:!0,width:820,height:520,_init:function(){this.loadPivotOption(this.sheetindex)},loadPivotOption:function(t){var e,o=this,i=o.down("[name=pivotbrowser]"),n=o.down("[name=pivoteditor]");o.activeSheet=t,n.on("join_tables",function(t){this.down("[name=pivotbrowser]").setFilter(t)},o),e=o.reportoption.sheets[t],n.activeSheet=t,n.reportoption=o.reportoption,n.sheetoption=e,setTimeout(function(){i.loadSheetOption.call(i,o.reportoption.sheets[o.activeSheet],o.reportoption),n.applCurPivotInfo.call(n),n._c=1},20)},_confirm:function(){var t=this,e=t.down("[name=pivoteditor]"),o=t.sheet;e._confirm&&e._confirm.call(e),o&&(o.updateViewMode.call(o,o.sheetoption.model.viewmode),o._confirm.call(o)),t.close()},initComponent:function(){var t=this;$s.apply(t,{title:IRm$.r1("L_PIVOT_REPORT"),bodyStyle:"padding:5px",border:0,items:[{xtype:"panel",layout:"border",items:[new IG$.p$PivotBrws({name:"pivotbrowser",region:"center",flex:1,border:0,resizable:"FILTER"!=t.objtype,rptptr:t.rptptr,callback:new IG$.callBackObj(t,t.updatePivotContent),listeners:{cube_changed:function(t,e){},scope:this}}),new IG$.c$pivotPnl({name:"pivoteditor",layoutmode:"panel",hidden:"FILTER"==t.objtype,region:"east",flex:3,split:"FILTER"!=t.objtype,resizable:!0,_pivotEdtMd:!0,border:0})]}],buttons:["->",{text:IRm$.r1("B_CONFIRM"),hidden:"FILTER"==t.objtype,handler:function(){this._confirm()},scope:this},{text:IRm$.r1("B_CANCEL"),handler:function(){this.close()},scope:this}],listeners:{afterrender:function(){this._init()}}}),IG$.pivot_dlg.superclass.initComponent.apply(this,arguments)}});
IG$.filterEditorPanel=$s.extend($s.panel,{fields:[],selvalues:null,init_f:function(){var e,t,l,a,i=this,n=i.filteritem,o=n?n.model:null,s=i.down("[name=rbeditortype]"),d=i.down("[name=rbvaluetype]"),u=i.down("[name=delimiter]"),r=i.down("[name=prompttype]"),m=i.down("[name=cnormalvalue]"),c=i.down("[name=clongvalue]"),p=i.down("[name=csecondvalue]");if(i.fields=[],i.right_fields=[],i.formula="",i.useprompt=!1,i.iscustom=!1,i.issqlvalue=!1,i.selvalues=null,o){if(i.targetitem&&(o.fields=[i.targetitem]),(a=o.fields)&&a.length)for(i.down("[name=itemname]").setValue(a[0].name),e=0;e<a.length;e++)i.fields.push(a[e]);if((a=o.right_fields)&&a.length)for(i.down("[name=right_fields1]").setValue(a[0].name),1<a.length&&i.down("[name=right_fields2]").setValue(a[1].name),e=0;e<a.length;e++)i.right_fields.push(a[e]);if((a=o.values)&&0<a.length)for(i.selvalues=[],e=0;e<a.length;e++)i.selvalues.push(a[e]);i.down("[name=cop]").setValue(o.operator||"EQ"),i.down("[name=opisnot]").setValue(o.opisnot),u.setValue(o.delimiter),r.setValue(o.promptEditor);"field"==o.valuetype?d.setValue("field"):o.useprompt?d.setValue("prompt"):o.issqlvalue?d.setValue("sql"):d.setValue("normal"),s.setValue(o.iscustom?"input":"list"),i._updLayout(),t=m.isVisible(),l=c.isVisible(),p.isVisible()?((a=o.values)&&1<a.length&&i.down("[name=secondvalue]").setValue(a[1].value||a[1].code),a&&a.length&&i.down("[name="+(t?"normalvalue":"longvalue")+"]").setValue(a[0].value||a[0].code)):(t&&i.setFilterDesc(i.down("[name=normalvalue]")),l&&i.setFilterDesc(i.down("[name=longvalue]")))}},_confirm:function(){var e,t,l,a=this,i=a.filteritem,n=i.model,o=a.down("[name=rbeditortype]").getGroupValue(),s=a.down("[name=rbvaluetype]").getGroupValue(),d=a.down("[name=delimiter]").getValue(),u=a.down("[name=prompttype]").getValue(),r=a.down("[name=cnormalvalue]"),m=a.down("[name=clongvalue]");if(n.fields=a.fields,n.operator=a.down("[name=cop]").getValue(),n.opisnot=a.down("[name=opisnot]").getValue(),n.valuetype=s,n.useprompt="prompt"==s,n.issqlvalue="sql"==s,n.iscustom=!0,n.delimiter=d||";",n.promptEditor=u,n.right_fields=a.right_fields,n.useprompt||n.issqlvalue)e=a.down("[name=longvalue]").getValue(),n.values=[{code:e,value:null}];else if("input"==o){if(r.isVisible())e=a.down("[name=normalvalue]").getValue(),n.values=[{code:e,value:e}];else if(m.isVisible())if(e=a.down("[name=longvalue]").getValue(),6==i.operator)for(e=e.split(d),n.values=[],t=0;t<e.length;t++)""!=e[t]&&n.values.push({code:e[t],value:e[t]});else n.values=[{code:e,value:e}];8==i.operator&&(l=a.down("[name=secondvalue]").getValue(),n.values.push({code:l,value:l}))}else n.iscustom=!1,n.values=a.selvalues},_updLayout:function(){var e=this,t=e.down("[name=rbeditortype]").getGroupValue(),l=e.down("[name=fieldeditortype]"),a=e.down("[name=rbvaluetype]").getGroupValue(),i=e.down("[name=cop]").getValue(),n=e.down("[name=btnnormalvalue]"),o=e.down("[name=btnlongvalue]"),s=e.down("[name=btnsecondvalue]"),d=e.down("[name=delimiter]"),u=e.down("[name=normalvalue]"),r=e.down("[name=longvalue]"),m=e.down("[name=secondvalue]"),c=e.down("[name=prompttype]"),p=e.down("[name=csfield]"),h=e.down("[name=cs_f2]"),f=e.down("[name=cnormalvalue]"),b=e.down("[name=clongvalue]"),y=e.down("[name=csecondvalue]"),v=!1,w=!1,g=!1;if("normal"==a){switch(l.show(),c.hide(),i){case"EQ":case"GTE":case"GT":case"LTE":case"LT":switch(t){case"list":case"input":v=!0;break;case"textarea":w=!0;break;case"fileload":v=!0}break;case"IN":case"NOTIN":w=!0;break;case"LIKE":v=!0;break;case"BETWEEN":g=v=!0}"input"==t?(n.hide(),o.hide(),s.hide(),u.setReadOnly(!1),r.setReadOnly(!1),m.setReadOnly(!1),w?d.show():d.hide()):"list"==t&&(n.show(),o.show(),s.show(),u.setReadOnly(!0),r.setReadOnly(!0),m.setReadOnly(!0),d.hide()),p.hide()}else"field"==a?(n.hide(),o.hide(),s.hide(),d.hide(),l.hide(),r.setReadOnly(!1),p.show(),h.setVisible(8==i),c.hide()):(n.hide(),o.hide(),s.hide(),d.hide(),l.hide(),r.setReadOnly(!1),"prompt"==a?c.show():c.hide(),p.hide(),w=!0);v?f.show():f.hide(),w?b.show():b.hide(),g?y.show():y.hide()},showValueEditor:function(e){var t;0<this.fields.length&&(t=new IG$.valueSelectWindow({field:this.fields[0],callback:new IG$.callBackObj(this,function(e,t){var l=this.down("[name="+t+"]");e&&0<e.length&&(this.selvalues=e),this.setFilterDesc(l)},e)}),IG$.checkLogin(this,t))},setFilterDesc:function(e){var t=this.filteritem.getValueDesc(this.selvalues);e.setValue(t)},selectItem:function(l,a,i){var e=this.reportoption,t=this.cubeuid||(e&&e.datasource?e.datasource.uid:""),n=new IG$.metaSelectDlg({visibleItems:"folder;metric;measure;formulameasure;custommetric",tree_options:{cubebrowse:!0,rootuid:t},callback:new IG$.callBackObj(this,function(e){var t=this;i?(t[a||l]=t[a||l]||[],t[a||l].push(e)):t[a||l]=[e],t.down("[name="+l+"]").setValue(e.name)})});IG$.checkLogin(this,n)},initComponent:function(){var l=[],e=this;e.addEvents("add_filter"),$.each(IG$.filteropcodes,function(e,t){l.push({field:e,label:t.locale})}),$s.apply(this,{layout:{type:1==e._cmode?"hbox":"vbox",align:"stretch"},fieldDefaults:{labelWidth:150,anchor:"100%"},items:[{xtype:"fieldset",defaultType:"textfield",layout:"anchor",defaults:{anchor:"100%",labelAlign:1==e._cmode?"top":"left"},items:[{xtype:"fieldcontainer",fieldLabel:IRm$.r1("L_ITEM"),layout:"hbox",items:[{name:"itemname",xtype:"textfield",allowBlank:!1,readOnly:!0,flex:1},{xtype:"button",text:"..",width:20,handler:function(){this.selectItem("itemname","fields")},scope:this}]},{xtype:"fieldcontainer",layout:"hbox",items:[{fieldLabel:IRm$.r1("B_OP"),name:"cop",xtype:"combobox",queryMode:"local",valueField:"field",displayField:"label",editable:!1,store:{fields:["field","label"],data:l},listeners:{select:function(){this._updLayout()},scope:this}},{xtype:"checkbox",name:"opisnot",padding:"0 5 0",boxLabel:IRm$.r1("L_OP_NOT"),listeners:{change:function(e){var t,l,a=this.down("[name=cop]"),i=e.getValue(),n={},o=IG$.filteropcodes,s=a.getValue();for($.each(o,function(e,t){n[e]=t.lcode}),l=0;l<a.store.data.items.length;l++)(t=a.store.data.items[l]).set("label",IRm$.r1(n[t.get("field")]+(i?"_NOT":"")));a.setValue(s)},scope:this}}]},{name:"valuetype",xtype:"radiogroup",fieldLabel:IRm$.r1("L_VALUE_TYPE"),vertical:!1,defaults:{width:70},items:[{boxLabel:"Normal",name:"rbvaluetype",inputValue:"normal",checked:!0},{boxLabel:"SQL",name:"rbvaluetype",inputValue:"sql"},{boxLabel:"Column",name:"rbvaluetype",inputValue:"field"},{boxLabel:"Prompt",hidden:!0,name:"rbvaluetype",inputValue:"prompt"}],listeners:{change:function(e,t,l,a){this._updLayout()},scope:this}}]},{xtype:"panel",layout:"anchor",border:0,autoScroll:!0,padding:1==e._cmode?"0 5 0":0,defaults:{labelAlign:1==e._cmode?"top":"left"},dockedItems:[1==e._cmode?{dock:"bottom",xtype:"toolbar",items:["->",{xtype:"button",text:"Add",handler:function(){this.fireEvent("add_filter",this)},scope:this}]}:null],items:[{fieldLabel:IRm$.r1("L_EDITOR_TYPE"),xtype:"fieldcontainer",layout:"anchor",name:"fieldeditortype",defaults:{flex:1,anchor:"100%",hideLabel:!0},items:[{name:"editortype",xtype:"radiogroup",vertical:!1,plain:!0,items:[{boxLabel:IRm$.r1("L_E_VALUE"),name:"rbeditortype",inputValue:"input",checked:!0},{boxLabel:IRm$.r1("L_E_LIST"),name:"rbeditortype",inputValue:"list"}],listeners:{change:function(){this._updLayout()},scope:this}}]},{fieldLabel:IRm$.r1("L_VAL_DELIM"),xtype:"textfield",name:"delimiter",width:120},{fieldLabel:IRm$.r1("L_PROMPT_TYPE"),name:"prompttype",xtype:"combobox",queryMode:"local",valueField:"field",displayField:"label",editable:!1,hidden:!0,store:{fields:["field","label"],data:[{field:1,label:"Text input"},{field:2,label:"Combobox"},{field:3,label:"Date field"},{field:4,label:"Select window"}]},listeners:{select:function(){this._updLayout()},scope:this}},{xtype:"fieldcontainer",name:"cnormalvalue",fieldLabel:IRm$.r1("L_F_VALUE"),layout:{type:"hbox",align:"stretch"},items:[{name:"normalvalue",flex:1,xtype:"textfield"},{xtype:"button",name:"btnnormalvalue",text:"..",width:20,handler:function(){this.showValueEditor("normalvalue")},scope:this}]},{xtype:"fieldcontainer",name:"clongvalue",fieldLabel:IRm$.r1("L_F_VALUE_LNG"),layout:{type:"hbox",align:"stretch"},hidden:!0,items:[{name:"longvalue",flex:1,height:120,xtype:"textarea"},{xtype:"button",name:"btnlongvalue",text:"..",width:20,handler:function(){this.showValueEditor("longvalue")},scope:this}]},{xtype:"fieldcontainer",name:"csecondvalue",fieldLabel:IRm$.r1("L_F_VALUE_TO"),layout:{type:"hbox",align:"stretch"},hidden:!0,items:[{name:"secondvalue",flex:1,xtype:"textfield"},{xtype:"button",name:"btnsecondvalue",text:"..",width:20,handler:function(){this.showValueEditor("secondvalue")},scope:this}]},{xtype:"fieldcontainer",name:"csfield",hidden:!0,layout:"vbox",items:[{xtype:"fieldcontainer",name:"cs_f1",fieldLabel:IRm$.r1("L_ITEM"),layout:"hbox",items:[{name:"right_fields1",xtype:"textfield",allowBlank:!1,readOnly:!0,flex:1},{xtype:"button",text:"..",width:20,handler:function(){this.selectItem("right_fields1","right_fields")},scope:this}]},{xtype:"fieldcontainer",name:"cs_f2",fieldLabel:IRm$.r1("L_ITEM"),layout:"hbox",items:[{name:"right_fields2",xtype:"textfield",allowBlank:!1,readOnly:!0,flex:1},{xtype:"button",text:"..",width:20,handler:function(){this.selectItem("right_fields2","right_fields",1)},scope:this}]}]}]}]}),IG$.filterEditorPanel.superclass.initComponent.apply(this,arguments)}}),IG$.filterEditor=$s.extend($s.window,{modal:!0,region:"center",layout:"fit",closable:!1,resizable:!1,width:500,height:450,reportoption:null,callback:null,init_f:function(){var e=this.mainpanel;e.init_f.call(e)},_confirm:function(){var e=this.mainpanel;e._confirm.call(e),this.callback&&this.callback.execute(),this.close()},initComponent:function(){var t=this;t.title=IRm$.r1("T_FILTER"),$s.apply(this,{defaults:{padding:10},layout:"fit",items:[new IG$.filterEditorPanel({filteritem:t.filteritem,name:"mainp",padding:10,targetitem:t.targetitem,cubeuid:t.cubeuid,reportoption:t.reportoption})],buttons:["->",{text:IRm$.r1("B_CONFIRM"),handler:function(){this._confirm()},scope:this},{text:IRm$.r1("B_CANCEL"),handler:function(){this.close()},scope:this}],listeners:{afterrender:function(){var e=this;t.mainpanel=e.down("[name=mainp]"),setTimeout(function(){e.init_f()},300)}}}),IG$.filterEditor.superclass.initComponent.apply(this,arguments)}});
IG$.d$ValSel=$s.extend($s.panel,{field:null,layout:{type:"hbox",align:"stretch"},init_f:function(){this.down("[name=_3]").setValue("START")},getValLst:function(){if(this.prompt){var e=new IG$.callBackObj(this,this.rs_getValLst,prompt);this.prompt.loadData.call(this.prompt,this,e)}else if(this.field){var t,l=this,i={},s=new IG$._rpc$,a=this.down("[name=_4]").getValue(),n=this.down("[name=_3]").getValue();if(a){if(i.operator="LIKE",i.ftype="condition",a.indexOf("%")<0)switch(n){case"INCLUDE":a="%"+a+"%";break;case"START":a+="%";break;case"END":a="%"+a}i.values=[{code:a}]}t={uid:this.field?this.field.uid:this.prompt.name,option:"valuelist"},s.init(l,{ack:"olapservice",payload:t,mbody:i,meta_type:"filter"},l,l.rs_getValLst,null,this.field?this.field.uid:this.prompt.name),s.send()}},rs_getValLst:function(e,t){for(var l=e.inline_data,i=[],s=this.down("[name=_1]"),a=0;a<l.length;a++)i.push({code:l[a][0],text:l[a][1]||l[a][0]});s.store.loadData(i)},selectItem:function(e){var t,l,i=this.down("[name=_1]"),s=i.store,a=s.data.items,n=this.down("[name=_2]").store;n.data.items;if(0==e){var o=i.selModel.selected.items;if(o&&0<o.length)for(t=o.length-1;0<=t;t--)l=o[t],s.remove(l),n.insert(0,l.data)}else for(t=a.length-1;0<=t;t--)l=a[t],s.remove(l),n.insert(0,l.data)},removeItem:function(e){var t,l,i=this.down("[name=_1]").store,s=(i.data.items,this.down("[name=_2]")),a=s.store,n=a.data.items;if(0==e){var o=s.selModel.selected.items;if(o&&0<o.length)for(t=o.length-1;0<=t;t--)l=o[t],a.remove(l),i.insert(0,l.data)}else for(t=n.length-1;0<=t;t--)l=n[t],a.remove(l),i.insert(0,l.data)},initComponent:function(){this.items=[{xtype:"container",layout:{type:"vbox",align:"stretch"},flex:1,padding:6,defaults:{anchor:"100%"},items:[{xtype:"fieldcontainer",layout:{type:"hbox",align:"stretch"},fieldLabel:IRm$.r1("L_BTN_SEARCH"),labelWidth:35,items:[{xtype:"combobox",name:"_3",queryMode:"local",fieldLabel:"",displayField:"name",valueField:"value",editable:!1,autoSelect:!1,width:100,store:{fields:["name","value"],data:[{name:"Include",value:"INCLUDE"},{name:"Start",value:"START"},{name:"End",value:"END"}]}},{xtype:"textfield",name:"_4",flex:1,enableKeyEvents:!0,listeners:{keydown:function(e,t,l){13==t.keyCode&&this.getValLst()},scope:this}},{xtype:"button",text:"..",width:20,handler:function(){this.getValLst()},scope:this}]},{xtype:"grid",name:"_1",store:{fields:[{name:"code"},{name:"text"}]},stateful:!0,flex:1,columnLines:!0,selType:"checkboxmodel",selModel:{checkSelector:".x-grid-cell"},columns:[{text:IRm$.r1("B_CODE"),flex:1,sortable:!0,dataIndex:"code"},{text:IRm$.r1("B_TEXT"),flex:1,sortable:!0,dataIndex:"text"}],viewConfig:{stripeRows:!0}}]},{layout:{type:"vbox",align:"stretch",pack:"center"},items:[{xtype:"container",flxe:1},{xtype:"button",text:">>",handler:function(){this.selectItem(!0)},scope:this},{xtype:"button",text:">",handler:function(){this.selectItem(!1)},scope:this},{xtype:"button",text:"<",handler:function(){this.removeItem(!1)},scope:this},{xtype:"button",text:"<<",handler:function(){this.removeItem(!0)},scope:this},{xtype:"container",flex:1}]},{xtype:"container",flex:1,layout:{type:"vbox",align:"stretch"},border:1,bodyPadding:6,items:[{xtype:"grid",name:"_2",store:{fields:[{name:"code"},{name:"text"}]},stateful:!0,flex:1,columnLines:!0,selType:"checkboxmodel",selModel:{checkSelector:".x-grid-cell"},columns:[{text:"Code",flex:1,sortable:!1,dataIndex:"code"},{text:"Text",flex:1,sortable:!1,dataIndex:"text"}],viewConfig:{stripeRows:!0}}]}],IG$.d$ValSel.superclass.initComponent.apply(this)},listeners:{afterrender:function(){this.init_f()}}}),IG$.valueSelectWindow=$s.extend($s.window,{modal:!0,region:"center",layout:"card",closable:!1,resizable:!1,width:630,height:500,field:null,callback:null,selmode:0,_confirm:function(){var e,t=this,l=[];if(0==t.selmode){if((i=this.down("[name=_2]").store.data.items)&&0<i.length)for(e=0;e<i.length;e++)l.push(i[e].data)}else if(1==t.selmode){var i,s=t.down("[name=txtselvalues]").getValue();if(s)for(i=s.split(";"),e=0;e<i.length;e++)i[e]&&l.push({code:i[e],text:i[e]})}this.callback&&this.callback.execute(l),this.close()},swapSelMode:function(){var e=this,t=e.getLayout(),l=e.down("[name=btnSelMode]"),i=0==e.selmode?(e.selmode=1,IRm$.r1("B_COMBO_VAL")):(e.selmode=0,IRm$.r1("B_CUST_VAL"));l.setText(i),t.setActiveItem(e.selmode)},initComponent:function(){var e=new IG$.d$ValSel({sheetoption:this.sheetoption,flex:1,prompt:this.prompt,field:this.field});this.title=IRm$.r1("T_VALUE_SELECT"),$s.apply(this,{defaults:{padding:10},items:[e,{xtype:"form",layout:{type:"vbox",align:"stretch"},items:[{xtype:"displayfield",value:IRm$.r1("L_CVAL_DESC")},{xtype:"textarea",fieldLabel:IRm$.r1("B_VALUES"),name:"txtselvalues",labelAlign:"top",flex:1}]}],buttons:["->",{text:IRm$.r1("B_CUST_VAL"),name:"btnSelMode",handler:function(){this.swapSelMode()},scope:this},{text:IRm$.r1("B_CONFIRM"),handler:function(){this._confirm()},scope:this},{text:IRm$.r1("B_CANCEL"),handler:function(){this.close()},scope:this}]}),IG$.valueSelectWindow.superclass.initComponent.apply(this,arguments)}});
IG$.helpWindow=$s.extend($s.window,{modal:!0,layout:"fit",closable:!0,resizable:!1,uid:null,width:600,height:400,sK2:function(e){var t=this,n=t.down("[name=memo]"),i=new IG$._rpc$;"report"==t.dm&&(t.uid=e,n.setValue(e),i.init(t,{ack:"manual",payload:{helpuid:e},mbody:{option:"get"}},t,t.rs_u4x,null),i.send())},rs_u4x:function(e){var t,n,i,l,a,m,o=this,d=this.down("[name=helpdoc]"),s=this.down("[name=memo]"),u=this.down("[name=helptitle]");for(o.u5x("cmd_cancel"),o.u5m={i:{},c:{}},t=IG$.XGetNode(e,"/smsg/item"),IG$.XGetInfo(o.u5m.i,t,"uid;name;nodepath;memo","s"),o.uid=o.u5m.i.uid,s.setValue(o.u5m.i.memo),n=IG$.XGetChildNodes(t),i=0;i<n.length;i++)a=IG$.XGetNode(n[i],"Title"),m=IG$.XGetNode(n[i],"Content"),l={lang:IG$.XGetAttr(n[i],"language"),t:IG$.XGetTextVal(a),c:IG$.XGetTextVal(m)},this.u5m.c[l.lang]=l;var c=window.useLocale||"en_US";o.u5m.c.en_US||(o.u5m.c.en_US={lang:"en_US",t:"",c:""}),o.u5m.c.ko_KR||(o.u5m.c.ko_KR={lang:"ko_KR",t:"",c:""}),o.u5m.c[c]||(o.u5m.c[c]={lang:c,t:"",c:""}),o.setTitle(o.u5m.c[c].t||IRm$.r1("B_HELP"));var p=o.down("[name=helpdoc]"),d=o.down("[name=helpdocedit]"),h=Base64.decode(o.u5m.c[c].c)||"";$(p.body.dom).html(h),d.setValue(h),u.setValue(o.u5m.c[c].t||"")},u5x:function(e){var t=this,n=t.win,i=n?n.down("[name=btnedit]"):null,l=n?n.down("[name=btnsave]"):null,a=(n&&n.down("[name=btncancel]"),t.down("[name=helpmain]")),m=-1,o=IG$.dlgLogin.jS2;switch(e){case"cmd_edit":m=1;break;case"cmd_save":t.u6x();break;case"cmd_cancel":i&&o&&(i.setVisible(!0),l.setVisible(!1)),m=0}-1<m&&a.setActiveItem(m)},u7l:function(){var e=this.down("[name=helpdocedit]"),t=this.down("[name=memo]"),n=this.down("[name=helptitle]"),i=window.useLocale||"en_US",l=this.u5m?this.u5m.c[i]:null;this.u5m.i.memo=t.getValue(),l&&(l.c=Base64.encode(e.getValue()),l.t=n.getValue())},u6x:function(){var e,t,n,i,l,a=this,m=new IG$._rpc$,o=window.useLocale||"en_US";for(e in a.u5m||((l=a.u5m={i:{},c:{}}).c.en_US={lang:"en_US",t:"",c:""},l.c.ko_KR={lang:"ko_KR",t:"",c:""},l.c[o]||(l.c[o]={lang:o,t:"",c:""})),a.u7l(),n="<smsg><item uid='"+(a.u5m.i.uid||"")+"'>",n+="<objinfo doctype='"+(a.dm||"")+"' memo='"+a.u5m.i.memo+"'/>",a.u5m.c)n+="<HelpContent language='"+(t=a.u5m.c[e]).lang+"'><Title><![CDATA["+(t.t||"")+"]]></Title><Content><![CDATA["+(t.c||"")+"]]></Content></HelpContent>";n+="</item></smsg>",(i={uid:a.u5m.i.uid,memo:a.u5m.i.memo}).uid||(i.address="/SYS_Documents/"+i.memo,i.name=i.memo,i.type="Help"),m.init(a,{ack:"writecontent",payload:i,mbody:n},a,a.rs_u6x,null),m.send()},rs_u6x:function(e){var t=IG$.XGetNode(e,"/smsg/item"),n=t?IG$.XGetAttr(t,"uid"):null;n&&(this.u5m.i.uid=n),IG$.alertmsg(ig$.appname,IRm$.r1("M_SAVED"),null,null,0,"success")},initComponent:function(){var e=this;$s.apply(this,{title:IRm$.r1("B_HELP"),items:[{xtype:"panel",layout:"fit",padding:10,items:[{xtype:"panel",name:"helpmain",layout:"card",items:[{xtype:"panel",name:"helpdoc"},{xtype:"panel",name:"helpedit",layout:{type:"vbox",align:"stretch"},items:[{xtype:"textfield",hidden:"report"==e.dm,fieldLabel:"DOCID",name:"memo"},{xtype:"textfield",fieldLabel:"Title",name:"helptitle"},{xtype:"textarea",name:"helpdocedit",flex:1,enableColors:!0,enableAlignments:!0}]}]}]}],buttons:[{text:"Edit",hidden:"report"!=this.dm,name:"btnedit",handler:function(){var e=this;e.down("[name=peditor]");e.down("[name=btnsave]").setVisible(!0),e.u5x.call(e,"cmd_edit")},scope:e},{text:IRm$.r1("L_SAVE_CONTENT"),name:"btnsave",hidden:!0,handler:function(){var e=this;e.down("[name=peditor]");e.u5x.call(e,"cmd_save")},scope:e},{text:IRm$.r1("B_CLOSE"),name:"btncancel",handler:function(){e.close()},scope:e}],listeners:{afterrender:function(){var e,t=this;null!=t.t&&null!=t.c?(t.setTitle(t.t||IRm$.r1("B_HELP")),(e=this.down("[name=helpdoc]")).body&&$(e.body.dom).html(t.c)):t.uid&&t.sK2(t.uid)}}}),IG$.helpWindow.superclass.initComponent.apply(this,arguments)}});
IG$.r___={},IG$.r___.registerTooltip=function(t,e){var r;IG$.r___.C?(r=IG$.r___.C?IG$.r___.C[e]:null)&&window.Ext&&Ext.tip.QuickTipManager.register({target:t.getId(),title:r.title,text:r.html}):$.ajax({type:"GET",url:"./data/tip.json?uniquekey="+IG$.getUniqueKey(),dataType:"json",timeout:1e4,success:function(r){IG$.r___.C=r,IG$.r___.registerTooltip(t,e)},error:function(r,t,e){}})},IG$.loadHelp=function(e,_){var r;IG$.r___.bC?(r=IG$.r___.bC?IG$.r___.bC[e]:null)?(_.t=r.t,_.c=r.h,_.show()):IG$.alertmsg("Error!","Document for ("+e+") is not prepared yet!",null,null,1,"error"):$.ajax({type:"GET",url:"./data/manual.json?uniquekey="+IG$.getUniqueKey(),dataType:"json",timeout:1e4,success:function(r){IG$.r___.bC=r;var t=IG$.r___.bC?IG$.r___.bC[e]:null;t?(_.t=t.t,_.c=t.h,_.show()):IG$.alertmsg("Error!","Document for ("+e+") is not prepared yet!",null,null,1,"error")},error:function(r,t,e){}})};
IG$.dlgsqlview=$s.extend($s.window,{xtype:"window",modal:!0,region:"center",layout:"fit",closable:!1,resizable:!1,width:500,height:400,defaults:{padding:10},requestSQLResult:function(){var e,t,s=this;null!=s.sheetoption&&null!=s.reportoption?(e=s.reportoption.getCurrentPivot.call(s.reportoption),(t=new IG$._rpc$).init(s,{ack:"olapservice",payload:{uid:s.uid,option:"sql",active:""+s.activeSheet},mbody:e,meta_type:"report"},s,s.rs_requestSQLResult,null),t.send()):s.sql&&s.rs_requestSQLResult({sql:s.sql})},rs_requestSQLResult:function(e){this.down("[name=sqlview]").setValue(e?e.sql:null)},initComponent:function(){$s.apply(this,{title:IRm$.r1("L_VIEW_SQL"),items:[{xtype:"textarea",name:"sqlview",readOnly:!0}],buttons:[{text:IRm$.r1("B_CLOSE"),handler:function(){this.close()},scope:this}],listeners:{afterrender:function(){this.requestSQLResult()}}}),IG$.dlgsqlview.superclass.initComponent.apply(this,arguments)}});
IG$.cellwizard=$s.extend($s.window,{modal:!1,layout:"fit",resizable:!1,isWindow:!0,closeAction:"destroy",width:500,autoHeight:!0,_confirm:function(){this.saveContent()},_init:function(){var e=this,t=new IG$._rpc$;e.uid?(t.init(e,{ack:"content",payload:{uid:e.uid},mbody:{option:"diagnostics"}},e,e.rs_loadCnt,null),t.send()):e.parentuid&&e.rs_loadCnt({content:{meta_type:"chart_measure"}})},rs_loadCnt:function(e){var t,i=this,a=e.content,n=new IG$._rpc$;for(i.down("[name=itemname]").setValue(e.name),i.down("[name=description]").setValue(e.description),i.item=a,i._ropt="basedatatype;valuemax;valuemin;cellwidth;cellheight".split(";"),t=0;t<i._ropt.length;t++)i.down("[name="+i._ropt[t]+"]").setValue(a[i._ropt[t]]);$.each(["linecolor","fillcolor"],function(e,t){i.down("[name="+t+"]").setValue(a[t])}),i.down("[name=axismetric]").store.loadData(a.axis_metrics),a.value_metric&&i.down("[name=valuemetric]").setValue(a.value_metric.name),i.item.cubeuid||(n.init(i,{ack:"helpcontent",payload:{uid:i.uid||i.parentuid,parenttype:"Bobject",read:"F"},mbody:{option:"parentcontent"}},i,i.rs_getCubeInfo,null),n.send())},rs_getCubeInfo:function(e){var t=e&&e.length?e[0]:null;t&&(this.item.cubeuid=t.uid)},saveContent:function(){var e,t,i=this,a=i.item;if(IG$.checkFields(i,["itemname"])){for(a.name=i.down("[name=itemname]").getValue(),a.description=i.down("[name=description]").getValue(),t=0;t<i._ropt.length;t++)e=i.down("[name="+i._ropt[t]+"]"),a[i._ropt[t]]=e.getValue();for($.each(["linecolor","fillcolor"],function(e,t){a[t]=i.down("[name="+t+"]").getValue()}),a.axis_metrics=[],e=i.down("[name=axismetric]"),t=0;t<e.store.data.items.length;t++){var n=e.store.data.items[t].data;a.axis_metrics.push(n)}var l=new IG$._rpc$;l.init(i,{ack:"writecontent",payload:{uid:i.uid,pid:i.parentuid,name:a.name,description:a.description,type:i.itemtype,nodepath:i.parentnodepath?i.parentnodepath+"/"+a.name:null},mbody:a,meta_type:"chart_measure"},i,i.rs_saveContent,null,null),l.send()}},rs_saveContent:function(e){var t=this;IG$.alertmsg(ig$.appname,IRm$.r1("M_SAVED"),null,null,0,"success"),t.callback&&t.callback.execute(t.item),t.close()},valSelHdlr:function(e){this.item.value_metric=e,this.down("[name=valuemetric]").setValue(e.name)},initComponent:function(){var t=this;t.title="Cell Chart Options",$s.apply(this,{items:[{xtype:"panel",border:0,layout:"anchor",bodyPadding:5,items:[{xtype:"fieldset",title:IRm$.r1("B_GENERAL"),layout:{type:"vbox",align:"stretch"},items:[{xtype:"textfield",name:"itemname",_fasl:1,fieldLabel:IRm$.r1("B_NAME"),required:!0},{xtype:"textarea",name:"description",fieldLabel:IRm$.r1("B_DESC")}]},{xtype:"combobox",name:"basedatatype",fieldLabel:"Draw Type",queryMode:"local",displayField:"name",valueField:"value",editable:!1,autoSelect:!0,store:{xtype:"store",fields:["name","value"],data:[{name:"Percent gauge",value:0},{name:"Area",value:2},{name:"Line",value:3},{name:"Column",value:4},{name:"WinLose",value:7},{name:"Pie",value:8},{name:"BoxPlot",value:9}]}},{xtype:"fieldset",title:"Y Axis Setting",layout:"anchor",items:[{xtype:"numberfield",name:"valuemin",fieldLabel:"Minimum",flex:1},{xtype:"numberfield",name:"valuemax",fieldLabel:"Maximum",flex:1}]},{xtype:"fieldset",title:"Field Selections",layout:{type:"vbox",align:"stretch"},items:[{xtype:"fieldcontainer",fieldLabel:"Value Field",layout:{type:"hbox",align:"stretch"},items:[{xtype:"textfield",name:"valuemetric"},{xtype:"button",text:"..",handler:function(){var e=new IG$.metaSelectDlg({visibleItems:"bobject;table;folder;metric;measure;dataset;formulameasure;custommetric;datemetric",tree_options:{cubebrowse:!0,rootuid:t.item.cubeuid}});e.callback=new IG$.callBackObj(this,this.valSelHdlr),IG$.checkLogin(this,e)},scope:this}]},{xtype:"container",layout:{type:"hbox",align:"stretch",pack:"center"},items:[{xtype:"gridpanel",name:"axismetric",title:"X-Axis Field",hideHeaders:!0,stateful:!0,store:{fields:["name","type","uid","nodepath"]},flex:1,height:110,viewConfig:{plugins:{ptype:"gridviewdragdrop",ddGroup:"_I$RD_G_"},listeners:{beforedrop:function(e,t,i,a,n){var l,o=!1,r=t.records&&0<t.records.length?t.records[0]:null;if(this==t.view?t.copy=!1:t.copy=!0,i&&this.me.store.indexOf(i),r&&("Metric"==r.data.type||"Measure"==r.data.type||"CustomMetric"==r.data.type||"FormulaMeasure"==r.data.type||"DateMetric"==r.data.type)){for(l=0;l<this.store.data.items.length;l++)if(this.store.data.items[l].data.uid==r.data.uid){o=!0;break}0==o&&this.store.add(r.data)}return!1},drop:function(e,t,i,a){i&&i.get("name");return!1}}},columns:[{text:IRm$.r1("B_NAME"),flex:1,sortable:!1,dataIndex:"name"},{text:IRm$.r1("B_TYPE"),flex:1,sortable:!1,dataIndex:"type"},{xtype:"actioncolumn",width:30,items:[{iconCls:"icon-grid-delete",tooltip:"Delete item",handler:function(e,t,i){var a=e.store;a.getAt(t);a.remove(a.data.items[t])}}]}]},{xtype:"button",text:"..",width:40,handler:function(){var e=new IG$.metaSelectDlg({visibleItems:"bobject;table;folder;metric;measure;formulameasure;custommetric;datemetric",tree_options:{cubebrowse:!0,rootuid:t.item.cubeuid},callback:new IG$.callBackObj(this,function(e){for(var t=this.down("[name=axismetric]").store,i=!1,a=0;a<t.data.items.length;a++)if(t.data.items[a].get("uid")==e.uid){i=!0;break}0==i&&t.add(e)})});IG$.checkLogin(this,e)},scope:this}]}]},{xtype:"fieldset",title:"Options",layout:"anchor",items:[{xtype:"fieldcontainer",anchor:"100%",fieldLabel:"Line Color",layout:"hbox",items:[{xtype:"textfield",name:"linecolor",width:120},{xtype:"splitter"},{xtype:"splitbutton",width:30,menu:{showSeparator:!1,items:[{xtype:"colorpicker",listeners:{select:function(e,t){this.down("[name=linecolor]").setValue("#"+t)},scope:t}},"-"]}}]},{xtype:"fieldcontainer",anchor:"100%",fieldLabel:"Fill Color",layout:"hbox",items:[{xtype:"textfield",name:"fillcolor",width:120},{xtype:"splitter"},{xtype:"splitbutton",width:30,menu:{showSeparator:!1,items:[{xtype:"colorpicker",listeners:{select:function(e,t){this.down("[name=fillcolor]").setValue("#"+t)},scope:t}},"-"]}}]},{xtype:"numberfield",fieldLabel:"Width",name:"cellwidth",minValue:50,maxValue:400},{xtype:"numberfield",fieldLabel:"Height",name:"cellheight",minValue:20,maxValue:300}]}]}],buttons:["->",{text:IRm$.r1("B_CONFIRM"),handler:function(){this._confirm()},scope:this},{text:IRm$.r1("B_CLOSE"),handler:function(){this.close()},scope:this}],listeners:{afterrender:function(e){this._init()}}}),IG$.cellwizard.superclass.initComponent.apply(this,arguments)}});
IG$._IB6=$s.extend($s.window,{modal:!0,region:"center",layout:{type:"vbox",align:"stretch"},closable:!1,resizable:!0,width:450,height:500,_init:function(){var e=this.reportoption,t=e._mc;this.cube_datasource=t?e._mc.cube_datasource:null},cubeSelectedHandler:function(){var e=this,t=new IG$._rpc$,n=e.cubeobj;t.init(e,{ack:"helpcontent",payload:n,mbody:{option:"recent",btype:"L",mode:"register"}},e,function(e){}),t.send()},_a1:function(){var e=this.cubeobj;e&&this.down("[name=fcube]").setValue(e.name)},p$2E:function(e){this.cubeobj=e[0],this._a1()},a1:function(e,i){var a=this;i.empty(),e&&$.each(e,function(e,t){var n;t.itemtype=t.type,(n=$("<li class='ig-r-clist'><div></div><span title='"+IG$.hEE(t.name)+"'>"+t.name+"</span></li>")).bind("click",function(){a.cubeobj=t,a._a1()}),i.append(n)})},_d1:function(){var e=this,t={option:"search",name:e.down("[name=m_k]").getValue(),typelist:"Bobject",typemode:"1"},n=new IG$._rpc$,i=e.down("[name=recentitems]"),a=$(i.el.dom),c=$("<ul></ul>"),l=$("#search",a),o=$(".searchcontainer",a);l.hide(),t.name&&(l.show(),o.empty(),c.appendTo(o),n.init(e,{ack:"helpcontent",payload:{},mbody:t},e,function(e){this.a1(e.children,c,1)},null,null),n.send())},initComponent:function(){IG$.dlgLogin.logininfo.l3.charAt(0);$s.apply(this,{defaults:{bodyStyle:"padding:10px"},title:IRm$.r1("L_T_CUBE_SEL"),items:[{xtype:"panel",layout:{type:"vbox",align:"stretch"},padding:10,items:[{html:IRm$.r1("L_M_CUBE_SEL"),height:30,border:!1},{xtype:"panel",region:"center",flex:1,border:0,layout:{type:"vbox",align:"stretch"},items:[{xtype:"fieldcontainer",layout:{type:"hbox",align:"stretch"},fieldLabel:IRm$.r1("L_M_SUBJ"),items:[{xtype:"textfield",width:160,name:"fcube",allowBlank:!1},{xtype:"button",text:"..",handler:function(){new IG$.metaSelectDlg({visibleItems:"workspace;folder;bobject",callback:new IG$.callBackObj(this,function(e){this.cubeobj=e,this._a1()})}).show()},scope:this}]},{xtype:"fieldcontainer",layout:{type:"hbox",align:"stretch"},fieldLabel:IRm$.r1("B_SEARCH"),items:[{xtype:"textfield",name:"m_k",flex:1,enableKeyEvents:!0,listeners:{keyup:function(e,t){13==t.keyCode&&this._d1()},scope:this}},{xtype:"button",cls:"ig-link-btn",text:"Search",handler:function(){this._d1()},scope:this}]},{xtype:"fieldset",title:IRm$.r1("L_M_SUBJ_REC"),flex:1,layout:"fit",border:1,items:[{xtype:"panel",border:0,flex:1,html:"<div class='recentcube'><span class='title'>Recent Subject</span><div class='recentcontainer'></div><span id='search' class='title' style='display:none;'>Search Results</span><div class='searchcontainer'></div></div>",name:"recentitems"}]}]}]}],buttons:[{text:IRm$.r1("B_CONFIRM"),handler:function(){var e=this;e.cubeSelectedHandler(),e.callback&&e.callback.execute(e),e.close()},scope:this},{text:IRm$.r1("B_CANCEL"),handler:function(){var e=this;e.callback&&e.callback.execute(e,!0),e.close()},scope:this}],listeners:{afterrender:function(){var e,n=this,t=n.reportoption,i=n.sheetoption,a=this.down("[name=recentitems]"),c=$(a.el.dom),l=$("<ul></ul>"),o=$(".recentcontainer",c),s=new IG$._rpc$;n._init(),e=i&&i.datasource?i.datasource.uid:t._mc.default_datasource,n.cubeuid=n.cubeuid||e,t&&t.cube_objects&&t.cube_objects.length&&n.p$2E(t.cube_objects),l.appendTo(o),s.init(n,{ack:"helpcontent",payload:{},mbody:{option:"recent",btype:"L"}},n,function(e){var t=e&&e.length?e:null;t&&n.a1(t,l)},null,null),s.send()},close:function(e){var t=this;t.callback&&t.callback.execute(t,!0),t.close()}}}),IG$._IB6.superclass.initComponent.apply(this,arguments)}});
IG$.metaSelectDlg=$s.extend($s.window,{width:650,height:550,layout:"fit",modal:!0,mode:"select",xtype:"window",open_folder_clickhandler:function(e){var t=this,n=e.type.toLowerCase(),a=e.name,i=e.nodepath,o=e.uid||e.address,l=e.is_sub,r=!1,d=new IG$._rpc$;return(1==/(folder|table|inlineview|javapackage|metrics|root|datemetric|dataset)/.test(n)||l||"bobject"==n&&e.root)&&(t.selectedPath={uid:o,nodepath:i,name:a},d.init(null,{ack:"content",payload:{uid:o},mbody:{option:"folder"}},t,t.rs_open_folder_clickhandler,null),d.send(),r=!0),r},rs_open_folder_clickhandler:function(e){var t=e?e.children:null;this.processItemNodes(t,e)},load_content:IG$.load_content,rload_content:function(e,t){var n,a,i,o=this,l=o.down("[name=datagrid]"),r=[],d=null;if(o.openItem=null,0!=(o.ltype=t)&&5!=t&&1!=t||(o.openItem=e,o.openItem.name,d=o.openItem.nodepath,i=o.openItem.uid,o.openItem.type.toLowerCase()),o.setBreadCrumb(d,i),e.children)for(n=0;n<e.children.length;n++)(a=e.children[n]).ltype=a.type.toLowerCase(),a.iconcls=IG$.get_metatype_icon(a.ltype,a),r.push(a);IG$.sortMeta(r),l.store.loadData(r)},processItemNodes:function(e,t){var n,a=[],i=this,o=i.down("[name=datagrid]");if(i.setBreadCrumb(t.nodepath,t.uid),e)for(n=0;n<e.length;n++){var l=e[n];l.itemtype=l.type||l.itemtype,0==!(null==i.visibleItems||i.visibleItems&&-1<(i.visibleItems+";").indexOf((l.type+";").toLowerCase()))&&a.push(l)}o.store.clearData(),o.store.loadData(a)},setBreadCrumb:function(e,t){var n,a,i,o,l,r=this,d=r.down("[name=_bc]"),s=d?$(d.body.dom):null,c=[];if(s.empty(),r.bcuid=t,r._breadcrumbitems=[],e){for(n=e.split("/"),i=1;i<n.length;i++){for(a={name:n[i],cpath:""},o=1;o<i+1;o++)a.cpath+="/"+n[o];c.push(a)}l=$("<ul class='ig-navi-breadcrumb'></ul>").appendTo(s),$.each(c,function(e,t){var n,a=e<c.length-1;0<e&&$("<li class='ig-navi-breadcrumb-sep'>&gt;</li>").appendTo(l),(n=$("<li class='"+(a?"qlink":"")+"'>"+(t.lname||t.name)+"</li>").appendTo(l)).appendTo(l),r._breadcrumbitems.push(t),a&&n.bind("click",function(){r.load_content.call(r,0,t.cpath)})})}},_confirm:function(){var e,t,n=this,a=n.selectedItem,i=n.down("[name=datagrid]").getSelectionModel().selected;if("select"==n.mode){if(!a&&"folder"!=n.targetobj)return void IG$.alertmsg(ig$.appname,IRm$.r1("L_SELECT_ITEM"),null,n,1,"error");if("folder"==n.targetobj){if(!n.selectedPath)return void IG$.alertmsg(ig$.appname,IRm$.r1("L_SELECT_ITEM"),null,n,1,"error");a=n.selectedPath}if(n.multiselect)for(a=[],e=0;e<i.length;e++)t=i.items[e],a.push(t.data);n.callback&&n.callback.execute(a)}else if("newitem"==n.mode){var o=n.txtItemName.getValue();if(""==o)return void IG$.alertmsg(ig$.appname,IRm$.r1("L_TYPE_ITEM_NAME"),null,n,1,"error");if(!n.selectedPath)return void IG$.alertmsg(ig$.appname,IRm$.r1("L_SELECT_PATH"),null,n,1,"error");n.selectedPath.name=o,n.callback&&n.callback.execute(n.selectedPath)}n.close()},custom_expanded_func:function(e){var t=this.tree;"newitem"==this.mode&&e.isRoot()&&0==e.childNodes.length&&setTimeout(function(){IG$.alertmsg(ig$.appname,IRm$.r1("B_SELECT_FOLDER"),null,null,0,""),t.m_0._createMetaObject.call(t.m_0,"Folder",e.get("uid")||"/",e.get("nodepath")||"/",e)},1e3)},initComponent:function(){var n=this,e={showtoolbar:!1,_search:!0,custom_click_func:new IG$.callBackObj(n,function(e,t){n.open_folder_clickhandler(t)}),custom_expanded_func:new IG$.callBackObj(n,n.custom_expanded_func),region:"center",name:"__mtree",flex:1,visibleItems:n.folderItems||"folder;table;inlineview;dataset;",tree_options:n.tree_options};n.title="newitem"==n.mode?IRm$.r1("T_META_SAVE"):IRm$.r1("T_META_SELECT"),e.initpath=n.initpath,n.tree=new IG$.naviTree(e),$s.apply(n,{items:[{xtype:"container",layout:"border",bodyStyle:"padding: 5px;",items:[{xtype:"container",width:180,region:"west",split:!0,layout:"fit",margins:0,items:[n.tree]},{xtype:"panel",region:"center",flex:2,layout:{type:"vbox",align:"stretch"},items:[{xtype:"panel",name:"_bc",height:22,border:0},{xtype:"grid",name:"datagrid",store:{xtype:"store",fields:["name","lname","description","type","nodepath","memo","uid"]},selModel:{mode:n.multiselect?"MULTI":"SINGLE"},columns:[{header:IRm$.r1("B_NAME"),dataIndex:"name",flex:1,renderer:function(e,t,n){return n.get("lname")||n.get("name")}},{header:IRm$.r1("B_TYPE"),dataIndex:"type"},{header:IRm$.r1("B_DESC"),dataIndex:"description"}],stripeRows:!0,stateful:!0,stateId:"grid",flex:1,listeners:{itemdblclick:function(e,t,n,a,i){var o=this.down("[name=datagrid]").store.data.items[a].data,l=o.type.toLowerCase();if(1==/folder|table|inlineview|datemetric/.test(l)){if(this.targetobj&&-1<this.targetobj.indexOf(l+";"))return;this.open_folder_clickhandler(o)}},itemclick:function(e,t,n,a,i){if(-1<a){var o,l,r,d=this,s=d.down("[name=datagrid]"),c=s.store.data.items[a].data,m=c.type.toLowerCase(),p=s.getSelectionModel().selected;if(1==/folder|table|inlineview/.test(m)&&(!d.targetobj||d.targetobj&&d.targetobj.indexOf(m+";")<0))d.open_folder_clickhandler(c);else if(d.selectedItem=c,d.multiselect){for(o=[],r=0;r<p.length;r++)l=p.items[r],o.push(l.get("name"));d.txtItemName.setValue(o.join(","))}else d.txtItemName.setValue(c.name)}},scope:this}}],bbar:[{name:"txtItemName",fieldLabel:"Name",xtype:"textfield",enableKeyEvents:!0,listeners:{keyup:function(e,t){var n=this;13==t.keyCode&&setTimeout(function(){n._confirm()},10)},scope:this}}]}]}],buttons:[{xtype:"button",text:IRm$.r1("B_CONFIRM"),handler:function(){this._confirm()},scope:this},{xtype:"button",text:IRm$.r1("B_CANCEL"),handler:function(){this.close()},scope:this}],listeners:{afterrender:function(e,t){var n=e;n.tree.down("[name=m_0]");n.datagrid=n.down("[name=datagrid]"),n.txtItemName=n.down("[name=txtItemName]")}}}),IG$.metaSelectDlg.superclass.initComponent.call(this)}});
IG$.ltW=IG$.ltW||[{name:"jobcategory",type:"select",categ:"jobcategory",shortdesc:"Begin Here",title:"Before You Begin",items:[{name:"rdbms",title:"Relational Database",actiontype:"gotomenu",action:"rdbms;cube;report",desc:"Follow step for relational database analysis."},{name:"excel",title:"Excel file analysis",actiontype:"gotomenu",action:"excel;report",desc:"Local file to analysis report."},{name:"browse",title:"Browse existing content",actiontype:"gotomenu",action:"browse;report",desc:"Get your analysis report on browser."},{name:"report",title:"Make report",actiontype:"gotomenu",action:"report",desc:"Make new report with easy guides."},{name:"rstatistics",title:"R Statistics",actiontype:"gotomenu",action:"report;rstatistics",desc:"Powerful statistical engine for your report."}]},{name:"connectdb",categ:"rdbms",shortdesc:"Database",title:"Connect database.",type:"cmd",btnname:"New Database Instance",desc:"<b>Click [button] to open connect database manager.</b>"},{name:"registertable",categ:"rdbms",shortdesc:"Register Tables",title:"Register Tables.",type:"cmd",btnname:"Table Register Manager",desc:"<b>Click [button] to open register table manager.</b>"},{name:"datamodel",categ:"rdbms",shortdesc:"Data Modelling",title:"Make relations between tables.",type:"cmd",btnname:"New Relational Model",desc:"<b>Click [button] to make new datamodel.</b>"},{name:"codmapping",categ:"cube",shortdesc:"Code Mapping",title:"Define Code Mapping DataSet.",type:"cmd",btnname:"Define Code Mapping",desc:"<b>Click [button] to Code Mapping Manager.</b>"},{name:"variables",categ:"cube",shortdesc:"Variables",title:"Define Mostly Used Variables.",type:"cmd",btnname:"Define Variables",desc:"<b>Click [button] to Variables Manager.</b>"},{name:"openexcel",categ:"excel",enabled:!1,shortdesc:"Upload Excel or CSV file",title:"Upload file and change Metric attribute or options.",type:"cmd",btnname:"Load Excel or CSV file",desc:"<b>Click [button] to set detailed information on columns</b>"},{name:"beforerstat",categ:"rstatistics",shortdesc:"Before begin",title:"Before begin R statistics",type:"html",html:"<p>R statistics is available on each report. You can transfer between items with sheet/chart/R statistics on report toolbar menu.</p><p>R runs with script running on server. Make your R script or select one on the templates.</p>"},{name:"rscript",categ:"rstatistics",shortdesc:"R Script",title:"Select R script for statistical analysis.",type:"wizard"},{name:"report",categ:"report",shortdesc:"Make Report",title:"Make Report with Pivot.",type:"cmd",btnname:"New Report",desc:"<b>Click [button] to make new Report</b>"}];
IG$.smartWizardButton=function(){},IG$.smartWizardButton.prototype={show:function(){this.klink.removeClass("disabled"),this.klink.addClass("selected"),this.content.fadeIn()},hide:function(){this.klink.removeClass("selected"),this.klink.addClass("disabled"),this.content.hide()}},IG$.smartProcess=function(e,t,a,i){var n=e,s=IG$.mainPanel||null,d=1;switch(t){case"registertable":IG$.procMenuCommand("CMD_TABLE_REGISTER");break;case"connectdb":IG$.procMenuCommand("CMD_CONNECT_DB");break;case"datamodel":s.navigateApp.call(s,null,"CubeModel".toLowerCase(),"New DataModel",null,null,!0);break;case"rcube":s.navigateApp.call(s,null,"Cube".toLowerCase(),"New Cube",null,null,!0);break;case"report":s.navigateApp.call(s,null,"Report".toLowerCase(),"New Report",null,null,!0);break;case"dashboard":s.navigateApp.call(s,null,"Dashboard".toLowerCase(),"New Dashboard",null,null,!0,i);break;case"molapcube":s.navigateApp.call(s,null,"MCube".toLowerCase(),"New MCube",null,null,!0,i);break;case"setmicrocube":case"openexcel":s.navigateApp.call(s,null,"DataCube".toLowerCase(),"LocalFileLoader",null,null,!0);break;case"sqlloading":s.navigateApp.call(s,null,"SQLCube".toLowerCase(),"SQL Cube",null,null,!0);break;case"close_wizard":IG$.procMenuCommand("CMD_HOME");break;case"codmapping":IG$.procMenuCommand("CMD_LOOKUP");break;case"variables":IG$.procMenuCommand("CMD_VAR");break;default:d=0}n.dwizard&&n.dwizard.dwizard_main&&d&&n.dwizard.dwizard_main.customClose()},IG$.smartwizard=function(e,t){var a=this,i=$(e.dwizard.el.dom),n=$(e.dwizard_bar.el.dom);a.dwizard=e,a.container=i,a.cbar_area=n,i.empty(),n.empty();$("<div class='app-wizard-bg'></div>").appendTo(a.container);a.html=$("<div class='idv-wz-cntl'></div>").appendTo(a.container),a.categ=t,a.categmap=[],a.initialize()},IG$.smartwizard.prototype={initialize:function(){var e,t=this,a=t.categ;for(this.html.empty(),t.categmap={},e=t.c_nstep=0;e<a.length;e++)t.categmap[a[e].name]=a[e];t.c_step=a[0],t.drawStep();var i,n={};n.bar=$("<div class='idv-st-abar'></div>").appendTo(this.cbar_area),n.finish=$("<button class='idv-st-btn idv-st-btn-finish'>Finish</button>").appendTo(n.bar),i=$("<div class='idv-st-btn-box'></div>").appendTo(n.bar),n.prev=$("<button class='idv-st-btn idv-st-btn-prev'>Previous</button>").appendTo(i),n.next=$("<button class='idv-st-btn idv-st-btn-next'>Next</button>").appendTo(i),n.next.addClass("idv-st-btn-disable"),n.prev.addClass("idv-st-btn-disable"),n.finish.bind("click",function(){IG$.smartProcess(t,"close_wizard")}),n.next.bind("click",function(){t.doStep.call(t,1)}),n.prev.bind("click",function(){t.doStep.call(t,-1)}),this.actionbar=n},drawStep:function(){var l=this,e=l.html,t=l.categ;l.stepcontainer=$("<div class='idv-st-cnter'></div>").appendTo(e),l.stepul=$("<ul class='idv-st-anch'></ul>").appendTo(e),l.stepitems=[],$.each(t,function(e,a){var t=e+1,i=e==l.c_nstep?"selected":"disabled",n=new IG$.smartWizardButton;switch(n.kul=$("<li></li>").appendTo(l.stepul),n.klink=$("<a href='#' class='"+i+"'></a>").appendTo(n.kul),n.item=a,n.label=$("<label class='idv-st-nbr'>"+t+"</label>").appendTo(n.klink),n.stepdesc=$("<span class='idv-st-desc'>"+a.shortdesc+"</span>").appendTo(n.klink),n.content=$("<div class='idv-st-cnt'></div>").appendTo(l.stepcontainer),n.ctitle=$("<h2 class='idv-st-stitle'><span id='mstep'>Step"+t+"</span> : "+a.title+"</h2>").appendTo(n.content),a.type){case"select":var s=$("<ul class='idv-st-sel'></ul>").appendTo(n.content);a.divdesc=$("<div class='idv-st-sel-desc'></div>").appendTo(n.content),$.each(a.items,function(e,t){0!=t.enabled&&$("<li class='idv-st-sel-item'><a href='#'>"+t.title+"</a></li>").appendTo(s).bind("click",function(){switch(t.actiontype){case"gotomenu":var e=t.action;l.loadedAction==e?l.doStep.call(l,1):l.loadActionMenu.call(l,e,a,t)}})});break;case"cmd":var d=$("<div class='idv-st-inr'></div>").appendTo(n.content);$("<div>"+n.item.desc+"</div>").appendTo(d),$("<div class='idv-st-btn'>"+(n.item.btnname||"Continue")+"</div>").appendTo(d).bind("click",function(){IG$.smartProcess(l,n.item.name)});break;case"html":d=$("<div class='idv-st-inr'></div>").appendTo(n.content),$(n.item.html).appendTo(d),n.item.buttons&&0<n.item.buttons.length&&$.each(n.item.buttons,function(e,t){$("#"+t,d).bind("click",function(){IG$.smartProcess(l,n.item.name,t)})}),n.item.post&&n.item.post(l,d)}0<e&&(n.kul.hide(),n.content.hide()),n.klink.bind("click",function(){var e,t=-1,a=n.item.name;if(a==l.stepitems[0].item.name)t=0;else for(e=0;e<l.actionsteps.length;e++)if(l.actionsteps[e].item.name==a){t=e+1;break}-1<t&&l.goStep.call(l,t)}),l.stepitems.push(n)})},loadActionMenu:function(e,t,a){var i,n,s=this,d=2;for(s.loadedAction=e,s.actionbar.next.removeClass("idv-st-btn-disable"),e=";"+e+";",s.actionsteps=[],s.c_nstep=0,s.hidemsg(),t.divdesc.show(),t.divdesc.html(a.desc),i=1;i<s.stepitems.length;i++)n=s.stepitems[i],-1<e.indexOf(";"+n.item.categ+";")?(n.hide(),n.label.html(""+d),n.kul.fadeIn(),$("#mstep",n.stepdesc).html("Step "+d),$("#mstep",n.ctitle).html("Step "+d),d++,s.actionsteps.push(n)):n.kul.hide()},doStep:function(e){var t,a=this,i=a.c_nstep+e;a.actionsteps&&0<a.actionsteps.length&&-1<i&&i<a.actionsteps.length+1?a.goStep(i):(t="",(!a.actionsteps||a.actionsteps&&0==a.actionsteps.length)&&(t="Click work category to proceed!"),a.showmsg(t))},goStep:function(e){var t,a=this;if(a.hidemsg(),0==e?(a.stepitems[0].show(),a.actionbar.next.removeClass("idv-st-btn-disable"),a.actionbar.prev.addClass("idv-st-btn-disable")):(a.stepitems[0].hide(),a.actionsteps.length==e?a.actionbar.next.addClass("idv-st-btn-disable"):a.actionbar.next.removeClass("idv-st-btn-disable"),a.actionbar.prev.removeClass("idv-st-btn-disable")),a.actionsteps)for(t=0;t<a.actionsteps.length;t++)t+1==e?a.actionsteps[t].show():a.actionsteps[t].hide();a.c_nstep=e},showmsg:function(e){},hidemsg:function(){}},IG$.dlgSmartWizard=$s.extend($s.window,{modal:!0,region:"center",layout:"fit",closable:!1,resizable:!0,width:650,height:440,header:!1,init_f:function(){var e=this,t=e.down("[name=dwizard]"),a=e.down("[name=dwizard_bar]");e._loaded||(e._wizard=new IG$.smartwizard({dwizard_main:e,dwizard:t,dwizard_bar:a},IG$.ltW),e._loaded=1)},customClose:function(){this.hide()},initComponent:function(){$s.apply(this,{items:[{xtype:"panel",layout:"fit",bodyPadding:20,items:[{xtype:"panel",layout:{type:"vbox",align:"stretch"},items:[{xtype:"container",layout:"fit",flex:1,name:"dwizard",autoScroll:!0},{xtype:"container",layout:"fit",height:40,name:"dwizard_bar"}]}]}],listeners:{afterrender:function(e){this.init_f()}}}),IG$.dlgSmartWizard.superclass.initComponent.apply(this,arguments)}});
IG$.scheduler=$s.extend(IG$.v$pnl,{padding:10,closable:!0,iconCls:"icon-schedule",layout:{type:"vbox",align:"stretch"},init_f:function(){this.getSrvStat()},getSrvStat:function(){var e=this,t=new IG$._rpc$;t.init(e,{ack:"schedule",payload:{action:"checkstatus"},mbody:{}},e,e.rs_getSrvStat,null),t.send()},rs_getSrvStat:function(e){var t,a=this.down("[name=txtstatus]"),n="Failed to check status";e&&(n="100"==(t=e.code)?"Schedule server is running and normal":"1"==t?"Schedule server is disabled":"5"==t?(e.message,"Error while connect schedule server. errorcode: ("+e.errcode+") "+e.errmsg):(t="6","Server result xml is not well formed")),a.setValue(n),this.getJobs()},getJobs:function(){var e=this,t=new IG$._rpc$;t.init(e,{ack:"schedule",payload:{action:"list"},mbody:{}},e,e.rs_getJobs,null),t.send()},rs_getJobs:function(e){var t,a,n,i,s,l=this,o=[],d=l.down("[name=grdjoblist]"),c=l.down("[name=disp_job]"),r=(l.down("[name=grddetail]"),l.down("[name=detailpanel]"));if(e)for(t=0;t<e.length;t++){switch(n="Unknown",(a=e[t]).pstatus){case"A":n="Ready to Pickup";break;case"C":n="Completed";break;case"E":n="User Cancelled"}a.pstatus_desc=n,a.crtdate_desc=IG$.formatDate(a.crtdate),a.uptdate_desc=IG$.formatDate(a.uptdate),a.pickdate_desc=a.pickdate?IG$.formatDate(a.pickdate):null,a.enddate_desc=a.enddate?IG$.formatDate(a.enddate):null,s=IRm$.r1("L_SC_"+a.sctype),a.sc=s+" "+a.scoption,(i=a.program)&&(a.objname=i.name),o.push(a)}c.setVisible(!0),r.setVisible(!1),d.store.loadData(o)},getJobDtl:function(e){var t=this,a=new IG$._rpc$;a.init(t,{ack:"schedule",payload:{sid:e,action:"joblist"},mbody:{}},t,t.rs_getJobDtl,null),a.send()},rs_getJobDtl:function(e){var t,a,n,i=this,s=i.down("[name=disp_job]"),l=i.down("[name=grddetail]"),o=i.down("[name=detailpanel]"),d=[];if(e&&e.length)for(t=0;t<e.length;t++){switch(n="Unknown",(a=e[t]).pstatus){case"C":n="Completed";break;case"I":n="Initalizaed";break;case"F":n="Failed";break;case"T":n="Cancel Queue";break;case"Q":n="Queue ","T"==a.trigger?n+=" (^o^)":n+=" (@.@)"}a.pstatusdesc=n,a.crtdate_desc=IG$.formatDate(a.crtdate),a.uptdate_desc=IG$.formatDate(a.uptdate),d.push(a)}s.setVisible(!1),o.setVisible(!0),l.store.loadData(d)},registerJob:function(s){var l=this,e=new IG$._rpc$;e.init(l,{ack:"appoption",payload:{address:"schedule_config"},mbody:{}},l,function(e){var t,a,n=[];if(e&&e.programs){for(t=0;t<e.programs.length;t++)a=e.programs[t],n.push(a);var i=new IG$.d$RegSch({sid:s?s.get("sid"):null,uid:null,_cur_job:s,callback:new IG$.callBackObj(l,function(e){s||l.getSrvStat()}),req:null,programs:n});IG$.checkLogin(l,i)}}),e.send()},cancelJob:function(e){},purgeJob:function(e){},getLog:function(e,t,a){var n=new IG$.schLog({sid:e,jid:t,executeid:a});IG$.checkLogin(this,n)},initComponent:function(){this.items=[{xtype:"fieldset",title:"Schedule Server Status",layout:"anchor",paddingY:40,defaults:{anchor:"100%"},items:[{xtype:"fieldcontainer",layout:{type:"hbox",align:"stretch"},items:[{xtype:"displayfield",name:"txtstatus",value:"Server status checking...",flex:1},{xtype:"button",text:"Refresh",handler:function(){this.getSrvStat()},scope:this},{xtype:"button",text:"Register Schedule",handler:function(){this.registerJob()},scope:this},{xtype:"container",flex:1},{xtype:"button",text:"Programs",name:"btn_prog",accl:"ig_schedule_prog",handler:function(){IG$.procMenuCommand("CMD_SCH_PROG","scheduler_quartz")},scope:this}]}]},{xtype:"gridpanel",flex:1,name:"grdjoblist",store:{xtype:"store"},columns:[{text:"Nickname",flex:1,dataIndex:"name"},{text:"Object name / Class",flex:1,dataIndex:"objname"},{text:"Owner",dataIndex:"uuname"},{text:"Status",dataIndex:"pstatus_desc"},{text:"Schedule",dataIndex:"sc"},{text:"Pickup Time",dataIndex:"pickdate_desc"},{text:"End Time",dataIndex:"enddate_desc"},{text:"Heartbeat",dataIndex:"heartbeat"},{text:"Created date",dataIndex:"crtdate_desc"},{text:"Modified date",dataIndex:"uptdate_desc"}],listeners:{itemclick:function(e,t,a,n,i,s){this._cur_job=t,this.getJobDtl(t.get("sid"))},scope:this}},{xtype:"fieldset",title:"Detailed Status",name:"detailpanel",paddingY:40,flex:1,layout:{type:"vbox",align:"stretch"},hidden:!0,collapsed:!1,defaults:{anchor:"100%"},items:[{xtype:"panel",flex:1,layout:{type:"vbox",align:"stretch"},tbar:[{text:"Edit Job",handler:function(){this._cur_job&&this.registerJob(this._cur_job)},scope:this},{text:"Cancel Job",handler:function(){this._cur_job&&this.cancelJob(this._cur_job)},scope:this},{text:"Purge Job",handler:function(){this._cur_job&&this.purgeJob(this._cur_job)},scope:this}],items:[{xtype:"displayfield",name:"disp_job",hidden:!1,value:"Click Schedule for detailed job status"},{xtype:"gridpanel",name:"grddetail",flex:1,store:{xtype:"store",fields:["sid","jid","crtdate","crtdate_desc","uptdate","uptdate_desc","pstatus","pstatusdesc"]},columns:[{xtype:"gridcolumn",text:"Pickup date",dataIndex:"uptdate_desc",flex:1},{xtype:"gridcolumn",text:"Started date",dataIndex:"crtdate_desc",flex:1},{xtype:"gridcolumn",text:"Status",dataIndex:"pstatusdesc",tdCls:"igc-td-link"},{xtype:"actioncolumn",width:60,items:[{iconCls:"icon-grid-log",tooltip:"Log",handler:function(e,t,a){var n=e.store.getAt(t),i=n.get("sid"),s=n.get("jid"),l=n.get("executeid");i&&s&&l&&this.getLog(i,s,l)},scope:this},{iconCls:"icon-grid-delete",tooltip:IRm$.r1("L_REMOVE"),handler:function(e,t,a){var n=this,i=e.store.getAt(t);IG$.confirmMessages(ig$.appname,"Do you want to cancel all job for this schedule?",function(e){n.deleteJob(i)})},scope:this}]}],listeners:{cellclick:function(e,t,a,n,i,s,l,o){var d=n.get("sid"),c=n.get("jid"),r=n.get("executeid");2==a&&d&&c&&r&&this.getLog(d,c,r)},scope:this}}]}]}],IG$.scheduler.superclass.initComponent.call(this)},listeners:{afterrender:function(e){e.init_f()}}}),IG$.d$RegSch=$s.extend($s.window,{modal:!0,region:"center",layout:"fit",closable:!1,resizable:!1,width:480,height:420,autoHeight:!1,parentnodepath:null,itemtype:null,parentuid:null,callback:null,init_f:function(){var e=this,t=e.opt;e.down("[name=c2_rp]").setValue("M"),e.down("[name=c2_r1]").setValue(""),e.down("[name=scname]").setValue((t?t.name:"")||e.sname),e.sid&&e.getSID()},commit_f:function(){var e,t,a,n,i,s=(_=this).down("[name=mform]"),l=_.down("[name=sctype]"),o=_.down("[name=f_dw]"),d=o.checkboxCmp,c=_.down("[name=fs_dm]"),r=c.checkboxCmp,m=_.down("[name=fs_m]"),u=_.down("[name=scp]"),p=m.checkboxCmp;if(1==s.getForm().isValid()){if(l.clearInvalid(),!l.getValue())return void l.markInvalid();if(u.clearInvalid(),_.programs&&!u.getValue())return void u.markInvalid();if(_.programs&&!_.req){for(t=0;t<_.programs.length;t++)if(_.programs[t].java_class==u.getValue()){a=_.programs[t];break}if(n=[],a.ui_layout){var h={};for(t in a.__dw.getAllValues(h,"T"),h)n.push({name:t,value:h[t]})}_.req=[{ack:"schedule",payload:{action:"exec_program"},mbody:{name:a.name,java_class:a.java_class,params:n},meta_type:"schedule_program"}]}e=l.getValue();var _,f,g,x,b,y={sid:(_=this).sid,sctype:e,action:"register",rid:_.uid,pstatus:_.down("[name=pstatus]").getValue()},I=_.req,w=new IG$._rpc$;if(y.name=_.down("[name=scname]").getValue(),y.a_1=_.down("[name=a_1]").getValue()?"T":"F",y.a_1a=_.down("[name=a_1a]").getValue(),y.mailcc=_.down("[name=a_1b]").getValue(),y.message=_.down("[name=a_1c]").getValue(),"C1"==e)y.hour=""+_.down("[name=c1_hh]").getValue(),y.minute=""+_.down("[name=c1_mm]").getValue(),y.seconds=""+_.down("[name=c1_ss]").getValue();else if("C2"==e){if(x=_.down("[name=c2_from]"),b=_.down("[name=c2_to]"),!x.getValue())return void x.markInvalid();if(x.clearInvalid(),!b.getValue())return void b.markInvalid();if(b.clearInvalid(),y.c2_from=IG$.dateFormat(x.getValue(),"yyyymmdd"),y.c2_to=IG$.dateFormat(b.getValue(),"yyyymmdd"),g=_.down("[name=c2_hh]").getValue(),y.c2_hh=g<10?"0"+g:""+g,g=_.down("[name=c2_mm]").getValue(),y.c2_mm=g<10?"0"+g:""+g,g=_.down("[name=c2_ss]").getValue(),y.c2_ss=g<10?"0"+g:""+g,y.c2_r1="R"==_.down("[name=c2_r1]").getValue()?"T":"F",y.c2_ri=""+_.down("[name=c2_ri]").getValue(),y.c2_rp=_.down("[name=c2_rp]").getValue(),y.c2_pt1=_.getTime(1),y.c2_pt2=_.getTime(2),d.getValue()&&(y.wd=[],$.each(["SU","MO","TU","WE","TH","FR","SA"],function(e,t){o.down("[name=c_"+t+"]").getValue()&&y.wd.push(t)}),y.wd=y.wd.join(";")),r.getValue()){for(y.dm=[],t=0;t<31;t++){(h=c.down("[name=f_"+t+"]")).getValue()&&y.dm.push(""+t)}c.down("[name=f_lday]").getValue()&&y.dm.push("lday"),y.dm=y.dm.join(";")}if(p.getValue()){for(y.mon=[],t=0;t<12;t++){(h=m.down("[name=m_"+t+"]")).getValue()&&y.mon.push(""+t)}y.mon=y.mon.join(";")}}else"C3"==e&&(y.hour=""+_.down("[name=c3_hh]").getValue(),y.minute=""+_.down("[name=c3_mm]").getValue());for(f={jobs:[]},t=0;t<I.length;t++)i={key:I[t].jobkey||""+t,ack:I[t].ack,payload:I[t].payload||{},mbody:I[t].mbody,meta_type:I[t].meta_type},f.jobs.push(i);w.init(_,{ack:"schedule",payload:y,mbody:f,meta_type:"schedule_reqs"},_,_._rs_procMakeItem,null),w.send()}},getTime:function(n){var i=this,s="";return $.each(["h","m","s"],function(e,t){var a=i.down("[name=c2_r"+t+n+"]").getValue();s+=(0<e?":":"")+(a<10?"0":"")+a}),s},_rs_procMakeItem:function(e){this.callback&&this.callback.execute(),this.close()},getSID:function(){var e=new IG$._rpc$;e.init(this,{ack:"schedule",payload:{uid:this.uid,sid:this.sid,action:"getinfo"},mbody:{}},this,this.rs_getSID,null),e.send()},rs_getSID:function(e){var t,n,s,a=this,l=e&&e.length?e[0]:null;if(l)if(l.programs&&l.programs.length&&a.down("[name=scp]").setValue(l.programs[0].java_class),a.down("[name=scname]").setValue(l.name),a.down("[name=sctype]").setValue(l.sctype),a.down("[name=pstatus]").setValue(l.pstatus),a.down("[name=a_1]").setValue("T"==l.a_1),a.down("[name=a_1a]").setValue(l.a_1a),a.down("[name=a_1b]").setValue(l.mailcc),a.down("[name=a_1c]").setValue(l.message),t=l.scoption||"","C1"==l.sctype)(t=t.split(":"))[0]&&a.down("[name=c1_hh]").setValue(Number(t[0])),t[1]&&a.down("[name=c1_mm]").setValue(Number(t[1])),t[2]&&a.down("[name=c1_ss]").setValue(Number(t[2]));else if("C2"==l.sctype){function o(e){var t,a=IG$.getDateParse(e);return a.y&&a.M&&a.d&&(t=new Date(Number(a.y),Number(a.M)-1,Number(a.d))),t}var d;if(d=(d=(t=t.split("|"))[2]||"").split(":"),t[0]&&a.down("[name=c2_from]").setValue(o(t[0])),t[1]&&a.down("[name=c2_to]").setValue(o(t[1])),d[0]&&a.down("[name=c2_hh]").setValue(d[0]),d[1]&&a.down("[name=c2_mm]").setValue(d[1]),d[2]&&a.down("[name=c2_ss]").setValue(d[2]),t[3]&&(n=";"+t[3]+";",(s=a.down("[name=f_dw]")).checkboxCmp.setValue(!0),$.each(["SU","MO","TU","WE","TH","FR","SA"],function(e,t){var a=s.down("[name=c_"+t+"]");-1<n.indexOf(";"+t+";")&&a.setValue(!0)})),t[4]){for(n=";"+t[4]+";",(s=a.down("[name=fs_dm]")).checkboxCmp.setValue(!0),i=0;i<31;i++){var c=s.down("[name=f_"+i+"]");-1<n.indexOf(";"+i+";")&&c.setValue(!0)}-1<n.indexOf(";lday;")&&s.down("[name=f_lday]").setValue(!0)}if(t[5])for(n=";"+t[4]+";",(s=a.down("[name=fs_m]")).checkboxCmp.setValue(!0),i=0;i<12;i++){c=s.down("[name=m_"+i+"]");-1<n.indexOf(";"+i+";")&&c.setValue(!0)}t[6]&&a.down("[name=c2_r1]").setValue("T"==t[6]?"R":""),t[7]&&a.down("[name=c2_ri]").setValue(t[7]),t[8]&&a.down("[name=c2_rp]").setValue(t[8]),t[9]&&3==(n=t[9].split(":")).length&&(a.down("[name=c2_rh1]").setValue(parseInt(n[0])),a.down("[name=c2_rm1]").setValue(parseInt(n[1])),a.down("[name=c2_rs1]").setValue(parseInt(n[2]))),t[10]&&3==(n=t[10].split(":")).length&&(a.down("[name=c2_rh2]").setValue(parseInt(n[0])),a.down("[name=c2_rm2]").setValue(parseInt(n[1])),a.down("[name=c2_rs2]").setValue(parseInt(n[2])))}else"C3"==l.sctype&&((t=t.split(":"))[0]&&a.down("[name=c3_hh]").setValue(Number(t[0])),t[1]&&a.down("[name=c3_mm]").setValue(Number(t[1])))},_update_parmas:function(e){var t,a,n,i=this.programs,s=this.down("[name=_params]");for(s.removeAll(),t=0;t<i.length;t++)if(i[t].java_class==e){a=i[t];break}s.setVisible(!1),a&&a.ui_layout&&(n=a.ui_layout,item.__dw=s.add(n),s.setVisible(!0))},_refresh_prog:function(e){var t=new IG$._rpc$;t.init(this,{ack:"appoption",payload:{address:"schedule_config"},mbody:{}},this,function(e){var t,a,n=this.down("[name=scp]"),i=[];if(e&&e.programs)for(t=0;t<e.programs.length;t++)a=e.programs[t],i.push(a);this.programs=i,n.store.loadData(i)}),t.send()},initComponent:function(){var e,t=this,a=new Date,n=new Date,i=[],s=[],l=[];for(t.title=IRm$.r1("L_REG_SCH"),n.setDate(n.getDate()+7),e=0;e<31;e++)i.push({xtype:"checkbox",boxLabel:""+(e+1),name:"f_"+e});for(i.push({xtype:"checkbox",name:"f_lday",boxLabel:"Last day"}),e=0;e<12;e++)s.push({xtype:"checkbox",boxLabel:""+(e+1),name:"m_"+e});if(t.programs&&t.programs.length)for(e=0;e<t.programs.length;e++)l.push({name:t.programs[e].name,value:t.programs[e].java_class});$s.apply(this,{padding:10,items:[{xtype:"form",name:"mform",layout:"anchor",autoScroll:!0,defaults:{anchor:"100%"},padding:10,items:[{xtype:"fieldset",title:IRm$.r1("L_GENERAL_OPTION"),layout:"anchor",items:[{xtype:"container",layout:{type:"hbox",align:"stretch"},hidden:!t.programs,items:[{xtype:"combobox",fieldLabel:"Job type",name:"scp",store:{fields:["name","value"],data:l},queryMode:"local",eidtable:!1,valueField:"value",labelField:"name",displayField:"name",allowBlank:!t.programs,emptyText:IRm$.r1("B_REQ"),listeners:{change:function(e,t,a,n){this._update_parmas(t)},scope:this}},{xtype:"button",text:"Refresh",handler:function(){this._refresh_prog()},scope:this}]},{xtype:"textfield",fieldLabel:"Job name",name:"scname",allowBlank:!1,emptyText:IRm$.r1("B_REQ")},{xtype:"combobox",fieldLabel:IRm$.r1("L_JB_STAT"),name:"pstatus",hidden:!this.sid,editable:!1,queryMode:"local",store:{xtype:"store",fields:["name","value"],data:[{name:IRm$.r1("B_ACTIVE"),value:"A",selected:!0},{name:IRm$.r1("B_INACTIVE"),value:"N"}]},valueField:"value",labelField:"name",displayField:"name"}]},{xtype:"fieldset",title:IRm$.r1("L_SC_ACTION"),layout:"anchor",items:[{xtype:"checkbox",fieldLabel:IRm$.r1("L_NOTI_EMAIL"),name:"a_1",boxLabel:IRm$.r1("B_ENABLED"),listeners:{change:function(e){var t=e.getValue();this.down("[name=f_opt_em]").setVisible(t)},scope:this}},{xtype:"fieldcontainer",layout:"anchor",name:"f_opt_em",items:[{xtype:"combobox",fieldLabel:IRm$.r1("L_OUTP_TYPE"),name:"a_1a",editable:!1,queryMode:"local",store:{xtype:"store",fields:["name","value"],data:[{name:"Select",value:""},{name:"HTML Link",value:"link"},{name:"CSV Data",value:"csv"},{name:"Excel File",value:"excel"}]},valueField:"value",displayField:"name",value:""},{xtype:"textarea",name:"a_1b",anchor:"100%",fieldLabel:IRm$.r1("L_MAIL_CC")},{xtype:"textarea",name:"a_1c",anchor:"100%",fieldLabel:IRm$.r1("L_MAIL_BD")}]}]},{xtype:"fieldset",name:"_params",title:IRm$.r1("B_PARAMTERS"),layout:{type:"vbox",align:"stretch"},items:[]},{xtype:"fieldset",title:IRm$.r1("B_SCHEDULE"),layout:"anchor",items:[{xtype:"combobox",name:"sctype",editable:!1,queryMode:"local",allowBlank:!1,emptyText:IRm$.r1("B_REQ"),fieldLabel:IRm$.r1("L_SC_CT"),store:{xtype:"store",fields:["name","value"],data:[{name:"Select One",value:"",selected:!0},{name:IRm$.r1("L_SC_C1"),value:"C1"},{name:IRm$.r1("L_SC_C3"),value:"C3"},{name:IRm$.r1("L_SC_C2"),value:"C2"}]},valueField:"value",displayField:"name",value:"",listeners:{change:function(e,t,a,n){var i=this.down("[name=f_runafter]"),s=this.down("[name=f_cron]"),l=this.down("[name=f_runat]"),o=this.down("[name=c2_r1]");i.setVisible("C1"==t),s.setVisible("C2"==t),l.setVisible("C3"==t),o.setVisible("C2"==t)},scope:this}},{xtype:"combobox",fieldLabel:IRm$.r1("L_SCC_TYPE"),name:"c2_r1",editable:!1,queryMode:"local",valueField:"value",labelField:"name",displayField:"name",store:{xtype:"store",fields:["name","value"],data:[{name:IRm$.r1("L_SCC_DATE"),value:""},{name:IRm$.r1("L_SCC_REC"),value:"R"}]},listeners:{change:function(e){var t="R"==e.getValue(),a=this.down("[name=p_r1]"),n=this.down("[name=p_r2]");a.setVisible(!t),n.setVisible(t)},scope:this}}]},{xtype:"fieldset",title:IRm$.r1("L_SC_C1"),name:"f_runafter",layout:"anchor",items:[{xtype:"numberfield",name:"c1_hh",minValue:0,maxValue:24,fieldLabel:IRm$.r1("B_HOUR"),value:0},{xtype:"numberfield",name:"c1_mm",minValue:0,maxValue:59,fieldLabel:IRm$.r1("B_MINUTE"),value:20},{xtype:"numberfield",name:"c1_ss",minValue:0,maxValue:59,fieldLabel:IRm$.r1("B_SECOND"),value:0}]},{xtype:"fieldset",title:IRm$.r1("L_SC_C3"),name:"f_runat",layout:"anchor",items:[{xtype:"numberfield",name:"c3_hh",minValue:0,maxValue:24,fieldLabel:IRm$.r1("B_HOUR"),value:0},{xtype:"numberfield",name:"c3_mm",minValue:0,maxValue:59,fieldLabel:IRm$.r1("B_MINUTE"),value:10}]},{xtype:"fieldcontainer",layout:{type:"vbox",align:"stretch"},name:"f_cron",items:[{xtype:"fieldset",title:IRm$.r1("L_SCC_REC"),name:"p_r2",layout:"anchor",items:[{xtype:"fieldcontainer",fieldLabel:IRm$.r1("B_EVERY"),layout:{type:"hbox"},defaults:{labelWidth:10},items:[{xtype:"numberfield",name:"c2_ri",minValue:1,maxValue:59,value:5,width:140},{xtype:"combobox",name:"c2_rp",editable:!1,queryMode:"local",width:160,emptyText:IRm$.r1("B_REQ"),store:{xtype:"store",fields:["name","value"],data:[{name:IRm$.r1("B_MINUTE"),value:"M"},{name:IRm$.r1("B_HOUR"),value:"H"}]},valueField:"value",displayField:"name"},{xtype:"container",flex:1}]},{xtype:"fieldcontainer",fieldLabel:IRm$.r1("B_T_FR"),layout:{type:"hbox"},items:[{xtype:"container",width:40},{xtype:"container",flex:1,layout:{type:"vbox",align:"stretch"},defaults:{labelAlign:"right",labelWidth:80},items:[{xtype:"numberfield",name:"c2_rh1",minValue:0,maxValue:23,value:0,fieldLabel:IRm$.r1("B_HOUR")},{xtype:"numberfield",name:"c2_rm1",minValue:0,maxValue:59,value:0,fieldLabel:IRm$.r1("B_MINUTE")},{xtype:"numberfield",name:"c2_rs1",minValue:0,maxValue:59,value:0,hidden:!0}]}]},{xtype:"fieldcontainer",fieldLabel:IRm$.r1("B_T_TO"),layout:{type:"hbox"},items:[{xtype:"container",width:40},{xtype:"container",layout:{type:"vbox",align:"stretch"},defaults:{labelWidth:80,labelAlign:"right"},items:[{xtype:"numberfield",name:"c2_rh2",minValue:0,maxValue:23,value:23,fieldLabel:IRm$.r1("B_HOUR")},{xtype:"numberfield",name:"c2_rm2",minValue:0,maxValue:59,value:59,fieldLabel:IRm$.r1("B_MINUTE")},{xtype:"numberfield",name:"c2_rs2",minValue:0,maxValue:59,value:59,hidden:!0}]}]}]},{xtype:"fieldset",title:IRm$.r1("L_SCC_DATE"),name:"p_r1",layout:"anchor",items:[{xtype:"numberfield",fieldLabel:IRm$.r1("B_HOUR"),name:"c2_hh",minValue:0,maxValue:23,value:23},{xtype:"numberfield",fieldLabel:IRm$.r1("B_MINUTE"),name:"c2_mm",minValue:0,maxValue:59,value:0},{xtype:"numberfield",fieldLabel:IRm$.r1("B_SECOND"),name:"c2_ss",minValue:0,maxValue:59,value:0}]},{xtype:"fieldset",title:IRm$.r1("L_SC_PR"),name:"f_period",layout:"anchor",items:[{xtype:"datefield",fieldLabel:IRm$.r1("B_DT_FR"),name:"c2_from",format:"Y-m-d",value:a},{xtype:"datefield",fieldLabel:IRm$.r1("B_DT_TO"),name:"c2_to",format:"Y-m-d",value:n}]},{xtype:"fieldset",title:"Day of Week",name:"f_dw",checkboxToggle:!0,collapsed:!0,layout:{type:"vbox",align:"stretch"},items:[{xtype:"checkbox",boxLabel:"Sunday",name:"c_SU"},{xtype:"checkbox",boxLabel:"Monday",name:"c_MO"},{xtype:"checkbox",boxLabel:"Tuesday",name:"c_TU"},{xtype:"checkbox",boxLabel:"Wednesday",name:"c_WE"},{xtype:"checkbox",boxLabel:"Thursday",name:"c_TH"},{xtype:"checkbox",boxLabel:"Friday",name:"c_FR"},{xtype:"checkbox",boxLabel:"Saturday",name:"c_SA"}]},{xtype:"fieldset",title:"Day of Month",name:"fs_dm",checkboxName:"fs_dm_c",checkboxToggle:!0,collapsed:!0,items:i},{xtype:"fieldset",title:"Month",name:"fs_m",checkboxName:"fs_m_c",checkboxToggle:!0,collapsed:!0,layout:"anchor",items:s},{xtype:"fieldset",title:"Yearly",name:"f_y",checkboxName:"f_y_c",checkboxToggle:!0,collapsed:!0,layout:{type:"vbox",align:"stretch"},items:[{xtype:"textfield"}]}]}]}],buttons:[{text:IRm$.r1("B_CONFIRM"),handler:function(){this.commit_f()},scope:this},{text:IRm$.r1("B_CANCEL"),handler:function(){this.close()},scope:this}],listeners:{afterrender:function(e){this.init_f()}}}),IG$.d$RegSch.superclass.initComponent.apply(this,arguments)}}),IG$.dlgScheduleList=$s.extend($s.window,{modal:!1,region:"center",layout:"fit",closable:!1,resizable:!1,width:650,height:520,autoHeight:!1,init_f:function(){var e=this;e.reportoption&&e.reportoption._mc?(e.down("[name=b_sc_load]").setVisible(!0),e.down("[name=b_sc_load]").setValue(e.reportoption._mc.b_sc_load)):e.down("[name=b_sc_load]").hide(),e.getHist()},getHist:function(){var e=new IG$._rpc$;e.init(this,{ack:"schedule",payload:{uid:this.uid,action:"list"},mbody:{}},this,this.rs_getHist,null),e.send()},rs_getHist:function(e){var t,a,n,i=[],s=this.down("[name=scgrid]"),l=this.opt;if(e)for(t=0;t<e.length;t++){switch((a=e[t]).pstatus){case"A":a.pstatusdesc="Active";break;case"N":a.pstatusdesc="Inactive";break;case"F":desc="Failed";break;default:a.pstatusdesc="N/A"}a.uptdate_desc=IG$.formatDate(a.uptdate),a.crtdate_desc=IG$.formatDate(a.crtdate),i.push(a),l&&l.name&&l.name==a.name&&(n=a)}if(s.store.loadData(i),l&&l.name)if(n){for(t=0;t<s.store.data.items.length;t++)if(s.store.data.items[t].get("sid")==n.sid){this.regJob(s.store.data.items[t]);break}}else this.regJob(null,l)},regJob:function(e,t){var a,n,i,s,l=this,o=l.down("[name=scgrid]"),d={};for(l.reportoption&&(l.reportoption._mc?n="report -> "+l.reportoption._mc.name:l.reportoption.name&&(n=l.reportoption.name)),i=0;i<o.store.data.items.length;i++)d[o.store.data.items[i].get("name")]=1;for(s=n,i=0;d[s];)s=n+"_"+ ++i;a=new IG$.d$RegSch({uid:l.uid,sid:e?e.get("sid"):null,opt:t,req:l.req,sname:s,callback:new IG$.callBackObj(l,l.getHist)}),IG$.checkLogin(l,a)},deleteJob:function(e){var t=new IG$._rpc$;t.init(this,{ack:"schedule",payload:{uid:this.uid,sid:e.get("sid"),action:"delete"},mbody:{}},this,function(e){},null),t.send()},getSchJob:function(e){var t=new IG$._rpc$;t.init(this,{ack:"schedule",payload:{uid:this.uid,sid:e,action:"joblist"},mbody:{}},this,this.rs_getSchJob,null),t.send()},rs_getSchJob:function(e){var t,a,n=e&&e.length?e:null,i=[],s=this.down("[name=jobgrid]");if(n)for(t=0;t<n.length;t++){switch((a=n[t]).pstatus){case"I":a.pstatusdesc="Initialized";break;case"C":a.pstatusdesc="Completed";break;case"F":a.pstatusdesc="Failed";break;case"T":a.pstatusdesc="Cancel Queue";break;case"Q":a.pstatusdesc="Waiting ","T"==a.trigger?a.pstatusdesc+=" (^o^)":a.pstatusdesc+=" (@.@)";break;default:a.pstatusdesc="N/A"}a.crtdate_desc=IG$.formatDate(a.crtdate),a.uptdate_desc=IG$.formatDate(a.uptdate),i.push(a)}s.store.loadData(i)},confirmSch:function(){var e=this;e.reportoption&&e.reportoption._mc&&(e.reportoption._mc.b_sc_load=e.down("[name=b_sc_load]").getValue()),e.close()},openSchResult:function(e,t){this.runner&&this.runner._doSchJob&&this.runner._doSchJob.call(this.runner,e,t)},getLog:function(e,t,a){var n=new IG$.schLog({sid:e,jid:t,executeid:a});IG$.checkLogin(this,n)},initComponent:function(){var i=this;i.title=IRm$.r1("L_LST_SCH"),$s.apply(this,{defaults:{bodyStyle:"padding:10px"},items:[{xtype:"panel",layout:{type:"vbox",align:"stretch"},autoScroll:!0,defaults:{anchor:"100%"},items:[{xtype:"fieldset",layout:{type:"vbox",align:"stretch"},height:160,title:"Related Schedules",items:[{xtype:"gridpanel",flex:1,name:"scgrid",store:{xtype:"store",fields:["sid","userid","objuid","crtdate","uptdate","name","pstatus","pstatusdesc","uptdate_desc","sctype","scoption","a_1","a_1a","mailcc","message"]},columns:[{xtype:"gridcolumn",text:"Schedule name",dataIndex:"name",tdCls:"igc-td-link",flex:1},{xtype:"gridcolumn",text:"Status",tdCls:"igc-td-link",dataIndex:"pstatusdesc",width:50},{xtype:"gridcolumn",text:"Updated",dataIndex:"uptdate",width:80},{xtype:"actioncolumn",width:80,items:[{iconCls:"icon-grid-config",tooltip:IRm$.r1("L_EDIT"),handler:function(e,t,a){var n=e.store.getAt(t);i.regJob(n)},scope:this},{iconCls:"icon-grid-log",tooltip:"Log",handler:function(e,t,a){var n=e.store.getAt(t);sid=n.get("sid"),sid&&this.getSchJob(sid)},scope:this},{iconCls:"icon-grid-delete",tooltip:IRm$.r1("L_REMOVE"),handler:function(e,t,a){var n=this,i=e.store.getAt(t);IG$.confirmMessages(ig$.appname,"Do you want to cancel all job for this schedule?",function(e){n.deleteJob(i)})},scope:this}]}],listeners:{cellclick:function(e,t,a,n,i,s,l,o){var d=n.get("sid");d&&this.getSchJob(d)},scope:this}},{xtype:"checkbox",name:"b_sc_load",labelWidth:200,fieldLabel:"Load Schedule on Init",boxLabel:IRm$.r1("B_ENABLE")}]},{xtype:"fieldset",layout:"fit",height:240,title:"Job History",items:[{xtype:"gridpanel",name:"jobgrid",store:{xtype:"store",fields:["sid","jid","crtdate","uptdate","pstatus","executeid","uptdate_desc","crtdate_desc","pstatusdesc"]},columns:[{text:"Updated Date",flex:1,tdCls:"igc-td-link",dataIndex:"uptdate_desc"},{text:"Started At",flex:1,dataIndex:"crtdate_desc"},{text:"Status",width:80,dataIndex:"pstatusdesc",tdCls:"igc-td-link"},{text:"ExID",width:110,dataIndex:"executeid"}],listeners:{cellclick:function(e,t,a,n,i,s,l,o){var d=e.store.getAt(s);0==a?this.openSchResult(d.get("sid"),d.get("jid")):2==a&&this.getLog(d.get("sid"),d.get("jid"),d.get("executeid"))},scope:this}}]}]}],buttons:[{text:"Register",handler:function(){this.regJob()},scope:this},"->",{text:IRm$.r1("B_CONFIRM"),handler:function(){this.confirmSch()},scope:this},{text:IRm$.r1("B_CANCEL"),handler:function(){this.close()},scope:this}],listeners:{afterrender:function(e){this.init_f()}}}),IG$.dlgScheduleList.superclass.initComponent.apply(this,arguments)}}),IG$.schLog=$s.extend($s.window,{modal:!1,region:"center",layout:"fit",closable:!1,resizable:!1,width:650,height:520,init_f:function(){var t=this,e=new IG$._rpc$;e.init(t,{ack:"schedule",payload:{action:"logfile",sid:t.sid,jid:t.jid,executeid:t.executeid},mbody:{}},t,function(e){t.down("[name=logtxt]").setValue(e)},null),e.send()},initComponent:function(){this.title="Execution log",$s.apply(this,{defaults:{bodyStyle:"padding:10px"},items:[{xtype:"panel",layout:{type:"vbox",align:"stretch"},autoScroll:!0,defaults:{anchor:"100%"},items:[{xtype:"fieldset",layout:{type:"vbox",align:"stretch"},flex:1,title:"Execution log",items:[{xtype:"container",layout:{type:"hbox",align:"stretch"},items:[{xtype:"container",flex:1},{xtype:"button",text:"Refresh",handler:function(){this.init_f()},scope:this}]},{xtype:"textarea",name:"logtxt"}]}]}],buttons:["->",{text:IRm$.r1("B_CANCEL"),handler:function(){this.close()},scope:this}],listeners:{afterrender:function(e){this.init_f()}}}),IG$.schLog.superclass.initComponent.apply(this,arguments)}});
IG$.BC$base=$s.extend($s.panel,{region:"center",layout:"fit",callback:null,init_f:function(){var e=this,t=e.job;t&&(e.down("[name=dsname]").setValue(t.dsname),e.down("[name=dsdesc]").setValue(t.dsdesc),e.down("[name=dsignoreerror]").setValue("T"==t.dsignoreerror),e.rL())},_confirm:function(){var e=this,t=e.job;t&&(t.dsname=e.down("[name=dsname]").getValue(),t.dsdesc=e.down("[name=dsdesc]").getValue(),t.dsignoreerror=1==e.down("[name=dsignoreerror]").getValue()?"T":"F"),e.callback&&e.callback.execute(e.job),e.fireEvent("close_dlg",e)},rL:function(){var e=this,t=new IG$._rpc$;e.job&&e.job.sid&&e.s_hist&&(t.init(e,{ack:"hadoophelper",payload:{sid:e.job.sid},mbody:{option:"logcontent"}},e,e.rs_rL,!1),t.send())},rs_rL:function(e){var t,a,o,i,s,n,l=IG$.XGetNode(e,"/smsg"),d=l?IG$.XGetChildNodes(l):null,r=[],c=this.down("[name=grdloghist]");if(d)for(t=0;t<d.length;t++){switch((a=IG$.XGetAttrProp(d[t])).pstatus=parseInt(a.pstatus),a.created_desc=IG$.formatDate(a.created),a.updated_desc=IG$.formatDate(a.updated),i=Number(a.duration),null!=(i=isNaN(i)?null:i)&&(i-=6e4*(s=Math.floor(i/6e4)),i-=1e3*(n=Math.floor(i/1e3)),a.duration=(0<s?s+"m ":"")+(0<n?n+"s ":"")+(-1<i?i+"ms":"")),o="Unknown",a.pstatus){case 1:o="Running";break;case 10:o="Completed";break;case 20:o="Error: No result";break;case 21:o="Error: Dataformat mismatch";break;case 29:o="Error: Execution failed"}a.pstatus_desc=o,r.push(a)}c.store.loadData(r)},g1:function(e){var t=this,a=new IG$._rpc$;a.init(t,{ack:"hadoophelper",payload:{lid:e},mbody:{option:"logdetail"}},t,t.rs_g1,!1),a.send()},rs_g1:function(e){var t,a,o,i,s=IG$.XGetNode(e,"/smsg"),n=s?IG$.XGetChildNodes(s):null,l=!1;if(n){for(o=0;o<n.length;o++)(t=IG$._I19(n[o],"errormessage"))?(a=IG$.XGetTextVal(t),a=Base64.decode(a),l=!0):(t=IG$._I19(n[o],"message"))&&(a=IG$.XGetTextVal(t),a=Base64.decode(a)),i=i?i+"\n"+a:a;this.down("[name=logdetail]").setValue(i),1==l&&IG$.alertmsg(ig$.appname,"One or more command failed. See log for detail",null,this,1,"error")}},GG1:function(e){var t=new IG$.metaSelectDlg({visibleItems:"javapackage;folder;javaclass",tree_options:{cubebrowse:!1,rootuid:"/BusinessLogic",visibleItems:"javapackage;folder;javaclass"},callback:new IG$.callBackObj(this,this.rs_GG1,e)});IG$.checkLogin(this,t)},rs_GG1:function(e,t){var a,o="";e&&e.nodepath&&((a=(a=e.nodepath).split("/")).splice(0,2),o=a.join(".")),t.setValue(o)},initComponent:function(){var e,t=this,a=[];if(t.addEvents("close_dlg"),a.push({xtype:"fieldset",title:"Basic Option",layout:"anchor",defaults:{anchor:"100%",labelAlign:"top"},items:[{xtype:"textfield",name:"dsname",fieldLabel:"Name"},{xtype:"textarea",name:"dsdesc",fieldLabel:"Description"},{xtype:"checkbox",name:"dsignoreerror",hidden:!!t.hide_ierr,fieldLabel:"Ignore Error",labelAlign:"left",boxLabel:"Ignore and continue"}]}),t.moption)for(e=0;e<t.moption.length;e++)a.push(t.moption[e]);$s.apply(this,{defaults:{bodyStyle:"padding:3px"},items:[{xtype:"tabpanel",layout:"fit",items:[{xtype:"form",layout:"anchor",title:"Configuration",autoScroll:!0,defaults:{anchor:"100%"},items:a},{xtype:"form",title:"History",hidden:0==t.s_hist,layout:{type:"vbox",align:"stretch"},items:[{xtype:"fieldset",title:"Execute Log",layout:"fit",flex:1,items:[{xtype:"gridpanel",name:"grdloghist",store:{xtype:"store",fields:["sid","lid","jobtype","pstatus","created","updated","pstatus_desc","created_desc","updated_desc","duration"]},columns:[{xtype:"gridcolumn",text:"Start time",flex:1,dataIndex:"created_desc"},{xtype:"gridcolumn",text:"End time",flex:1,dataIndex:"updated_desc"},{xtype:"gridcolumn",text:"Duration",dataIndex:"duration",flex:1},{xtype:"gridcolumn",text:"Status",width:120,dataIndex:"pstatus_desc"}],tbar:[{xtype:"button",text:"Refresh",handler:function(){this.rL()},scope:this}],listeners:{itemclick:function(e,t,a,o,i){var s=t.get("lid");s&&this.g1(s)},scope:this}}]},{xtype:"fieldset",title:"Log Details",layout:"fit",flex:2,items:[{xtype:"textarea",name:"logdetail"}]}]},{xtype:"panel",hidden:0!=t.s_hist,title:"Probability",layout:{type:"vbox",align:"stretch"},items:[{xtype:"fieldcontainer",fieldLabel:"Relation Type",layout:"hbox",items:[{xtype:"combobox",name:"potential_type",labelWidth:80,width:200,queryMode:"local",displayField:"name",valueField:"value",editable:!1,autoSelect:!0,store:{xtype:"store",fields:["name","value"]}},{xtype:"button",text:"Reorder Potential"}]},{xtype:"fieldcontainer",layout:"hbox",items:[{xtype:"button",text:"Edit mean potentail"},{xtype:"button",text:"Edit variance potential"}]},{xtype:"gridpanel",hideHeaders:!1,columnLines:!0,name:"g_p1",viewConfig:{enableTextSelection:!0,ForceFit:!0,loadMask:!0},flex:1,columns:[]}]}]}],buttons:["->",{text:IRm$.r1("B_CONFIRM"),handler:function(){this._confirm()},scope:this},{text:IRm$.r1("B_CANCEL"),handler:function(){this.fireEvent("close_dlg",this)},scope:this}],listeners:{afterrender:function(e){this.init_f()}}}),IG$.BC$base.superclass.initComponent.apply(this,arguments)}});